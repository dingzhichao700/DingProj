var egret;
(function(c){c.egret_string_code={};c.egret_string_code[-1]="\u4e0d\u5b58\u5728\u7684stringId:{0}";c.egret_string_code[1E3]="Browser.isMobile\u63a5\u53e3\u53c2\u6570\u5df2\u7ecf\u53d8\u66f4\uff0c\u8bf7\u5c3d\u5feb\u8c03\u6574\u7528\u6cd5\u4e3a egret.MainContext.deviceType == egret.MainContext.DEVICE_MOBILE";c.egret_string_code[1001]="\u8be5\u65b9\u6cd5\u76ee\u524d\u4e0d\u5e94\u4f20\u5165 resolutionPolicy \u53c2\u6570\uff0c\u8bf7\u5728 docs/1.0_Final_ReleaseNote\u4e2d\u67e5\u770b\u5982\u4f55\u5347\u7ea7";c.egret_string_code[1002]=
"egret.Ticker\u662f\u6846\u67b6\u5185\u90e8\u4f7f\u7528\u7684\u5355\u4f8b\uff0c\u4e0d\u5141\u8bb8\u5728\u5916\u90e8\u5b9e\u4f8b\u5316\uff0c\u8ba1\u65f6\u5668\u8bf7\u4f7f\u7528egret.Timer\u7c7b\uff01";c.egret_string_code[1003]="Ticker#setTimeout\u65b9\u6cd5\u5373\u5c06\u5e9f\u5f03,\u8bf7\u4f7f\u7528egret.setTimeout";c.egret_string_code[1004]="ExternalInterface\u8c03\u7528\u4e86js\u6ca1\u6709\u6ce8\u518c\u7684\u65b9\u6cd5: {0}";c.egret_string_code[1005]="\u8bbe\u7f6e\u4e86\u5df2\u7ecf\u5b58\u5728\u7684blendMode: {0}";
c.egret_string_code[1006]="child\u4e0d\u5728\u5f53\u524d\u5bb9\u5668\u5185";c.egret_string_code[1007]="\u63d0\u4f9b\u7684\u7d22\u5f15\u8d85\u51fa\u8303\u56f4";c.egret_string_code[1008]="child\u672a\u88abaddChild\u5230\u8be5parent";c.egret_string_code[1009]="\u8bbe\u7f6e\u4e86\u5df2\u7ecf\u5b58\u5728\u7684\u9002\u914d\u6a21\u5f0f:{0}";c.egret_string_code[1010]="addEventListener\u4fa6\u542c\u51fd\u6570\u4e0d\u80fd\u4e3a\u7a7a";c.egret_string_code[1011]='BitmapText\u627e\u4e0d\u5230\u6587\u5b57\u6240\u5bf9\u5e94\u7684\u7eb9\u7406:"{0}"';
c.egret_string_code[1012]="egret.BitmapTextSpriteSheet\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528egret.BitmapFont\u4ee3\u66ff\u3002";c.egret_string_code[1013]="TextField.setFocus \u6ca1\u6709\u5b9e\u73b0";c.egret_string_code[1014]="Ease\u4e0d\u80fd\u88ab\u5b9e\u4f8b\u5316";c.egret_string_code[1015]="xml not found!";c.egret_string_code[1016]="{0}\u5df2\u7ecf\u5e9f\u5f03";c.egret_string_code[1017]="JSON\u6587\u4ef6\u683c\u5f0f\u4e0d\u6b63\u786e: {0}\ndata: {1}";c.egret_string_code[1018]="egret_html5_localStorage.setItem\u4fdd\u5b58\u5931\u8d25,key={0}&value={1}";
c.egret_string_code[1019]="\u7f51\u7edc\u5f02\u5e38:{0}";c.egret_string_code[1020]="\u65e0\u6cd5\u521d\u59cb\u5316\u7740\u8272\u5668";c.egret_string_code[1021]="\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301webgl";c.egret_string_code[1022]="{0} ArgumentError";c.egret_string_code[1023]="\u6b64\u65b9\u6cd5\u5728ScrollView\u5185\u4e0d\u53ef\u7528!";c.egret_string_code[1024]="\u4f7f\u7528\u4e86\u5c1a\u672a\u5b9e\u73b0\u7684ScaleMode";c.egret_string_code[1025]="\u9047\u5230\u6587\u4ef6\u5c3e";c.egret_string_code[1026]=
"EncodingError! The code point {0} could not be encoded.";c.egret_string_code[1027]="DecodingError";c.egret_string_code[1028]="\u8c03\u7528\u4e86\u672a\u914d\u7f6e\u7684\u6ce8\u5165\u89c4\u5219:{0}\u3002 \u8bf7\u5148\u5728\u9879\u76ee\u521d\u59cb\u5316\u91cc\u914d\u7f6e\u6307\u5b9a\u7684\u6ce8\u5165\u89c4\u5219\uff0c\u518d\u8c03\u7528\u5bf9\u5e94\u5355\u4f8b\u3002";c.egret_string_code[1029]="Function.prototype.bind - what is trying to be bound is not callable";c.egret_string_code[1030]="\u8be5API\u5df2\u5e9f\u5f03";
c.egret_string_code[1031]="setVolume\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528this.volume = value\u4ee3\u66ff";c.egret_string_code[1032]="getVolume\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528this.volume\u4ee3\u66ff";c.egret_string_code[2E3]="RES.createGroup()\u4f20\u5165\u4e86\u914d\u7f6e\u4e2d\u4e0d\u5b58\u5728\u7684\u952e\u503c: {0}";c.egret_string_code[2001]='RES\u52a0\u8f7d\u4e86\u4e0d\u5b58\u5728\u6216\u7a7a\u7684\u8d44\u6e90\u7ec4:"{0}"';c.egret_string_code[3E3]="\u4e3b\u9898\u914d\u7f6e\u6587\u4ef6\u52a0\u8f7d\u5931\u8d25: {0}";
c.egret_string_code[3001]="\u627e\u4e0d\u5230\u4e3b\u9898\u4e2d\u6240\u914d\u7f6e\u7684\u76ae\u80a4\u7c7b\u540d: {0}";c.egret_string_code[3002]='\u7d22\u5f15:"{0}"\u8d85\u51fa\u96c6\u5408\u5143\u7d20\u7d22\u5f15\u8303\u56f4';c.egret_string_code[3003]="\u5728\u6b64\u7ec4\u4ef6\u4e2d\u4e0d\u53ef\u7528\uff0c\u82e5\u6b64\u7ec4\u4ef6\u4e3a\u5bb9\u5668\u7c7b\uff0c\u8bf7\u4f7f\u7528";c.egret_string_code[3004]="addChild(){0}addElement()\u4ee3\u66ff";c.egret_string_code[3005]="addChildAt(){0}addElementAt()\u4ee3\u66ff";
c.egret_string_code[3006]="removeChild(){0}removeElement()\u4ee3\u66ff";c.egret_string_code[3007]="removeChildAt(){0}removeElementAt()\u4ee3\u66ff";c.egret_string_code[3008]="setChildIndex(){0}setElementIndex()\u4ee3\u66ff";c.egret_string_code[3009]="swapChildren(){0}swapElements()\u4ee3\u66ff";c.egret_string_code[3010]="swapChildrenAt(){0}swapElementsAt()\u4ee3\u66ff";c.egret_string_code[3011]='\u7d22\u5f15:"{0}"\u8d85\u51fa\u53ef\u89c6\u5143\u7d20\u7d22\u5f15\u8303\u56f4';c.egret_string_code[3012]=
"\u6b64\u65b9\u6cd5\u5728Scroller\u7ec4\u4ef6\u5185\u4e0d\u53ef\u7528!";c.egret_string_code[3013]="UIStage\u662fGUI\u6839\u5bb9\u5668\uff0c\u53ea\u80fd\u6709\u4e00\u4e2a\u6b64\u5b9e\u4f8b\u5728\u663e\u793a\u5217\u8868\u4e2d\uff01";c.egret_string_code[3014]="propNotPropOrStyle";c.egret_string_code[4E3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)";c.egret_string_code[4001]="Abstract class can not be instantiated!";c.egret_string_code[4002]="Unnamed data!";
c.egret_string_code[4003]="Nonsupport version!";c.egret_string_code[4004]="Abstract method needs to be implemented in subclass!";c.egret_string_code[3100]="\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301WebSocket";c.egret_string_code[3101]="\u8bf7\u5148\u8fde\u63a5WebSocket";c.egret_string_code[3102]="\u8bf7\u5148\u8bbe\u7f6etype\u4e3a\u4e8c\u8fdb\u5236\u7c7b\u578b"})(egret||(egret={}));
(function(c){c.egret_string_code={};c.egret_string_code[-1]="\u4e0d\u5b58\u5728\u7684stringId:{0}";c.egret_string_code[1E3]="Browser.isMobile\u63a5\u53e3\u53c2\u6570\u5df2\u7ecf\u53d8\u66f4\uff0c\u8bf7\u5c3d\u5feb\u8c03\u6574\u7528\u6cd5\u4e3a egret.MainContext.deviceType == egret.MainContext.DEVICE_MOBILE";c.egret_string_code[1001]="\u8be5\u65b9\u6cd5\u76ee\u524d\u4e0d\u5e94\u4f20\u5165 resolutionPolicy \u53c2\u6570\uff0c\u8bf7\u5728 docs/1.0_Final_ReleaseNote\u4e2d\u67e5\u770b\u5982\u4f55\u5347\u7ea7";
c.egret_string_code[1002]="egret.Ticker\u662f\u6846\u67b6\u5185\u90e8\u4f7f\u7528\u7684\u5355\u4f8b\uff0c\u4e0d\u5141\u8bb8\u5728\u5916\u90e8\u5b9e\u4f8b\u5316\uff0c\u8ba1\u65f6\u5668\u8bf7\u4f7f\u7528egret.Timer\u7c7b\uff01";c.egret_string_code[1003]="Ticker#setTimeout\u65b9\u6cd5\u5373\u5c06\u5e9f\u5f03,\u8bf7\u4f7f\u7528egret.setTimeout";c.egret_string_code[1004]="ExternalInterface\u8c03\u7528\u4e86js\u6ca1\u6709\u6ce8\u518c\u7684\u65b9\u6cd5: {0}";c.egret_string_code[1005]="\u8bbe\u7f6e\u4e86\u5df2\u7ecf\u5b58\u5728\u7684blendMode: {0}";
c.egret_string_code[1006]="child\u4e0d\u5728\u5f53\u524d\u5bb9\u5668\u5185";c.egret_string_code[1007]="\u63d0\u4f9b\u7684\u7d22\u5f15\u8d85\u51fa\u8303\u56f4";c.egret_string_code[1008]="child\u672a\u88abaddChild\u5230\u8be5parent";c.egret_string_code[1009]="\u8bbe\u7f6e\u4e86\u5df2\u7ecf\u5b58\u5728\u7684\u9002\u914d\u6a21\u5f0f:{0}";c.egret_string_code[1010]="addEventListener\u4fa6\u542c\u51fd\u6570\u4e0d\u80fd\u4e3a\u7a7a";c.egret_string_code[1011]='BitmapText\u627e\u4e0d\u5230\u6587\u5b57\u6240\u5bf9\u5e94\u7684\u7eb9\u7406:"{0}"';
c.egret_string_code[1012]="egret.BitmapTextSpriteSheet\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528egret.BitmapFont\u4ee3\u66ff\u3002";c.egret_string_code[1013]="TextField.setFocus \u6ca1\u6709\u5b9e\u73b0";c.egret_string_code[1014]="Ease\u4e0d\u80fd\u88ab\u5b9e\u4f8b\u5316";c.egret_string_code[1015]="xml not found!";c.egret_string_code[1016]="{0}\u5df2\u7ecf\u5e9f\u5f03";c.egret_string_code[1017]="JSON\u6587\u4ef6\u683c\u5f0f\u4e0d\u6b63\u786e: {0}\ndata: {1}";c.egret_string_code[1018]="egret_html5_localStorage.setItem\u4fdd\u5b58\u5931\u8d25,key={0}&value={1}";
c.egret_string_code[1019]="\u7f51\u7edc\u5f02\u5e38:{0}";c.egret_string_code[1020]="\u65e0\u6cd5\u521d\u59cb\u5316\u7740\u8272\u5668";c.egret_string_code[1021]="\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301webgl";c.egret_string_code[1022]="{0} ArgumentError";c.egret_string_code[1023]="\u6b64\u65b9\u6cd5\u5728ScrollView\u5185\u4e0d\u53ef\u7528!";c.egret_string_code[1024]="\u4f7f\u7528\u4e86\u5c1a\u672a\u5b9e\u73b0\u7684ScaleMode";c.egret_string_code[1025]="\u9047\u5230\u6587\u4ef6\u5c3e";c.egret_string_code[1026]=
"EncodingError! The code point {0} could not be encoded.";c.egret_string_code[1027]="DecodingError";c.egret_string_code[1028]="\u8c03\u7528\u4e86\u672a\u914d\u7f6e\u7684\u6ce8\u5165\u89c4\u5219:{0}\u3002 \u8bf7\u5148\u5728\u9879\u76ee\u521d\u59cb\u5316\u91cc\u914d\u7f6e\u6307\u5b9a\u7684\u6ce8\u5165\u89c4\u5219\uff0c\u518d\u8c03\u7528\u5bf9\u5e94\u5355\u4f8b\u3002";c.egret_string_code[1029]="Function.prototype.bind - what is trying to be bound is not callable";c.egret_string_code[1030]="\u8be5API\u5df2\u5e9f\u5f03";
c.egret_string_code[1031]="setVolume\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528this.volume = value\u4ee3\u66ff";c.egret_string_code[1032]="getVolume\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528this.volume\u4ee3\u66ff";c.egret_string_code[2E3]="RES.createGroup()\u4f20\u5165\u4e86\u914d\u7f6e\u4e2d\u4e0d\u5b58\u5728\u7684\u952e\u503c: {0}";c.egret_string_code[2001]='RES\u52a0\u8f7d\u4e86\u4e0d\u5b58\u5728\u6216\u7a7a\u7684\u8d44\u6e90\u7ec4:"{0}"';c.egret_string_code[3E3]="\u4e3b\u9898\u914d\u7f6e\u6587\u4ef6\u52a0\u8f7d\u5931\u8d25: {0}";
c.egret_string_code[3001]="\u627e\u4e0d\u5230\u4e3b\u9898\u4e2d\u6240\u914d\u7f6e\u7684\u76ae\u80a4\u7c7b\u540d: {0}";c.egret_string_code[3002]='\u7d22\u5f15:"{0}"\u8d85\u51fa\u96c6\u5408\u5143\u7d20\u7d22\u5f15\u8303\u56f4';c.egret_string_code[3003]="\u5728\u6b64\u7ec4\u4ef6\u4e2d\u4e0d\u53ef\u7528\uff0c\u82e5\u6b64\u7ec4\u4ef6\u4e3a\u5bb9\u5668\u7c7b\uff0c\u8bf7\u4f7f\u7528";c.egret_string_code[3004]="addChild(){0}addElement()\u4ee3\u66ff";c.egret_string_code[3005]="addChildAt(){0}addElementAt()\u4ee3\u66ff";
c.egret_string_code[3006]="removeChild(){0}removeElement()\u4ee3\u66ff";c.egret_string_code[3007]="removeChildAt(){0}removeElementAt()\u4ee3\u66ff";c.egret_string_code[3008]="setChildIndex(){0}setElementIndex()\u4ee3\u66ff";c.egret_string_code[3009]="swapChildren(){0}swapElements()\u4ee3\u66ff";c.egret_string_code[3010]="swapChildrenAt(){0}swapElementsAt()\u4ee3\u66ff";c.egret_string_code[3011]='\u7d22\u5f15:"{0}"\u8d85\u51fa\u53ef\u89c6\u5143\u7d20\u7d22\u5f15\u8303\u56f4';c.egret_string_code[3012]=
"\u6b64\u65b9\u6cd5\u5728Scroller\u7ec4\u4ef6\u5185\u4e0d\u53ef\u7528!";c.egret_string_code[3013]="UIStage\u662fGUI\u6839\u5bb9\u5668\uff0c\u53ea\u80fd\u6709\u4e00\u4e2a\u6b64\u5b9e\u4f8b\u5728\u663e\u793a\u5217\u8868\u4e2d\uff01";c.egret_string_code[3014]="propNotPropOrStyle";c.egret_string_code[4E3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)";c.egret_string_code[4001]="Abstract class can not be instantiated!";c.egret_string_code[4002]="Unnamed data!";
c.egret_string_code[4003]="Nonsupport version!";c.egret_string_code[4004]="Abstract method needs to be implemented in subclass!";c.egret_string_code[3100]="\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301WebSocket";c.egret_string_code[3101]="\u8bf7\u5148\u8fde\u63a5WebSocket";c.egret_string_code[3102]="\u8bf7\u5148\u8bbe\u7f6etype\u4e3a\u4e8c\u8fdb\u5236\u7c7b\u578b"})(egret||(egret={}));
var __extends=this.__extends||function(c,f){function e(){this.constructor=c}for(var d in f)f.hasOwnProperty(d)&&(c[d]=f[d]);e.prototype=f.prototype;c.prototype=new e};
(function(c){function f(d){for(var b=[],a=1;a<arguments.length;a++)b[a-1]=arguments[a];if(a=c.egret_string_code[d])for(var g=b.length,u=0;u<g;u++)a=a.replace("{"+u+"}",b[u]);return a}var e=function(){function d(){}d.openLogByType=function(b){null==d.logFuncs&&(d.logFuncs={error:console.error,debug:console.debug,warn:console.warn,info:console.info,log:console.log});switch(b){case d.OFF:console.error=function(){};case d.ERROR:console.warn=function(){};case d.WARN:console.info=function(){},console.log=
function(){};case d.INFO:console.debug=function(){}}switch(b){case d.ALL:console.debug=d.logFuncs.debug;case d.INFO:console.log=d.logFuncs.log,console.info=d.logFuncs.info;case d.WARN:console.warn=d.logFuncs.warn;case d.ERROR:console.error=d.logFuncs.error}};d.fatal=function(b,a){void 0===a&&(a=null);throw Error(c.Logger.getTraceCode("Fatal",b,a));};d.info=function(b,a){void 0===a&&(a=null);c.Logger.traceToConsole("Info",b,a)};d.warning=function(b,a){void 0===a&&(a=null);c.Logger.traceToConsole("Warning",
b,a)};d.traceToConsole=function(b,a,g){console.log(c.Logger.getTraceCode(b,a,g))};d.getTraceCode=function(b,a,g){return"["+b+"]"+a+(null==g?"":":"+g)};d.ALL="all";d.DEBUG="debug";d.INFO="info";d.WARN="warn";d.ERROR="error";d.OFF="off";return d}();c.Logger=e;e.prototype.__class__="egret.Logger";c.getString=f;c.$error=function(c){for(var b=[],a=1;a<arguments.length;a++)b[a-1]=arguments[a];b.unshift(c);(b=f.apply(null,b))?e.fatal(b):e.fatal(f(-1,c))};c.$warn=function(c){for(var b=[],a=1;a<arguments.length;a++)b[a-
1]=arguments[a];b.unshift(c);(b=f.apply(null,b))?e.warning(b):e.warning(f(-1,c))}})(egret||(egret={}));(function(c){var f=function(){function c(){this._hashCode=c.hashCount++}Object.defineProperty(c.prototype,"hashCode",{get:function(){return this._hashCode},enumerable:!0,configurable:!0});c.hashCount=1;return c}();c.HashObject=f;f.prototype.__class__="egret.HashObject"})(egret||(egret={}));
(function(c){var f=function(c){function d(a){void 0===a&&(a=300);c.call(this);this.objectPool=[];this._length=0;1>a&&(a=1);this.autoDisposeTime=a;this.frameCount=0}__extends(d,c);var b=d.prototype;b._checkFrame=function(){this.frameCount--;0>=this.frameCount&&this.dispose()};Object.defineProperty(b,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});b.push=function(a){var g=this.objectPool;-1==g.indexOf(a)&&(g.push(a),a.__recycle&&a.__recycle(),this._length++,0==this.frameCount&&
(this.frameCount=this.autoDisposeTime,d._callBackList.push(this)))};b.pop=function(){if(0==this._length)return null;this._length--;return this.objectPool.pop()};b.dispose=function(){0<this._length&&(this.objectPool=[],this._length=0);this.frameCount=0;var a=d._callBackList,g=a.indexOf(this);-1!=g&&a.splice(g,1)};d._callBackList=[];return d}(c.HashObject);c.Recycler=f;f.prototype.__class__="egret.Recycler"})(egret||(egret={}));
(function(c){c.__START_TIME;c.getTimer=function(){return Date.now()-c.__START_TIME}})(egret||(egret={}));
(function(c){c.__callLaterFunctionList=[];c.__callLaterThisList=[];c.__callLaterArgsList=[];c.callLater=function(f,e){for(var d=[],b=2;b<arguments.length;b++)d[b-2]=arguments[b];c.__callLaterFunctionList.push(f);c.__callLaterThisList.push(e);c.__callLaterArgsList.push(d)};c.__callAsyncFunctionList=[];c.__callAsyncThisList=[];c.__callAsyncArgsList=[];c.__callAsync=function(f,e){for(var d=[],b=2;b<arguments.length;b++)d[b-2]=arguments[b];c.__callAsyncFunctionList.push(f);c.__callAsyncThisList.push(e);
c.__callAsyncArgsList.push(d)}})(egret||(egret={}));
(function(c){var f=function(){function e(){}var d=e.prototype;d.call=function(b){this.callback&&this.callback.call(this.thisObject,b)};d.dispose=function(){this.thisObject=this.callback=null;e.__freeList.push(this)};e.push=function(b,a){var g;g=e.__freeList.length?e.__freeList.pop():new c.RenderCommand;g.callback=b;g.thisObject=a;c.MainContext.__DRAW_COMMAND_LIST.push(g)};e.__freeList=[];return e}();c.RenderCommand=f;f.prototype.__class__="egret.RenderCommand"})(egret||(egret={}));
(function(c){var f=function(e){function d(a,g,b){void 0===g&&(g=!1);void 0===b&&(b=!1);e.call(this);this.data=null;this._type="";this._cancelable=this._bubbles=!1;this._eventPhase=2;this._target=this._currentTarget=null;this._isPropagationImmediateStopped=this._isPropagationStopped=this._isDefaultPrevented=!1;this.isNew=!0;this._type=a;this._bubbles=g;this._cancelable=b}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"type",{get:function(){return this._type},enumerable:!0,configurable:!0});
Object.defineProperty(b,"bubbles",{get:function(){return this._bubbles},enumerable:!0,configurable:!0});Object.defineProperty(b,"cancelable",{get:function(){return this._cancelable},enumerable:!0,configurable:!0});Object.defineProperty(b,"eventPhase",{get:function(){return this._eventPhase},enumerable:!0,configurable:!0});Object.defineProperty(b,"currentTarget",{get:function(){return this._currentTarget},enumerable:!0,configurable:!0});Object.defineProperty(b,"target",{get:function(){return this._target},
enumerable:!0,configurable:!0});b.isDefaultPrevented=function(){return this._isDefaultPrevented};b.preventDefault=function(){this._cancelable&&(this._isDefaultPrevented=!0)};b.stopPropagation=function(){this._bubbles&&(this._isPropagationStopped=!0)};b.stopImmediatePropagation=function(){this._bubbles&&(this._isPropagationImmediateStopped=!0)};b._reset=function(){this.isNew?this.isNew=!1:(this._isPropagationImmediateStopped=this._isPropagationStopped=this._isDefaultPrevented=!1,this._currentTarget=
this._target=null,this._eventPhase=2)};b.__recycle=function(){this.data=this._target=this._currentTarget=null};d._dispatchByTarget=function(a,g,b,d,e,f){void 0===e&&(e=!1);void 0===f&&(f=!1);var h=a.eventRecycler;h||(h=a.eventRecycler=new c.Recycler);var k=h.pop();k?k._type=b:k=new a(b);k._bubbles=e;k._cancelable=f;if(d)for(var m in d)k[m]=d[m],null!==k[m]&&(d[m]=null);a=g.dispatchEvent(k);h.push(k);return a};d._getPropertyData=function(a){var g=a._props;g||(g=a._props={});return g};d.dispatchEvent=
function(a,g,b,c){void 0===b&&(b=!1);var e=d._getPropertyData(d);void 0!=c&&(e.data=c);d._dispatchByTarget(d,a,g,e,b)};d.ADDED_TO_STAGE="addedToStage";d.REMOVED_FROM_STAGE="removedFromStage";d.ADDED="added";d.REMOVED="removed";d.COMPLETE="complete";d.LOOP_COMPLETE="loopcomplete";d.ENTER_FRAME="enterFrame";d.RENDER="render";d.FINISH_RENDER="finishRender";d.FINISH_UPDATE_TRANSFORM="finishUpdateTransform";d.LEAVE_STAGE="leaveStage";d.RESIZE="resize";d.CHANGE="change";d.ACTIVATE="activate";d.DEACTIVATE=
"deactivate";d.CLOSE="close";d.CONNECT="connect";return d}(c.HashObject);c.Event=f;f.prototype.__class__="egret.Event"})(egret||(egret={}));
(function(c){var f=function(c){function d(b,a,g){void 0===a&&(a=!1);void 0===g&&(g=!1);c.call(this,b,a,g);this._status=0}__extends(d,c);Object.defineProperty(d.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0});d.dispatchHTTPStatusEvent=function(b,a){null==d.httpStatusEvent&&(d.httpStatusEvent=new d(d.HTTP_STATUS));d.httpStatusEvent._status=a;b.dispatchEvent(d.httpStatusEvent)};d.HTTP_STATUS="httpStatus";d.httpStatusEvent=null;return d}(c.Event);c.HTTPStatusEvent=
f;f.prototype.__class__="egret.HTTPStatusEvent"})(egret||(egret={}));(function(c){var f=function(c){function d(b,a,g){void 0===a&&(a=!1);void 0===g&&(g=!1);c.call(this,b,a,g)}__extends(d,c);d.SOUND_COMPLETE="soundComplete";return d}(c.Event);c.SoundEvent=f;f.prototype.__class__="egret.SoundEvent"})(egret||(egret={}));
(function(c){var f=function(c){function d(b,a,g){void 0===a&&(a=!1);void 0===g&&(g=!1);c.call(this,b,a,g)}__extends(d,c);d.FOCUS_IN="focusIn";d.FOCUS_OUT="focusOut";return d}(c.Event);c.FocusEvent=f;f.prototype.__class__="egret.FocusEvent"})(egret||(egret={}));
(function(c){var f=function(e){function d(b,a,g){void 0===a&&(a=!1);void 0===g&&(g=!1);e.call(this,b,a,g)}__extends(d,e);d.dispatchIOErrorEvent=function(b){c.Event._dispatchByTarget(d,b,d.IO_ERROR)};d.IO_ERROR="ioError";return d}(c.Event);c.IOErrorEvent=f;f.prototype.__class__="egret.IOErrorEvent"})(egret||(egret={}));
(function(c){var f=function(e){function d(a,g,b,c,d,f,h,k,m,p){void 0===g&&(g=!0);void 0===b&&(b=!0);void 0===c&&(c=0);void 0===d&&(d=0);void 0===f&&(f=0);void 0===h&&(h=!1);void 0===k&&(k=!1);void 0===p&&(p=!1);e.call(this,a,g,b);this._stageY=this._stageX=0;this.touchPointID=NaN;this.touchDown=this.altKey=this.shiftKey=this.ctrlKey=!1;this.touchPointID=c;this._stageX=d;this._stageY=f;this.ctrlKey=h;this.altKey=k;this.touchDown=p}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"stageX",{get:function(){return this._stageX},
enumerable:!0,configurable:!0});Object.defineProperty(b,"stageY",{get:function(){return this._stageY},enumerable:!0,configurable:!0});Object.defineProperty(b,"localX",{get:function(){return this._currentTarget.globalToLocal(this._stageX,this._stageY,c.Point.identity).x},enumerable:!0,configurable:!0});Object.defineProperty(b,"localY",{get:function(){return this._currentTarget.globalToLocal(this._stageX,this._stageY,c.Point.identity).y},enumerable:!0,configurable:!0});d.dispatchTouchEvent=function(a,
g,b,q,e,f,h,k,m){void 0===b&&(b=0);void 0===q&&(q=0);void 0===e&&(e=0);void 0===f&&(f=!1);void 0===h&&(h=!1);void 0===k&&(k=!1);void 0===m&&(m=!1);var p=c.Event._getPropertyData(d);p.touchPointID=b;p._stageX=q;p._stageY=e;p.ctrlKey=f;p.altKey=h;p.shiftKey=k;p.touchDown=m;c.Event._dispatchByTarget(d,a,g,p,!0,!0)};d.TOUCH_TAP="touchTap";d.TOUCH_MOVE="touchMove";d.TOUCH_BEGIN="touchBegin";d.TOUCH_END="touchEnd";d.TOUCH_RELEASE_OUTSIDE="touchReleaseOutside";d.TOUCH_ROLL_OUT="touchRollOut";d.TOUCH_ROLL_OVER=
"touchRollOver";d.TOUCH_OUT="touchOut";d.TOUCH_OVER="touchOver";return d}(c.Event);c.TouchEvent=f;f.prototype.__class__="egret.TouchEvent"})(egret||(egret={}));(function(c){var f=function(e){function d(b,a,g){void 0===a&&(a=!1);void 0===g&&(g=!1);e.call(this,b,a,g)}__extends(d,e);d.dispatchTimerEvent=function(b,a){c.Event._dispatchByTarget(d,b,a)};d.TIMER="timer";d.TIMER_COMPLETE="timerComplete";return d}(c.Event);c.TimerEvent=f;f.prototype.__class__="egret.TimerEvent"})(egret||(egret={}));
(function(c){var f=function(e){function d(b,a,g,u){void 0===a&&(a=!1);void 0===g&&(g=!1);void 0===u&&(u="");e.call(this,b,a,g);this.text=u}__extends(d,e);d.dispatchTextEvent=function(b,a,g){var u=c.Event._getPropertyData(d);u.text=g;c.Event._dispatchByTarget(d,b,a,u)};d.LINK="link";return d}(c.Event);c.TextEvent=f;f.prototype.__class__="egret.TextEvent"})(egret||(egret={}));
(function(c){var f=function(e){function d(b,a,g,u,c){void 0===a&&(a=!1);void 0===g&&(g=!1);void 0===u&&(u=0);void 0===c&&(c=0);e.call(this,b,a,g);this.bytesTotal=this.bytesLoaded=0;this.bytesLoaded=u;this.bytesTotal=c}__extends(d,e);d.dispatchProgressEvent=function(b,a,g,u){void 0===g&&(g=0);void 0===u&&(u=0);c.Event._dispatchByTarget(d,b,a,{bytesLoaded:g,bytesTotal:u})};d.PROGRESS="progress";d.SOCKET_DATA="socketData";return d}(c.Event);c.ProgressEvent=f;f.prototype.__class__="egret.ProgressEvent"})(egret||
(egret={}));(function(c){var f=function(){function c(){}c.CAPTURING_PHASE=1;c.AT_TARGET=2;c.BUBBLING_PHASE=3;return c}();c.EventPhase=f;f.prototype.__class__="egret.EventPhase"})(egret||(egret={}));
(function(c){var f=function(e){function d(a){void 0===a&&(a=null);e.call(this);this._captureEventsMap=this._eventsMap=this._eventTarget=null;this._eventTarget=a?a:this}__extends(d,e);var b=d.prototype;b.addEventListener=function(a,g,b,d,e){void 0===d&&(d=!1);void 0===e&&(e=0);"undefined"===typeof d&&(d=!1);"undefined"===typeof e&&(e=0);g||c.$error(1010);d?(this._captureEventsMap||(this._captureEventsMap={}),d=this._captureEventsMap):(this._eventsMap||(this._eventsMap={}),d=this._eventsMap);var f=
d[a];f||(f=d[a]=[]);this._insertEventBin(f,g,b,e)};b._insertEventBin=function(a,g,b,c,d){void 0===d&&(d=void 0);for(var e=-1,f=a.length,k=0;k<f;k++){var m=a[k];if(m.listener==g&&m.thisObject==b&&m.display==d)return!1;-1==e&&m.priority<c&&(e=k)}g={listener:g,thisObject:b,priority:c};d&&(g.display=d);-1!=e?a.splice(e,0,g):a.push(g);return!0};b.removeEventListener=function(a,g,b,c){void 0===c&&(c=!1);if(c=c?this._captureEventsMap:this._eventsMap){var d=c[a];d&&(this._removeEventBin(d,g,b),0==d.length&&
delete c[a])}};b._removeEventBin=function(a,g,b,c,d){void 0===c&&(c=void 0);void 0===d&&(d=0);for(var e=a.length;d<e;d++){var f=a[d];if(f.listener==g&&f.thisObject==b&&f.display==c)return a.splice(d,1),!0}return!1};b.hasEventListener=function(a){return!!(this._eventsMap&&this._eventsMap[a]||this._captureEventsMap&&this._captureEventsMap[a])};b.willTrigger=function(a){return this.hasEventListener(a)};b.dispatchEvent=function(a){a._reset();a._target=this._eventTarget;a._currentTarget=this._eventTarget;
return this._notifyListener(a)};b._notifyListener=function(a){var g=1==a._eventPhase?this._captureEventsMap:this._eventsMap;if(!g)return!0;g=g[a._type];if(!g)return!0;var b=g.length;if(0==b)return!0;for(var g=g.concat(),c=0;c<b;c++){var d=g[c];d.listener.call(d.thisObject,a);if(a._isPropagationImmediateStopped)break}return!a._isDefaultPrevented};b.dispatchEventWith=function(a,g,b){void 0===g&&(g=!1);c.Event.dispatchEvent(this,a,g,b)};return d}(c.HashObject);c.EventDispatcher=f;f.prototype.__class__=
"egret.EventDispatcher"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.stage=this.deviceContext=this.netContext=this.touchContext=this.rendererContext=null;this.reuseEvent=new c.Event("")}__extends(d,e);var b=d.prototype;b.run=function(){c.Ticker.getInstance().run();c.Ticker.getInstance().register(this.renderLoop,this,Number.NEGATIVE_INFINITY);c.Ticker.getInstance().register(this.broadcastEnterFrame,this,Number.POSITIVE_INFINITY);this.touchContext.run();this._profileInstance=c.Profiler.getInstance()};b.renderLoop=
function(a){if(0<c.__callLaterFunctionList.length){var g=c.__callLaterFunctionList;c.__callLaterFunctionList=[];var b=c.__callLaterThisList;c.__callLaterThisList=[];var q=c.__callLaterArgsList;c.__callLaterArgsList=[]}a=this.stage;var e=d.cachedEvent;e._type=c.Event.RENDER;this.dispatchEvent(e);c.Stage._invalidateRenderFlag&&(this.broadcastRender(),c.Stage._invalidateRenderFlag=!1);g&&this.doCallLaterList(g,b,q);0<c.__callAsyncFunctionList.length&&this.doCallAsyncList();g=this.rendererContext;g.onRenderStart();
g.clearScreen();d.__DRAW_COMMAND_LIST=[];d._renderLoopPhase="updateTransform";a._updateTransform();d._renderLoopPhase="draw";e._type=c.Event.FINISH_UPDATE_TRANSFORM;this.dispatchEvent(e);d.__use_new_draw?this._draw(g):a._draw(g);e._type=c.Event.FINISH_RENDER;this.dispatchEvent(e);this._profileInstance._isRunning&&this._profileInstance._drawProfiler(g);g.onRenderFinish()};b._draw=function(a){for(var g=d.__DRAW_COMMAND_LIST,b=g.length,c=0;c<b;c++){var e=g[c];e.call(a);e.dispose()}};b.broadcastEnterFrame=
function(a){a=this.reuseEvent;a._type=c.Event.ENTER_FRAME;this.dispatchEvent(a);for(var g=c.DisplayObject._enterFrameCallBackList.concat(),b=g.length,d=0;d<b;d++){var e=g[d];a._target=e.display;a._currentTarget=e.display;e.listener.call(e.thisObject,a)}g=c.Recycler._callBackList;for(d=g.length-1;0<=d;d--)g[d]._checkFrame()};b.broadcastRender=function(){var a=this.reuseEvent;a._type=c.Event.RENDER;for(var g=c.DisplayObject._renderCallBackList.concat(),b=g.length,d=0;d<b;d++){var e=g[d],f=e.display;
a._target=f;a._currentTarget=f;e.listener.call(e.thisObject,a)}};b.doCallLaterList=function(a,g,b){for(var c=a.length,d=0;d<c;d++){var e=a[d];null!=e&&e.apply(g[d],b[d])}};b.doCallAsyncList=function(){var a=c.__callAsyncFunctionList.concat(),g=c.__callAsyncThisList.concat(),b=c.__callAsyncArgsList.concat();c.__callAsyncFunctionList.length=0;c.__callAsyncThisList.length=0;for(var d=c.__callAsyncArgsList.length=0;d<a.length;d++){var e=a[d];null!=e&&e.apply(g[d],b[d])}};d.deviceType=null;d.DEVICE_PC=
"web";d.DEVICE_MOBILE="native";d.RUNTIME_HTML5="runtimeHtml5";d.RUNTIME_NATIVE="runtimeNative";d.__DRAW_COMMAND_LIST=[];d.__use_new_draw=!0;d.cachedEvent=new c.Event("");return d}(c.EventDispatcher);c.MainContext=f;f.prototype.__class__="egret.MainContext"})(egret||(egret={}));var testDeviceType=function(){if(!this.navigator)return!0;var c=navigator.userAgent.toLowerCase();return-1!=c.indexOf("mobile")||-1!=c.indexOf("android")},testRuntimeType=function(){return this.navigator?!0:!1};
egret.MainContext.instance=new egret.MainContext;egret.MainContext.deviceType=testDeviceType()?egret.MainContext.DEVICE_MOBILE:egret.MainContext.DEVICE_PC;egret.MainContext.runtimeType=testRuntimeType()?egret.MainContext.RUNTIME_HTML5:egret.MainContext.RUNTIME_NATIVE;delete testDeviceType;delete testRuntimeType;
(function(c){var f=function(){function e(){this._preDrawCount=this._updateTransformPerformanceCost=this._renderPerformanceCost=this._logicPerformanceCost=this._lastTime=0;this._calculatePreDrawCount=!0;this._txt=null;this._tick=0;this._maxDeltaTime=500;this._totalDeltaTime=0;this._isRunning=!1}var d=e.prototype;e.getInstance=function(){null==e.instance&&(e.instance=new e);return e.instance};d.stop=function(){if(this._isRunning){this._isRunning=!1;c.Ticker.getInstance().unregister(this.update,this);
var b=c.MainContext.instance;b.removeEventListener(c.Event.ENTER_FRAME,this.onEnterFrame,this);b.removeEventListener(c.Event.RENDER,this.onStartRender,this);b.removeEventListener(c.Event.FINISH_RENDER,this.onFinishRender,this);b.removeEventListener(c.Event.FINISH_UPDATE_TRANSFORM,this.onFinishUpdateTransform,this)}};d.run=function(){null==this._txt&&(this._txt=new c.TextField,this._txt.size=28,this._txt.multiline=!0,this._txt._DO_Props_._parent=new c.DisplayObjectContainer);if(!this._isRunning){this._isRunning=
!0;c.Ticker.getInstance().register(this.update,this);var b=c.MainContext.instance;b.addEventListener(c.Event.ENTER_FRAME,this.onEnterFrame,this);b.addEventListener(c.Event.RENDER,this.onStartRender,this);b.addEventListener(c.Event.FINISH_RENDER,this.onFinishRender,this);b.addEventListener(c.Event.FINISH_UPDATE_TRANSFORM,this.onFinishUpdateTransform,this)}};d._drawProfiler=function(b){"_drawWebGL"in b&&b._drawWebGL();this._calculatePreDrawCount=!1;this._txt._updateTransform();this._txt._draw(b)};d._setTxtFontSize=
function(b){this._txt.size=b};d.onEnterFrame=function(b){this._lastTime=c.getTimer()};d.onStartRender=function(b){b=c.getTimer();this._logicPerformanceCost=b-this._lastTime;this._lastTime=b};d.onFinishUpdateTransform=function(b){b=c.getTimer();this._updateTransformPerformanceCost=b-this._lastTime;this._lastTime=b};d.onFinishRender=function(b){b=c.getTimer();this._renderPerformanceCost=b-this._lastTime;this._lastTime=b};d.update=function(b){this._tick++;this._totalDeltaTime+=b;if(this._totalDeltaTime>=
this._maxDeltaTime){b=this._preDrawCount.toString();var a=Math.ceil(this._logicPerformanceCost).toString()+","+Math.ceil(this._updateTransformPerformanceCost).toString()+","+Math.ceil(this._renderPerformanceCost).toString()+","+Math.ceil(c.MainContext.instance.rendererContext.renderCost).toString();this._txt.text="draw:"+b+"\ncost:"+a+"\nFPS:"+Math.floor(1E3*this._tick/this._totalDeltaTime).toString();this._tick=this._totalDeltaTime=0}this._preDrawCount=0;this._calculatePreDrawCount=!0};d.onDrawImage=
function(){this._calculatePreDrawCount&&this._preDrawCount++};return e}();c.Profiler=f;f.prototype.__class__="egret.Profiler"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._timeScale=1;this._paused=!1;this._callIndex=-1;this.callBackList=[];null!=d.instance&&c.$error(1002)}__extends(d,e);var b=d.prototype;b.run=function(){c.__START_TIME=(new Date).getTime();c.MainContext.instance.deviceContext.executeMainLoop(this.update,this)};b.update=function(a){if(!this._paused){a*=this._timeScale;this._callList=this.callBackList.concat();for(this._callIndex=0;this._callIndex<this._callList.length;this._callIndex++){var g=
this._callList[this._callIndex];g.listener.call(g.thisObject,a)}this._callIndex=-1;this._callList=null}};b.register=function(a,g,b){void 0===b&&(b=0);this._insertEventBin(this.callBackList,a,g,b)};b.unregister=function(a,g){this._removeEventBin(this.callBackList,a,g);this._callList&&-1<this._callIndex&&this._removeEventBin(this._callList,a,g,null,this._callIndex+1)};b.setTimeout=function(a,g,b){for(var d=[],e=3;e<arguments.length;e++)d[e-3]=arguments[e];c.$warn(1003);c.setTimeout.apply(null,[a,g,
b].concat(d))};b.setTimeScale=function(a){this._timeScale=a};b.getTimeScale=function(){return this._timeScale};b.pause=function(){this._paused=!0};b.resume=function(){this._paused=!1};d.getInstance=function(){null==d.instance&&(d.instance=new d);return d.instance};return d}(c.EventDispatcher);c.Ticker=f;f.prototype.__class__="egret.Ticker"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.LEFT="left";c.RIGHT="right";c.CENTER="center";c.JUSTIFY="justify";c.CONTENT_JUSTIFY="contentJustify";return c}();c.HorizontalAlign=f;f.prototype.__class__="egret.HorizontalAlign"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.TOP="top";c.BOTTOM="bottom";c.MIDDLE="middle";c.JUSTIFY="justify";c.CONTENT_JUSTIFY="contentJustify";return c}();c.VerticalAlign=f;f.prototype.__class__="egret.VerticalAlign"})(egret||(egret={}));
(function(c){var f=function(e){function d(a,g){void 0===g&&(g=0);e.call(this);this._currentCount=0;this._running=!1;this.lastTime=0;this.delay=a;this.repeatCount=g}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"currentCount",{get:function(){return this._currentCount},enumerable:!0,configurable:!0});Object.defineProperty(b,"running",{get:function(){return this._running},enumerable:!0,configurable:!0});b.reset=function(){this.stop();this._currentCount=0};b.start=function(){this._running||
(this.lastTime=c.getTimer(),c.Ticker.getInstance().register(this.onEnterFrame,this),this._running=!0)};b.stop=function(){this._running&&(c.Ticker.getInstance().unregister(this.onEnterFrame,this),this._running=!1)};b.onEnterFrame=function(a){a=c.getTimer();a-this.lastTime>this.delay&&(this.lastTime=a,this._currentCount++,c.TimerEvent.dispatchTimerEvent(this,c.TimerEvent.TIMER),0<this.repeatCount&&this._currentCount>=this.repeatCount&&(this.stop(),c.TimerEvent.dispatchTimerEvent(this,c.TimerEvent.TIMER_COMPLETE)))};
return d}(c.EventDispatcher);c.Timer=f;f.prototype.__class__="egret.Timer"})(egret||(egret={}));
(function(c){function f(c){c=c.prototype?c.prototype:Object.getPrototypeOf(c);if(c.hasOwnProperty("__class__"))return c.__class__;var d=c.constructor.toString(),b=d.indexOf("("),d=d.substring(9,b);Object.defineProperty(c,"__class__",{value:d,enumerable:!1,writable:!0});return d}c.getQualifiedClassName=f;c.getQualifiedSuperclassName=function(c){c=c.prototype?c.prototype:Object.getPrototypeOf(c);if(c.hasOwnProperty("__superclass__"))return c.__superclass__;var d=Object.getPrototypeOf(c);if(null==d)return null;
d=f(d.constructor);if(!d)return null;Object.defineProperty(c,"__superclass__",{value:d,enumerable:!1,writable:!0});return d}})(egret||(egret={}));(function(c){var f={};c.getDefinitionByName=function(c){if(!c)return null;var d=f[c];if(d)return d;for(var b=c.split("."),a=b.length,d=__global,g=0;g<a;g++)if(d=d[b[g]],!d)return null;return f[c]=d}})(egret||(egret={}));var __global=__global||this;
(function(c){function f(b){for(var a in e){var g=e[a];g.delay-=b;0>=g.delay&&(g.listener.apply(g.thisObject,g.params),delete e[a])}}var e={},d=0;c.setTimeout=function(b,a,g){for(var u=[],q=3;q<arguments.length;q++)u[q-3]=arguments[q];u={listener:b,thisObject:a,delay:g,params:u};0==d&&c.Ticker.getInstance().register(f,null);d++;e[d]=u;return d};c.clearTimeout=function(b){delete e[b]}})(egret||(egret={}));
(function(c){function f(b){for(var a in e){var g=e[a];g.delay-=b;0>=g.delay&&(g.delay=g.originDelay,g.listener.apply(g.thisObject,g.params))}}var e={},d=0;c.setInterval=function(b,a,g){for(var u=[],q=3;q<arguments.length;q++)u[q-3]=arguments[q];u={listener:b,thisObject:a,delay:g,originDelay:g,params:u};0==d&&c.Ticker.getInstance().register(f,null);d++;e[d]=u;return d};c.clearInterval=function(b){delete e[b]}})(egret||(egret={}));
(function(c){c.hasDefinition=function(f){return c.getDefinitionByName(f)?!0:!1}})(egret||(egret={}));(function(c){c.toColorString=function(c){if(isNaN(c)||0>c)c=0;16777215<c&&(c=16777215);for(c=c.toString(16).toUpperCase();6>c.length;)c="0"+c;return"#"+c}})(egret||(egret={}));
(function(c){var f=function(e){function d(a,g,b,c,d,f){void 0===a&&(a=1);void 0===g&&(g=0);void 0===b&&(b=0);void 0===c&&(c=1);void 0===d&&(d=0);void 0===f&&(f=0);e.call(this);this.a=a;this.b=g;this.c=b;this.d=c;this.tx=d;this.ty=f}__extends(d,e);var b=d.prototype;b.prepend=function(a,g,b,c,d,e){var f=this.tx;if(1!=a||0!=g||0!=b||1!=c){var k=this.a,m=this.c;this.a=k*a+this.b*b;this.b=k*g+this.b*c;this.c=m*a+this.d*b;this.d=m*g+this.d*c}this.tx=f*a+this.ty*b+d;this.ty=f*g+this.ty*c+e;return this};
b.append=function(a,g,b,c,d,e){var f=this.a,k=this.b,m=this.c,p=this.d;if(1!=a||0!=g||0!=b||1!=c)this.a=a*f+g*m,this.b=a*k+g*p,this.c=b*f+c*m,this.d=b*k+c*p;this.tx=d*f+e*m+this.tx;this.ty=d*k+e*p+this.ty;return this};b.prependTransform=function(a,g,b,d,e,f,h,k,m){if(e%360){var p=c.NumberUtils.cos(e);e=c.NumberUtils.sin(e)}else p=1,e=0;if(k||m)this.tx-=k,this.ty-=m;f||h?(this.prepend(p*b,e*b,-e*d,p*d,0,0),this.prepend(c.NumberUtils.cos(h),c.NumberUtils.sin(h),-c.NumberUtils.sin(f),c.NumberUtils.cos(f),
a,g)):this.prepend(p*b,e*b,-e*d,p*d,a,g);return this};b.appendTransform=function(a,g,b,d,e,f,h,k,m){if(e%360){var p=c.NumberUtils.cos(e);e=c.NumberUtils.sin(e)}else p=1,e=0;f||h?(this.append(c.NumberUtils.cos(h),c.NumberUtils.sin(h),-c.NumberUtils.sin(f),c.NumberUtils.cos(f),a,g),this.append(p*b,e*b,-e*d,p*d,0,0)):this.append(p*b,e*b,-e*d,p*d,a,g);if(k||m)this.tx-=k*this.a+m*this.c,this.ty-=k*this.b+m*this.d;return this};b.rotate=function(a){var g=Math.cos(a);a=Math.sin(a);var b=this.a,c=this.c,d=
this.tx;this.a=b*g-this.b*a;this.b=b*a+this.b*g;this.c=c*g-this.d*a;this.d=c*a+this.d*g;this.tx=d*g-this.ty*a;this.ty=d*a+this.ty*g;return this};b.skew=function(a,g){this.append(c.NumberUtils.cos(g),c.NumberUtils.sin(g),-c.NumberUtils.sin(a),c.NumberUtils.cos(a),0,0);return this};b.scale=function(a,g){this.a*=a;this.d*=g;this.c*=a;this.b*=g;this.tx*=a;this.ty*=g;return this};b.translate=function(a,g){this.tx+=a;this.ty+=g;return this};b.identity=function(){this.a=this.d=1;this.b=this.c=this.tx=this.ty=
0;return this};b.identityMatrix=function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.d=a.d;this.tx=a.tx;this.ty=a.ty;return this};b.invert=function(){var a=this.a,g=this.b,b=this.c,c=this.d,d=this.tx,e=a*c-g*b;this.a=c/e;this.b=-g/e;this.c=-b/e;this.d=a/e;this.tx=(b*this.ty-c*d)/e;this.ty=-(a*this.ty-g*d)/e;return this};d.transformCoords=function(a,g,b){var d=c.Point.identity;d.x=a.a*g+a.c*b+a.tx;d.y=a.d*b+a.b*g+a.ty;return d};b.toArray=function(a){this.array||(this.array=new Float32Array(9));a?(this.array[0]=
this.a,this.array[1]=this.b,this.array[2]=0,this.array[3]=this.c,this.array[4]=this.d,this.array[5]=0,this.array[6]=this.tx,this.array[7]=this.ty):(this.array[0]=this.a,this.array[1]=this.b,this.array[2]=this.tx,this.array[3]=this.c,this.array[4]=this.d,this.array[5]=this.ty,this.array[6]=0,this.array[7]=0);this.array[8]=1;return this.array};b.setTo=function(a,g,b,c,d,e){this.a=a;this.b=g;this.c=b;this.d=c;this.tx=d;this.ty=e};b.copyFrom=function(a){this.identityMatrix(a)};b.clone=function(){return new d(this.a,
this.b,this.c,this.d,this.tx,this.ty)};b.concat=function(a){var g=this.a,b=this.b,c=this.c,d=this.d,e=this.tx,f=this.ty,k=a.a,m=a.b,p=a.c,r=a.d,s=g*k,t=0,v=0,x=d*r,w=e*k+a.tx;a=f*r+a.ty;if(0!=b||0!=c||0!=m||0!=p)s+=b*p,x+=c*m,t+=g*m+b*r,v+=c*k+d*p,w+=f*p,a+=e*m;this.a=s;this.b=t;this.c=v;this.d=x;this.tx=w;this.ty=a};b.deltaTransformPoint=function(a){return new c.Point(this.a*a.x+this.c*a.y,this.b*a.x+this.d*a.y)};b.transformPoint=function(a){return new c.Point(this.a*a.x+this.c*a.y+this.tx,this.b*
a.x+this.d*a.y+this.ty)};b.toString=function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"};b.createBox=function(a,g,b,d,e){void 0===b&&(b=0);void 0===d&&(d=0);void 0===e&&(e=0);if(0!==b){b/=c.Matrix.DEG_TO_RAD;var f=c.NumberUtils.cos(b);b=c.NumberUtils.sin(b);this.a=f*a;this.b=b*g;this.c=-b*a;this.d=f*g}else this.a=a,this.c=this.b=0,this.d=g;this.tx=d;this.ty=e};b.createGradientBox=function(a,g,b,c,d){void 0===b&&(b=0);void 0===c&&(c=0);void 0===
d&&(d=0);this.createBox(a/1638.4,g/1638.4,b,c+a/2,d+g/2)};d.identity=new d;d.DEG_TO_RAD=Math.PI/180;return d}(c.HashObject);c.Matrix=f;f.prototype.__class__="egret.Matrix"})(egret||(egret={}));
(function(c){var f=function(e){function d(a,g){void 0===a&&(a=0);void 0===g&&(g=0);e.call(this);this.x=a;this.y=g}__extends(d,e);var b=d.prototype;b.clone=function(){return new d(this.x,this.y)};b.equals=function(a){return this.x==a.x&&this.y==a.y};d.distance=function(a,g){return Math.sqrt((a.x-g.x)*(a.x-g.x)+(a.y-g.y)*(a.y-g.y))};b.setTo=function(a,g){this.x=a;this.y=g};b.copyFrom=function(a){this.x=a.x;this.y=a.y};Object.defineProperty(b,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*
this.y)},enumerable:!0,configurable:!0});b.add=function(a){return new d(this.x+a.x,this.y+a.y)};d.interpolate=function(a,g,b){var c=1-b;return new d(a.x*b+g.x*c,a.y*b+g.y*c)};b.normalize=function(a){if(0!=this.x||0!=this.y)a/=this.length,this.x*=a,this.y*=a};b.offset=function(a,g){this.x+=a;this.y+=g};d.polar=function(a,g){return new d(a*c.NumberUtils.cos(g/c.Matrix.DEG_TO_RAD),a*c.NumberUtils.sin(g/c.Matrix.DEG_TO_RAD))};b.subtract=function(a){return new d(this.x-a.x,this.y-a.y)};b.toString=function(){return"(x="+
this.x+", y="+this.y+")"};d.identity=new d(0,0);return d}(c.HashObject);c.Point=f;f.prototype.__class__="egret.Point"})(egret||(egret={}));
(function(c){var f=function(e){function d(a,g,b,c){void 0===a&&(a=0);void 0===g&&(g=0);void 0===b&&(b=0);void 0===c&&(c=0);e.call(this);this.x=a;this.y=g;this.width=b;this.height=c}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"left",{get:function(){return this.x},set:function(a){this.width+=this.x-a;this.x=a},enumerable:!0,configurable:!0});Object.defineProperty(b,"right",{get:function(){return this.x+this.width},set:function(a){this.width=a-this.x},enumerable:!0,configurable:!0});Object.defineProperty(b,
"top",{get:function(){return this.y},set:function(a){this.height+=this.y-a;this.y=a},enumerable:!0,configurable:!0});Object.defineProperty(b,"bottom",{get:function(){return this.y+this.height},set:function(a){this.height=a-this.y},enumerable:!0,configurable:!0});Object.defineProperty(b,"topLeft",{get:function(){return new c.Point(this.left,this.top)},set:function(a){this.top=a.y;this.left=a.x},enumerable:!0,configurable:!0});Object.defineProperty(b,"bottomRight",{get:function(){return new c.Point(this.right,
this.bottom)},set:function(a){this.bottom=a.y;this.right=a.x},enumerable:!0,configurable:!0});b.initialize=function(a,g,b,c){this.x=a;this.y=g;this.width=b;this.height=c;return this};b.contains=function(a,g){return this.x<=a&&this.x+this.width>=a&&this.y<=g&&this.y+this.height>=g};b.intersects=function(a){return Math.max(this.x,a.x)<=Math.min(this.right,a.right)&&Math.max(this.y,a.y)<=Math.min(this.bottom,a.bottom)};b.setEmpty=function(){this.height=this.width=this.y=this.x=0};b.clone=function(){return new d(this.x,
this.y,this.width,this.height)};b.containsPoint=function(a){return this.x<a.x&&this.x+this.width>a.x&&this.y<a.y&&this.y+this.height>a.y?!0:!1};b.setTo=function(a,g,b,c){this.initialize(a,g,b,c)};b.copyFrom=function(a){this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height};b.inflate=function(a,g){this.x-=a;this.width+=2*a;this.y-=g;this.height+=2*g};b.isEmpty=function(){return 0==this.width||0==this.height};b.containsRect=function(a){var g=a.x+a.width,b=a.y+a.height,c=this.x+this.width,d=
this.y+this.height;return a.x>=this.x&&a.x<c&&a.y>=this.y&&a.y<d&&g>this.x&&g<=c&&b>this.y&&b<=d};b.equals=function(a){return this===a?!0:this.x===a.x&&this.y===a.y&&this.width===a.width&&this.height===a.height};b.inflatePoint=function(a){this.inflate(a.x,a.y)};b.intersection=function(a){var g=this.clone(),b=g.x,c=g.y,d=a.x,e=a.y,f=Math.max(b,d),b=Math.min(b+g.width,d+a.width);if(f<=b&&(d=Math.max(c,e),a=Math.min(c+g.height,e+a.height),d<=a))return g.setTo(f,d,b-f,a-d),g;g.setEmpty();return g};b.offset=
function(a,g){this.x+=a;this.y+=g};b.offsetPoint=function(a){this.offset(a.x,a.y)};b.toString=function(){return"(x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"};b.union=function(a){var g=this.clone();if(a.isEmpty())return g;if(g.isEmpty())return g.copyFrom(a),g;var b=Math.min(g.x,a.x),c=Math.min(g.y,a.y);g.setTo(b,c,Math.max(g.right,a.right)-b,Math.max(g.bottom,a.bottom)-c);return g};d.identity=new d(0,0,0,0);return d}(c.HashObject);c.Rectangle=f;f.prototype.__class__=
"egret.Rectangle"})(egret||(egret={}));
(function(c){var f=function(c){function d(a,g,b,d,n,f,h,k){void 0===a&&(a=1);void 0===g&&(g=1);void 0===b&&(b=1);void 0===d&&(d=1);void 0===n&&(n=0);void 0===f&&(f=0);void 0===h&&(h=0);void 0===k&&(k=0);c.call(this);this._redMultiplier=a;this._greenMultiplier=g;this._blueMultiplier=b;this._alphaMultiplier=d;this._redOffset=n;this._greenOffset=f;this._blueOffset=h;this._alphaOffset=k}__extends(d,c);var b=d.prototype;Object.defineProperty(b,"alphaMultiplier",{get:function(){return this._alphaMultiplier},set:function(a){this._alphaMultiplier=
a},enumerable:!0,configurable:!0});Object.defineProperty(b,"alphaOffset",{get:function(){return this._alphaOffset},set:function(a){this._alphaOffset=a},enumerable:!0,configurable:!0});Object.defineProperty(b,"blueMultiplier",{get:function(){return this._blueMultiplier},set:function(a){this._blueMultiplier=a},enumerable:!0,configurable:!0});Object.defineProperty(b,"blueOffset",{get:function(){return this._blueOffset},set:function(a){this._blueOffset=a},enumerable:!0,configurable:!0});Object.defineProperty(b,
"greenMultiplier",{get:function(){return this._greenMultiplier},set:function(a){this._greenMultiplier=a},enumerable:!0,configurable:!0});Object.defineProperty(b,"greenOffset",{get:function(){return this._greenOffset},set:function(a){this._greenOffset=a},enumerable:!0,configurable:!0});Object.defineProperty(b,"redMultiplier",{get:function(){return this._redMultiplier},set:function(a){this._redMultiplier=a},enumerable:!0,configurable:!0});Object.defineProperty(b,"redOffset",{get:function(){return this._redOffset},
set:function(a){this._redOffset=a},enumerable:!0,configurable:!0});Object.defineProperty(b,"color",{get:function(){return this._redOffset<<16+this._greenOffset<<8+this._blueOffset},enumerable:!0,configurable:!0});b.identityColorTransform=function(a){this._alphaMultiplier=a._alphaMultiplier;this._alphaOffset=a._alphaOffset;this._redMultiplier=a._redMultiplier;this._redOffset=a._redOffset;this._greenMultiplier=a._greenMultiplier;this._greenOffset=a._greenOffset;this._blueMultiplier=a._blueMultiplier;
this._blueOffset=a._blueOffset};b.concat=function(a){this._redMultiplier*=a._redMultiplier;this._greenMultiplier*=a._greenMultiplier;this._blueMultiplier*=a._blueMultiplier;this._alphaMultiplier*=a._alphaMultiplier;this._redOffset+=a._redOffset;this._greenOffset+=a._greenOffset;this._blueOffset+=a._blueOffset;this._alphaOffset+=a._alphaOffset};b.toString=function(){return"(redMultiplier="+this._redMultiplier+", greenMultiplier="+this._greenMultiplier+", blueMultiplier="+this._blueMultiplier+", alphaMultiplier="+
this._alphaMultiplier+", redOffset="+this._redOffset+", greenOffset="+this._greenOffset+", blueOffset="+this._blueOffset+", alphaOffset="+this._alphaOffset+")"};return d}(c.HashObject);c.ColorTransform=f;f.prototype.__class__="egret.ColorTransform"})(egret||(egret={}));
(function(c){var f=function(e){function d(a){e.call(this);this._matrix=new c.Matrix;this._matrix2=new c.Matrix;this._colorTransform=new c.ColorTransform;this._colorTransform2=new c.ColorTransform;this._display=a}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"matrix",{get:function(){this._matrix2.identityMatrix(this._matrix);return this._matrix2},set:function(a){this._setMatrix(a)},enumerable:!0,configurable:!0});b._setMatrix=function(a){this._display.__hack_local_matrix||(this._display.__hack_local_matrix=
new c.Matrix);this._display.__hack_local_matrix.identityMatrix(a);this._matrix.identityMatrix(a)};Object.defineProperty(b,"colorTransform",{get:function(){this._colorTransform2.identityColorTransform(this._colorTransform);return this._colorTransform2},set:function(a){this._setColorTransform(a)},enumerable:!0,configurable:!0});b._setColorTransform=function(a){this._colorTransform.identityColorTransform(a)};return d}(c.HashObject);c.Transform=f;f.prototype.__class__="egret.Transform"})(egret||(egret=
{}));
(function(c){var f=function(e){function d(){e.call(this);this._isSupportDOMParser=this._xmlDict=this._parser=null;this._xmlDict={};window.DOMParser?(this._isSupportDOMParser=!0,this._parser=new DOMParser):this._isSupportDOMParser=!1}__extends(d,e);var b=d.prototype;d.getInstance=function(){d._instance||(d._instance=new d);return d._instance};b.parserXML=function(a){for(var g=0;"\n"==a.charAt(g)||"\t"==a.charAt(g)||"\r"==a.charAt(g)||" "==a.charAt(g);)g++;0!=g&&(a=a.substring(g,a.length));this._isSupportDOMParser?g=
this._parser.parseFromString(a,"text/xml"):(g=new ActiveXObject("Microsoft.XMLDOM"),g.async="false",g.loadXML(a));null==g&&c.$warn(1015);return g};d._instance=null;return d}(c.HashObject);c.SAXParser=f;f.prototype.__class__="egret.SAXParser"})(egret||(egret={}));
(function(c){var f=function(a){function b(){a.call(this);this._designHeight=this._designWidth=0;this._scaleY=this._scaleX=1;this._stageHeight=this._stageWidth=this._offSetY=0}__extends(b,a);var e=b.prototype;b.getInstance=function(){null==b.instance&&(d.initialize(),b.instance=new b);return b.instance};e.setDesignSize=function(a,g,b){this._designWidth=a;this._designHeight=g;b&&(c.$warn(1001),this._setResolutionPolicy(b))};e._setResolutionPolicy=function(a){this._resolutionPolicy=a;a.init(this);a._apply(this,
this._designWidth,this._designHeight)};e.getScaleX=function(){return this._scaleX};e.getScaleY=function(){return this._scaleY};e.getOffSetY=function(){return this._offSetY};b.canvas_name="egretCanvas";b.egret_root_div="gameDiv";b.canvas_div_name="canvasDiv";return b}(c.HashObject);c.StageDelegate=f;f.prototype.__class__="egret.StageDelegate";var e=function(){function a(g,b){this._containerStrategy=g;this._contentStrategy=b}var b=a.prototype;b.init=function(a){this._containerStrategy.init(a);this._contentStrategy.init(a)};
b._apply=function(a,g,b){this._containerStrategy._apply(a,g,b);this._contentStrategy._apply(a,g,b)};return a}();c.ResolutionPolicy=e;e.prototype.__class__="egret.ResolutionPolicy";var d=function(){function a(){}var c=a.prototype;a.initialize=function(){a.EQUAL_TO_FRAME=new b};c.init=function(a){};c._apply=function(a,g,b){};c._setupContainer=function(){var a=document.body,g;a&&(g=a.style)&&(g.paddingTop=g.paddingTop||"0px",g.paddingRight=g.paddingRight||"0px",g.paddingBottom=g.paddingBottom||"0px",
g.paddingLeft=g.paddingLeft||"0px",g.borderTop=g.borderTop||"0px",g.borderRight=g.borderRight||"0px",g.borderBottom=g.borderBottom||"0px",g.borderLeft=g.borderLeft||"0px",g.marginTop=g.marginTop||"0px",g.marginRight=g.marginRight||"0px",g.marginBottom=g.marginBottom||"0px",g.marginLeft=g.marginLeft||"0px")};return a}();c.ContainerStrategy=d;d.prototype.__class__="egret.ContainerStrategy";var b=function(a){function b(){a.apply(this,arguments)}__extends(b,a);b.prototype._apply=function(a){this._setupContainer()};
return b}(d);c.EqualToFrame=b;b.prototype.__class__="egret.EqualToFrame";e=function(){function a(){}var b=a.prototype;b.init=function(a){};b._apply=function(a,g,b){};b.setEgretSize=function(a,g,b,u,d,e){void 0===e&&(e=0);c.StageDelegate.getInstance()._stageWidth=Math.round(a);c.StageDelegate.getInstance()._stageHeight=Math.round(g);a=document.getElementById(f.canvas_div_name);g=document.getElementById(f.egret_root_div);a||(a=c.Browser.getInstance().$new("div"),a.id=f.canvas_div_name,g.appendChild(a));
a.style.width=b+"px";a.style.height=u+"px";g.style.width=b+"px";g.style.height=u+"px";g.style.top=e+"px"};b._getClientWidth=function(){return document.documentElement.clientWidth};b._getClientHeight=function(){return document.documentElement.clientHeight};return a}();c.ContentStrategy=e;e.prototype.__class__="egret.ContentStrategy";var a=function(a){function b(c){void 0===c&&(c=0);a.call(this);this.minWidth=NaN;this.minWidth=c}__extends(b,a);b.prototype._apply=function(a,g,b){g=this._getClientWidth();
var c=this._getClientHeight(),u=c/b,d=g/u,e=1;0!=this.minWidth&&(e=Math.min(1,d/this.minWidth));this.setEgretSize(d/e,b,g,c*e);a._scaleX=u*e;a._scaleY=u*e};return b}(e);c.FixedHeight=a;a.prototype.__class__="egret.FixedHeight";a=function(a){function b(c){void 0===c&&(c=0);a.call(this);this.minHeight=NaN;this.minHeight=c}__extends(b,a);b.prototype._apply=function(a,g,b){b=this._getClientWidth();var c=this._getClientHeight(),u=b/g,d=c/u,e=1;0!=this.minHeight&&(e=Math.min(1,d/this.minHeight));this.setEgretSize(g,
d/e,b*e,c,b*(1-e)/2);a._scaleX=u*e;a._scaleY=u*e};return b}(e);c.FixedWidth=a;a.prototype.__class__="egret.FixedWidth";a=function(a){function b(c,u){a.call(this);this.width=c;this.height=u}__extends(b,a);b.prototype._apply=function(a,g,b){b=this.width;var c=this.height,u=b/g;this.setEgretSize(g,c/u,b,c);a._scaleX=u;a._scaleY=u};return b}(e);c.FixedSize=a;a.prototype.__class__="egret.FixedSize";a=function(a){function b(){a.call(this)}__extends(b,a);b.prototype._apply=function(a,g,b){this.setEgretSize(g,
b,g,b,Math.floor((g-g)/2));a._scaleX=1;a._scaleY=1};return b}(e);c.NoScale=a;a.prototype.__class__="egret.NoScale";a=function(a){function b(){a.call(this)}__extends(b,a);b.prototype._apply=function(a,g,b){var c=this._getClientWidth(),u=this._getClientHeight(),d=c,e=u,f=d/g<e/b?d/g:e/b,d=g*f,e=b*f,c=Math.floor((c-d)/2);a._offSetY=Math.floor((u-e)/2);this.setEgretSize(g,b/1,1*d,e,c,a._offSetY);a._scaleX=1*f;a._scaleY=1*f};return b}(e);c.ShowAll=a;a.prototype.__class__="egret.ShowAll";e=function(a){function b(){a.call(this)}
__extends(b,a);b.prototype._apply=function(a,g,b){var c=this._getClientWidth(),u=this._getClientHeight(),c=c/g,u=u/b;this.setEgretSize(g,b,g*c,b*u);a._scaleX=c;a._scaleY=u};return b}(e);c.FullScreen=e;e.prototype.__class__="egret.FullScreen"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._originalData={};this._drawAreaList=[]}__extends(d,e);var b=d.prototype;d.getInstance=function(){null==d.instance&&(d.instance=new d);return d.instance};b.addDrawArea=function(a){this._drawAreaList.push(a)};b.clearDrawArea=function(){this._drawAreaList=[]};b.drawImage=function(a,g,b,e,n,f,h,k,m,p,r){void 0===r&&(r=void 0);h=h||0;k=k||0;var s=g._texture_to_render;if(null!=s&&0!=f&&0!=n&&0!=m&&0!=p){var t=c.MainContext.instance.rendererContext._texture_scale_factor;
n/=t;f/=t;if(0!=this._drawAreaList.length&&c.MainContext.instance.rendererContext._cacheCanvasContext){t=c.DisplayObject.getTransformBounds(g._getSize(d.identityRectangle),g._worldTransform);g._worldBounds.initialize(t.x,t.y,t.width,t.height);t=this._originalData;t.sourceX=b;t.sourceY=e;t.sourceWidth=n;t.sourceHeight=f;t.destX=h;t.destY=k;t.destWidth=m;t.destHeight=p;for(var v=this.getDrawAreaList(),x=0;x<v.length;x++)if(!this.ignoreRender(g,v[x],t.destX,t.destY)){a.drawImage(s,b,e,n,f,h,k,m,p,r);
break}}else a.drawImage(s,b,e,n,f,h,k,m,p,r)}};b.ignoreRender=function(a,g,b,c){var d=a._worldBounds;b*=a._worldTransform.a;c*=a._worldTransform.d;return d.x+d.width+b<=g.x||d.x+b>=g.x+g.width||d.y+d.height+c<=g.y||d.y+c>=g.y+g.height?!0:!1};b.getDrawAreaList=function(){var a;0==this._drawAreaList.length?(this._defaultDrawAreaList||(this._defaultDrawAreaList=[new c.Rectangle(0,0,c.MainContext.instance.stage.stageWidth,c.MainContext.instance.stage.stageHeight)],c.MainContext.instance.stage.addEventListener(c.Event.RESIZE,
this.onResize,this)),a=this._defaultDrawAreaList):a=this._drawAreaList;return a};b.onResize=function(){c.MainContext.instance.stage.removeEventListener(c.Event.RESIZE,this.onResize,this);this._defaultDrawAreaList=null};d.identityRectangle=new c.Rectangle;return d}(c.HashObject);c.RenderFilter=f;f.prototype.__class__="egret.RenderFilter"})(egret||(egret={}));
(function(c){var f=function(){function e(){}e.mapClass=function(c,b,a){void 0===a&&(a="");c=this.getKey(c)+"#"+a;this.mapClassDic[c]=b};e.getKey=function(d){return"string"==typeof d?d:c.getQualifiedClassName(d)};e.mapValue=function(c,b,a){void 0===a&&(a="");c=this.getKey(c)+"#"+a;this.mapValueDic[c]=b};e.hasMapRule=function(c,b){void 0===b&&(b="");var a=this.getKey(c)+"#"+b;return this.mapValueDic[a]||this.mapClassDic[a]?!0:!1};e.getInstance=function(d,b){void 0===b&&(b="");var a=this.getKey(d)+"#"+
b;if(this.mapValueDic[a])return this.mapValueDic[a];var g=this.mapClassDic[a];if(g)return g=new g,this.mapValueDic[a]=g,delete this.mapClassDic[a],g;c.$error(1028,a)};e.mapClassDic={};e.mapValueDic={};return e}();c.Injector=f;f.prototype.__class__="egret.Injector"})(egret||(egret={}));(function(c){var f=function(c){function d(){c.apply(this,arguments);this.type=null}__extends(d,c);return d}(c.HashObject);c.Filter=f;f.prototype.__class__="egret.Filter"})(egret||(egret={}));
(function(c){var f=function(c){function d(b,a){c.call(this);this.blurX=b;this.blurY=a;this.type="blur"}__extends(d,c);return d}(c.Filter);c.BlurFilter=f;f.prototype.__class__="egret.BlurFilter"})(egret||(egret={}));
(function(c){var f=function(c){function d(a){void 0===a&&(a=null);c.call(this);this._matrix=[];this._matrix2=[];this.type="colorTransform";this._setMatrix(a)}__extends(d,c);var b=d.prototype;Object.defineProperty(b,"matrix",{get:function(){for(var a=0;20>a;a++)this._matrix2[a]=this._matrix[a];return this._matrix2},set:function(a){this._setMatrix(a)},enumerable:!0,configurable:!0});b._setMatrix=function(a){for(var g=0;20>g;g++)this._matrix[g]=a&&a[g]||0};return d}(c.Filter);c.ColorMatrixFilter=f;f.prototype.__class__=
"egret.ColorMatrixFilter"})(egret||(egret={}));
(function(c){var f=function(c){function d(b,a,g,u,d,n,f,h){void 0===b&&(b=16711680);void 0===a&&(a=1);void 0===g&&(g=6);void 0===u&&(u=6);void 0===d&&(d=2);void 0===n&&(n=1);void 0===f&&(f=!1);void 0===h&&(h=!1);c.call(this);this.color=b;this.alpha=a;this.blurX=g;this.blurY=u;this.strength=d;this.quality=n;this.inner=f;this.knockout=h;this.type="glow";this._blue=b&255;this._green=(b&65280)>>8;this._red=b>>16}__extends(d,c);return d}(c.Filter);c.GlowFilter=f;f.prototype.__class__="egret.GlowFilter"})(egret||
(egret={}));(function(c){var f=function(c){function d(b,a,g,u,d,n,f,h,k,m,p){void 0===b&&(b=4);void 0===a&&(a=45);void 0===g&&(g=0);void 0===u&&(u=1);void 0===d&&(d=4);void 0===n&&(n=4);void 0===f&&(f=1);void 0===h&&(h=1);void 0===k&&(k=!1);void 0===m&&(m=!1);c.call(this,g,u,d,n,f,h,k,m);this.distance=b;this.angle=a}__extends(d,c);return d}(c.GlowFilter);c.DropShadowFilter=f;f.prototype.__class__="egret.DropShadowFilter"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.NORMAL="normal";c.ADD="add";c.ERASE="erase";c.ERASE_REVERSE="eraseReverse";return c}();c.BlendMode=f;f.prototype.__class__="egret.BlendMode"})(egret||(egret={}));
(function(c){var f=function(){function c(){this._name=null;this._explicitHeight=this._explicitWidth=NaN;this._y=this._x=0;this._scaleY=this._scaleX=1;this._rotation=this._anchorY=this._anchorX=this._anchorOffsetY=this._anchorOffsetX=0;this._alpha=1;this._skewY=this._skewX=0;this._blendMode=null;this._touchEnabled=c.defaultTouchEnabled;this._visible=!0;this._worldAlpha=1;this._scrollRect=null;this._cacheAsBitmap=!1;this._stage=this._parent=null;this._needDraw=!1;this._filters=null;this._hasHeightSet=
this._hasWidthSet=!1;this._sizeDirty=this._normalDirty=!0;this._isContainer=!1}c.defaultTouchEnabled=!1;return c}();c.DisplayObjectProperties=f;f.prototype.__class__="egret.DisplayObjectProperties"})(egret||(egret={}));(function(c){var f=function(){return function(){this._hitTestPointTexture=null;this._rectH=this._rectW=0;this._cacheDirty=!1}}();c.DisplayObjectPrivateProperties=f;f.prototype.__class__="egret.DisplayObjectPrivateProperties"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.renderTexture=this.mask=this._sizeChangeCallTarget=this._sizeChangeCallBack=this.__hack_local_matrix=this._worldBounds=this._texture_to_render=null;this._DO_Props_=new c.DisplayObjectProperties;this._DO_Privs_=new c.DisplayObjectPrivateProperties;this._worldTransform=new c.Matrix;this._worldBounds=new c.Rectangle(0,0,0,0);this._DO_Privs_._cacheBounds=new c.Rectangle(0,0,0,0)}__extends(d,e);var b=d.prototype;b._setDirty=function(){this._DO_Props_._normalDirty=
!0};b.getDirty=function(){return this._DO_Props_._normalDirty||this._DO_Props_._sizeDirty};b._setParentSizeDirty=function(){var a=this._DO_Props_._parent;a&&(a._DO_Props_._hasWidthSet||a._DO_Props_._hasHeightSet?a._setCacheDirty():a._setSizeDirty())};b._setSizeDirty=function(){var a=this._DO_Props_;a._sizeDirty||(a._sizeDirty=!0,this._setDirty(),this._setCacheDirty(),this._setParentSizeDirty(),null!=this._sizeChangeCallBack&&(this._sizeChangeCallTarget==a._parent?this._sizeChangeCallBack.call(this._sizeChangeCallTarget):
this._sizeChangeCallTarget=this._sizeChangeCallBack=null))};b._clearDirty=function(){this._DO_Props_._normalDirty=!1};b._clearSizeDirty=function(){this._DO_Props_._sizeDirty=!1};Object.defineProperty(b,"name",{get:function(){return this._DO_Props_._name},set:function(a){this._DO_Props_._name=a},enumerable:!0,configurable:!0});Object.defineProperty(b,"parent",{get:function(){return this._DO_Props_._parent},enumerable:!0,configurable:!0});b._parentChanged=function(a){this._DO_Props_._parent=a};Object.defineProperty(b,
"x",{get:function(){return this._DO_Props_._x},set:function(a){this._setX(a)},enumerable:!0,configurable:!0});b._setX=function(a){c.NumberUtils.isNumber(a)&&this._DO_Props_._x!=a&&(this._DO_Props_._x=a,this._setDirty(),this._setParentSizeDirty())};Object.defineProperty(b,"y",{get:function(){return this._DO_Props_._y},set:function(a){this._setY(a)},enumerable:!0,configurable:!0});b._setY=function(a){c.NumberUtils.isNumber(a)&&this._DO_Props_._y!=a&&(this._DO_Props_._y=a,this._setDirty(),this._setParentSizeDirty())};
Object.defineProperty(b,"scaleX",{get:function(){return this._DO_Props_._scaleX},set:function(a){c.NumberUtils.isNumber(a)&&this._DO_Props_._scaleX!=a&&(this._DO_Props_._scaleX=a,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(b,"scaleY",{get:function(){return this._DO_Props_._scaleY},set:function(a){c.NumberUtils.isNumber(a)&&this._DO_Props_._scaleY!=a&&(this._DO_Props_._scaleY=a,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});
Object.defineProperty(b,"anchorOffsetX",{get:function(){return this._DO_Props_._anchorOffsetX},set:function(a){c.NumberUtils.isNumber(a)&&this._DO_Props_._anchorOffsetX!=a&&(this._DO_Props_._anchorOffsetX=a,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(b,"anchorOffsetY",{get:function(){return this._DO_Props_._anchorOffsetY},set:function(a){c.NumberUtils.isNumber(a)&&this._DO_Props_._anchorOffsetY!=a&&(this._DO_Props_._anchorOffsetY=a,this._setDirty(),
this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(b,"anchorX",{get:function(){return this._DO_Props_._anchorX},set:function(a){this._setAnchorX(a)},enumerable:!0,configurable:!0});b._setAnchorX=function(a){c.NumberUtils.isNumber(a)&&this._DO_Props_._anchorX!=a&&(this._DO_Props_._anchorX=a,this._setDirty(),this._setParentSizeDirty())};Object.defineProperty(b,"anchorY",{get:function(){return this._DO_Props_._anchorY},set:function(a){this._setAnchorY(a)},enumerable:!0,
configurable:!0});b._setAnchorY=function(a){c.NumberUtils.isNumber(a)&&this._DO_Props_._anchorY!=a&&(this._DO_Props_._anchorY=a,this._setDirty(),this._setParentSizeDirty())};Object.defineProperty(b,"visible",{get:function(){return this._DO_Props_._visible},set:function(a){this._setVisible(a)},enumerable:!0,configurable:!0});b._setVisible=function(a){this._DO_Props_._visible!=a&&(this._DO_Props_._visible=a,this._setSizeDirty())};Object.defineProperty(b,"rotation",{get:function(){return this._DO_Props_._rotation},
set:function(a){c.NumberUtils.isNumber(a)&&this._DO_Props_._rotation!=a&&(this._DO_Props_._rotation=a,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(b,"alpha",{get:function(){return this._DO_Props_._alpha},set:function(a){this._setAlpha(a)},enumerable:!0,configurable:!0});b._setAlpha=function(a){c.NumberUtils.isNumber(a)&&this._DO_Props_._alpha!=a&&(this._DO_Props_._alpha=a,this._setDirty(),this._setCacheDirty())};Object.defineProperty(b,"skewX",
{get:function(){return this._DO_Props_._skewX},set:function(a){c.NumberUtils.isNumber(a)&&this._DO_Props_._skewX!=a&&(this._DO_Props_._skewX=a,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(b,"skewY",{get:function(){return this._DO_Props_._skewY},set:function(a){c.NumberUtils.isNumber(a)&&this._DO_Props_._skewY!=a&&(this._DO_Props_._skewY=a,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(b,"touchEnabled",
{get:function(){return this._DO_Props_._touchEnabled},set:function(a){this._setTouchEnabled(a)},enumerable:!0,configurable:!0});b._setTouchEnabled=function(a){this._DO_Props_._touchEnabled=a};Object.defineProperty(b,"blendMode",{get:function(){return this._DO_Props_._blendMode},set:function(a){this._DO_Props_._blendMode=a},enumerable:!0,configurable:!0});Object.defineProperty(b,"scrollRect",{get:function(){return this._DO_Props_._scrollRect},set:function(a){this._setScrollRect(a)},enumerable:!0,configurable:!0});
b._setScrollRect=function(a){this._DO_Props_._scrollRect=a;this._setSizeDirty()};Object.defineProperty(b,"measuredWidth",{get:function(){return this._measureBounds().width},enumerable:!0,configurable:!0});Object.defineProperty(b,"measuredHeight",{get:function(){return this._measureBounds().height},enumerable:!0,configurable:!0});Object.defineProperty(b,"explicitWidth",{get:function(){return this._DO_Props_._explicitWidth},enumerable:!0,configurable:!0});Object.defineProperty(b,"explicitHeight",{get:function(){return this._DO_Props_._explicitHeight},
enumerable:!0,configurable:!0});Object.defineProperty(b,"width",{get:function(){return this._getWidth()},set:function(a){this._setWidth(a)},enumerable:!0,configurable:!0});b._getWidth=function(){return this._getSize(c.Rectangle.identity).width};Object.defineProperty(b,"height",{get:function(){return this._getHeight()},set:function(a){this._setHeight(a)},enumerable:!0,configurable:!0});b._getHeight=function(){return this._getSize(c.Rectangle.identity).height};b._setWidth=function(a){this._setSizeDirty();
this._setCacheDirty();this._DO_Props_._explicitWidth=a;this._DO_Props_._hasWidthSet=c.NumberUtils.isNumber(a)};b._setHeight=function(a){this._setSizeDirty();this._setCacheDirty();this._DO_Props_._explicitHeight=a;this._DO_Props_._hasHeightSet=c.NumberUtils.isNumber(a)};Object.defineProperty(b,"worldAlpha",{get:function(){return this._DO_Props_._worldAlpha},set:function(a){this._DO_Props_._worldAlpha=a},enumerable:!0,configurable:!0});b._draw=function(a){if(this._DO_Props_._visible&&!this.drawCacheTexture(a)){var g=
c.MainContext.__use_new_draw&&this._DO_Props_._isContainer;this._hasFilters()&&!g&&this._setGlobalFilters(a);a.setAlpha(this.worldAlpha,this.blendMode);a.setTransform(this._worldTransform);var b=this.mask||this._DO_Props_._scrollRect;b&&!g&&a.pushMask(b);this._render(a);b&&!g&&a.popMask();this._hasFilters()&&!g&&this._removeGlobalFilters(a)}this.destroyCacheBounds()};b._setGlobalFilters=function(a){var g;g=this._DO_Props_._filters?this._DO_Props_._filters.concat():[];if(this._transform){var b=this._transform._colorTransform,
c=d.color;c[0]=b._redMultiplier;c[4]=b._redOffset;c[6]=b._greenMultiplier;c[9]=b._greenOffset;c[12]=b._blueMultiplier;c[14]=b._blueOffset;c[18]=b._alphaMultiplier;c[19]=b._alphaOffset;d.colorMatrixFilter._matrix=c;g.push(d.colorMatrixFilter)}a.setGlobalFilters(g)};b._removeGlobalFilters=function(a){a.setGlobalFilters(null)};b._hasFilters=function(){var a=this._DO_Props_._filters&&0<this._DO_Props_._filters.length;if(this._transform){var g=this._transform._colorTransform;if(1!=g._redMultiplier||0!=
g._redOffset||1!=g._greenMultiplier||0!=g._greenOffset||1!=g._blueMultiplier||0!=g._blueOffset||1!=g._alphaMultiplier||0!=g._alphaOffset)a=!0}return a};b._pushMask=function(a){a.setTransform(this._worldTransform);var g=this.mask||this._DO_Props_._scrollRect;g&&a.pushMask(g)};b._popMask=function(a){a.popMask()};b.drawCacheTexture=function(a){if(!1==this._DO_Props_._cacheAsBitmap)return!1;var g=this.getBounds(c.Rectangle.identity);if(this._DO_Privs_._cacheDirty||null==this._texture_to_render||1<=Math.round(g.width)-
this._texture_to_render._textureWidth||1<=Math.round(g.height)-this._texture_to_render._textureHeight)g=this._makeBitmapCache(),this._DO_Privs_._cacheDirty=!g;if(null==this._texture_to_render)return!1;var b=this._texture_to_render,g=b._offsetX,d=b._offsetY,e=b._textureWidth,b=b._textureHeight;this._updateTransform();a.setAlpha(this.worldAlpha,this.blendMode);a.setTransform(this._worldTransform);c.RenderFilter.getInstance().drawImage(a,this,0,0,e,b,g,d,e,b);return!0};Object.defineProperty(b,"needDraw",
{get:function(){return this._DO_Props_._needDraw},set:function(a){this._DO_Props_._needDraw=a},enumerable:!0,configurable:!0});b._updateTransform=function(){var a=this._DO_Props_;a._visible&&(this._calculateWorldTransform(),"updateTransform"==c.MainContext._renderLoopPhase&&(this.needDraw||this._texture_to_render||a._cacheAsBitmap)&&c.RenderCommand.push(this._draw,this))};b._calculateWorldTransform=function(){var a=this._DO_Props_,g=this._worldTransform,b=a._parent;g.identityMatrix(b._worldTransform);
this._getMatrix(g);var c=a._scrollRect;c&&g.append(1,0,0,1,-c.x,-c.y);this.worldAlpha=b.worldAlpha*a._alpha};b._render=function(a){};b.getBounds=function(a,g){void 0===g&&(g=!0);var b=this._DO_Props_,d=this._DO_Privs_,e=this._measureBounds(),f=b._hasWidthSet?b._explicitWidth:e.width,h=b._hasHeightSet?b._explicitHeight:e.height;d._rectW=e.width;d._rectH=e.height;this._clearSizeDirty();var k=e.x,e=e.y,m=0,p=0;g&&(0!=b._anchorX||0!=b._anchorY?(m=f*b._anchorX,p=h*b._anchorY):(m=b._anchorOffsetX,p=b._anchorOffsetY));
d._cacheBounds.initialize(k-m,e-p,f,h);b=d._cacheBounds;a||(a=new c.Rectangle);return a.initialize(b.x,b.y,b.width,b.height)};b.destroyCacheBounds=function(){var a=this._DO_Privs_;a._cacheBounds.x=0;a._cacheBounds.y=0;a._cacheBounds.width=0;a._cacheBounds.height=0};b._getConcatenatedMatrix=function(){for(var a=d.identityMatrixForGetConcatenated.identity(),g=this;null!=g;){var b=g._DO_Props_;0!=b._anchorX||0!=b._anchorY?(g=g._getSize(c.Rectangle.identity),a.prependTransform(b._x,b._y,b._scaleX,b._scaleY,
b._rotation,b._skewX,b._skewY,g.width*b._anchorX,g.height*b._anchorY)):a.prependTransform(b._x,b._y,b._scaleX,b._scaleY,b._rotation,b._skewX,b._skewY,b._anchorOffsetX,b._anchorOffsetY);b._scrollRect&&a.prepend(1,0,0,1,-b._scrollRect.x,-b._scrollRect.y);g=b._parent}return a};b.localToGlobal=function(a,g,b){void 0===a&&(a=0);void 0===g&&(g=0);var d=this._getConcatenatedMatrix();d.append(1,0,0,1,a,g);b||(b=new c.Point);b.x=d.tx;b.y=d.ty;return b};b.globalToLocal=function(a,g,b){void 0===a&&(a=0);void 0===
g&&(g=0);var d=this._getConcatenatedMatrix();d.invert();d.append(1,0,0,1,a,g);b||(b=new c.Point);b.x=d.tx;b.y=d.ty;return b};b.hitTest=function(a,g,b){void 0===b&&(b=!1);var d=this._DO_Props_;if(!d._visible||!b&&!d._touchEnabled)return null;b=this.getBounds(c.Rectangle.identity,!1);a-=b.x;g-=b.y;return 0<=a&&a<b.width&&0<=g&&g<b.height?this.mask||d._scrollRect?d._scrollRect&&a>d._scrollRect.x&&g>d._scrollRect.y&&a<d._scrollRect.x+d._scrollRect.width&&g<d._scrollRect.y+d._scrollRect.height||this.mask&&
this.mask.x<=a&&a<this.mask.x+this.mask.width&&this.mask.y<=g&&g<this.mask.y+this.mask.height?this:null:this:null};b.hitTestPoint=function(a,g,b){var d=this._DO_Privs_;a=this.globalToLocal(a,g);return b?(d._hitTestPointTexture||(d._hitTestPointTexture=new c.RenderTexture),b=d._hitTestPointTexture,b.drawToTexture(this),0!=b.getPixel32(a.x-d._hitTestPointTexture._offsetX,a.y-d._hitTestPointTexture._offsetY)[3]?!0:!1):!!this.hitTest(a.x,a.y,!0)};b._getMatrix=function(a){a||(a=c.Matrix.identity.identity());
var g=this._DO_Props_,b,d;d=this._getOffsetPoint();b=d.x;d=d.y;var e=this.__hack_local_matrix;e?(a.append(e.a,e.b,e.c,e.d,e.tx,e.ty),a.append(1,0,0,1,-b,-d)):a.appendTransform(g._x,g._y,g._scaleX,g._scaleY,g._rotation,g._skewX,g._skewY,b,d);return a};b._getSize=function(a){var g=this._DO_Props_;if(g._hasHeightSet&&g._hasWidthSet)return this._clearSizeDirty(),a.initialize(0,0,g._explicitWidth,g._explicitHeight);this._measureSize(a);g._hasWidthSet&&(a.width=g._explicitWidth);g._hasHeightSet&&(a.height=
g._explicitHeight);return a};b._measureSize=function(a){var g=this._DO_Privs_;this._DO_Props_._sizeDirty?(a=this._measureBounds(),g._rectW=a.width,g._rectH=a.height,this._clearSizeDirty()):(a.width=g._rectW,a.height=g._rectH);a.x=0;a.y=0;return a};b._measureBounds=function(){return c.Rectangle.identity.initialize(0,0,0,0)};b._getOffsetPoint=function(){var a=this._DO_Props_,g=a._anchorOffsetX,b=a._anchorOffsetY;if(0!=a._anchorX||0!=a._anchorY)b=this._getSize(c.Rectangle.identity),g=a._anchorX*b.width,
b=a._anchorY*b.height;a=c.Point.identity;a.x=g;a.y=b;return a};b._onAddToStage=function(){this._DO_Props_._stage=c.MainContext.instance.stage;c.DisplayObjectContainer.__EVENT__ADD_TO_STAGE_LIST.push(this)};b._onRemoveFromStage=function(){c.DisplayObjectContainer.__EVENT__REMOVE_FROM_STAGE_LIST.push(this)};Object.defineProperty(b,"stage",{get:function(){return this._DO_Props_._stage},enumerable:!0,configurable:!0});b.addEventListener=function(a,g,b,q,n){void 0===q&&(q=!1);void 0===n&&(n=0);e.prototype.addEventListener.call(this,
a,g,b,q,n);((q=a==c.Event.ENTER_FRAME)||a==c.Event.RENDER)&&this._insertEventBin(q?d._enterFrameCallBackList:d._renderCallBackList,g,b,n,this)};b.removeEventListener=function(a,g,b,q){void 0===q&&(q=!1);e.prototype.removeEventListener.call(this,a,g,b,q);((q=a==c.Event.ENTER_FRAME)||a==c.Event.RENDER)&&this._removeEventBin(q?d._enterFrameCallBackList:d._renderCallBackList,g,b,this)};b.dispatchEvent=function(a){if(!a._bubbles)return e.prototype.dispatchEvent.call(this,a);for(var g=[],b=this;b;)g.push(b),
b=b._DO_Props_._parent;a._reset();this._dispatchPropagationEvent(a,g);return!a._isDefaultPrevented};b._dispatchPropagationEvent=function(a,g,b){b=g.length;for(var c=1,d=b-1;0<=d;d--){var e=g[d];a._currentTarget=e;a._target=this;a._eventPhase=c;e._notifyListener(a);if(a._isPropagationStopped||a._isPropagationImmediateStopped)return}e=g[0];a._currentTarget=e;a._target=this;a._eventPhase=2;e._notifyListener(a);if(!a._isPropagationStopped&&!a._isPropagationImmediateStopped)for(c=3,d=1;d<b&&(e=g[d],a._currentTarget=
e,a._target=this,a._eventPhase=c,e._notifyListener(a),!a._isPropagationStopped&&!a._isPropagationImmediateStopped);d++);};b.willTrigger=function(a){for(var g=this;g;){if(g.hasEventListener(a))return!0;g=g._DO_Props_._parent}return!1};Object.defineProperty(b,"cacheAsBitmap",{get:function(){return this._DO_Props_._cacheAsBitmap},set:function(a){(this._DO_Props_._cacheAsBitmap=a)?c.callLater(this._makeBitmapCache,this):this._texture_to_render=null},enumerable:!0,configurable:!0});b._makeBitmapCache=
function(){this.renderTexture||(this.renderTexture=new c.RenderTexture);var a=this.renderTexture.drawToTexture(this);this._texture_to_render=a?this.renderTexture:null;return a};b._setCacheDirty=function(a){void 0===a&&(a=!0);this._DO_Privs_._cacheDirty=a};d.getTransformBounds=function(a,g){var b=a.x,c=a.y,d=a.width,e=a.height;(b||c)&&g.appendTransform(0,0,1,1,0,0,0,-b,-c);var f=d*g.a,d=d*g.b,k=e*g.c,e=e*g.d,m=g.tx,p=g.ty,r=m,s=m,t=p,v=p;(b=f+m)<r?r=b:b>s&&(s=b);(b=f+k+m)<r?r=b:b>s&&(s=b);(b=k+m)<
r?r=b:b>s&&(s=b);(c=d+p)<t?t=c:c>v&&(v=c);(c=d+e+p)<t?t=c:c>v&&(v=c);(c=e+p)<t?t=c:c>v&&(v=c);return a.initialize(r,t,s-r,v-t)};Object.defineProperty(b,"filters",{get:function(){return this._DO_Props_._filters},set:function(a){this._DO_Props_._filters=a},enumerable:!0,configurable:!0});Object.defineProperty(b,"transform",{get:function(){this._transform||(this._transform=new c.Transform(this));return this._transform},enumerable:!0,configurable:!0});d.color=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];
d.colorMatrixFilter=new c.ColorMatrixFilter;d.identityMatrixForGetConcatenated=new c.Matrix;d._enterFrameCallBackList=[];d._renderCallBackList=[];return d}(c.EventDispatcher);c.DisplayObject=f;f.prototype.__class__="egret.DisplayObject"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._touchChildren=!0;this._children=[];this._DO_Props_._isContainer=!0}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"touchChildren",{get:function(){return this._touchChildren},set:function(a){this._touchChildren=a},enumerable:!0,configurable:!0});Object.defineProperty(b,"numChildren",{get:function(){return this._children.length},enumerable:!0,configurable:!0});b.setChildIndex=function(a,g){this.doSetChildIndex(a,g)};b.doSetChildIndex=
function(a,g){var b=this._children.indexOf(a);0>b&&c.$error(1006);this._children.splice(b,1);0>g||this._children.length<=g?this._children.push(a):this._children.splice(g,0,a)};b.addChild=function(a){var g=this._children.length;a.parent==this&&g--;return this._doAddChild(a,g)};b.addChildAt=function(a,g){return this._doAddChild(a,g)};b._doAddChild=function(a,g,b){void 0===b&&(b=!0);if(a==this)return a;if(0>g||g>this._children.length)return c.$error(1007),a;var e=a.parent;if(e==this)return this.doSetChildIndex(a,
g),a;if(e){var n=e._children.indexOf(a);0<=n&&e._doRemoveChild(n)}this._children.splice(g,0,a);a._parentChanged(this);b&&a.dispatchEventWith(c.Event.ADDED,!0);if(this._DO_Props_._stage)for(a._onAddToStage(),g=d.__EVENT__ADD_TO_STAGE_LIST;0<g.length;)e=g.shift(),b&&e.dispatchEventWith(c.Event.ADDED_TO_STAGE);a._setDirty();this._setSizeDirty();return a};b.removeChild=function(a){a=this._children.indexOf(a);if(0<=a)return this._doRemoveChild(a);c.$error(1008);return null};b.removeChildAt=function(a){if(0<=
a&&a<this._children.length)return this._doRemoveChild(a);c.$error(1007);return null};b._doRemoveChild=function(a,g){void 0===g&&(g=!0);var b=this._children,e=b[a];g&&e.dispatchEventWith(c.Event.REMOVED,!0);if(this._DO_Props_._stage){e._onRemoveFromStage();for(var n=d.__EVENT__REMOVE_FROM_STAGE_LIST;0<n.length;){var f=n.shift();g&&f.dispatchEventWith(c.Event.REMOVED_FROM_STAGE);f._DO_Props_._stage=null}}e._parentChanged(null);b.splice(a,1);this._setSizeDirty();return e};b.getChildAt=function(a){if(0<=
a&&a<this._children.length)return this._children[a];c.$error(1007);return null};b.contains=function(a){for(;a;){if(a==this)return!0;a=a.parent}return!1};b.swapChildrenAt=function(a,g){0<=a&&a<this._children.length&&0<=g&&g<this._children.length?this._swapChildrenAt(a,g):c.$error(1007)};b.swapChildren=function(a,g){var b=this._children.indexOf(a),d=this._children.indexOf(g);-1==b||-1==d?c.$error(1008):this._swapChildrenAt(b,d)};b._swapChildrenAt=function(a,g){if(a!=g){var b=this._children,c=b[a];b[a]=
b[g];b[g]=c}};b.getChildIndex=function(a){return this._children.indexOf(a)};b.removeChildren=function(){for(var a=this._children.length-1;0<=a;a--)this._doRemoveChild(a)};b._updateTransform=function(){if(this._DO_Props_._visible){this._hasFilters()&&c.RenderCommand.push(this._setGlobalFilters,this);var a=this.mask||this._DO_Props_._scrollRect;a&&c.RenderCommand.push(this._pushMask,this);e.prototype._updateTransform.call(this);if(!this._DO_Props_._cacheAsBitmap||!this._texture_to_render)for(var g=
0,b=this._children,d=b.length;g<d;g++)b[g]._updateTransform();a&&c.RenderCommand.push(this._popMask,this);this._hasFilters()&&c.RenderCommand.push(this._removeGlobalFilters,this)}};b._render=function(a){if(!c.MainContext.__use_new_draw)for(var g=0,b=this._children,d=b.length;g<d;g++)b[g]._draw(a)};b._measureBounds=function(){for(var a=0,g=0,b=0,d=0,e=this._children,f=e.length,h=0;h<f;h++){var k=e[h];if(k.visible){var m=k.getBounds(c.Rectangle.identity,!1),p=m.x,r=m.y,s=m.width,m=m.height,k=k._getMatrix(),
k=c.DisplayObject.getTransformBounds(c.Rectangle.identity.initialize(p,r,s,m),k),p=k.x,r=k.y,s=k.width+k.x,k=k.height+k.y;if(p<a||0==h)a=p;if(s>g||0==h)g=s;if(r<b||0==h)b=r;if(k>d||0==h)d=k}}return c.Rectangle.identity.initialize(a,b,g-a,d-b)};b.hitTest=function(a,g,b){void 0===b&&(b=!1);var d;if(!this._DO_Props_._visible)return null;if(this._DO_Props_._scrollRect){if(a<this._DO_Props_._scrollRect.x||g<this._DO_Props_._scrollRect.y||a>this._DO_Props_._scrollRect.x+this._DO_Props_._scrollRect.width||
g>this._DO_Props_._scrollRect.y+this._DO_Props_._scrollRect.height)return null}else if(this.mask&&(this.mask.x>a||a>this.mask.x+this.mask.width||this.mask.y>g||g>this.mask.y+this.mask.height))return null;for(var n=this._children,f=this._touchChildren,h=n.length-1;0<=h;h--){var k=n[h],m=k._getMatrix(),p=k.scrollRect;p&&m.append(1,0,0,1,-p.x,-p.y);m.invert();m=c.Matrix.transformCoords(m,a,g);if(k=k.hitTest(m.x,m.y,!0)){if(!f)return this;if(k._DO_Props_._touchEnabled&&f)return k;d=this}}return d?d:this._texture_to_render?
e.prototype.hitTest.call(this,a,g,b):null};b._onAddToStage=function(){e.prototype._onAddToStage.call(this);for(var a=this._children.length,g=0;g<a;g++)this._children[g]._onAddToStage()};b._onRemoveFromStage=function(){e.prototype._onRemoveFromStage.call(this);for(var a=this._children,g=a.length,b=0;b<g;b++)a[b]._onRemoveFromStage()};b.getChildByName=function(a){for(var g=this._children,b=g.length,c,d=0;d<b;d++)if(c=g[d],c.name==a)return c;return null};d.__EVENT__ADD_TO_STAGE_LIST=[];d.__EVENT__REMOVE_FROM_STAGE_LIST=
[];return d}(c.DisplayObject);c.DisplayObjectContainer=f;f.prototype.__class__="egret.DisplayObjectContainer"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.NO_BORDER="noBorder";c.NO_SCALE="noScale";c.SHOW_ALL="showAll";c.EXACT_FIT="exactFit";return c}();c.StageScaleMode=f;f.prototype.__class__="egret.StageScaleMode"})(egret||(egret={}));
(function(c){var f=function(e){function d(a,g){void 0===a&&(a=480);void 0===g&&(g=800);e.call(this);this._changeSizeDispatchFlag=!0;this._scaleMode="";this._stageHeight=this._stageWidth=NaN;this._frameRate=60;this.touchEnabled=!0;this._DO_Props_._stage=this;this._stageWidth=a;this._stageHeight=g}__extends(d,e);var b=d.prototype;b.invalidate=function(){d._invalidateRenderFlag=!0};Object.defineProperty(b,"scaleMode",{get:function(){return this._scaleMode},set:function(a){this._scaleMode!=a&&(this._scaleMode=
a,this.setResolutionPolicy())},enumerable:!0,configurable:!0});b.changeSize=function(){this._changeSizeDispatchFlag&&(this.setResolutionPolicy(),this.dispatchEventWith(c.Event.RESIZE))};b.setResolutionPolicy=function(){var a=d.SCALE_MODE_ENUM[this._scaleMode];a||c.$error(1024);var g=new c.EqualToFrame,a=new c.ResolutionPolicy(g,a);c.StageDelegate.getInstance()._setResolutionPolicy(a);this._stageWidth=c.StageDelegate.getInstance()._stageWidth;this._stageHeight=c.StageDelegate.getInstance()._stageHeight};
Object.defineProperty(b,"stageWidth",{get:function(){return this._stageWidth},enumerable:!0,configurable:!0});Object.defineProperty(b,"stageHeight",{get:function(){return this._stageHeight},enumerable:!0,configurable:!0});Object.defineProperty(b,"frameRate",{get:function(){return this._frameRate},set:function(a){this._frameRate=a;c.MainContext.instance.deviceContext.setFrameRate(a)},enumerable:!0,configurable:!0});b.hitTest=function(a,g,b){if(!this._DO_Props_._touchEnabled)return null;var d;if(!this._touchChildren)return this;
b=this._children;for(var e=b.length-1;0<=e;e--){d=b[e];var f=d._getMatrix(),h=d.scrollRect;h&&f.append(1,0,0,1,-h.x,-h.y);f.invert();f=c.Matrix.transformCoords(f,a,g);if((d=d.hitTest(f.x,f.y,!0))&&d.touchEnabled)return d}return this};b.getBounds=function(a){a||(a=new c.Rectangle);return a.initialize(0,0,this._stageWidth,this._stageHeight)};b._updateTransform=function(){for(var a=0,g=this._children.length;a<g;a++)this._children[a]._updateTransform()};Object.defineProperty(b,"focus",{get:function(){return null},
enumerable:!0,configurable:!0});d.registerScaleMode=function(a,g,b){d.SCALE_MODE_ENUM[a]&&!b?c.$warn(1009,a):d.SCALE_MODE_ENUM[a]=g};d._invalidateRenderFlag=!1;d.SCALE_MODE_ENUM={};return d}(c.DisplayObjectContainer);c.Stage=f;f.prototype.__class__="egret.Stage"})(egret||(egret={}));egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.NO_SCALE]=new egret.NoScale;egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.SHOW_ALL]=new egret.ShowAll;egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.NO_BORDER]=new egret.FixedWidth;
egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.EXACT_FIT]=new egret.FullScreen;
(function(c){var f=function(){return function(){this._horizontalScrollPolicy=this._verticalScrollPolicy="auto";this._scrollTop=this._scrollLeft=0;this._vCanScroll=this._hCanScroll=!1;this._lastTouchPosition=new c.Point(0,0);this._touchStartPosition=new c.Point(0,0);this._scrollStarted=!1;this._lastTouchTime=0;this._lastTouchEvent=null;this._velocitys=[];this._isVTweenPlaying=this._isHTweenPlaying=!1;this._vScrollTween=this._hScrollTween=null}}();c.ScrollViewProperties=f;f.prototype.__class__="egret.ScrollViewProperties"})(egret||
(egret={}));
(function(c){var f=function(e){function d(a){void 0===a&&(a=null);e.call(this);this.scrollBeginThreshold=10;this.scrollSpeed=1;this.touchBeginTimer=this.delayTouchBeginEvent=this._content=null;this.touchEnabled=!0;this._ScrV_Props_=new c.ScrollViewProperties;a&&this.setContent(a)}__extends(d,e);var b=d.prototype;b.setContent=function(a){this._content!==a&&(this.removeContent(),a&&(this._content=a,e.prototype.addChild.call(this,a),this._addEvents()))};b.removeContent=function(){this._content&&(this._removeEvents(),
e.prototype.removeChildAt.call(this,0));this._content=null};Object.defineProperty(b,"verticalScrollPolicy",{get:function(){return this._ScrV_Props_._verticalScrollPolicy},set:function(a){a!=this._ScrV_Props_._verticalScrollPolicy&&(this._ScrV_Props_._verticalScrollPolicy=a)},enumerable:!0,configurable:!0});Object.defineProperty(b,"horizontalScrollPolicy",{get:function(){return this._ScrV_Props_._horizontalScrollPolicy},set:function(a){a!=this._ScrV_Props_._horizontalScrollPolicy&&(this._ScrV_Props_._horizontalScrollPolicy=
a)},enumerable:!0,configurable:!0});Object.defineProperty(b,"scrollLeft",{get:function(){return this._ScrV_Props_._scrollLeft},set:function(a){a!=this._ScrV_Props_._scrollLeft&&(this._ScrV_Props_._scrollLeft=a,this._validatePosition(!1,!0),this._updateContentPosition())},enumerable:!0,configurable:!0});Object.defineProperty(b,"scrollTop",{get:function(){return this._ScrV_Props_._scrollTop},set:function(a){a!=this._ScrV_Props_._scrollTop&&(this._ScrV_Props_._scrollTop=a,this._validatePosition(!0,!1),
this._updateContentPosition())},enumerable:!0,configurable:!0});b.setScrollPosition=function(a,g,b){void 0===b&&(b=!1);if(!b||0!=a||0!=g)if(b||this._ScrV_Props_._scrollTop!=a||this._ScrV_Props_._scrollLeft!=g){if(b){b=this._isOnTheEdge(!0);var c=this._isOnTheEdge(!1);this._ScrV_Props_._scrollTop+=b?a/2:a;this._ScrV_Props_._scrollLeft+=c?g/2:g}else this._ScrV_Props_._scrollTop=a,this._ScrV_Props_._scrollLeft=g;this._validatePosition(!0,!0);this._updateContentPosition()}};b._isOnTheEdge=function(a){void 0===
a&&(a=!0);var g=this._ScrV_Props_._scrollTop,b=this._ScrV_Props_._scrollLeft;return a?0>g||g>this.getMaxScrollTop():0>b||b>this.getMaxScrollLeft()};b._validatePosition=function(a,g){void 0===a&&(a=!1);void 0===g&&(g=!1);if(a){var b=this.height,c=this._getContentHeight();this._ScrV_Props_._scrollTop=Math.max(this._ScrV_Props_._scrollTop,(0-b)/2);this._ScrV_Props_._scrollTop=Math.min(this._ScrV_Props_._scrollTop,c>b?c-b/2:b/2)}g&&(b=this.width,c=this._getContentWidth(),this._ScrV_Props_._scrollLeft=
Math.max(this._ScrV_Props_._scrollLeft,(0-b)/2),this._ScrV_Props_._scrollLeft=Math.min(this._ScrV_Props_._scrollLeft,c>b?c-b/2:b/2))};b._setWidth=function(a){this._DO_Props_._explicitWidth!=a&&(e.prototype._setWidth.call(this,a),this._updateContentPosition())};b._setHeight=function(a){this._DO_Props_._explicitHeight!=a&&(e.prototype._setHeight.call(this,a),this._updateContentPosition())};b._updateContentPosition=function(){var a=this.getBounds(c.Rectangle.identity),g=a.height,a=a.width;this.scrollRect=
new c.Rectangle(Math.round(this._ScrV_Props_._scrollLeft),Math.round(this._ScrV_Props_._scrollTop),a,g);this.dispatchEvent(new c.Event(c.Event.CHANGE))};b._checkScrollPolicy=function(){var a=this.__checkScrollPolicy(this._ScrV_Props_._horizontalScrollPolicy,this._getContentWidth(),this.width);this._ScrV_Props_._hCanScroll=a;var g=this.__checkScrollPolicy(this._ScrV_Props_._verticalScrollPolicy,this._getContentHeight(),this.height);this._ScrV_Props_._vCanScroll=g;return a||g};b.__checkScrollPolicy=
function(a,g,b){return"on"==a?!0:"off"==a?!1:g>b};b._addEvents=function(){this.addEventListener(c.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this);this.addEventListener(c.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0);this.addEventListener(c.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)};b._removeEvents=function(){this.removeEventListener(c.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this);this.removeEventListener(c.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0);this.removeEventListener(c.TouchEvent.TOUCH_END,
this._onTouchEndCapture,this,!0)};b._onTouchBegin=function(a){!a._isDefaultPrevented&&this._checkScrollPolicy()&&(this._ScrV_Props_._touchStartPosition.x=a.stageX,this._ScrV_Props_._touchStartPosition.y=a.stageY,(this._ScrV_Props_._isHTweenPlaying||this._ScrV_Props_._isVTweenPlaying)&&this._onScrollFinished(),this.stage.addEventListener(c.TouchEvent.TOUCH_MOVE,this._onTouchMove,this),this.stage.addEventListener(c.TouchEvent.TOUCH_END,this._onTouchEnd,this),this.stage.addEventListener(c.TouchEvent.LEAVE_STAGE,
this._onTouchEnd,this),this.addEventListener(c.Event.ENTER_FRAME,this._onEnterFrame,this),this._logTouchEvent(a),a.preventDefault())};b._onTouchBeginCapture=function(a){var g=this._checkScrollPolicy();if(g){for(var b=a.target;b!=this;){if("_checkScrollPolicy"in b&&(g=b._checkScrollPolicy()))return;b=b.parent}a.stopPropagation();this.delayTouchBeginEvent=this.cloneTouchEvent(a);this.touchBeginTimer||(this.touchBeginTimer=new c.Timer(100,1),this.touchBeginTimer.addEventListener(c.TimerEvent.TIMER_COMPLETE,
this._onTouchBeginTimer,this));this.touchBeginTimer.start();this._onTouchBegin(a)}};b._onTouchEndCapture=function(a){this.delayTouchBeginEvent&&this._onTouchBeginTimer()};b._onTouchBeginTimer=function(){this.touchBeginTimer.stop();var a=this.delayTouchBeginEvent;this.delayTouchBeginEvent=null;this.stage&&this.dispatchPropagationEvent(a)};b.dispatchPropagationEvent=function(a){for(var g=[],b=a._target,c=0;b;)b==this&&(c=g.length),g.push(b),b=b.parent;b=g.slice(0,c);b=b.reverse();g=b.concat(g);this._dispatchPropagationEvent(a,
g,c)};b._dispatchPropagationEvent=function(a,g,b){for(var c=g.length,d=0;d<c;d++){var e=g[d];a._currentTarget=e;a._eventPhase=d<b?1:d==b?2:3;e._notifyListener(a);if(a._isPropagationStopped||a._isPropagationImmediateStopped)break}};b._onTouchMove=function(a){if(this._ScrV_Props_._lastTouchPosition.x!=a.stageX||this._ScrV_Props_._lastTouchPosition.y!=a.stageY){if(!this._ScrV_Props_._scrollStarted){var g=a.stageX-this._ScrV_Props_._touchStartPosition.x,b=a.stageY-this._ScrV_Props_._touchStartPosition.y;
if(Math.sqrt(g*g+b*b)<this.scrollBeginThreshold){this._logTouchEvent(a);return}}this._ScrV_Props_._scrollStarted=!0;this.delayTouchBeginEvent&&(this.delayTouchBeginEvent=null,this.touchBeginTimer.stop());this.touchChildren=!1;g=this._getPointChange(a);this.setScrollPosition(g.y,g.x,!0);this._calcVelocitys(a);this._logTouchEvent(a)}};b._onTouchEnd=function(a){this.touchChildren=!0;this._ScrV_Props_._scrollStarted=!1;c.MainContext.instance.stage.removeEventListener(c.TouchEvent.TOUCH_MOVE,this._onTouchMove,
this);c.MainContext.instance.stage.removeEventListener(c.TouchEvent.TOUCH_END,this._onTouchEnd,this);c.MainContext.instance.stage.removeEventListener(c.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this);this.removeEventListener(c.Event.ENTER_FRAME,this._onEnterFrame,this);this._moveAfterTouchEnd()};b._onEnterFrame=function(a){a=c.getTimer();100<a-this._ScrV_Props_._lastTouchTime&&300>a-this._ScrV_Props_._lastTouchTime&&this._calcVelocitys(this._ScrV_Props_._lastTouchEvent)};b._logTouchEvent=function(a){this._ScrV_Props_._lastTouchPosition.x=
a.stageX;this._ScrV_Props_._lastTouchPosition.y=a.stageY;this._ScrV_Props_._lastTouchEvent=this.cloneTouchEvent(a);this._ScrV_Props_._lastTouchTime=c.getTimer()};b._getPointChange=function(a){return{x:!1===this._ScrV_Props_._hCanScroll?0:this._ScrV_Props_._lastTouchPosition.x-a.stageX,y:!1===this._ScrV_Props_._vCanScroll?0:this._ScrV_Props_._lastTouchPosition.y-a.stageY}};b._calcVelocitys=function(a){var g=c.getTimer();if(0==this._ScrV_Props_._lastTouchTime)this._ScrV_Props_._lastTouchTime=g;else{var b=
this._getPointChange(a),g=g-this._ScrV_Props_._lastTouchTime;b.x/=g;b.y/=g;this._ScrV_Props_._velocitys.push(b);5<this._ScrV_Props_._velocitys.length&&this._ScrV_Props_._velocitys.shift();this._ScrV_Props_._lastTouchPosition.x=a.stageX;this._ScrV_Props_._lastTouchPosition.y=a.stageY}};b._getContentWidth=function(){return this._content.explicitWidth||this._content.width};b._getContentHeight=function(){return this._content.explicitHeight||this._content.height};b.getMaxScrollLeft=function(){var a=this._getContentWidth()-
this.width;return Math.max(0,a)};b.getMaxScrollTop=function(){var a=this._getContentHeight()-this.height;return Math.max(0,a)};b._moveAfterTouchEnd=function(){if(0!=this._ScrV_Props_._velocitys.length){for(var a=0,g=0,b=0,c=0;c<this._ScrV_Props_._velocitys.length;c++)var e=this._ScrV_Props_._velocitys[c],f=d.weight[c],a=a+e.x*f,g=g+e.y*f,b=b+f;this._ScrV_Props_._velocitys.length=0;0>=this.scrollSpeed&&(this.scrollSpeed=1);a=a/b*this.scrollSpeed;g=g/b*this.scrollSpeed;e=Math.abs(a);b=Math.abs(g);f=
this.getMaxScrollLeft();c=this.getMaxScrollTop();a=0.02<e?this.getAnimationDatas(a,this._ScrV_Props_._scrollLeft,f):{position:this._ScrV_Props_._scrollLeft,duration:1};g=0.02<b?this.getAnimationDatas(g,this._ScrV_Props_._scrollTop,c):{position:this._ScrV_Props_._scrollTop,duration:1};this.setScrollLeft(a.position,a.duration);this.setScrollTop(g.position,g.duration)}};b._onTweenFinished=function(a){a==this._ScrV_Props_._vScrollTween&&(this._ScrV_Props_._isVTweenPlaying=!1);a==this._ScrV_Props_._hScrollTween&&
(this._ScrV_Props_._isHTweenPlaying=!1);!1==this._ScrV_Props_._isHTweenPlaying&&!1==this._ScrV_Props_._isVTweenPlaying&&this._onScrollFinished()};b._onScrollStarted=function(){};b._onScrollFinished=function(){c.Tween.removeTweens(this);this._ScrV_Props_._hScrollTween=null;this._ScrV_Props_._vScrollTween=null;this._ScrV_Props_._isHTweenPlaying=!1;this._ScrV_Props_._isVTweenPlaying=!1;this.dispatchEvent(new c.Event(c.Event.COMPLETE))};b.setScrollTop=function(a,g){void 0===g&&(g=0);var b=Math.min(this.getMaxScrollTop(),
Math.max(a,0));if(0==g)return this.scrollTop=b,null;var d=c.Tween.get(this).to({scrollTop:a},g,c.Ease.quartOut);b!=a&&d.to({scrollTop:b},300,c.Ease.quintOut);this._ScrV_Props_._isVTweenPlaying=!0;this._ScrV_Props_._vScrollTween=d;d.call(this._onTweenFinished,this,[d]);this._ScrV_Props_._isHTweenPlaying||this._onScrollStarted();return d};b.setScrollLeft=function(a,g){void 0===g&&(g=0);var b=Math.min(this.getMaxScrollLeft(),Math.max(a,0));if(0==g)return this.scrollLeft=b,null;var d=c.Tween.get(this).to({scrollLeft:a},
g,c.Ease.quartOut);b!=a&&d.to({scrollLeft:b},300,c.Ease.quintOut);this._ScrV_Props_._isHTweenPlaying=!0;this._ScrV_Props_._hScrollTween=d;d.call(this._onTweenFinished,this,[d]);this._ScrV_Props_._isVTweenPlaying||this._onScrollStarted();return d};b.getAnimationDatas=function(a,g,b){var c=Math.abs(a),d=0,e=g+500*a;if(0>e||e>b)for(e=g;Infinity!=Math.abs(a)&&0.02<Math.abs(a);)e+=a,a=0>e||e>b?0.998*a*0.95:0.998*a,d++;else d=500*-Math.log(0.02/c);return{position:Math.min(b+50,Math.max(e,-50)),duration:d}};
b.cloneTouchEvent=function(a){var g=new c.TouchEvent(a._type,a._bubbles,a.cancelable);g.touchPointID=a.touchPointID;g._stageX=a._stageX;g._stageY=a._stageY;g.ctrlKey=a.ctrlKey;g.altKey=a.altKey;g.shiftKey=a.shiftKey;g.touchDown=a.touchDown;g._isDefaultPrevented=!1;g._target=a._target;return g};b.throwNotSupportedError=function(){c.$error(1023)};b.addChild=function(a){this.throwNotSupportedError();return null};b.addChildAt=function(a,g){this.throwNotSupportedError();return null};b.removeChild=function(a){this.throwNotSupportedError();
return null};b.removeChildAt=function(a){this.throwNotSupportedError();return null};b.setChildIndex=function(a,g){this.throwNotSupportedError()};b.swapChildren=function(a,g){this.throwNotSupportedError()};b.swapChildrenAt=function(a,g){this.throwNotSupportedError()};b.hitTest=function(a,g,b){void 0===b&&(b=!1);var d=e.prototype.hitTest.call(this,a,g,b);return d?d:c.DisplayObject.prototype.hitTest.call(this,a,g,b)};d.weight=[1,1.33,1.66,2,2.33];return d}(c.DisplayObjectContainer);c.ScrollView=f;f.prototype.__class__=
"egret.ScrollView"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.REPEAT="repeat";c.SCALE="scale";return c}();c.BitmapFillMode=f;f.prototype.__class__="egret.BitmapFillMode"})(egret||(egret={}));
(function(c){var f=function(e){function d(a){e.call(this);this.scale9Grid=this._texture=null;this.fillMode="scale";a&&(this._texture=a,this._setSizeDirty());this.needDraw=!0}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"texture",{get:function(){return this._texture},set:function(a){a!=this._texture&&(this._setSizeDirty(),this._texture=a)},enumerable:!0,configurable:!0});b._render=function(a){var g=this._texture;g?(this._texture_to_render=g,d._drawBitmap(a,this._DO_Props_._hasWidthSet?
this._DO_Props_._explicitWidth:g._textureWidth,this._DO_Props_._hasHeightSet?this._DO_Props_._explicitHeight:g._textureHeight,this)):this._texture_to_render=null};d._drawBitmap=function(a,g,b,c){var e=c._texture_to_render;if(e){var f=e._textureWidth,h=e._textureHeight;if("scale"==c.fillMode){var k=c.scale9Grid||e.scale9Grid;if(k&&f-k.width<g&&h-k.height<b)d.drawScale9GridImage(a,c,k,g,b);else{var k=e._offsetX,m=e._offsetY,p=e._bitmapWidth||f,r=e._bitmapHeight||h;g/=f;k=Math.round(k*g);g=Math.round(p*
g);b/=h;m=Math.round(m*b);b=Math.round(r*b);d.renderFilter.drawImage(a,c,e._bitmapX,e._bitmapY,p,r,k,m,g,b)}}else d.drawRepeatImage(a,c,g,b,c.fillMode)}};d.drawRepeatImage=function(a,g,b,d,e){var f=g._texture_to_render;if(f){var h=f._textureWidth,k=f._textureHeight,m=f._bitmapX,p=f._bitmapY,h=f._bitmapWidth||h,k=f._bitmapHeight||k,r=f._offsetX,f=f._offsetY;c.RenderFilter.getInstance().drawImage(a,g,m,p,h,k,r,f,b,d,e)}};d.drawScale9GridImage=function(a,g,b,d,e){var f=c.MainContext.instance.rendererContext._texture_scale_factor,
h=g._texture_to_render;if(h&&b){var k=h._textureWidth,m=h._textureHeight,p=h._bitmapX,r=h._bitmapY,s=h._bitmapWidth||k,t=h._bitmapHeight||m;d-=k-s;e-=m-t;if(!a.drawImageScale9(h,p,r,s,t,h._offsetX,h._offsetY,d,e,b)){k=h._offsetX/f;m=h._offsetY/f;h=c.RenderFilter.getInstance();b=c.Rectangle.identity.initialize(b.x-Math.round(k),b.y-Math.round(k),b.width,b.height);k=Math.round(k);m=Math.round(m);b.y==b.bottom&&(b.bottom<t?b.bottom++:b.y--);b.x==b.right&&(b.right<s?b.right++:b.x--);var v=p+b.x/f,x=p+
b.right/f,w=s-b.right,z=r+b.y/f,f=r+b.bottom/f,y=t-b.bottom,C=k+b.x,A=m+b.y,t=e-(t-b.bottom),s=d-(s-b.right);h.drawImage(a,g,p,r,b.x,b.y,k,m,b.x,b.y);h.drawImage(a,g,v,r,b.width,b.y,C,m,s-b.x,b.y);h.drawImage(a,g,x,r,w,b.y,k+s,m,d-s,b.y);h.drawImage(a,g,p,z,b.x,b.height,k,A,b.x,t-b.y);h.drawImage(a,g,v,z,b.width,b.height,C,A,s-b.x,t-b.y);h.drawImage(a,g,x,z,w,b.height,k+s,A,d-s,t-b.y);h.drawImage(a,g,p,f,b.x,y,k,m+t,b.x,e-t);h.drawImage(a,g,v,f,b.width,y,C,m+t,s-b.x,e-t);h.drawImage(a,g,x,f,w,y,k+
s,m+t,d-s,e-t)}}};b._measureBounds=function(){var a=this._texture;return a?c.Rectangle.identity.initialize(0,0,a._textureWidth,a._textureHeight):e.prototype._measureBounds.call(this)};d.renderFilter=c.RenderFilter.getInstance();return d}(c.DisplayObject);c.Bitmap=f;f.prototype.__class__="egret.Bitmap"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._text="";this._textChanged=!1;this._font=null;this._fontChanged=!1;this._textOffsetY=this._textOffsetX=this._textHeight=this._textWidth=this._lineSpacing=this._letterSpacing=0;this.textLinesChange=!0;this._lineHeights=[];this.needDraw=this.cacheAsBitmap=!0}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"text",{get:function(){return this._text},set:function(a){this.$setText(a)},enumerable:!0,configurable:!0});b.$setText=function(a){this._text!=
a&&(this._textChanged=!0,this._text=a,this._setSizeDirty())};Object.defineProperty(b,"font",{get:function(){return this._font},set:function(a){this.$setFont(a)},enumerable:!0,configurable:!0});b.$setFont=function(a){this._font!=a&&(this._font=a,this._fontChanged=!0,this._setSizeDirty())};Object.defineProperty(b,"letterSpacing",{get:function(){return this._letterSpacing},set:function(a){this._setLetterSpacing(a)},enumerable:!0,configurable:!0});b._setLetterSpacing=function(a){this._letterSpacing=a;
this._setSizeDirty()};Object.defineProperty(b,"lineSpacing",{get:function(){return this._lineSpacing},set:function(a){this._setLineSpacing(a)},enumerable:!0,configurable:!0});b._setLineSpacing=function(a){this._lineSpacing=a};b._setSizeDirty=function(){e.prototype._setSizeDirty.call(this);this.textLinesChange=!0};b._render=function(a){var g=this._getTextLines(),b=g.length;if(0!=b){for(var e=this._font,n=e._getFirstCharHeight(),n=Math.ceil(n*d.EMPTY_FACTOR),f=0,h=this._DO_Props_._hasHeightSet?this._DO_Props_._explicitHeight:
Number.POSITIVE_INFINITY,k=this._lineHeights,m=0;m<b;m++){var p=k[m];if(0<m&&f+p>h)break;for(var r=g[m],s=r.length,t=0,v=0;v<s;v++){var x=r.charAt(v),w=e.getTexture(x);if(w){var x=w._bitmapWidth||w._textureWidth,z=w._bitmapHeight||w._textureHeight;this._texture_to_render=w;c.RenderFilter.getInstance().drawImage(a,this,w._bitmapX,w._bitmapY,x,z,t+w._offsetX,f+w._offsetY,x,z);t+=w._textureWidth+this._letterSpacing}else" "==x?t+=n:c.$warn(1011,x)}f+=p+this._lineSpacing}this._texture_to_render=null}};
b._measureBounds=function(){var a=this._getTextLines();return 0==a.length?c.Rectangle.identity.initialize(0,0,0,0):c.Rectangle.identity.initialize(this._textOffsetX,this._textOffsetY,this._textWidth-this._textOffsetX,this._textHeight-this._textOffsetY+(a.length-1)*this._lineSpacing)};b._getTextLines=function(){if(!this.textLinesChange)return this._textLines;var a=[];this._textLines=a;this.textLinesChange=!1;var g=[];this._lineHeights=g;if(!this._text||!this._font)return a;for(var b=0,e=0,n=0,f=0,
h=this._DO_Props_._hasWidthSet,k=this._DO_Props_._hasWidthSet?this._DO_Props_._explicitWidth:Number.POSITIVE_INFINITY,m=this._font,p=m._getFirstCharHeight(),r=Math.ceil(p*d.EMPTY_FACTOR),s=this._text.split(/(?:\r\n|\r|\n)/),t=s.length,v=!0,x=0;x<t;x++){for(var w=s[x],z=w.length,y=0,C=0,A=!0,B=0;B<z;B++){A||(C+=this._letterSpacing);var D=w.charAt(B),E,G=0,H=0,F=m.getTexture(D);if(F)D=F._textureWidth,E=F._textureHeight,G=F._offsetX,H=F._offsetY;else if(" "==D)D=r,E=p;else{c.$warn(1011,D);A&&(A=!1);
continue}A&&(A=!1,n=Math.min(G,n));v&&(f=Math.min(H,f));h&&0<B&&C+D>k?(a.push(w.substring(0,B)),g.push(y),e+=y,b=Math.max(C,b),w=w.substring(B),z=w.length,B=0,C=D,y=E):(C+=D,y=Math.max(E,y))}v&&(v=!1);a.push(w);g.push(y);e+=y;b=Math.max(C,b)}this._textWidth=b;this._textHeight=e;this._textOffsetX=n;this._textOffsetY=f;return a};d.EMPTY_FACTOR=0.33;return d}(c.DisplayObject);c.BitmapText=f;f.prototype.__class__="egret.BitmapText"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.LINEAR="linear";c.RADIAL="radial";return c}();c.GradientType=f;f.prototype.__class__="egret.GradientType"})(egret||(egret={}));
(function(c){var f=function(){function d(){this.fillStyle=this.strokeStyle=this.commandQueue=this._renderContext=null;this._dirty=!1;this.lineY=this.lineX=0;this._firstCheck=!0;this._lastY=this._lastX=this._maxY=this._maxX=this._minY=this._minX=0;this.commandQueue=[]}var b=d.prototype;b.beginFill=function(a,g){void 0===g&&(g=1);this.fillStyle=this._parseColor(a,g);this._pushCommand(new e(this._setStyle,this,[this.fillStyle]))};b._parseColor=function(a,g){return"rgba("+(a>>16)+","+((a&65280)>>8)+","+
(a&255)+","+g+")"};b._setStyle=function(a){c.Graphics._currentFillStyle=a;this._renderContext.fillStyle=a;this._renderContext.beginPath()};b.beginGradientFill=function(a,g,b,c,d){void 0===d&&(d=null);this.fillStyle=a=this.getGradient(a,g,b,c,d);this._pushCommand(new e(this._setStyle,this,[a]))};b.getGradient=function(a,g,b,d,e){var f=c.MainContext.instance.rendererContext,h=new c.Matrix;e?(h.a=819.2*e.a,h.b=819.2*e.b,h.c=819.2*e.c,h.d=819.2*e.d,h.tx=e.tx,h.ty=e.ty):(h.a=100,h.d=100);a=a==c.GradientType.LINEAR?
f.createLinearGradient(-1,0,1,0):f.createRadialGradient(0,0,0,0,0,1);e=g.length;for(f=0;f<e;f++)a.addColorStop(d[f]/255,this._parseColor(g[f],b[f]));a.matrix=h;return a};b.drawRect=function(a,g,b,c){this._pushCommand(new e(function(a,g,b,c){this._renderContext.beginPath();this._renderContext.rect(a,g,b,c);this._renderContext.closePath()},this,[a,g,b,c]));this._checkRect(a,g,b,c)};b.drawCircle=function(a,g,b){this._pushCommand(new e(function(a,g,b){this._renderContext.beginPath();this._renderContext.arc(a,
g,b,0,2*Math.PI);this._renderContext.closePath()},this,[a,g,b]));this._checkRect(a-b,g-b,2*b,2*b)};b.drawRoundRect=function(a,g,b,c,d,f){this._pushCommand(new e(function(a,g,b,c,d,u){d/=2;u=u?u/2:d;b=a+b;c=g+c;var e=c-u;this._renderContext.beginPath();this._renderContext.moveTo(b,e);this._renderContext.quadraticCurveTo(b,c,b-d,c);this._renderContext.lineTo(a+d,c);this._renderContext.quadraticCurveTo(a,c,a,c-u);this._renderContext.lineTo(a,g+u);this._renderContext.quadraticCurveTo(a,g,a+d,g);this._renderContext.lineTo(b-
d,g);this._renderContext.quadraticCurveTo(b,g,b,g+u);this._renderContext.lineTo(b,e);this._renderContext.closePath()},this,[a,g,b,c,d,f]));this._checkRect(a,g,b,c)};b.drawEllipse=function(a,g,b,c){this._pushCommand(new e(function(a,g,b,c){a+=b/2;g+=c/2;var d=b>c?b:c;b/=d;c/=d;d/=2;this._renderContext.scale(b,c);this._renderContext.beginPath();this._renderContext.arc(a/b,g/c,d,0,2*Math.PI);this._renderContext.closePath();this._renderContext.scale(1/b,1/c)},this,[a,g,b,c]));this._checkRect(a,g,b,c)};
b.lineStyle=function(a,g,b,c,d,f,h,k){void 0===a&&(a=NaN);void 0===g&&(g=0);void 0===b&&(b=1);void 0===c&&(c=!1);void 0===d&&(d="normal");void 0===f&&(f=null);void 0===h&&(h=null);void 0===k&&(k=3);this.strokeStyle&&(this._createEndLineCommand(),this._pushCommand(this._endLineCommand));this.strokeStyle=this._parseColor(g,b);this._pushCommand(new e(function(a,g){this._renderContext.lineWidth=a;this._renderContext.strokeStyle=g;this._renderContext.beginPath()},this,[a,this.strokeStyle]));this.moveTo(this.lineX,
this.lineY)};b.lineTo=function(a,g){this._pushCommand(new e(function(a,g){this._renderContext.lineTo(a,g)},this,[a,g]));this._checkPoint(this.lineX,this.lineY);this.lineX=a;this.lineY=g;this._checkPoint(a,g)};b.curveTo=function(a,g,b,c){this._pushCommand(new e(function(a,g,b,c){this._renderContext.quadraticCurveTo(a,g,b,c)},this,[a,g,b,c]));this._checkPoint(this.lineX,this.lineY);this.lineX=b;this.lineY=c;this._checkPoint(a,g);this._checkPoint(b,c)};b.cubicCurveTo=function(a,g,b,c,d,f){this._pushCommand(new e(function(a,
g,b,c,d,u){this._renderContext.bezierCurveTo(a,g,b,c,d,u)},this,[a,g,b,c,d,f]));this._checkPoint(this.lineX,this.lineY);this.lineX=d;this.lineY=f;this._checkPoint(a,g);this._checkPoint(b,c);this._checkPoint(d,f)};b.moveTo=function(a,g){this._pushCommand(new e(function(a,g){this._renderContext.moveTo(a,g)},this,[a,g]));this.lineX=a;this.lineY=g};b.clear=function(){this.lineY=this.lineX=this.commandQueue.length=0;this.fillStyle=this.strokeStyle=null;this._maxY=this._maxX=this._minY=this._minX=0;this._dirty=
this._firstCheck=!0};b.endFill=function(){null!=this.fillStyle&&(this._fill(),this.fillStyle=null)};b._beginDraw=function(a){};b._endDraw=function(a){};b._draw=function(a){var g=this.commandQueue.length;if(0!=g){this._beginDraw(a);for(var b=0;b<g;b++){var c=this.commandQueue[b];c.method.apply(c.thisObject,c.args)}this.fillStyle&&(this._createEndFillCommand(),c=this._endFillCommand,c.method.apply(c.thisObject,c.args));this.strokeStyle&&(this._createEndLineCommand(),c=this._endLineCommand,c.method.apply(c.thisObject,
c.args));this._endDraw(a);this._dirty=!1}};b._checkRect=function(a,g,b,c){this._firstCheck?(this._firstCheck=!1,this._minX=a,this._minY=g,this._maxX=a+b,this._maxY=g+c):(this._minX=Math.min(this._minX,a),this._minY=Math.min(this._minY,g),this._maxX=Math.max(this._maxX,a+b),this._maxY=Math.max(this._maxY,g+c));this._dirty=!0};b._checkPoint=function(a,g){this._firstCheck?(this._firstCheck=!1,this._minX=a,this._minY=g,this._maxX=a,this._maxY=g):(this._minX=Math.min(this._minX,a),this._minY=Math.min(this._minY,
g),this._maxX=Math.max(this._maxX,a),this._maxY=Math.max(this._maxY,g));this._lastX=a;this._lastY=g;this._dirty=!0};b._measureBounds=function(){return c.Rectangle.identity.initialize(this._minX,this._minY,this._maxX-this._minX,this._maxY-this._minY)};b._createEndFillCommand=function(){this._endFillCommand||(this._endFillCommand=new e(function(){this._renderContext.fill();this._renderContext.closePath()},this,null))};b._fill=function(){this.fillStyle&&(this._createEndFillCommand(),this._pushCommand(this._endFillCommand));
this.strokeStyle&&(this._createEndLineCommand(),this._pushCommand(this._endLineCommand))};b._createEndLineCommand=function(){this._endLineCommand||(this._endLineCommand=new e(function(){this._renderContext.stroke();this._renderContext.closePath()},this,null))};b._pushCommand=function(a){this.commandQueue.push(a);this._dirty=!0};return d}();c.Graphics=f;f.prototype.__class__="egret.Graphics";var e=function(){return function(c,b,a){this.method=c;this.thisObject=b;this.args=a}}();e.prototype.__class__=
"egret.Command"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._graphics=null}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"graphics",{get:function(){this._graphics||(this._graphics=new c.Graphics,this.needDraw=!0);return this._graphics},enumerable:!0,configurable:!0});b._draw=function(a){this._graphics&&this._graphics._dirty&&this._setCacheDirty();e.prototype._draw.call(this,a)};b._render=function(a){this._graphics&&this._graphics._draw(a)};b._measureBounds=function(){var a=this._graphics;
return a?a._measureBounds():e.prototype._measureBounds.call(this)};return d}(c.DisplayObject);c.Shape=f;f.prototype.__class__="egret.Shape"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._graphics=null}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"graphics",{get:function(){this._graphics||(this._graphics=new c.Graphics,this.needDraw=!0);return this._graphics},enumerable:!0,configurable:!0});b._draw=function(a){this._graphics&&this._graphics._dirty&&this._setCacheDirty();e.prototype._draw.call(this,a)};b._render=function(a){this._graphics&&this._graphics._draw(a);e.prototype._render.call(this,a)};b._measureBounds=
function(){for(var a=0,g=0,b=0,d=0,e=this._children.length,f=0;f<e;f++){var h=this._children[f];if(h.visible){var k=h.getBounds(c.Rectangle.identity,!1),m=k.x,p=k.y,r=k.width,k=k.height,h=h._getMatrix(),h=c.DisplayObject.getTransformBounds(c.Rectangle.identity.initialize(m,p,r,k),h),m=h.x,p=h.y,r=h.width+h.x,h=h.height+h.y;if(m<a||0==f)a=m;if(r>g||0==f)g=r;if(p<b||0==f)b=p;if(h>d||0==f)d=h}}if(this._graphics){e=this._graphics._measureBounds();m=e.x;p=e.y;r=e.width+e.x;h=e.height+e.y;if(m<a||0==f)a=
m;if(r>g||0==f)g=r;if(p<b||0==f)b=p;if(h>d||0==f)d=h}return c.Rectangle.identity.initialize(a,b,g-a,d-b)};b.hitTest=function(a,g,b){void 0===b&&(b=!1);var d=e.prototype.hitTest.call(this,a,g,b);return d?d:this._graphics?c.DisplayObject.prototype.hitTest.call(this,a,g,b):null};return d}(c.DisplayObjectContainer);c.Sprite=f;f.prototype.__class__="egret.Sprite"})(egret||(egret={}));
(function(c){var f=function(){function e(){}e._getStartLine=function(c){var b=e._getTextHeight(c),a=0;c._DO_Props_._hasHeightSet&&(!(b<c._DO_Props_._explicitHeight)&&b>c._DO_Props_._explicitHeight&&(a=Math.max(c._TF_Props_._scrollV-1,0),a=Math.min(c._TF_Props_._numLines-1,a)),c._TF_Props_._multiline||(a=Math.max(c._TF_Props_._scrollV-1,0),a=Math.min(c._TF_Props_._numLines-1,a)));return a};e._getHalign=function(d){var b=d._getLinesArr(),a=0;d._TF_Props_._textAlign==c.HorizontalAlign.CENTER?a=0.5:d._TF_Props_._textAlign==
c.HorizontalAlign.RIGHT&&(a=1);d._TF_Props_._type==c.TextFieldType.INPUT&&!d._TF_Props_._multiline&&1<b.length&&(a=0);return a};e._getTextHeight=function(d){return c.TextFieldType.INPUT!=d._TF_Props_._type||d._TF_Props_._multiline?d._TF_Props_._textMaxHeight+(d._TF_Props_._numLines-1)*d._TF_Props_._lineSpacing:d._TF_Props_._size};e._getValign=function(d){var b=e._getTextHeight(d);return d._TF_Props_._type==c.TextFieldType.INPUT?d._TF_Props_._multiline?0:0.5:d._DO_Props_._hasHeightSet&&b<d._DO_Props_._explicitHeight?
(b=0,d._TF_Props_._verticalAlign==c.VerticalAlign.MIDDLE?b=0.5:d._TF_Props_._verticalAlign==c.VerticalAlign.BOTTOM&&(b=1),b):0};e._getTextElement=function(c,b,a){b=e._getHit(c,b,a);c=c._getLinesArr();return b&&c[b.lineIndex]&&c[b.lineIndex].elements[b.textElementIndex]?c[b.lineIndex].elements[b.textElementIndex]:null};e._getHit=function(c,b,a){var g=c._getLinesArr();if(0==c._TF_Props_._textMaxWidth)return null;var u=0,q=e._getTextHeight(c),f=0;c._DO_Props_._hasHeightSet&&c._DO_Props_._explicitHeight>
q&&(f=e._getValign(c)*(c._DO_Props_._explicitHeight-q),0!=f&&(a-=f));f=0;for(q=e._getStartLine(c);q<g.length;q++){var l=g[q];if(f+l.height>=a){u=q+1;break}else f+=l.height;if(f+c._TF_Props_._lineSpacing>a)return null;f+=c._TF_Props_._lineSpacing}if(0===u)return null;c=g[u-1];for(q=a=0;q<c.elements.length;q++)if(g=c.elements[q],a+g.width<b)a+=g.width;else return{lineIndex:u-1,textElementIndex:q};return null};e._getScrollNum=function(c){var b=1;if(c._TF_Props_._multiline){var a=c.height,g=c.size;c=
c.lineSpacing;b=Math.floor(a/(g+c));a-(g+c)*b>g/2&&b++}return b};return e}();c.TextFieldUtils=f;f.prototype.__class__="egret.TextFieldUtils"})(egret||(egret={}));
(function(c){var f=function(){return function(){this._text=this._type="";this._displayAsPassword=!1;this._fontFamily=c.TextField.default_fontFamily;this._size=30;this._bold=this._italic=!1;this._textColorString="#FFFFFF";this._textColor=16777215;this._strokeColorString="#000000";this._stroke=this._strokeColor=0;this._border=!1;this._borderColor=0;this._background=!1;this._backgroundColor=16777215;this._textAlign="left";this._verticalAlign="top";this._maxChars=this._textMaxHeight=this._textMaxWidth=
0;this._scrollV=-1;this._numLines=this._lineSpacing=0;this._wordWrap=this._multiline=!1}}();c.TextFieldProperties=f;f.prototype.__class__="egret.TextFieldProperties"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._inputEnabled=!1;this._bgGraphics=this._inputUtils=null;this._isFlow=!1;this._textArr=[];this._isArrayChanged=!1;this._linesArr=[];this._isTyping=!1;this.needDraw=!0;this._TF_Props_=new c.TextFieldProperties}__extends(d,e);var b=d.prototype;b.isInput=function(){return this._TF_Props_._type==c.TextFieldType.INPUT};b._setTouchEnabled=function(a){e.prototype._setTouchEnabled.call(this,a);this.isInput()&&(this._inputEnabled=!0)};Object.defineProperty(b,
"type",{get:function(){return this._TF_Props_._type},set:function(a){this._setType(a)},enumerable:!0,configurable:!0});b._setType=function(a){var g=this._TF_Props_;g._type!=a&&(g._type=a,g._type==c.TextFieldType.INPUT?(this._DO_Props_._hasWidthSet||this._setWidth(100),this._DO_Props_._hasHeightSet||this._setHeight(30),null==this._inputUtils&&(this._inputUtils=new c.InputController),this._inputUtils.init(this),this._setDirty(),this._DO_Props_._stage&&this._inputUtils._addStageText()):this._inputUtils&&
(this._inputUtils._removeStageText(),this._inputUtils=null))};Object.defineProperty(b,"text",{get:function(){return this._getText()},set:function(a){this._setText(a)},enumerable:!0,configurable:!0});b._getText=function(){return this._TF_Props_._type==c.TextFieldType.INPUT?this._inputUtils._getText():this._TF_Props_._text};b._setSizeDirty=function(){e.prototype._setSizeDirty.call(this);this._isArrayChanged=!0};b._setTextDirty=function(){this._setSizeDirty()};b._setBaseText=function(a){null==a&&(a=
"");var g=this._TF_Props_;this._isFlow=!1;g._text!=a&&(this._setTextDirty(),g._text=a,a="",a=g._displayAsPassword?this.changeToPassText(g._text):g._text,this.setMiddleStyle([{text:a}]))};b._setText=function(a){null==a&&(a="");this._setBaseText(a);this._inputUtils&&this._inputUtils._setText(this._TF_Props_._text)};Object.defineProperty(b,"displayAsPassword",{get:function(){return this._TF_Props_._displayAsPassword},set:function(a){this._setDisplayAsPassword(a)},enumerable:!0,configurable:!0});b._setDisplayAsPassword=
function(a){var g=this._TF_Props_;g._displayAsPassword!=a&&(g._displayAsPassword=a,this._setTextDirty(),a="",a=g._displayAsPassword?this.changeToPassText(g._text):g._text,this.setMiddleStyle([{text:a}]))};Object.defineProperty(b,"fontFamily",{get:function(){return this._TF_Props_._fontFamily},set:function(a){this._setFontFamily(a)},enumerable:!0,configurable:!0});b._setFontFamily=function(a){this._TF_Props_._fontFamily!=a&&(this._setTextDirty(),this._TF_Props_._fontFamily=a)};Object.defineProperty(b,
"size",{get:function(){return this._TF_Props_._size},set:function(a){this._setSize(a)},enumerable:!0,configurable:!0});b._setSize=function(a){this._TF_Props_._size!=a&&(this._setTextDirty(),this._TF_Props_._size=a)};Object.defineProperty(b,"italic",{get:function(){return this._TF_Props_._italic},set:function(a){this._setItalic(a)},enumerable:!0,configurable:!0});b._setItalic=function(a){this._TF_Props_._italic!=a&&(this._setTextDirty(),this._TF_Props_._italic=a)};Object.defineProperty(b,"bold",{get:function(){return this._TF_Props_._bold},
set:function(a){this._setBold(a)},enumerable:!0,configurable:!0});b._setBold=function(a){this._TF_Props_._bold!=a&&(this._setTextDirty(),this._TF_Props_._bold=a)};Object.defineProperty(b,"textColor",{get:function(){return this._TF_Props_._textColor},set:function(a){this._setTextColor(a)},enumerable:!0,configurable:!0});b._setTextColor=function(a){this._TF_Props_._textColor!=a&&(this._setTextDirty(),this._TF_Props_._textColor=a,this._TF_Props_._textColorString=c.toColorString(a))};Object.defineProperty(b,
"strokeColor",{get:function(){return this._TF_Props_._strokeColor},set:function(a){this._setStrokeColor(a)},enumerable:!0,configurable:!0});b._setStrokeColor=function(a){this._TF_Props_._strokeColor!=a&&(this._setTextDirty(),this._TF_Props_._strokeColor=a,this._TF_Props_._strokeColorString=c.toColorString(a))};Object.defineProperty(b,"stroke",{get:function(){return this._TF_Props_._stroke},set:function(a){this._setStroke(a)},enumerable:!0,configurable:!0});b._setStroke=function(a){this._TF_Props_._stroke!=
a&&(this._setTextDirty(),this._TF_Props_._stroke=a)};Object.defineProperty(b,"textAlign",{get:function(){return this._TF_Props_._textAlign},set:function(a){this._setTextAlign(a)},enumerable:!0,configurable:!0});b._setTextAlign=function(a){this._TF_Props_._textAlign!=a&&(this._setTextDirty(),this._TF_Props_._textAlign=a)};Object.defineProperty(b,"verticalAlign",{get:function(){return this._TF_Props_._verticalAlign},set:function(a){this._setVerticalAlign(a)},enumerable:!0,configurable:!0});b._setVerticalAlign=
function(a){this._TF_Props_._verticalAlign!=a&&(this._setTextDirty(),this._TF_Props_._verticalAlign=a)};Object.defineProperty(b,"maxChars",{get:function(){return this._TF_Props_._maxChars},set:function(a){this._setMaxChars(a)},enumerable:!0,configurable:!0});b._setMaxChars=function(a){this._TF_Props_._maxChars!=a&&(this._TF_Props_._maxChars=a)};Object.defineProperty(b,"scrollV",{get:function(){return Math.min(Math.max(this._TF_Props_._scrollV,1),this.maxScrollV)},set:function(a){this._TF_Props_._scrollV=
Math.max(a,1);this._setDirty()},enumerable:!0,configurable:!0});Object.defineProperty(b,"maxScrollV",{get:function(){this._getLinesArr();return Math.max(this._TF_Props_._numLines-c.TextFieldUtils._getScrollNum(this)+1,1)},enumerable:!0,configurable:!0});Object.defineProperty(b,"selectionBeginIndex",{get:function(){return 0},enumerable:!0,configurable:!0});Object.defineProperty(b,"selectionEndIndex",{get:function(){return 0},enumerable:!0,configurable:!0});Object.defineProperty(b,"caretIndex",{get:function(){return 0},
enumerable:!0,configurable:!0});b._setSelection=function(a,g){};Object.defineProperty(b,"lineSpacing",{get:function(){return this._TF_Props_._lineSpacing},set:function(a){this._setLineSpacing(a)},enumerable:!0,configurable:!0});b._setLineSpacing=function(a){this._TF_Props_._lineSpacing!=a&&(this._setTextDirty(),this._TF_Props_._lineSpacing=a)};b._getLineHeight=function(){return this._TF_Props_._lineSpacing+this._TF_Props_._size};Object.defineProperty(b,"numLines",{get:function(){return this._TF_Props_._numLines},
enumerable:!0,configurable:!0});Object.defineProperty(b,"multiline",{get:function(){return this._TF_Props_._multiline},set:function(a){this._setMultiline(a)},enumerable:!0,configurable:!0});b._setMultiline=function(a){this._TF_Props_._multiline=a;this._setDirty()};b._setWidth=function(a){e.prototype._setWidth.call(this,a);this.fillBackground()};b._setHeight=function(a){e.prototype._setHeight.call(this,a);this.fillBackground()};Object.defineProperty(b,"border",{get:function(){return this._TF_Props_._border},
set:function(a){this._TF_Props_._border=a;this.fillBackground()},enumerable:!0,configurable:!0});Object.defineProperty(b,"borderColor",{get:function(){return this._TF_Props_._borderColor},set:function(a){this._TF_Props_._borderColor=a;this.fillBackground()},enumerable:!0,configurable:!0});Object.defineProperty(b,"background",{get:function(){return this._TF_Props_._background},set:function(a){this._TF_Props_._background=a;this.fillBackground()},enumerable:!0,configurable:!0});Object.defineProperty(b,
"backgroundColor",{get:function(){return this._TF_Props_._backgroundColor},set:function(a){this._TF_Props_._backgroundColor=a;this.fillBackground()},enumerable:!0,configurable:!0});b.fillBackground=function(){var a=this._bgGraphics,g=this._TF_Props_;a&&a.clear();if(g._background||g._border)null==a&&(a=this._bgGraphics=new c.Graphics),g._background&&a.beginFill(g._backgroundColor,1),g._border&&a.lineStyle(1,g._borderColor),a.drawRect(0,0,this._getWidth(),this._getHeight()),a.endFill()};b.setFocus=
function(){c.$warn(1013)};b._onRemoveFromStage=function(){e.prototype._onRemoveFromStage.call(this);this._removeEvent();this._TF_Props_._type==c.TextFieldType.INPUT&&this._inputUtils._removeStageText()};b._onAddToStage=function(){e.prototype._onAddToStage.call(this);this._addEvent();this._TF_Props_._type==c.TextFieldType.INPUT&&this._inputUtils._addStageText()};b._updateBaseTransform=function(){this._getLinesArr();0==this._TF_Props_._textMaxWidth&&this._TF_Props_._type!=c.TextFieldType.INPUT||e.prototype._updateTransform.call(this)};
b._updateTransform=function(){this._TF_Props_._type==c.TextFieldType.INPUT?this._DO_Props_._normalDirty?this._inputUtils._updateProperties():this._inputUtils._updateTransform():this._updateBaseTransform()};b._draw=function(a){var g=this._TF_Props_;if(g._type==c.TextFieldType.INPUT){if(this._isTyping)return}else if(0==g._textMaxWidth)return;e.prototype._draw.call(this,a)};b._render=function(a){this._bgGraphics&&this._bgGraphics._draw(a);this.drawText(a);this._clearDirty()};b._measureBounds=function(){var a=
this._TF_Props_;this._getLinesArr();return 0==a._textMaxWidth?c.Rectangle.identity.initialize(0,0,0,0):c.Rectangle.identity.initialize(0,0,a._textMaxWidth,c.TextFieldUtils._getTextHeight(this))};Object.defineProperty(b,"textFlow",{get:function(){return this._textArr},set:function(a){var g=this._TF_Props_;this._isFlow=!0;var b="";null==a&&(a=[]);for(var c=0;c<a.length;c++)b+=a[c].text;g._displayAsPassword?this._setBaseText(b):(g._text=b,this.setMiddleStyle(a))},enumerable:!0,configurable:!0});b.changeToPassText=
function(a){if(this._TF_Props_._displayAsPassword){for(var g="",b=0,c=a.length;b<c;b++)switch(a.charAt(b)){case "\n":g+="\n";break;case "\r":break;default:g+="*"}return g}return a};b.setMiddleStyle=function(a){this._isArrayChanged=!0;this._textArr=a;this._setSizeDirty()};Object.defineProperty(b,"textWidth",{get:function(){return this._TF_Props_._textMaxWidth},enumerable:!0,configurable:!0});Object.defineProperty(b,"textHeight",{get:function(){return c.TextFieldUtils._getTextHeight(this)},enumerable:!0,
configurable:!0});b.appendText=function(a){this.appendElement({text:a})};b.appendElement=function(a){var g=this._TF_Props_,b=g._text+a.text;g._displayAsPassword?this._setBaseText(b):(g._text=b,this._textArr.push(a),this.setMiddleStyle(this._textArr))};b._getLinesArr=function(){var a=this._TF_Props_;if(!this._isArrayChanged)return this._linesArr;this._isArrayChanged=!1;var g=this._textArr,b=c.MainContext.instance.rendererContext;this._linesArr.length=0;a._textMaxHeight=0;a._textMaxWidth=0;if(this._DO_Props_._hasWidthSet&&
0==this._DO_Props_._explicitWidth)return a._numLines=0,[{width:0,height:0,charNum:0,elements:[],hasNextLine:!1}];this._isFlow||b.setupFont(this);for(var d=this._linesArr,e=0,f=0,h=0,k=0,m,p=0,r=g.length;p<r;p++){var s=g[p];s.style=s.style||{};for(var t=s.text.toString().split(/(?:\r\n|\r|\n)/),v=0,x=t.length;v<x;v++){null==d[k]&&(m={width:0,height:0,elements:[],charNum:0,hasNextLine:!1},d[k]=m,f=h=e=0);var h=a._type==c.TextFieldType.INPUT?a._size:Math.max(h,s.style.size||a._size),w=!0;if(""==t[v])v==
x-1&&(w=!1);else{this._isFlow&&b.setupFont(this,s.style);var z=b.measureText(t[v]);if(this._DO_Props_._hasWidthSet)if(e+z<=this._DO_Props_._explicitWidth)m.elements.push({width:z,text:t[v],style:s.style}),e+=z,f+=t[v].length,v==x-1&&(w=!1);else{for(var y=0,C=0,A=t[v],B=this._TF_Props_._wordWrap?A.split(/\b/):A.match(/./g),D=B.length,E=0;y<D;y++){z=b.measureText(B[y]);if(0!=e&&e+z>this._DO_Props_._explicitWidth&&0!=e+y)break;E+=B[y].length;C+=z;e+=z;f+=E}if(0<y){m.elements.push({width:C,text:A.substring(0,
E),style:s.style});z=A.substring(E);y=0;for(C=z.length;y<C&&" "==z.charAt(y);y++);t[v]=z.substring(y)}""!=t[v]&&(v--,w=!1)}else e+=z,f+=t[v].length,m.elements.push({width:z,text:t[v],style:s.style}),v==x-1&&(w=!1)}w&&(f++,m.hasNextLine=!0);v<t.length-1&&(m.width=e,m.height=h,m.charNum=f,a._textMaxWidth=Math.max(a._textMaxWidth,e),a._textMaxHeight+=h,k++)}p==g.length-1&&m&&(m.width=e,m.height=h,m.charNum=f,a._textMaxWidth=Math.max(a._textMaxWidth,e),a._textMaxHeight+=h)}a._numLines=d.length;return d};
Object.defineProperty(b,"wordWrap",{get:function(){return this._TF_Props_._wordWrap},set:function(a){this._TF_Props_._wordWrap=a},enumerable:!0,configurable:!0});b.drawText=function(a){var g=this._TF_Props_,b=this._getLinesArr();if(0!=g._textMaxWidth){var d=this._DO_Props_._hasWidthSet?this._DO_Props_._explicitWidth:g._textMaxWidth,e=c.TextFieldUtils._getTextHeight(this),f=0,h=c.TextFieldUtils._getStartLine(this);if(this._DO_Props_._hasHeightSet&&this._DO_Props_._explicitHeight>e)var k=c.TextFieldUtils._getValign(this),
f=f+k*(this._DO_Props_._explicitHeight-e);for(var f=Math.round(f),e=c.TextFieldUtils._getHalign(this),k=0,m=h,p=g._numLines;m<p;m++){var r=b[m],s=r.height,f=f+s/2;if(m!=h){if(g._type==c.TextFieldType.INPUT&&!g._multiline)break;if(this._DO_Props_._hasHeightSet&&f>this._DO_Props_._explicitHeight)break}for(var k=Math.round((d-r.width)*e),t=0,v=r.elements.length;t<v;t++){var x=r.elements[t];a.drawText(this,x.text,k,f+(s-(x.style.size||g._size))/2,x.width,x.style);k+=x.width}f+=s/2+g._lineSpacing}}};b._addEvent=
function(){this.addEventListener(c.TouchEvent.TOUCH_TAP,this.onTapHandler,this)};b._removeEvent=function(){this.removeEventListener(c.TouchEvent.TOUCH_TAP,this.onTapHandler,this)};b.onTapHandler=function(a){if(this._TF_Props_._type!=c.TextFieldType.INPUT&&(a=c.TextFieldUtils._getTextElement(this,a.localX,a.localY),null!=a&&(a=a.style)&&a.href&&a.href.match(/^event:/))){var g=a.href.match(/^event:/)[0];c.TextEvent.dispatchTextEvent(this,c.TextEvent.LINK,a.href.substring(g.length))}};d.default_fontFamily=
"Arial";return d}(c.DisplayObject);c.TextField=f;f.prototype.__class__="egret.TextField"})(egret||(egret={}));
(function(c){var f=function(){function c(){this._replaceArr=[];this.resutlArr=[];this.initReplaceArr()}var d=c.prototype;d.initReplaceArr=function(){this._replaceArr=[];this._replaceArr.push([/&lt;/g,"<"]);this._replaceArr.push([/&gt;/g,">"]);this._replaceArr.push([/&amp;/g,"&"]);this._replaceArr.push([/&quot;/g,'"']);this._replaceArr.push([/&apos;/g,"'"])};d.replaceSpecial=function(b){for(var a=0;a<this._replaceArr.length;a++)b=b.replace(this._replaceArr[a][0],this._replaceArr[a][1]);return b};d.parser=
function(b){this.stackArray=[];this.resutlArr=[];for(var a=0,g=b.length;a<g;){var c=b.indexOf("<",a);0>c?(this.addToResultArr(b.substring(a)),a=g):(this.addToResultArr(b.substring(a,c)),a=b.indexOf(">",c),"/"==b.charAt(c+1)?this.stackArray.pop():this.addToArray(b.substring(c+1,a)),a+=1)}return this.resutlArr};d.addToResultArr=function(b){""!=b&&(b=this.replaceSpecial(b),0<this.stackArray.length?this.resutlArr.push({text:b,style:this.stackArray[this.stackArray.length-1]}):this.resutlArr.push({text:b}))};
d.changeStringToObject=function(b){b=b.trim();var a={},g=[];if("i"==b.charAt(0)||"b"==b.charAt(0))this.addProperty(a,b,"true");else if(g=b.match(/^(font|a)\s/))for(b=b.substring(g[0].length).trim(),g=0;g=b.match(this.getHeadReg());){var c=g[0],d="";b=b.substring(c.length).trim();'"'==b.charAt(0)?(g=b.indexOf('"',1),d=b.substring(1,g),g+=1):"'"==b.charAt(0)?(g=b.indexOf("'",1),d=b.substring(1,g),g+=1):(d=b.match(/(\S)+/)[0],g=d.length);this.addProperty(a,c.substring(0,c.length-1).trim(),d.trim());
b=b.substring(g).trim()}return a};d.getHeadReg=function(){return/^(color|textcolor|strokecolor|stroke|b|bold|i|italic|size|fontfamily|href)(\s)*=/};d.addProperty=function(b,a,g){switch(a.toLowerCase()){case "color":case "textcolor":g=g.replace(/#/,"0x");b.textColor=parseInt(g);break;case "strokecolor":g=g.replace(/#/,"0x");b.strokeColor=parseInt(g);break;case "stroke":b.stroke=parseInt(g);break;case "b":case "bold":b.bold="true"==g;break;case "i":case "italic":b.italic="true"==g;break;case "size":b.size=
parseInt(g);break;case "fontfamily":b.fontFamily=g;break;case "href":b.href=this.replaceSpecial(g)}};d.addToArray=function(b){b=this.changeStringToObject(b);if(0!=this.stackArray.length){var a=this.stackArray[this.stackArray.length-1],g;for(g in a)null==b[g]&&(b[g]=a[g])}this.stackArray.push(b)};return c}();c.HtmlTextParser=f;f.prototype.__class__="egret.HtmlTextParser"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.DYNAMIC="dynamic";c.INPUT="input";return c}();c.TextFieldType=f;f.prototype.__class__="egret.TextFieldType"})(egret||(egret={}));
(function(c){var f=function(e){function d(a){e.call(this);this._bitmapY=this._bitmapX=this._sourceHeight=this._sourceWidth=0;this._textureMap={};this.texture=a;this._sourceWidth=a._sourceWidth;this._sourceHeight=a._sourceHeight;this._bitmapX=a._bitmapX-a._offsetX;this._bitmapY=a._bitmapY-a._offsetY}__extends(d,e);var b=d.prototype;b.getTexture=function(a){return this._textureMap[a]};b.createTexture=function(a,g,b,d,e,f,h,k,m){void 0===f&&(f=0);void 0===h&&(h=0);"undefined"===typeof k&&(k=f+d);"undefined"===
typeof m&&(m=h+e);var p=this.texture._clone(),r=c.MainContext.instance.rendererContext._texture_scale_factor;p._bitmapX=this._bitmapX+g;p._bitmapY=this._bitmapY+b;p._bitmapWidth=d*r;p._bitmapHeight=e*r;p._offsetX=f;p._offsetY=h;p._textureWidth=k*r;p._textureHeight=m*r;p._sourceWidth=this._sourceWidth;p._sourceHeight=this._sourceHeight;return this._textureMap[a]=p};b.dispose=function(){this.texture&&this.texture.dispose()};return d}(c.HashObject);c.SpriteSheet=f;f.prototype.__class__="egret.SpriteSheet"})(egret||
(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._text=null;this._isFocus=!1}__extends(d,e);var b=d.prototype;b.init=function(a){this._text=a;this.stageText=c.StageText.create();this.stageText._setTextField(this._text)};b._addStageText=function(){this._text._inputEnabled||(this._text._DO_Props_._touchEnabled=!0);this.stageText._add();this.stageText._addListeners();this.stageText.addEventListener("updateText",this.updateTextHandler,this);this._text.addEventListener(c.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,
this);c.MainContext.instance.stage.addEventListener(c.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this);this.stageText.addEventListener("blur",this.blurHandler,this);this.stageText.addEventListener("focus",this.focusHandler,this)};b._removeStageText=function(){this._text._inputEnabled||(this._text._DO_Props_._touchEnabled=!1);this.stageText._remove();this.stageText._removeListeners();this.stageText._removeInput();this.stageText.removeEventListener("updateText",this.updateTextHandler,this);this._text.removeEventListener(c.TouchEvent.TOUCH_BEGIN,
this.onMouseDownHandler,this);c.MainContext.instance.stage.removeEventListener(c.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this);this.stageText.removeEventListener("blur",this.blurHandler,this);this.stageText.removeEventListener("focus",this.focusHandler,this)};b._getText=function(){return this.stageText._getText()};b._setText=function(a){this.stageText._setText(a)};b.focusHandler=function(a){this._isFocus=!0;this._text._isTyping=!0;this._text.dispatchEvent(new c.FocusEvent(c.FocusEvent.FOCUS_IN))};
b.blurHandler=function(a){this._isFocus=!1;this._text._isTyping=!1;this._text.dispatchEvent(new c.FocusEvent(c.FocusEvent.FOCUS_OUT))};b.onMouseDownHandler=function(a){a.stopPropagation();this._text._DO_Props_._visible&&!this._isFocus&&(this._isFocus=!0,this.stageText._show(this._text._TF_Props_._multiline,this._text.size,this._text.width,this._text.height),a=this._text.localToGlobal(),this.stageText._initElement(a.x,a.y,this._text._worldTransform.a,this._text._worldTransform.d))};b.onStageDownHandler=
function(a){this.stageText._hide()};b.updateTextHandler=function(a){this.resetText();this._text.dispatchEvent(new c.Event(c.Event.CHANGE))};b.resetText=function(){this._text._setBaseText(this.stageText._getText())};b._hideInput=function(){this.stageText._removeInput()};b._updateTransform=function(){this._text._updateBaseTransform();!this._text._DO_Props_._visible&&this.stageText&&this._hideInput()};b._updateProperties=function(){if(!this._isFocus){var a=this._text._DO_Props_._stage;if(null==a)this.stageText._setVisible(!1);
else{for(var g=this._text,b=g._DO_Props_._visible;b;){g=g.parent;if(g==a)break;b=g._DO_Props_._visible}this.stageText._setVisible(b)}this.stageText._setMultiline(this._text._TF_Props_._multiline);this.stageText._setTextType(this._text._TF_Props_._displayAsPassword?"password":"text");this.stageText._setText(this._text._TF_Props_._text);this.stageText._resetStageText()}this._updateTransform()};return d}(c.HashObject);c.InputController=f;f.prototype.__class__="egret.InputController"})(egret||(egret=
{}));
(function(c){var f=function(c){function d(a,g){c.call(this,a);this.firstCharHeight=0;"string"==typeof g?this.charList=this.parseConfig(g):g&&g.hasOwnProperty("frames")?this.charList=g.frames:this.charList={}}__extends(d,c);var b=d.prototype;b.getTexture=function(a){var g=this._textureMap[a];if(!g){g=this.charList[a];if(!g)return null;g=this.createTexture(a,g.x,g.y,g.w,g.h,g.offX,g.offY,g.sourceW,g.sourceH);this._textureMap[a]=g}return g};b._getFirstCharHeight=function(){if(0==this.firstCharHeight)for(var a in this.charList){var g=this.charList[a];
if(g){var b=g.sourceH;void 0===b&&(b=g.h,void 0===b&&(b=0),g=g.offY,void 0===g&&(g=0),b+=g);if(!(0>=b)){this.firstCharHeight=b;break}}}return this.firstCharHeight};b.parseConfig=function(a){a=a.split("\r\n").join("\n");a=a.split("\n");for(var g=this.getConfigByKey(a[3],"count"),b={},c=4;c<4+g;c++){var d=a[c],e=String.fromCharCode(this.getConfigByKey(d,"id")),f={};b[e]=f;f.x=this.getConfigByKey(d,"x");f.y=this.getConfigByKey(d,"y");f.w=this.getConfigByKey(d,"width");f.h=this.getConfigByKey(d,"height");
f.offX=this.getConfigByKey(d,"xoffset");f.offY=this.getConfigByKey(d,"yoffset")}return b};b.getConfigByKey=function(a,g){for(var b=a.split(" "),c=0,d=b.length;c<d;c++){var e=b[c];if(g==e.substring(0,g.length))return b=e.substring(g.length+1),parseInt(b)}return 0};return d}(c.SpriteSheet);c.BitmapFont=f;f.prototype.__class__="egret.BitmapFont"})(egret||(egret={}));
(function(c){var f=function(e){function d(a){e.call(this);this._isAddedToStage=!1;this._frames=this._movieClipData=this._textureToRender=null;this._totalFrames=0;this._frameLabels=null;this._frameIntervalTime=0;this._eventPool=null;this._isPlaying=!1;this._isStopped=!0;this._passedTime=this._displayedKeyFrameNum=this._nextFrameNum=this._currentFrameNum=this._playTimes=0;this._setMovieClipData(a);this.needDraw=!0}__extends(d,e);var b=d.prototype;b._init=function(){this._reset();var a=this._movieClipData;
a&&a._isDataValid()&&(this._frames=a.frames,this._totalFrames=a.numFrames,this._frameLabels=a.labels,this._frameIntervalTime=1E3/a.frameRate,this._initFrame())};b._reset=function(){this._frames=null;this._playTimes=0;this._isPlaying=!1;this.setIsStopped(!0);this._currentFrameNum=0;this._nextFrameNum=1;this._passedTime=this._displayedKeyFrameNum=0;this._eventPool=[]};b._initFrame=function(){this._movieClipData._isTextureValid()&&(this._advanceFrame(),this._constructFrame())};b._render=function(a){var g=
this._textureToRender;if(this._texture_to_render=g){var b=Math.round(g._offsetX),c=Math.round(g._offsetY),e=g._bitmapWidth||g._textureWidth,f=g._bitmapHeight||g._textureHeight,h=Math.round(e),k=Math.round(f);d.renderFilter.drawImage(a,this,g._bitmapX,g._bitmapY,e,f,b,c,h,k)}};b._measureBounds=function(){var a=this._textureToRender;return a?c.Rectangle.identity.initialize(a._offsetX,a._offsetY,a._textureWidth,a._textureHeight):e.prototype._measureBounds.call(this)};b._onAddToStage=function(){e.prototype._onAddToStage.call(this);
this._isAddedToStage=!0;this._isPlaying&&1<this._totalFrames&&this.setIsStopped(!1)};b._onRemoveFromStage=function(){e.prototype._onRemoveFromStage.call(this);this._isAddedToStage=!1;this.setIsStopped(!0)};b._getFrameLabelByName=function(a,g){void 0===g&&(g=!1);g&&(a=a.toLowerCase());var b=this._frameLabels;if(b)for(var c=null,d=0;d<b.length;d++)if(c=b[d],g?c.name.toLowerCase()===a:c.name===a)return c;return null};b._getFrameLabelByFrame=function(a){var g=this._frameLabels;if(g)for(var b=null,c=0;c<
g.length;c++)if(b=g[c],b.frame===a)return b;return null};b._getFrameLabelForFrame=function(a){var g=null,b=null,c=this._frameLabels;if(c)for(var d=0;d<c.length;d++){b=c[d];if(b.frame>a)break;g=b}return g};b.play=function(a){void 0===a&&(a=0);this._isPlaying=!0;this.setPlayTimes(a);1<this._totalFrames&&this._isAddedToStage&&this.setIsStopped(!1)};b.stop=function(){this._isPlaying=!1;this.setIsStopped(!0)};b.prevFrame=function(){this.gotoAndStop(this._currentFrameNum-1)};b.nextFrame=function(){this.gotoAndStop(this._currentFrameNum+
1)};b.gotoAndPlay=function(a,g){void 0===g&&(g=0);(0===arguments.length||2<arguments.length)&&c.$error(1022,"MovieClip.gotoAndPlay()");this.play(g);this._gotoFrame(a)};b.gotoAndStop=function(a){1!=arguments.length&&c.$error(1022,"MovieClip.gotoAndStop()");this.stop();this._gotoFrame(a)};b._gotoFrame=function(a){var g;"string"===typeof a?g=this._getFrameLabelByName(a).frame:(g=parseInt(a+"",10),g!=a&&c.$error(1022,"Frame Label Not Found"));1>g?g=1:g>this._totalFrames&&(g=this._totalFrames);g!==this._nextFrameNum&&
(this._nextFrameNum=g,this._advanceFrame(),this._constructFrame(),this._handlePendingEvent())};b._advanceTime=function(a){var g=this._frameIntervalTime;a=this._passedTime+a;this._passedTime=a%g;g=a/g;if(!(1>g)){for(;1<=g;){g--;this._nextFrameNum++;if(this._nextFrameNum>this._totalFrames)if(-1==this._playTimes)this._eventPool.push(c.Event.LOOP_COMPLETE),this._nextFrameNum=1;else if(this._playTimes--,0<this._playTimes)this._eventPool.push(c.Event.LOOP_COMPLETE),this._nextFrameNum=1;else{this._nextFrameNum=
this._totalFrames;this._eventPool.push(c.Event.COMPLETE);this.stop();break}this._advanceFrame()}this._constructFrame();this._handlePendingEvent();this._setDirty()}};b._advanceFrame=function(){this._currentFrameNum=this._nextFrameNum};b._constructFrame=function(){var a=this._currentFrameNum;this._displayedKeyFrameNum!=a&&(this._textureToRender=this._movieClipData.getTextureByFrame(a),this._DO_Props_._sizeDirty=!0,this._displayedKeyFrameNum=a)};b._handlePendingEvent=function(){if(0!=this._eventPool.length){this._eventPool.reverse();
for(var a=this._eventPool,g=a.length,b=!1,d=!1,e=0;e<g;e++){var f=a.pop();f==c.Event.LOOP_COMPLETE?d=!0:f==c.Event.COMPLETE?b=!0:this.dispatchEventWith(f)}d&&this.dispatchEventWith(c.Event.LOOP_COMPLETE);b&&this.dispatchEventWith(c.Event.COMPLETE)}};Object.defineProperty(b,"totalFrames",{get:function(){return this._totalFrames},enumerable:!0,configurable:!0});Object.defineProperty(b,"currentFrame",{get:function(){return this._currentFrameNum},enumerable:!0,configurable:!0});Object.defineProperty(b,
"currentFrameLabel",{get:function(){var a=this._getFrameLabelByFrame(this._currentFrameNum);return a&&a.name},enumerable:!0,configurable:!0});Object.defineProperty(b,"currentLabel",{get:function(){var a=this._getFrameLabelForFrame(this._currentFrameNum);return a?a.name:null},enumerable:!0,configurable:!0});Object.defineProperty(b,"frameRate",{get:function(){return this.movieClipData.frameRate},set:function(a){a!=this._movieClipData.frameRate&&(this._movieClipData.frameRate=a,this._frameIntervalTime=
1E3/this._movieClipData.frameRate)},enumerable:!0,configurable:!0});Object.defineProperty(b,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0});Object.defineProperty(b,"movieClipData",{get:function(){return this._movieClipData},set:function(a){this._setMovieClipData(a)},enumerable:!0,configurable:!0});b._setMovieClipData=function(a){this._movieClipData!=a&&(this._movieClipData=a,this._init())};b.setPlayTimes=function(a){if(0>a||1<=a)this._playTimes=0>a?-1:Math.floor(a)};
b.setIsStopped=function(a){this._isStopped!=a&&((this._isStopped=a)?(this._playTimes=0,c.Ticker.getInstance().unregister(this._advanceTime,this)):(this._playTimes=0==this._playTimes?1:this._playTimes,c.Ticker.getInstance().register(this._advanceTime,this)))};d.renderFilter=c.RenderFilter.getInstance();return d}(c.DisplayObject);c.MovieClip=f;f.prototype.__class__="egret.MovieClip"})(egret||(egret={}));
(function(c){var f=function(c){function d(a,g){c.call(this);this._name=a;this._frame=g|0}__extends(d,c);var b=d.prototype;Object.defineProperty(b,"name",{get:function(){return this._name},enumerable:!0,configurable:!0});Object.defineProperty(b,"frame",{get:function(){return this._frame},enumerable:!0,configurable:!0});b.clone=function(){return new d(this._name,this._frame)};return d}(c.EventDispatcher);c.FrameLabel=f;f.prototype.__class__="egret.FrameLabel"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._mcData=null;this.numFrames=1;this.frames=[];this.labels=null;this.frameRate=0;this.spriteSheet=this.textureData=null}__extends(d,e);var b=d.prototype;b._init=function(a,g,b){this.textureData=g;this.spriteSheet=b;this._setMCData(a)};b.getKeyFrameData=function(a){a=this.frames[a-1];a.frame&&(a=this.frames[a.frame-1]);return a};b.getTextureByFrame=function(a){a=this.getKeyFrameData(a);if(a.res){var g=this.getTextureByResName(a.res);g._offsetX=
a.x|0;g._offsetY=a.y|0;return g}return null};b.getTextureByResName=function(a){var g=this.spriteSheet.getTexture(a);g||(g=this.textureData[a],g=this.spriteSheet.createTexture(a,g.x,g.y,g.w,g.h));return g};b._isDataValid=function(){return 0<this.frames.length};b._isTextureValid=function(){return null!=this.textureData&&null!=this.spriteSheet};b._fillMCData=function(a){this.frameRate=a.frameRate||24;this._fillFramesData(a.frames);this._fillFrameLabelsData(a.labels)};b._fillFramesData=function(a){for(var g=
this.frames,b=a?a.length:0,c,d=0;d<b;d++)if(c=a[d],g.push(c),c.duration){var e=parseInt(c.duration);if(1<e){c=g.length;for(var f=1;f<e;f++)g.push({frame:c})}}this.numFrames=g.length};b._fillFrameLabelsData=function(a){if(a){var g=a.length;if(0<g){this.labels=[];for(var b=0;b<g;b++){var d=a[b];this.labels.push(new c.FrameLabel(d.name,d.frame))}}}};Object.defineProperty(b,"mcData",{get:function(){return this._mcData},set:function(a){this._setMCData(a)},enumerable:!0,configurable:!0});b._setMCData=function(a){this._mcData!=
a&&(this._mcData=a)&&this._fillMCData(a)};return d}(c.HashObject);c.MovieClipData=f;f.prototype.__class__="egret.MovieClipData"})(egret||(egret={}));
(function(c){var f=function(e){function d(a,g){e.call(this);this.enableCache=!0;this._mcDataCache={};this._mcDataSet=a;this.setTexture(g)}__extends(d,e);var b=d.prototype;b.clearCache=function(){this._mcDataCache={}};b.generateMovieClipData=function(a){void 0===a&&(a="");if(""==a&&this._mcDataSet)for(a in this._mcDataSet.mc)break;if(""==a)return null;var g=this._findFromCache(a,this._mcDataCache);g||(g=new c.MovieClipData,this._fillData(a,g,this._mcDataCache));return g};b._findFromCache=function(a,
g){return this.enableCache&&g[a]?g[a]:null};b._fillData=function(a,g,b){if(this._mcDataSet){var c=this._mcDataSet.mc[a];c&&(g._init(c,this._mcDataSet.res,this._spriteSheet),this.enableCache&&(b[a]=g))}};Object.defineProperty(b,"mcDataSet",{get:function(){return this._mcDataSet},set:function(a){this._mcDataSet=a},enumerable:!0,configurable:!0});Object.defineProperty(b,"texture",{set:function(a){this.setTexture(a)},enumerable:!0,configurable:!0});Object.defineProperty(b,"spriteSheet",{get:function(){return this._spriteSheet},
enumerable:!0,configurable:!0});b.setTexture=function(a){this._spriteSheet=a?new c.SpriteSheet(a):null};return d}(c.EventDispatcher);c.MovieClipDataFactory=f;f.prototype.__class__="egret.MovieClipDataFactory"})(egret||(egret={}));
(function(c){var f=function(c){function d(){c.call(this);this._scaleY=this._scaleX=1;this._size=30;this._color="#FFFFFF";this._fontFamily="Arial";this._italic=this._bold=!1;this._textAlign="left";this._verticalAlign="top";this._visible=!1;this._height=this._width=0;this._multiline=!1;this._maxChars=0}__extends(d,c);var b=d.prototype;b._setTextField=function(a){this._textfield=a};b._getText=function(){return null};b._setText=function(a){};b._setTextType=function(a){};b._getTextType=function(){return null};
b._show=function(a,g,b,c){};b._add=function(){};b._remove=function(){};b._hide=function(){};b._addListeners=function(){};b._removeListeners=function(){};b._setScale=function(a,g){this._scaleX=a;this._scaleY=g};b.changePosition=function(a,g){};b._setSize=function(a){this._size=a};b._setTextColor=function(a){this._color=a};b._setTextFontFamily=function(a){this._fontFamily=a};b._setBold=function(a){this._bold=a};b._setItalic=function(a){this._italic=a};b._setTextAlign=function(a){this._textAlign=a};
b._setVerticalAlign=function(a){this._verticalAlign=a};b._setVisible=function(a){this._visible=a};b._setWidth=function(a){this._width=a};b._setHeight=function(a){this._height=a};b._setMultiline=function(a){this._multiline=a};b._setMaxChars=function(a){this._maxChars=a};b._resetStageText=function(){};b._initElement=function(a,g,b,c){};b._removeInput=function(){};d.create=function(){return null};return d}(c.EventDispatcher);c.StageText=f;f.prototype.__class__="egret.StageText"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.GET="get";c.POST="post";return c}();c.URLRequestMethod=f;f.prototype.__class__="egret.URLRequestMethod"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.BINARY="binary";c.TEXT="text";c.VARIABLES="variables";c.TEXTURE="texture";c.SOUND="sound";return c}();c.URLLoaderDataFormat=f;f.prototype.__class__="egret.URLLoaderDataFormat"})(egret||(egret={}));
(function(c){var f=function(c){function d(a){void 0===a&&(a=null);c.call(this);this.variables=null;null!==a&&this.decode(a)}__extends(d,c);var b=d.prototype;b.decode=function(a){this.variables||(this.variables={});a=a.split("+").join(" ");for(var g,b=/[?&]?([^=]+)=([^&]*)/g;g=b.exec(a);){var c=decodeURIComponent(g[1]);g=decodeURIComponent(g[2]);if(!1==c in this.variables)this.variables[c]=g;else{var d=this.variables[c];d instanceof Array?d.push(g):this.variables[c]=[d,g]}}};b.toString=function(){if(!this.variables)return"";
var a=this.variables,g=[],b;for(b in a)g.push(this.encodeValue(b,a[b]));return g.join("&")};b.encodeValue=function(a,g){return g instanceof Array?this.encodeArray(a,g):encodeURIComponent(a)+"="+encodeURIComponent(g)};b.encodeArray=function(a,g){return a?0==g.length?encodeURIComponent(a)+"=":g.map(function(g){return encodeURIComponent(a)+"="+encodeURIComponent(g)}).join("&"):""};return d}(c.HashObject);c.URLVariables=f;f.prototype.__class__="egret.URLVariables"})(egret||(egret={}));
(function(c){var f=function(){return function(c,d){this.value=this.name="";this.name=c;this.value=d}}();c.URLRequestHeader=f;f.prototype.__class__="egret.URLRequestHeader"})(egret||(egret={}));(function(c){var f=function(e){function d(b){void 0===b&&(b=null);e.call(this);this.data=null;this.method=c.URLRequestMethod.GET;this.url="";this.url=b}__extends(d,e);return d}(c.HashObject);c.URLRequest=f;f.prototype.__class__="egret.URLRequest"})(egret||(egret={}));
(function(c){var f=function(e){function d(a){void 0===a&&(a=null);e.call(this);this.dataFormat=c.URLLoaderDataFormat.TEXT;this._request=this.data=null;this._status=-1;a&&this.load(a)}__extends(d,e);var b=d.prototype;b.load=function(a){this._request=a;this.data=null;c.MainContext.instance.netContext.proceed(this)};b.__recycle=function(){this.data=this._request=null};return d}(c.EventDispatcher);c.URLLoader=f;f.prototype.__class__="egret.URLLoader"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._sourceHeight=this._sourceWidth=this._textureHeight=this._textureWidth=this._offsetY=this._offsetX=this._bitmapHeight=this._bitmapWidth=this._bitmapY=this._bitmapX=0;this._bitmapData=null}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"textureWidth",{get:function(){return this._textureWidth},enumerable:!0,configurable:!0});Object.defineProperty(b,"textureHeight",{get:function(){return this._textureHeight},enumerable:!0,configurable:!0});
b._setBitmapData=function(a){var g=c.MainContext.instance.rendererContext._texture_scale_factor;this._bitmapData=a;this._sourceWidth=a.width;this._sourceHeight=a.height;this._textureWidth=this._sourceWidth*g;this._textureHeight=this._sourceHeight*g;this._bitmapWidth=this._textureWidth;this._bitmapHeight=this._textureHeight;this._offsetX=this._offsetY=this._bitmapX=this._bitmapY=0};b.getPixel32=function(a,g){return this._bitmapData.getContext("2d").getImageData(a,g,1,1).data};b.dispose=function(){var a=
this._bitmapData;a.dispose&&a.dispose()};b._clone=function(){var a=new d;a._bitmapData=this._bitmapData;return a};b.draw=function(a,g,b,c,d,e,f,k,m,p){};b._drawForCanvas=function(a,g,b,c,d,e,f,k,m,p){var r=this._bitmapData;r&&r.avaliable&&(void 0!=p?this._drawRepeatImageForCanvas(a,g,b,c,d,e,f,k,m,p):a.drawImage(r,g,b,c,d,e,f,k,m))};b._drawForNative=function(a,g,b,c,d,e,f,k,m,p){var r=this._bitmapData;r&&r.avaliable&&(void 0!==p?this._drawRepeatImageForNative(a,g,b,c,d,e,f,k,m,p):a.drawImage(r,g,
b,c,d,e,f,k,m))};b._drawRepeatImageForNative=function(a,g,b,d,e,f,h,k,m,p){p=c.MainContext.instance.rendererContext._texture_scale_factor;d*=p;for(e*=p;f<k;f+=d)for(var r=h;r<m;r+=e){var s=Math.min(d,k-f),t=Math.min(e,m-r);this._drawForNative(a,g,b,s/p,t/p,f,r,s,t,void 0)}};b._drawRepeatImageForCanvas=function(a,g,b,d,e,f,h,k,m,p){if(void 0===this.pattern){var r=c.MainContext.instance.rendererContext._texture_scale_factor,s=this._bitmapData,t=s;if(s.width!=d||s.height!=e||1!=r)t=document.createElement("canvas"),
t.width=d*r,t.height=e*r,t.getContext("2d").drawImage(s,g,b,d,e,0,0,d*r,e*r);this.pattern=a.createPattern(t,p)}a.fillStyle=this.pattern;a.translate(f,h);a.fillRect(0,0,k,m);a.translate(-f,-h)};b._disposeForCanvas=function(){d.deleteWebGLTexture(this);var a=this._bitmapData;a.onload=null;a.onerror=null;a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAATSURBVHjaYvj//z8DAAAA//8DAAj8Av7TpXVhAAAAAElFTkSuQmCC";
a.avaliable=!1;console.log("_disposeForCanvas")};b._disposeForNative=function(){var a=this._bitmapData;a.dispose();a.avaliable=!1;console.log("_disposeForNative")};d.deleteWebGLTexture=function(a){if(a=a._bitmapData){var g=a.webGLTexture;if(g)for(var b in g){var c=g[b];c.glContext.deleteTexture(c)}a.webGLTexture=null}};d.createBitmapData=function(a,g){};d._createBitmapDataForCanvasAndWebGl=function(a,g){var b=d._bitmapDataFactory[a];b||(b=document.createElement("img"),b.setAttribute("bitmapSrc",a),
d._bitmapDataFactory[a]=b);if(b.avaliable)g(0,b);else{b.crossOrigin=d.crossOrigin;var e=window.URL||window.webkitURL;if(null==d._bitmapCallbackMap[a])if(d._addToCallbackList(a,g),0!=a.indexOf("data:")&&0!=a.indexOf("http:")&&0!=a.indexOf("https:")&&c.Browser.getInstance().isIOS()&&7<=parseInt(c.Browser.getInstance().getIOSVersion().charAt(0))&&e){var f=new XMLHttpRequest;f.open("get",a,!0);f.responseType="blob";f.onload=function(){if(200==this.status){var c=this.response;b.onload=function(){e.revokeObjectURL(b.src);
d._onLoad(a,b)};b.onerror=function(){d._onError(a,b)};b.src=e.createObjectURL(c)}else g(1,null)};f.send()}else b.onload=function(){d._onLoad(a,b)},b.onerror=function(){d._onError(a,b)},b.src=a;else d._addToCallbackList(a,g)}};d._onLoad=function(a,g){g.avaliable=!0;g.onload&&(g.onload=null);g.onerror&&(g.onerror=null);var b=d._bitmapCallbackMap[a];if(b&&b.length){delete d._bitmapCallbackMap[a];for(var c=b.length,e=0;e<c;e++)(0,b[e])(0,g)}};d._onError=function(a,g){var b=d._bitmapCallbackMap[a];if(b&&
b.length){delete d._bitmapCallbackMap[a];for(var c=b.length,e=0;e<c;e++)(0,b[e])(1,g)}};d._createBitmapDataForNative=function(a,g){console.log("_createBitmapDataForNative:"+a);var b=d._bitmapDataFactory[a];b?(b.avaliable||(console.log("reload"),b.reload(),b.avaliable=!0),g(0,b)):c.NativeNetContext.__use_asyn?d._bitmapCallbackMap[a]?d._addToCallbackList(a,g):(d._addToCallbackList(a,g),b=new c.PromiseObject,b.onSuccessFunc=function(g){d._bitmapDataFactory[a]=g;d._onLoad(a,g)},b.onErrorFunc=function(){d._onError(a,
null)},console.log("addTextureAsyn"),egret_native.Texture.addTextureAsyn(a,b)):(console.log("addTexture"),b=egret_native.Texture.addTexture(a),d._bitmapDataFactory[a]=b,b.avaliable=!0,g(0,b))};d._addToCallbackList=function(a,g){var b=d._bitmapCallbackMap[a];b||(b=[]);b.push(g);d._bitmapCallbackMap[a]=b};d.crossOrigin=null;d._bitmapDataFactory={};d._bitmapCallbackMap={};return d}(c.HashObject);c.Texture=f;f.prototype.__class__="egret.Texture"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this)}__extends(d,e);var b=d.prototype;b.init=function(){this._bitmapData=document.createElement("canvas");this._bitmapData.avaliable=!0;this.renderContext=c.RendererContext.createRendererContext(this._bitmapData)};b.drawToTexture=function(a,g,b){var e=g||a.getBounds(c.Rectangle.identity);if(0==e.width||0==e.height)return!1;this._bitmapData||this.init();var f=e.x,l=e.y,h=e.width,e=e.height,k,m,p=c.MainContext.instance.rendererContext._texture_scale_factor;
k=h/p;m=e/p;k=Math.round(k);m=Math.round(m);this.setSize(k,m);this.begin();a._worldTransform.identity();a._worldTransform.a=1/p;a._worldTransform.d=1/p;b&&(a._worldTransform.a*=b,a._worldTransform.d*=b);b=a._DO_Props_._anchorOffsetX;p=a._DO_Props_._anchorOffsetY;if(0!=a._DO_Props_._anchorX||0!=a._DO_Props_._anchorY)b=a._DO_Props_._anchorX*k,p=a._DO_Props_._anchorY*m;this._offsetX=f+b;this._offsetY=l+p;a._worldTransform.append(1,0,0,1,-this._offsetX,-this._offsetY);g&&(this._offsetX-=f,this._offsetY-=
l);a.worldAlpha=1;if(a instanceof c.DisplayObjectContainer)for(g=a._children,f=0,l=g.length;f<l;f++)g[f]._updateTransform();this.renderContext.setTransform(a._worldTransform);g=c.RenderFilter.getInstance();f=g._drawAreaList.concat();g._drawAreaList.length=0;this.renderContext.clearScreen();this.renderContext.onRenderStart();c.Texture.deleteWebGLTexture(this);a._hasFilters()&&a._setGlobalFilters(this.renderContext);(l=a.mask||a._DO_Props_._scrollRect)&&this.renderContext.pushMask(l);b=c.MainContext.__use_new_draw;
c.MainContext.__use_new_draw=!1;a._render(this.renderContext);c.MainContext.__use_new_draw=b;l&&this.renderContext.popMask();a._hasFilters()&&a._removeGlobalFilters(this.renderContext);d.identityRectangle.width=k;d.identityRectangle.height=m;g.addDrawArea(d.identityRectangle);this.renderContext.onRenderFinish();g._drawAreaList=f;this._sourceWidth=k;this._sourceHeight=m;this._textureWidth=Math.round(h);this._textureHeight=Math.round(e);this.end();return!0};b.setSize=function(a,g){var b=this._bitmapData;
b.width=a;b.height=g;b.style.width=a+"px";b.style.height=g+"px";this.renderContext._cacheCanvas&&(this.renderContext._cacheCanvas.width=a,this.renderContext._cacheCanvas.height=g)};b.begin=function(){};b.end=function(){};b.dispose=function(){this._bitmapData&&(this.renderContext=this._bitmapData=null)};d.create=function(){return d._pool.length?d._pool.pop():new d};d.release=function(a){d._pool.push(a)};d.identityRectangle=new c.Rectangle;d._pool=[];return d}(c.Texture);c.RenderTexture=f;f.prototype.__class__=
"egret.RenderTexture"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.renderCost=0;this._texture_scale_factor=1;this.profiler=c.Profiler.getInstance();d.blendModesForGL||d.initBlendMode()}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"texture_scale_factor",{get:function(){return this._texture_scale_factor},set:function(a){this._setTextureScaleFactor(a)},enumerable:!0,configurable:!0});b._setTextureScaleFactor=function(a){this._texture_scale_factor=a};b.clearScreen=function(){};b.clearRect=function(a,
g,b,c){};b.drawImage=function(a,g,b,c,d,e,f,k,m,p){this.profiler.onDrawImage()};b.drawImageScale9=function(a,g,b,c,d,e,f,k,m,p){return!1};b._addOneDraw=function(){this.profiler.onDrawImage()};b.setTransform=function(a){};b.setAlpha=function(a,g){};b.setupFont=function(a,g){};b.measureText=function(a){return 0};b.drawText=function(a,g,b,c,d,e){this.profiler.onDrawImage()};b.strokeRect=function(a,g,b,c,d){};b.pushMask=function(a){};b.popMask=function(){};b.onRenderStart=function(){};b.onRenderFinish=
function(){};b.createLinearGradient=function(a,g,b,c){return null};b.createRadialGradient=function(a,g,b,c,d,e){return null};b.setGlobalFilters=function(a){};b.drawCursor=function(a,g,b,c){};d.createRendererContext=function(a){return null};d.initBlendMode=function(){d.blendModesForGL={};d.blendModesForGL[c.BlendMode.NORMAL]=[1,771];d.blendModesForGL[c.BlendMode.ADD]=[770,1];d.blendModesForGL[c.BlendMode.ERASE]=[0,771];d.blendModesForGL[c.BlendMode.ERASE_REVERSE]=[0,770]};d.registerBlendModeForGL=
function(a,g,b,e){d.blendModesForGL[a]&&!e?c.$warn(1005,a):d.blendModesForGL[a]=[g,b]};d.imageSmoothingEnabled=!0;d.blendModesForGL=null;return d}(c.HashObject);c.RendererContext=f;f.prototype.__class__="egret.RendererContext"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.MOUSE="mouse";c.TOUCH="touch";c.mode="touch";return c}();c.InteractionMode=f;f.prototype.__class__="egret.InteractionMode"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._currentTouchTarget={};this.maxTouches=2;this.touchDownTarget={};this.touchingIdentifiers=[];this.lastTouchY=this.lastTouchX=-1}__extends(d,e);var b=d.prototype;b.run=function(){};b.getTouchData=function(a,g,b){var c=this._currentTouchTarget[a];null==c&&(c={},this._currentTouchTarget[a]=c);c.stageX=g;c.stageY=b;c.identifier=a;return c};b.dispatchEvent=function(a,g){c.TouchEvent.dispatchTouchEvent(g.target,a,g.identifier,g.stageX,g.stageY,
!1,!1,!1,!0==this.touchDownTarget[g.identifier])};b.onTouchBegan=function(a,g,b){if(this.touchingIdentifiers.length!=this.maxTouches){this.lastTouchX=a;this.lastTouchY=g;var d=c.MainContext.instance.stage.hitTest(a,g);d&&(a=this.getTouchData(b,a,g),this.touchDownTarget[b]=!0,a.target=d,a.beginTarget=d,this.dispatchEvent(c.TouchEvent.TOUCH_BEGIN,a));this.touchingIdentifiers.push(b)}};b.onTouchMove=function(a,g,b){if(-1!=this.touchingIdentifiers.indexOf(b)&&(a!=this.lastTouchX||g!=this.lastTouchY)){this.lastTouchX=
a;this.lastTouchY=g;var d=c.MainContext.instance.stage.hitTest(a,g);d&&(a=this.getTouchData(b,a,g),a.target=d,this.dispatchEvent(c.TouchEvent.TOUCH_MOVE,a))}};b.onTouchEnd=function(a,g,b){var d=this.touchingIdentifiers.indexOf(b);-1!=d&&(this.touchingIdentifiers.splice(d,1),d=c.MainContext.instance.stage.hitTest(a,g))&&(a=this.getTouchData(b,a,g),delete this.touchDownTarget[b],b=a.beginTarget,a.target=d,this.dispatchEvent(c.TouchEvent.TOUCH_END,a),b==d?this.dispatchEvent(c.TouchEvent.TOUCH_TAP,a):
a.beginTarget&&(a.target=a.beginTarget,this.dispatchEvent(c.TouchEvent.TOUCH_RELEASE_OUTSIDE,a)),delete this._currentTouchTarget[a.identifier])};return d}(c.HashObject);c.TouchContext=f;f.prototype.__class__="egret.TouchContext"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this)}__extends(d,e);var b=d.prototype;b.proceed=function(a){};d._getUrl=function(a){var g=a.url;-1==g.indexOf("?")&&a.method==c.URLRequestMethod.GET&&a.data&&a.data instanceof c.URLVariables&&(g=g+"?"+a.data.toString());return g};b.getChangeList=function(){return[]};return d}(c.HashObject);c.NetContext=f;f.prototype.__class__="egret.NetContext"})(egret||(egret={}));
(function(c){var f=function(c){function d(){c.call(this)}__extends(d,c);var b=d.prototype;b.executeMainLoop=function(a,g){};b.setFrameRate=function(a){};return d}(c.HashObject);c.DeviceContext=f;f.prototype.__class__="egret.DeviceContext"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.call=function(c,b){};c.addCallback=function(c,b){};return c}();c.ExternalInterface=f;f.prototype.__class__="egret.ExternalInterface"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.header=this.trans=null;this.ua=navigator.userAgent.toLowerCase();this.trans=this.getTrans("transform")}__extends(d,e);var b=d.prototype;d.getInstance=function(){null==d.instance&&(d.instance=new d);return d.instance};Object.defineProperty(b,"isMobile",{get:function(){c.$warn(1E3);return c.MainContext.deviceType==c.MainContext.DEVICE_MOBILE},enumerable:!0,configurable:!0});b.isIOS=function(){return 0>this.ua.indexOf("windows")&&(0<=this.ua.indexOf("iphone")||
0<=this.ua.indexOf("ipad")||0<=this.ua.indexOf("ipod"))};b.getIOSVersion=function(){return this.ua.toLowerCase().match(/cpu [^\d]*\d.*like mac os x/)[0].match(/\d(_\d)*/)[0]};b.getUserAgent=function(){return this.ua};b.getTrans=function(a,g){void 0===g&&(g=!1);var b="";g?b=this.getHeader(a):(null==this.header&&(this.header=this.getHeader("transform")),b=this.header);return""==b?a:b+a.charAt(0).toUpperCase()+a.substring(1,a.length)};b.getHeader=function(a){var g=document.createElement("div").style;
if(a in g)return"";a=a.charAt(0).toUpperCase()+a.substring(1,a.length);for(var b=["webkit","ms","Moz","O"],c=0;c<b.length;c++)if(b[c]+a in g)return b[c];return""};b.$new=function(a){return this.$(document.createElement(a))};b.$=function(a){var g=document;if(a=a instanceof HTMLElement?a:g.querySelector(a))a.find=a.find||this.$,a.hasClass=a.hasClass||function(a){return this.className.match(new RegExp("(\\s|^)"+a+"(\\s|$)"))},a.addClass=a.addClass||function(a){this.hasClass(a)||(this.className&&(this.className+=
" "),this.className+=a);return this},a.removeClass=a.removeClass||function(a){this.hasClass(a)&&(this.className=this.className.replace(a,""));return this},a.remove=a.remove||function(){},a.appendTo=a.appendTo||function(a){a.appendChild(this);return this},a.prependTo=a.prependTo||function(a){a.childNodes[0]?a.insertBefore(this,a.childNodes[0]):a.appendChild(this);return this},a.transforms=a.transforms||function(){this.style[d.getInstance().trans]=d.getInstance().translate(this.position)+d.getInstance().rotate(this.rotation)+
d.getInstance().scale(this.scale)+d.getInstance().skew(this.skew);return this},a.position=a.position||{x:0,y:0},a.rotation=a.rotation||0,a.scale=a.scale||{x:1,y:1},a.skew=a.skew||{x:0,y:0},a.translates=function(a,g){this.position.x=a;this.position.y=g-c.MainContext.instance.stage.stageHeight;this.transforms();return this},a.rotate=function(a){this.rotation=a;this.transforms();return this},a.resize=function(a,g){this.scale.x=a;this.scale.y=g;this.transforms();return this},a.setSkew=function(a,g){this.skew.x=
a;this.skew.y=g;this.transforms();return this};return a};b.translate=function(a){return"translate("+a.x+"px, "+a.y+"px) "};b.rotate=function(a){return"rotate("+a+"deg) "};b.scale=function(a){return"scale("+a.x+", "+a.y+") "};b.skew=function(a){return"skewX("+-a.x+"deg) skewY("+a.y+"deg)"};return d}(c.HashObject);c.Browser=f;f.prototype.__class__="egret.Browser"})(egret||(egret={}));
(function(c){(function(c){c.getItem=function(c){return null};c.setItem=function(c,d){return!1};c.removeItem=function(c){};c.clear=function(){}})(c.localStorage||(c.localStorage={}))})(egret||(egret={}));
(function(c){var f=function(){function e(){}e.parse=function(d){d=c.SAXParser.getInstance().parserXML(d);if(!d||!d.childNodes)return null;for(var b=d.childNodes.length,a=!1,g=0;g<b;g++){var u=d.childNodes[g];if(1==u.nodeType){a=!0;break}}return a?e.parseNode(u):null};e.parseNode=function(c){if(!c||1!=c.nodeType)return null;var b={};b.localName=c.localName;b.name=c.nodeName;c.namespaceURI&&(b.namespace=c.namespaceURI);c.prefix&&(b.prefix=c.prefix);for(var a=c.attributes,g=a.length,u=0;u<g;u++){var q=
a[u],f=q.name;0!=f.indexOf("xmlns:")&&(b["$"+f]=q.value)}a=c.childNodes;g=a.length;for(u=0;u<g;u++)if(q=e.parseNode(a[u]))b.children||(b.children=[]),q.parent=b,b.children.push(q);!b.children&&(c=c.textContent.trim())&&(b.text=c);return b};e.findChildren=function(c,b,a){a?a.length=0:a=[];e.findByPath(c,b,a);return a};e.findByPath=function(c,b,a){var g=b.indexOf("."),u;-1==g?(u=b,g=!0):(u=b.substring(0,g),b=b.substring(g+1),g=!1);if(c=c.children)for(var q=c.length,f=0;f<q;f++){var l=c[f];l.localName==
u&&(g?a.push(l):e.findByPath(l,b,a))}};e.getAttributes=function(c,b){b?b.length=0:b=[];for(var a in c)"$"==a.charAt(0)&&b.push(a.substring(1));return b};return e}();c.XML=f;f.prototype.__class__="egret.XML"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.LITTLE_ENDIAN="littleEndian";c.BIG_ENDIAN="bigEndian";return c}();c.Endian=f;f.prototype.__class__="egret.Endian";var e=function(){function d(a){this.BUFFER_EXT_SIZE=0;this.EOF_code_point=this.EOF_byte=-1;this._setArrayBuffer(a||new ArrayBuffer(this.BUFFER_EXT_SIZE));this.endian=f.BIG_ENDIAN}var b=d.prototype;b._setArrayBuffer=function(a){this.write_position=a.byteLength;this.data=new DataView(a);this._position=0};Object.defineProperty(b,"buffer",{get:function(){return this.data.buffer},
set:function(a){this.data=new DataView(a)},enumerable:!0,configurable:!0});Object.defineProperty(b,"dataView",{get:function(){return this.data},set:function(a){this.data=a;this.write_position=a.byteLength},enumerable:!0,configurable:!0});Object.defineProperty(b,"bufferOffset",{get:function(){return this.data.byteOffset},enumerable:!0,configurable:!0});Object.defineProperty(b,"position",{get:function(){return this._position},set:function(a){this._position<a&&!this.validate(a-this._position)||(this._position=
a,this.write_position=a>this.write_position?a:this.write_position)},enumerable:!0,configurable:!0});Object.defineProperty(b,"length",{get:function(){return this.write_position},set:function(a){this.validateBuffer(a,!0)},enumerable:!0,configurable:!0});Object.defineProperty(b,"bytesAvailable",{get:function(){return this.data.byteLength-this._position},enumerable:!0,configurable:!0});b.clear=function(){this._setArrayBuffer(new ArrayBuffer(this.BUFFER_EXT_SIZE))};b.readBoolean=function(){return this.validate(d.SIZE_OF_BOOLEAN)?
0!=this.data.getUint8(this.position++):null};b.readByte=function(){return this.validate(d.SIZE_OF_INT8)?this.data.getInt8(this.position++):null};b.readBytes=function(a,g,b){void 0===g&&(g=0);void 0===b&&(b=0);if(0==b)b=this.bytesAvailable;else if(!this.validate(b))return null;a?a.validateBuffer(b):a=new d(new ArrayBuffer(b));for(var c=0;c<b;c++)a.data.setUint8(c+g,this.data.getUint8(this.position++))};b.readDouble=function(){if(!this.validate(d.SIZE_OF_FLOAT64))return null;var a=this.data.getFloat64(this.position,
this.endian==f.LITTLE_ENDIAN);this.position+=d.SIZE_OF_FLOAT64;return a};b.readFloat=function(){if(!this.validate(d.SIZE_OF_FLOAT32))return null;var a=this.data.getFloat32(this.position,this.endian==f.LITTLE_ENDIAN);this.position+=d.SIZE_OF_FLOAT32;return a};b.readInt=function(){if(!this.validate(d.SIZE_OF_INT32))return null;var a=this.data.getInt32(this.position,this.endian==f.LITTLE_ENDIAN);this.position+=d.SIZE_OF_INT32;return a};b.readShort=function(){if(!this.validate(d.SIZE_OF_INT16))return null;
var a=this.data.getInt16(this.position,this.endian==f.LITTLE_ENDIAN);this.position+=d.SIZE_OF_INT16;return a};b.readUnsignedByte=function(){return this.validate(d.SIZE_OF_UINT8)?this.data.getUint8(this.position++):null};b.readUnsignedInt=function(){if(!this.validate(d.SIZE_OF_UINT32))return null;var a=this.data.getUint32(this.position,this.endian==f.LITTLE_ENDIAN);this.position+=d.SIZE_OF_UINT32;return a};b.readUnsignedShort=function(){if(!this.validate(d.SIZE_OF_UINT16))return null;var a=this.data.getUint16(this.position,
this.endian==f.LITTLE_ENDIAN);this.position+=d.SIZE_OF_UINT16;return a};b.readUTF=function(){if(!this.validate(d.SIZE_OF_UINT16))return null;var a=this.data.getUint16(this.position,this.endian==f.LITTLE_ENDIAN);this.position+=d.SIZE_OF_UINT16;return 0<a?this.readUTFBytes(a):""};b.readUTFBytes=function(a){if(!this.validate(a))return null;var g=new Uint8Array(this.buffer,this.bufferOffset+this.position,a);this.position+=a;return this.decodeUTF8(g)};b.writeBoolean=function(a){this.validateBuffer(d.SIZE_OF_BOOLEAN);
this.data.setUint8(this.position++,a?1:0)};b.writeByte=function(a){this.validateBuffer(d.SIZE_OF_INT8);this.data.setInt8(this.position++,a)};b.writeBytes=function(a,g,b){void 0===g&&(g=0);void 0===b&&(b=0);if(!(0>g||0>b)&&(b=0==b?a.length-g:Math.min(a.length-g,b),0<b)){this.validateBuffer(b);a=new DataView(a.buffer);for(var c=g;c<b+g;c++)this.data.setUint8(this.position++,a.getUint8(c))}};b.writeDouble=function(a){this.validateBuffer(d.SIZE_OF_FLOAT64);this.data.setFloat64(this.position,a,this.endian==
f.LITTLE_ENDIAN);this.position+=d.SIZE_OF_FLOAT64};b.writeFloat=function(a){this.validateBuffer(d.SIZE_OF_FLOAT32);this.data.setFloat32(this.position,a,this.endian==f.LITTLE_ENDIAN);this.position+=d.SIZE_OF_FLOAT32};b.writeInt=function(a){this.validateBuffer(d.SIZE_OF_INT32);this.data.setInt32(this.position,a,this.endian==f.LITTLE_ENDIAN);this.position+=d.SIZE_OF_INT32};b.writeShort=function(a){this.validateBuffer(d.SIZE_OF_INT16);this.data.setInt16(this.position,a,this.endian==f.LITTLE_ENDIAN);this.position+=
d.SIZE_OF_INT16};b.writeUnsignedInt=function(a){this.validateBuffer(d.SIZE_OF_UINT32);this.data.setUint32(this.position,a,this.endian==f.LITTLE_ENDIAN);this.position+=d.SIZE_OF_UINT32};b.writeUTF=function(a){a=this.encodeUTF8(a);var g=a.length;this.validateBuffer(d.SIZE_OF_UINT16+g);this.data.setUint16(this.position,g,this.endian===f.LITTLE_ENDIAN);this.position+=d.SIZE_OF_UINT16;this._writeUint8Array(a,!1)};b.writeUTFBytes=function(a){this._writeUint8Array(this.encodeUTF8(a))};b.toString=function(){return"[ByteArray] length:"+
this.length+", bytesAvailable:"+this.bytesAvailable};b._writeUint8Array=function(a,g){void 0===g&&(g=!0);g&&this.validateBuffer(this.position+a.length);for(var b=0;b<a.length;b++)this.data.setUint8(this.position++,a[b])};b.validate=function(a){if(0<this.data.byteLength&&this._position+a<=this.data.byteLength)return!0;c.$error(1025)};b.validateBuffer=function(a,g){void 0===g&&(g=!1);this.write_position=a>this.write_position?a:this.write_position;a+=this._position;if(this.data.byteLength<a||g){var b=
new Uint8Array(new ArrayBuffer(a+this.BUFFER_EXT_SIZE)),c=Math.min(this.data.buffer.byteLength,a+this.BUFFER_EXT_SIZE);b.set(new Uint8Array(this.data.buffer,0,c));this.buffer=b.buffer}};b.encodeUTF8=function(a){var g=0;a=this.stringToCodePoints(a);for(var b=[];a.length>g;){var c=a[g++];if(this.inRange(c,55296,57343))this.encoderError(c);else if(this.inRange(c,0,127))b.push(c);else{var d,e;this.inRange(c,128,2047)?(d=1,e=192):this.inRange(c,2048,65535)?(d=2,e=224):this.inRange(c,65536,1114111)&&(d=
3,e=240);for(b.push(this.div(c,Math.pow(64,d))+e);0<d;){var f=this.div(c,Math.pow(64,d-1));b.push(128+f%64);d-=1}}}return new Uint8Array(b)};b.decodeUTF8=function(a){for(var g=0,b="",c,d=0,e=0,f=0,k=0;a.length>g;){c=a[g++];if(c===this.EOF_byte)c=0!==e?this.decoderError(!1):this.EOF_code_point;else if(0===e)this.inRange(c,0,127)||(this.inRange(c,194,223)?(e=1,k=128,d=c-192):this.inRange(c,224,239)?(e=2,k=2048,d=c-224):this.inRange(c,240,244)?(e=3,k=65536,d=c-240):this.decoderError(!1),d*=Math.pow(64,
e),c=null);else if(this.inRange(c,128,191))if(f+=1,d+=(c-128)*Math.pow(64,e-f),f!==e)c=null;else{var m=d,p=k,k=f=e=d=0;c=this.inRange(m,p,1114111)&&!this.inRange(m,55296,57343)?m:this.decoderError(!1,c)}else k=f=e=d=0,g--,c=this.decoderError(!1,c);null!==c&&c!==this.EOF_code_point&&(65535>=c?0<c&&(b+=String.fromCharCode(c)):(c-=65536,b+=String.fromCharCode(55296+(c>>10&1023)),b+=String.fromCharCode(56320+(c&1023))))}return b};b.encoderError=function(a){c.$error(1026,a)};b.decoderError=function(a,
g){a&&c.$error(1027);return g||65533};b.inRange=function(a,g,b){return g<=a&&a<=b};b.div=function(a,g){return Math.floor(a/g)};b.stringToCodePoints=function(a){for(var g=[],b=0,c=a.length;b<a.length;){var d=a.charCodeAt(b);if(this.inRange(d,55296,57343))if(this.inRange(d,56320,57343))g.push(65533);else if(b===c-1)g.push(65533);else{var e=a.charCodeAt(b+1);this.inRange(e,56320,57343)?(d&=1023,e&=1023,b+=1,g.push(65536+(d<<10)+e)):g.push(65533)}else g.push(d);b+=1}return g};d.SIZE_OF_BOOLEAN=1;d.SIZE_OF_INT8=
1;d.SIZE_OF_INT16=2;d.SIZE_OF_INT32=4;d.SIZE_OF_UINT8=1;d.SIZE_OF_UINT16=2;d.SIZE_OF_UINT32=4;d.SIZE_OF_FLOAT32=4;d.SIZE_OF_FLOAT64=8;return d}();c.ByteArray=e;e.prototype.__class__="egret.ByteArray"})(egret||(egret={}));(function(c){c.getOption=function(c){if(window.hasOwnProperty("location")){var e=location.search;if(""==e)return"";for(var e=e.slice(1),e=e.split("&"),d=e.length,b=0;b<d;b++){var a=e[b].split("=");if(a[0]==c)return a[1]}}return""}})(egret||(egret={}));
(function(c){var f=function(e){function d(a,g,b){e.call(this);this._target=null;this.loop=this.ignoreGlobalPause=this._useTicks=!1;this._actions=this._steps=this.pluginData=null;this.paused=!1;this.duration=0;this._prevPos=-1;this.position=null;this._stepPosition=this._prevPosition=0;this.passive=!1;this.initialize(a,g,b)}__extends(d,e);var b=d.prototype;d.get=function(a,g,b,c){void 0===g&&(g=null);void 0===b&&(b=null);void 0===c&&(c=!1);c&&d.removeTweens(a);return new d(a,g,b)};d.removeTweens=function(a){if(a.tween_count){for(var g=
d._tweens,b=g.length-1;0<=b;b--)g[b]._target==a&&(g[b].paused=!0,g.splice(b,1));a.tween_count=0}};d.pauseTweens=function(a){if(a.tween_count)for(var g=c.Tween._tweens,b=g.length-1;0<=b;b--)g[b]._target==a&&(g[b].paused=!0)};d.resumeTweens=function(a){if(a.tween_count)for(var g=c.Tween._tweens,b=g.length-1;0<=b;b--)g[b]._target==a&&(g[b].paused=!1)};d.tick=function(a,g){void 0===g&&(g=!1);for(var b=d._tweens.concat(),c=b.length-1;0<=c;c--){var e=b[c];g&&!e.ignoreGlobalPause||e.paused||e.tick(e._useTicks?
1:a)}};d._register=function(a,g){var b=a._target,e=d._tweens;if(g)b&&(b.tween_count=0<b.tween_count?b.tween_count+1:1),e.push(a),d._inited||(c.Ticker.getInstance().register(d.tick,null),d._inited=!0);else for(b&&b.tween_count--,b=e.length;b--;)if(e[b]==a){e.splice(b,1);break}};d.removeAllTweens=function(){for(var a=d._tweens,g=0,b=a.length;g<b;g++){var c=a[g];c.paused=!0;c._target.tweenjs_count=0}a.length=0};b.initialize=function(a,g,b){this._target=a;g&&(this._useTicks=g.useTicks,this.ignoreGlobalPause=
g.ignoreGlobalPause,this.loop=g.loop,g.onChange&&this.addEventListener("change",g.onChange,g.onChangeObj),g.override&&d.removeTweens(a));this.pluginData=b||{};this._curQueueProps={};this._initQueueProps={};this._steps=[];this._actions=[];g&&g.paused?this.paused=!0:d._register(this,!0);g&&null!=g.position&&this.setPosition(g.position,d.NONE)};b.setPosition=function(a,g){void 0===g&&(g=1);0>a&&(a=0);var b=a,c=!1;b>=this.duration&&(this.loop?b%=this.duration:(b=this.duration,c=!0));if(b==this._prevPos)return c;
var d=this._prevPos;this.position=this._prevPos=b;this._prevPosition=a;if(this._target)if(c)this._updateTargetProps(null,1);else if(0<this._steps.length){for(var e=0,f=this._steps.length;e<f&&!(this._steps[e].t>b);e++);e=this._steps[e-1];this._updateTargetProps(e,(this._stepPosition=b-e.t)/e.d)}0!=g&&0<this._actions.length&&(this._useTicks?this._runActions(b,b):1==g&&b<d?(d!=this.duration&&this._runActions(d,this.duration),this._runActions(0,b,!0)):this._runActions(d,b));c&&this.setPaused(!0);this.dispatchEventWith("change");
return c};b._runActions=function(a,g,b){void 0===b&&(b=!1);var c=a,d=g,e=-1,f=this._actions.length,k=1;a>g&&(c=g,d=a,e=f,f=k=-1);for(;(e+=k)!=f;){g=this._actions[e];var m=g.t;(m==d||m>c&&m<d||b&&m==a)&&g.f.apply(g.o,g.p)}};b._updateTargetProps=function(a,g){var b,c,e,f;if(a||1!=g){if(this.passive=!!a.v)return;a.e&&(g=a.e(g,0,1,1));b=a.p0;c=a.p1}else this.passive=!1,b=c=this._curQueueProps;for(var h in this._initQueueProps){null==(e=b[h])&&(b[h]=e=this._initQueueProps[h]);null==(f=c[h])&&(c[h]=f=e);
e=e==f||0==g||1==g||"number"!=typeof e?1==g?f:e:e+(f-e)*g;var k=!1;if(f=d._plugins[h])for(var m=0,p=f.length;m<p;m++){var r=f[m].tween(this,h,e,b,c,g,!!a&&b==c,!a);r==d.IGNORE?k=!0:e=r}k||(this._target[h]=e)}};b.setPaused=function(a){this.paused=a;d._register(this,!a);return this};b._cloneProps=function(a){var g={},b;for(b in a)g[b]=a[b];return g};b._addStep=function(a){0<a.d&&(this._steps.push(a),a.t=this.duration,this.duration+=a.d);return this};b._appendQueueProps=function(a){var g,b,c,e,f,h;for(h in a)if(void 0===
this._initQueueProps[h]){b=this._target[h];if(g=d._plugins[h])for(c=0,e=g.length;c<e;c++)b=g[c].init(this,h,b);this._initQueueProps[h]=this._curQueueProps[h]=void 0===b?null:b}for(h in a){b=this._curQueueProps[h];if(g=d._plugins[h])for(f=f||{},c=0,e=g.length;c<e;c++)g[c].step&&g[c].step(this,h,b,a[h],f);this._curQueueProps[h]=a[h]}f&&this._appendQueueProps(f);return this._curQueueProps};b._addAction=function(a){a.t=this.duration;this._actions.push(a);return this};b._set=function(a,g){for(var b in a)g[b]=
a[b]};b.wait=function(a,g){if(null==a||0>=a)return this;var b=this._cloneProps(this._curQueueProps);return this._addStep({d:a,p0:b,p1:b,v:g})};b.to=function(a,g,b){void 0===b&&(b=void 0);if(isNaN(g)||0>g)g=0;return this._addStep({d:g||0,p0:this._cloneProps(this._curQueueProps),e:b,p1:this._cloneProps(this._appendQueueProps(a))})};b.call=function(a,g,b){void 0===g&&(g=void 0);void 0===b&&(b=void 0);return this._addAction({f:a,p:b?b:[],o:g?g:this._target})};b.set=function(a,g){void 0===g&&(g=null);
return this._addAction({f:this._set,o:this,p:[a,g?g:this._target]})};b.play=function(a){a||(a=this);return this.call(a.setPaused,a,[!1])};b.pause=function(a){a||(a=this);return this.call(a.setPaused,a,[!0])};b.tick=function(a){this.paused||this.setPosition(this._prevPosition+a)};d.NONE=0;d.LOOP=1;d.REVERSE=2;d._tweens=[];d.IGNORE={};d._plugins={};d._inited=!1;return d}(c.EventDispatcher);c.Tween=f;f.prototype.__class__="egret.Tween"})(egret||(egret={}));
(function(c){var f=function(){function e(){c.$error(1014)}e.get=function(c){-1>c&&(c=-1);1<c&&(c=1);return function(b){return 0==c?b:0>c?b*(b*-c+1+c):b*((2-b)*c+(1-c))}};e.getPowIn=function(c){return function(b){return Math.pow(b,c)}};e.getPowOut=function(c){return function(b){return 1-Math.pow(1-b,c)}};e.getPowInOut=function(c){return function(b){return 1>(b*=2)?0.5*Math.pow(b,c):1-0.5*Math.abs(Math.pow(2-b,c))}};e.sineIn=function(c){return 1-Math.cos(c*Math.PI/2)};e.sineOut=function(c){return Math.sin(c*
Math.PI/2)};e.sineInOut=function(c){return-0.5*(Math.cos(Math.PI*c)-1)};e.getBackIn=function(c){return function(b){return b*b*((c+1)*b-c)}};e.getBackOut=function(c){return function(b){return--b*b*((c+1)*b+c)+1}};e.getBackInOut=function(c){c*=1.525;return function(b){return 1>(b*=2)?0.5*b*b*((c+1)*b-c):0.5*((b-=2)*b*((c+1)*b+c)+2)}};e.circIn=function(c){return-(Math.sqrt(1-c*c)-1)};e.circOut=function(c){return Math.sqrt(1- --c*c)};e.circInOut=function(c){return 1>(c*=2)?-0.5*(Math.sqrt(1-c*c)-1):0.5*
(Math.sqrt(1-(c-=2)*c)+1)};e.bounceIn=function(c){return 1-e.bounceOut(1-c)};e.bounceOut=function(c){return c<1/2.75?7.5625*c*c:c<2/2.75?7.5625*(c-=1.5/2.75)*c+0.75:c<2.5/2.75?7.5625*(c-=2.25/2.75)*c+0.9375:7.5625*(c-=2.625/2.75)*c+0.984375};e.bounceInOut=function(c){return 0.5>c?0.5*e.bounceIn(2*c):0.5*e.bounceOut(2*c-1)+0.5};e.getElasticIn=function(c,b){var a=2*Math.PI;return function(g){if(0==g||1==g)return g;var e=b/a*Math.asin(1/c);return-(c*Math.pow(2,10*(g-=1))*Math.sin((g-e)*a/b))}};e.getElasticOut=
function(c,b){var a=2*Math.PI;return function(g){if(0==g||1==g)return g;var e=b/a*Math.asin(1/c);return c*Math.pow(2,-10*g)*Math.sin((g-e)*a/b)+1}};e.getElasticInOut=function(c,b){var a=2*Math.PI;return function(g){var e=b/a*Math.asin(1/c);return 1>(g*=2)?-0.5*c*Math.pow(2,10*(g-=1))*Math.sin((g-e)*a/b):c*Math.pow(2,-10*(g-=1))*Math.sin((g-e)*a/b)*0.5+1}};e.quadIn=e.getPowIn(2);e.quadOut=e.getPowOut(2);e.quadInOut=e.getPowInOut(2);e.cubicIn=e.getPowIn(3);e.cubicOut=e.getPowOut(3);e.cubicInOut=e.getPowInOut(3);
e.quartIn=e.getPowIn(4);e.quartOut=e.getPowOut(4);e.quartInOut=e.getPowInOut(4);e.quintIn=e.getPowIn(5);e.quintOut=e.getPowOut(5);e.quintInOut=e.getPowInOut(5);e.backIn=e.getBackIn(1.7);e.backOut=e.getBackOut(1.7);e.backInOut=e.getBackInOut(1.7);e.elasticIn=e.getElasticIn(1,0.3);e.elasticOut=e.getElasticOut(1,0.3);e.elasticInOut=e.getElasticInOut(1,0.3*1.5);return e}();c.Ease=f;f.prototype.__class__="egret.Ease"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.path="";this.audio=null;this.type=d.EFFECT;this._pauseTime=0;this._listeners=[]}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"position",{get:function(){return this.audio?Math.floor(1E3*this.audio._getCurrentTime()):0},enumerable:!0,configurable:!0});b.play=function(a,g){void 0===a&&(a=!1);void 0===g&&(g=0);var b=this.audio;b&&(b._setCurrentTime(g/1E3),b._setLoop(a),b._play(this.type))};b.stop=function(){var a=this.audio;a&&
(this._pauseTime=0,a._setCurrentTime(0),a._pause())};b.pause=function(){var a=this.audio;a&&(this._pauseTime=a._getCurrentTime(),a._pause())};b.resume=function(){var a=this.audio;a&&(a._setCurrentTime(this._pauseTime),this._pauseTime=0,a._play(this.type))};b.load=function(){var a=this.audio;a&&a._load()};b.addEventListener=function(a,g,b){e.prototype.addEventListener.call(this,a,g,b);var d=this;this.audio&&1==this._eventsMap[a].length&&(g=a==c.SoundEvent.SOUND_COMPLETE?function(a){c.Event._dispatchByTarget(c.SoundEvent,
d,c.SoundEvent.SOUND_COMPLETE)}:function(a){c.Event._dispatchByTarget(c.Event,d,a.type)},this._listeners.push({type:a,func:g}),a=d.getVirtualType(a),this.audio._addEventListener(a,g,!1))};b.removeEventListener=function(a,g,b){e.prototype.removeEventListener.call(this,a,g,b);if(this.audio&&(!this._eventsMap||!this._eventsMap[a]||0==this._eventsMap[a].length))for(b=0;b<this._listeners.length;b++)if(g=this._listeners[b],g.type==a){this._listeners.splice(b,1);a=this.getVirtualType(a);this.audio._removeEventListener(a,
g.func,!1);break}};b.getVirtualType=function(a){switch(a){case c.SoundEvent.SOUND_COMPLETE:return"ended";default:return a}};Object.defineProperty(b,"volume",{get:function(){return this.audio?this.audio._getVolume():0},set:function(a){var g=this.audio;g&&g._setVolume(Math.max(0,Math.min(a,1)))},enumerable:!0,configurable:!0});b.setVolume=function(a){c.$warn(1031);this.volume=a};b.getVolume=function(){c.$warn(1032);return this.volume};b.preload=function(a,g,b){void 0===g&&(g=null);void 0===b&&(b=null);
this.type=a;this.audio._preload(a,g,b)};b._setAudio=function(a){this.audio=a};b.destroy=function(){this.audio._destroy()};d.MUSIC="music";d.EFFECT="effect";return d}(c.EventDispatcher);c.Sound=f;f.prototype.__class__="egret.Sound"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.isNumber=function(c){return"number"===typeof c&&!isNaN(c)};c.sin=function(d){var b=Math.floor(d),a=b+1,g=c.sinInt(b),u=c.sinInt(a);return(d-b)*u+(a-d)*g};c.sinInt=function(c){c%=360;0>c&&(c+=360);return 90>c?egret_sin_map[c]:180>c?egret_cos_map[c-90]:270>c?-egret_sin_map[c-180]:-egret_cos_map[c-270]};c.cos=function(d){var b=Math.floor(d),a=b+1,g=c.cosInt(b),u=c.cosInt(a);return(d-b)*u+(a-d)*g};c.cosInt=function(c){c%=360;0>c&&(c+=360);return 90>c?egret_cos_map[c]:
180>c?-egret_sin_map[c-90]:270>c?-egret_cos_map[c-180]:egret_sin_map[c-270]};return c}();c.NumberUtils=f;f.prototype.__class__="egret.NumberUtils"})(egret||(egret={}));for(var egret_sin_map={},egret_cos_map={},NumberUtils_i=0;90>=NumberUtils_i;NumberUtils_i++)egret_sin_map[NumberUtils_i]=Math.sin(NumberUtils_i*egret.Matrix.DEG_TO_RAD),egret_cos_map[NumberUtils_i]=Math.cos(NumberUtils_i*egret.Matrix.DEG_TO_RAD);
Function.prototype.bind||(Function.prototype.bind=function(c){"function"!==typeof this&&egret.$error(1029);var f=Array.prototype.slice.call(arguments,1),e=this,d=function(){},b=function(){return e.apply(this instanceof d&&c?this:c,f.concat(Array.prototype.slice.call(arguments)))};d.prototype=this.prototype;b.prototype=new d;return b});
(function(c){var f=function(){function e(){this.downloadingSizeThisObject=this.downloadingSizeFunc=this.onErrorThisObject=this.onErrorFunc=this.onSuccessThisObject=this.onSuccessFunc=null}var d=e.prototype;e.create=function(){return e.promiseObjectList.length?e.promiseObjectList.pop():new c.PromiseObject};d.onSuccess=function(){for(var b=[],a=0;a<arguments.length;a++)b[a-0]=arguments[a];this.onSuccessFunc&&this.onSuccessFunc.apply(this.onSuccessThisObject,b);this.destroy()};d.onError=function(){for(var b=
[],a=0;a<arguments.length;a++)b[a-0]=arguments[a];this.onErrorFunc&&this.onErrorFunc.apply(this.onErrorThisObject,b);this.destroy()};d.downloadingSize=function(){for(var b=[],a=0;a<arguments.length;a++)b[a-0]=arguments[a];this.downloadingSizeFunc&&this.downloadingSizeFunc.apply(this.downloadingSizeThisObject,b)};d.destroy=function(){this.downloadingSizeThisObject=this.downloadingSizeFunc=this.onErrorThisObject=this.onErrorFunc=this.onSuccessThisObject=this.onSuccessFunc=void 0;e.promiseObjectList.push(this)};
e.promiseObjectList=[];return e}();c.PromiseObject=f;f.prototype.__class__="egret.PromiseObject"})(egret||(egret={}));
(function(c){var f=function(e){function d(a){void 0===a&&(a=60);e.call(this);this.frameRate=a;this._time=0;this._requestAnimationId=NaN;this._isActivate=!0;d.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;d.cancelAnimationFrame=window.cancelAnimationFrame||window.msCancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.oCancelAnimationFrame||
window.cancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame;d.requestAnimationFrame||(d.requestAnimationFrame=function(g){return window.setTimeout(g,1E3/a)});d.cancelAnimationFrame||(d.cancelAnimationFrame=function(a){return window.clearTimeout(a)});d.instance=this;this.registerListener()}__extends(d,e);var b=d.prototype;b.setFrameRate=function(a){0==60%a&&(d.countTime=
60/a-1)};b.enterFrame=function(){var a=d.instance,g=d._thisObject,b=d._callback,e=c.getTimer(),f=e-a._time;a._requestAnimationId=d.requestAnimationFrame.call(window,d.prototype.enterFrame);d.count<d.countTime?d.count++:(d.count=0,b.call(g,f),a._time=e)};b.executeMainLoop=function(a,g){d._callback=a;d._thisObject=g;this.enterFrame()};b.reset=function(){var a=d.instance;a._requestAnimationId&&(a._time=c.getTimer(),d.cancelAnimationFrame.call(window,a._requestAnimationId),a.enterFrame())};b.registerListener=
function(){var a=this,g=function(){a._isActivate&&(a._isActivate=!1,c.MainContext.instance.stage.dispatchEvent(new c.Event(c.Event.DEACTIVATE)))},b=function(){a._isActivate||(a._isActivate=!0,d.instance.reset(),c.MainContext.instance.stage.dispatchEvent(new c.Event(c.Event.ACTIVATE)))},e=function(){document[f]?g():b()};window.addEventListener("focus",b,!1);window.addEventListener("blur",g,!1);var f,l;"undefined"!==typeof document.hidden?(f="hidden",l="visibilitychange"):"undefined"!==typeof document.mozHidden?
(f="mozHidden",l="mozvisibilitychange"):"undefined"!==typeof document.msHidden?(f="msHidden",l="msvisibilitychange"):"undefined"!==typeof document.webkitHidden?(f="webkitHidden",l="webkitvisibilitychange"):"undefined"!==typeof document.oHidden&&(f="oHidden",l="ovisibilitychange");"onpageshow"in window&&"onpagehide"in window&&(window.addEventListener("pageshow",b,!1),window.addEventListener("pagehide",g,!1));f&&l&&document.addEventListener(l,e,!1);e=navigator.userAgent;l=/micromessenger/gi.test(e);
var h=/mqq/ig.test(e);if(/mobile.*qq/gi.test(e)||l)h=!1;h&&(e=window.browser||{},e.execWebFn=e.execWebFn||{},e.execWebFn.postX5GamePlayerMessage=function(a){a=a.type;"app_enter_background"==a?g():"app_enter_foreground"==a&&b()},window.browser=e)};d.instance=null;d.countTime=0;d.requestAnimationFrame=null;d.cancelAnimationFrame=null;d._thisObject=null;d._callback=null;d.count=0;return d}(c.DeviceContext);c.HTML5DeviceContext=f;f.prototype.__class__="egret.HTML5DeviceContext"})(egret||(egret={}));var egret_html5_localStorage;
(function(c){c.getItem=function(c){return window.localStorage.getItem(c)};c.setItem=function(c,e){try{return window.localStorage.setItem(c,e),!0}catch(d){return egret.$warn(1018,c,e),!1}};c.removeItem=function(c){window.localStorage.removeItem(c)};c.clear=function(){window.localStorage.clear()};c.init=function(){for(var f in c)egret.localStorage[f]=c[f]}})(egret_html5_localStorage||(egret_html5_localStorage={}));egret_html5_localStorage.init();
(function(c){var f=function(e){function d(a,g){void 0===g&&(g=!0);e.call(this);this.useCacheCanvas=g;c.Texture.prototype.draw=c.Texture.prototype._drawForCanvas;c.Texture.prototype.dispose=c.Texture.prototype._disposeForCanvas;this.canvas=a||this.createCanvas();this.canvasContext=this.canvas.getContext("2d");g?(this._cacheCanvas=document.createElement("canvas"),this._cacheCanvas.width=this.canvas.width,this._cacheCanvas.height=this.canvas.height,this.drawCanvasContext=this._cacheCanvasContext=this._cacheCanvas.getContext("2d")):
this.drawCanvasContext=this.canvasContext;var b=this.drawCanvasContext;if(void 0==b.imageSmoothingEnabled){for(var d=["webkitImageSmoothingEnabled","mozImageSmoothingEnabled","msImageSmoothingEnabled"],f=0;f<d.length;f++){var l=d[f];if(void 0!=b[l])break}Object.defineProperty(b,"imageSmoothingEnabled",{get:function(){return this[l]},set:function(a){this[l]=a},enumerable:!0,configurable:!0})}this.onResize();var h=this.drawCanvasContext.setTransform,k=this;this.drawCanvasContext.setTransform=function(a,
g,b,c,d,e){k._matrixA=a;k._matrixB=g;k._matrixC=b;k._matrixD=c;k._matrixTx=d;k._matrixTy=e;h.call(k.drawCanvasContext,a,g,b,c,d,e)};this._matrixA=1;this._matrixC=this._matrixB=0;this._matrixD=1;this._transformTy=this._transformTx=this._matrixTy=this._matrixTx=0;this.initBlendMode()}__extends(d,e);var b=d.prototype;b.createCanvas=function(){var a=c.Browser.getInstance().$("#egretCanvas");if(!a){var g=document.getElementById(c.StageDelegate.canvas_div_name),a=c.Browser.getInstance().$new("canvas");
a.id="egretCanvas";g.appendChild(a)}c.MainContext.instance.stage.addEventListener(c.Event.RESIZE,this.onResize,this);return a};b.onResize=function(){if(this.canvas){var a=document.getElementById(c.StageDelegate.canvas_div_name);this.canvas.width=c.MainContext.instance.stage.stageWidth;this.canvas.height=c.MainContext.instance.stage.stageHeight;this.canvas.style.width=a.style.width;this.canvas.style.height=a.style.height;this.useCacheCanvas&&(this._cacheCanvas.width=this.canvas.width,this._cacheCanvas.height=
this.canvas.height);this.drawCanvasContext.imageSmoothingEnabled=c.RendererContext.imageSmoothingEnabled}};b.clearScreen=function(){for(var a=c.RenderFilter.getInstance().getDrawAreaList(),g=0,b=a.length;g<b;g++){var d=a[g];this.clearRect(d.x,d.y,d.width,d.height)}a=c.MainContext.instance.stage;this.useCacheCanvas&&this._cacheCanvasContext.clearRect(0,0,a.stageWidth,a.stageHeight);this.renderCost=0};b.clearRect=function(a,g,b,c){this.canvasContext.clearRect(a,g,b,c)};b.drawImage=function(a,g,b,d,
f,l,h,k,m,p){void 0===p&&(p=void 0);l+=this._transformTx;h+=this._transformTy;var r=c.getTimer();a.draw(this.drawCanvasContext,g,b,d,f,l,h,k,m,p);e.prototype.drawImage.call(this,a,g,b,d,f,l,h,k,m,p);this.renderCost+=c.getTimer()-r};b.setTransform=function(a){1==a.a&&0==a.b&&0==a.c&&1==a.d&&1==this._matrixA&&0==this._matrixB&&0==this._matrixC&&1==this._matrixD?(this._transformTx=a.tx-this._matrixTx,this._transformTy=a.ty-this._matrixTy):(this._transformTx=this._transformTy=0,this._matrixA==a.a&&this._matrixB==
a.b&&this._matrixC==a.c&&this._matrixD==a.d&&this._matrixTx==a.tx&&this._matrixTy==a.ty||this.drawCanvasContext.setTransform(a.a,a.b,a.c,a.d,a.tx,a.ty))};b.setAlpha=function(a,g){this.drawCanvasContext.globalAlpha=a;g?(this.blendValue=this.blendModes[g],this.drawCanvasContext.globalCompositeOperation=this.blendValue):this.blendValue!=c.BlendMode.NORMAL&&(this.blendValue=this.blendModes[c.BlendMode.NORMAL],this.drawCanvasContext.globalCompositeOperation=this.blendValue)};b.initBlendMode=function(){this.blendModes=
{};this.blendModes[c.BlendMode.NORMAL]="source-over";this.blendModes[c.BlendMode.ADD]="lighter";this.blendModes[c.BlendMode.ERASE]="destination-out";this.blendModes[c.BlendMode.ERASE_REVERSE]="destination-in"};b.setupFont=function(a,g){void 0===g&&(g=null);g=g||{};var b=a._TF_Props_,c=null==g.size?b._size:g.size,d=null==g.fontFamily?b._fontFamily:g.fontFamily,e=this.drawCanvasContext,f=(null==g.italic?b._italic:g.italic)?"italic ":"normal ",f=f+((null==g.bold?b._bold:g.bold)?"bold ":"normal ");e.font=
f+(c+"px "+d);e.textAlign="left";e.textBaseline="middle"};b.measureText=function(a){return this.drawCanvasContext.measureText(a).width};b.drawText=function(a,g,b,d,f,l){void 0===l&&(l=null);this.setupFont(a,l);l=l||{};var h=a._TF_Props_,k;k=null!=l.textColor?c.toColorString(l.textColor):h._textColorString;var m;m=null!=l.strokeColor?c.toColorString(l.strokeColor):h._strokeColorString;var h=null!=l.stroke?l.stroke:h._stroke,p=this.drawCanvasContext;p.fillStyle=k;p.strokeStyle=m;h&&(p.lineWidth=2*h,
p.strokeText(g,b+this._transformTx,d+this._transformTy,f||65535));p.fillText(g,b+this._transformTx,d+this._transformTy,f||65535);e.prototype.drawText.call(this,a,g,b,d,f,l)};b.strokeRect=function(a,g,b,c,d){this.drawCanvasContext.strokeStyle=d;this.drawCanvasContext.strokeRect(a,g,b,c)};b.pushMask=function(a){this.drawCanvasContext.save();this.drawCanvasContext.beginPath();this.drawCanvasContext.rect(a.x+this._transformTx,a.y+this._transformTy,a.width,a.height);this.drawCanvasContext.clip();this.drawCanvasContext.closePath()};
b.popMask=function(){this.drawCanvasContext.restore();this.drawCanvasContext.setTransform(1,0,0,1,0,0)};b.onRenderStart=function(){this.drawCanvasContext.save()};b.onRenderFinish=function(){this.drawCanvasContext.restore();this.drawCanvasContext.setTransform(1,0,0,1,0,0);if(this.useCacheCanvas)for(var a=this._cacheCanvas.width,g=this._cacheCanvas.height,b=c.RenderFilter.getInstance().getDrawAreaList(),d=0,e=b.length;d<e;d++){var f=b[d],h=f.x,k=f.y,m=f.width,f=f.height;h+m>a&&(m=a-h);k+f>g&&(f=g-k);
0<m&&0<f&&this.canvasContext.drawImage(this._cacheCanvas,h,k,m,f,h,k,m,f)}};b.drawCursor=function(a,g,b,c){this.drawCanvasContext.strokeStyle="#40a5ff";this.drawCanvasContext.lineWidth=2;this.drawCanvasContext.beginPath();this.drawCanvasContext.moveTo(Math.round(a+this._transformTx),Math.round(g+this._transformTy));this.drawCanvasContext.lineTo(Math.round(b+this._transformTx),Math.round(c+this._transformTy));this.drawCanvasContext.closePath();this.drawCanvasContext.stroke()};b.createLinearGradient=
function(a,g,b,c){return this.drawCanvasContext.createLinearGradient(a,g,b,c)};b.createRadialGradient=function(a,g,b,c,d,e){return this.drawCanvasContext.createRadialGradient(a,g,b,c,d,e)};return d}(c.RendererContext);c.HTML5CanvasRenderer=f;f.prototype.__class__="egret.HTML5CanvasRenderer"})(egret||(egret={}));egret.RendererContext.createRendererContext=function(c){return new egret.HTML5CanvasRenderer(c,!1)};
egret.Graphics.prototype._beginDraw=function(c){this._renderContext=c.drawCanvasContext;var f=c._transformTx;c=c._transformTy;0==f&&0==c||this._renderContext.translate(f,c)};egret.Graphics.prototype._endDraw=function(c){this._renderContext=c.drawCanvasContext;var f=c._transformTx;c=c._transformTy;0==f&&0==c||this._renderContext.translate(-f,-c)};var originCanvas2DFill=CanvasRenderingContext2D.prototype.fill;
CanvasRenderingContext2D.prototype.fill=function(){var c=this.fillStyle;"string"!=typeof c?(c=c.matrix)?(this.transform(c.a,c.b,c.c,c.d,c.tx,c.ty),originCanvas2DFill.call(this),c=egret.MainContext.instance.rendererContext,c._transformTx=c._transformTy=0,this.setTransform(c._matrixA,c._matrixB,c._matrixC,c._matrixD,c._matrixTx,c._matrixTy)):originCanvas2DFill.call(this):originCanvas2DFill.call(this)};
(function(c){var f=function(e){function d(a){e.call(this);this.glID=this.gl=this.canvas=null;this.size=2E3;this.vertices=null;this.vertSize=5;this.indices=null;this.projectionY=this.projectionX=NaN;this.shaderManager=null;this.contextLost=!1;this.glContextId=0;this.currentBlendMode="";this.currentBaseTexture=null;this.currentBatchSize=0;this.worldTransform=null;this.worldAlpha=1;this.maskList=[];this.maskDataFreeList=[];this.graphicsIndexBuffer=this.graphicsBuffer=this.graphicsIndices=this.graphicsPoints=
this.filterType=this.colorTransformMatrix=null;this.graphicsStyle={};c.Texture.prototype.dispose=c.Texture.prototype._disposeForCanvas;this.canvas=a||this.createCanvas();this.canvas.addEventListener("webglcontextlost",this.handleContextLost.bind(this),!1);this.canvas.addEventListener("webglcontextrestored",this.handleContextRestored.bind(this),!1);this.html5Canvas=document.createElement("canvas");this.canvasContext=new c.HTML5CanvasRenderer(this.html5Canvas);this.onResize();this.projectionX=this.canvas.width/
2;this.projectionY=-this.canvas.height/2;a=6*this.size;this.vertices=new Float32Array(4*this.size*this.vertSize);this.indices=new Uint16Array(a);for(var g=0,b=0;g<a;g+=6,b+=4)this.indices[g+0]=b+0,this.indices[g+1]=b+1,this.indices[g+2]=b+2,this.indices[g+3]=b+0,this.indices[g+4]=b+2,this.indices[g+5]=b+3;this.initWebGL();this.shaderManager=new c.WebGLShaderManager(this.gl);this.worldTransform=new c.Matrix;this.initAll()}__extends(d,e);var b=d.prototype;b.onRenderFinish=function(){this._drawWebGL()};
d.initWebGLCanvas=function(){c.RenderTexture.WebGLCanvas||(c.RenderTexture.WebGLCanvas=document.createElement("canvas"),c.RenderTexture.WebGLCanvas.avaliable=!0,c.RenderTexture.WebGLRenderer=new c.WebGLRenderer(c.RenderTexture.WebGLCanvas),c.RenderTexture.WebGLRenderer.setAlpha(1))};b.initAll=function(){d.isInit||(d.isInit=!0,egret_webgl_graphics.init(),c.TextField.prototype._makeBitmapCache=function(){this.renderTexture||(this.renderTexture=new c.RenderTexture);var a=this.getBounds(c.Rectangle.identity);
if(0==a.width||0==a.height)return this._texture_to_render=null,!1;this._bitmapData||(this._bitmapData=document.createElement("canvas"),this._bitmapData.avaliable=!0,this.renderContext=c.RendererContext.createRendererContext(this._bitmapData));var g=this._bitmapData,b=a.width,a=a.height,d,e,f=c.MainContext.instance.rendererContext._texture_scale_factor;d=b/f;e=a/f;d=Math.round(d);e=Math.round(e);g.width=d;g.height=e;g.style.width=d+"px";g.style.height=e+"px";this.renderContext._cacheCanvas&&(this.renderContext._cacheCanvas.width=
d,this.renderContext._cacheCanvas.height=e);this._worldTransform.identity();this._worldTransform.a=1/f;this._worldTransform.d=1/f;this.renderContext.setTransform(this._worldTransform);this.worldAlpha=1;g=c.RenderFilter.getInstance();f=g._drawAreaList.concat();g._drawAreaList.length=0;this.renderContext.clearScreen();this.renderContext.onRenderStart();c.Texture.deleteWebGLTexture(this.renderTexture);this.renderTexture.dispose();this._hasFilters()&&this._setGlobalFilters(this.renderContext);var h=this.mask||
this._DO_Props_._scrollRect;h&&this.renderContext.pushMask(h);this._render(this.renderContext);h&&this.renderContext.popMask();this._hasFilters()&&this._removeGlobalFilters(this.renderContext);c.RenderTexture.identityRectangle.width=d;c.RenderTexture.identityRectangle.height=e;g.addDrawArea(c.RenderTexture.identityRectangle);this.renderContext.onRenderFinish();g._drawAreaList=f;this.renderTexture._bitmapData=this._bitmapData;this.renderTexture._sourceWidth=d;this.renderTexture._sourceHeight=e;this.renderTexture._textureWidth=
b;this.renderTexture._textureHeight=a;this._texture_to_render=this.renderTexture;return!0},c.TextField.prototype._draw=function(a){this._TF_Props_._type==c.TextFieldType.INPUT&&this._isTyping||(this.getDirty()&&(this._texture_to_render=this.renderTexture,this._DO_Props_._cacheAsBitmap=!0),c.DisplayObject.prototype._draw.call(this,a))},c.RenderTexture.prototype.init=function(){this._bitmapData=document.createElement("canvas");this._bitmapData.avaliable=!0;this.canvasContext=this._bitmapData.getContext("2d");
d.initWebGLCanvas();this._webglBitmapData=c.RenderTexture.WebGLCanvas;this.renderContext=c.RenderTexture.WebGLRenderer},c.RenderTexture.prototype.setSize=function(a,g){this._webglBitmapData&&this.renderContext.setSize(a,g);if(this._bitmapData){var b=this._bitmapData;b.width=a;b.height=g;b.style.width=a+"px";b.style.height=g+"px"}},c.RenderTexture.prototype.end=function(){},c.RenderTexture.prototype.drawToTexture=function(a,g,b){var d=g||a.getBounds(c.Rectangle.identity);if(0==d.width||0==d.height)return!1;
"undefined"==typeof b&&(b=1);this._bitmapData||this.init();var e=d.x,f=d.y,h=d.width,d=d.height,d=d/b,k=c.MainContext.instance.rendererContext._texture_scale_factor,h=Math.round(h/b),d=Math.round(d);this.setSize(h,d);var m=this._bitmapData,p=h/k*b,r=d/k*b;m.width=p;m.height=r;m.style.width=p+"px";m.style.height=r+"px";this.begin();a._worldTransform.identity();m=a._DO_Props_._anchorOffsetX;p=a._DO_Props_._anchorOffsetY;if(0!=a._DO_Props_._anchorX||0!=a._DO_Props_._anchorY)m=a._DO_Props_._anchorX*h,
p=a._DO_Props_._anchorY*d;this._offsetX=e+m;this._offsetY=f+p;a._worldTransform.append(1,0,0,1,-this._offsetX,-this._offsetY);g&&(this._offsetX-=e,this._offsetY-=f);a.worldAlpha=1;g=c.MainContext.__use_new_draw;c.MainContext.__use_new_draw=!1;if(a instanceof c.DisplayObjectContainer)for(e=a._children,f=0,m=e.length;f<m;f++)e[f]._updateTransform();this.renderContext.setTransform(a._worldTransform);e=c.RenderFilter.getInstance();f=e._drawAreaList.concat();e._drawAreaList.length=0;m=this.renderContext.gl;
m.viewport(0,0,h,d);m.bindFramebuffer(m.FRAMEBUFFER,null);m.clearColor(0,0,0,0);m.clear(m.COLOR_BUFFER_BIT);this.renderContext.onRenderStart();c.Texture.deleteWebGLTexture(this);a._hasFilters()&&a._setGlobalFilters(this.renderContext);(m=a.mask||a._DO_Props_._scrollRect)&&this.renderContext.pushMask(m);a._render(this.renderContext);this.renderContext._drawWebGL();c.MainContext.__use_new_draw=g;m&&this.renderContext.popMask();a._hasFilters()&&a._removeGlobalFilters(this.renderContext);c.RenderTexture.identityRectangle.width=
h;c.RenderTexture.identityRectangle.height=d;e.addDrawArea(c.RenderTexture.identityRectangle);this.renderContext.onRenderFinish();e._drawAreaList=f;this._sourceWidth=h/k*b;this._sourceHeight=d/k*b;this._textureWidth=h*b;this._textureHeight=d*b;this.canvasContext.drawImage(this._webglBitmapData,0,0,h,d,0,0,this._sourceWidth,this._sourceHeight);return!0})};b.createCanvas=function(){var a=c.Browser.getInstance().$("#egretCanvas");if(!a){var g=document.getElementById(c.StageDelegate.canvas_div_name),
a=c.Browser.getInstance().$new("canvas");a.id="egretCanvas";g.appendChild(a)}c.MainContext.instance.stage.addEventListener(c.Event.RESIZE,this.onResize,this);return a};b.onResize=function(){this.setSize(c.MainContext.instance.stage.stageWidth,c.MainContext.instance.stage.stageHeight)};b.setSize=function(a,g){var b=document.getElementById(c.StageDelegate.canvas_div_name);this.canvas&&(this.canvas.width=a,this.canvas.height=g,this.canvas.style.width=b.style.width,this.canvas.style.height=b.style.height,
this.projectionX=this.canvas.width/2,this.projectionY=-this.canvas.height/2);this.html5Canvas&&(this.html5Canvas.width=a,this.html5Canvas.height=g,this.html5Canvas.style.width=b.style.width,this.html5Canvas.style.height=b.style.height);this.width=a;this.height=g};b.handleContextLost=function(){this.contextLost=!0};b.handleContextRestored=function(){this.initWebGL();this.shaderManager.setContext(this.gl);this.contextLost=!1};b.initWebGL=function(){for(var a={},g,b=["experimental-webgl","webgl"],e=
0;e<b.length;e++){try{g=this.canvas.getContext(b[e],a)}catch(f){}if(g)break}g||c.$error(1021);d.glID++;this.glID=d.glID;this.setContext(g)};b.setContext=function(a){this.gl=a;a.id=this.glContextId++;this.vertexBuffer=a.createBuffer();this.indexBuffer=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.indices,a.STATIC_DRAW);a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer);a.bufferData(a.ARRAY_BUFFER,this.vertices,a.DYNAMIC_DRAW);a.disable(a.DEPTH_TEST);
a.disable(a.CULL_FACE);a.enable(a.BLEND);a.colorMask(!0,!0,!0,!0)};b.start=function(){if(!this.contextLost){var a=this.gl;a.activeTexture(a.TEXTURE0);a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var g;g="colorTransform"==this.filterType?this.shaderManager.colorTransformShader:"blur"==this.filterType?this.shaderManager.blurShader:this.shaderManager.defaultShader;this.shaderManager.activateShader(g);g.syncUniforms();a.uniform2f(g.projectionVector,
this.projectionX,this.projectionY);var b=4*this.vertSize;a.vertexAttribPointer(g.aVertexPosition,2,a.FLOAT,!1,b,0);a.vertexAttribPointer(g.aTextureCoord,2,a.FLOAT,!1,b,8);a.vertexAttribPointer(g.colorAttribute,2,a.FLOAT,!1,b,16)}};b.clearScreen=function(){var a=this.gl;a.colorMask(!0,!0,!0,!0);for(var g=c.RenderFilter.getInstance().getDrawAreaList(),b=0,d=g.length;b<d;b++){var e=g[b];a.viewport(e.x,e.y,e.width,e.height);a.bindFramebuffer(a.FRAMEBUFFER,null);a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT)}a.viewport(0,
0,this.width,this.height);this.renderCost=0};b.setBlendMode=function(a){a||(a=c.BlendMode.NORMAL);if(this.currentBlendMode!=a){var g=c.RendererContext.blendModesForGL[a];g&&(this._drawWebGL(),this.gl.blendFunc(g[0],g[1]),this.currentBlendMode=a)}};b.drawRepeatImage=function(a,g,b,d,e,f,h,k,m,p){p=c.MainContext.instance.rendererContext._texture_scale_factor;d*=p;for(e*=p;f<k;f+=d)for(var r=h;r<m;r+=e){var s=Math.min(d,k-f),t=Math.min(e,m-r);this.drawImage(a,g,b,s/p,t/p,f,r,s,t)}};b.drawImage=function(a,
g,b,c,d,e,f,k,m,p){void 0===p&&(p=void 0);if(!this.contextLost){var r=a._bitmapData;if(r&&r.avaliable)if(void 0!==p)this.drawRepeatImage(a,g,b,c,d,e,f,k,m,p);else{if(this.filters)for(p=0;1>p;p++)if("glow"==this.filters[0].type){this.useGlow(a,g,b,c,d,e,f,k,m);return}this._drawImage(a,g,b,c,d,e,f,k,m)}}};b._drawImage=function(a,g,b,c,d,e,f,k,m){this.createWebGLTexture(a);var p=a._bitmapData.webGLTexture[this.glID];if(p!==this.currentBaseTexture||this.currentBatchSize>=this.size-1)this._drawWebGL(),
this.currentBaseTexture=p;var r=this.worldTransform,s=r.a,t=r.b,v=r.c,x=r.d,w=r.tx,z=r.ty;0==e&&0==f||r.append(1,0,0,1,e,f);1==c/k&&1==d/m||r.append(k/c,0,0,m/d,0,0);e=r.a;f=r.b;k=r.c;m=r.d;var p=r.tx,y=r.ty;r.a=s;r.b=t;r.c=v;r.d=x;r.tx=w;r.ty=z;s=a._sourceWidth;t=a._sourceHeight;a=c;r=d;g/=s;b/=t;c/=s;d/=t;s=this.vertices;t=4*this.currentBatchSize*this.vertSize;v=this.worldAlpha;s[t++]=p;s[t++]=y;s[t++]=g;s[t++]=b;s[t++]=v;s[t++]=e*a+p;s[t++]=f*a+y;s[t++]=c+g;s[t++]=b;s[t++]=v;s[t++]=e*a+k*r+p;s[t++]=
m*r+f*a+y;s[t++]=c+g;s[t++]=d+b;s[t++]=v;s[t++]=k*r+p;s[t++]=m*r+y;s[t++]=g;s[t++]=d+b;s[t++]=v;this.currentBatchSize++};b.useGlow=function(a,g,b,e,f,l,h,k,m){var p=this.filters[0],r=p.distance||0,s=p.angle||0,t=0,v=0;0!=r&&0!=s&&(t=Math.ceil(r*c.NumberUtils.cos(s)),v=Math.ceil(r*c.NumberUtils.sin(s)));var r=p.quality,s=p.blurX/10,x=p.blurY/10,w=k+2*s+20+Math.abs(t),z=m+2*x+20+Math.abs(v);d.initWebGLCanvas();var y=c.RenderTexture.WebGLRenderer,C=c.RenderTexture.WebGLCanvas,A=c.RenderTexture.create();
A._bitmapData||A.init();A.setSize(w,z);A._sourceWidth=w;A._sourceHeight=z;var B=c.RenderTexture.create();B._bitmapData||B.init();B.setSize(w,z);B._sourceWidth=w;B._sourceHeight=z;y.clearScreen();y.filterType="colorTransform";y.setGlobalColorTransform([0,0,0,0,p._red,0,0,0,0,p._green,0,0,0,0,p._blue,0,0,0,0,255*p.alpha]);y.setAlpha(1,c.BlendMode.NORMAL);y.setTransform(new c.Matrix(1,0,0,1,0,0));y.drawImage(a,g,b,e,f,s+10,x+10,k,m);y._drawWebGL();y.filterType=null;A.canvasContext.clearRect(0,0,w,z);
A.canvasContext.drawImage(C,0,0,w,z,0,0,w,z);y.clearScreen();y.setAlpha(1,c.BlendMode.NORMAL);y.setTransform(new c.Matrix(1,0,0,1,0,0));y.filterType="blur";y.setBlurData(s,0);c.Texture.deleteWebGLTexture(A);y.drawImage(A,s,x,w-2*s,z-2*x,s,x,w-2*s,z-2*x);y._drawWebGL();y.filterType=null;B.canvasContext.clearRect(0,0,w,z);B.canvasContext.drawImage(C,0,0,w,z,0,0,w,z);y.clearScreen();y.setAlpha(1,c.BlendMode.NORMAL);y.setTransform(new c.Matrix(1,0,0,1,0,0));y.filterType="blur";y.setBlurData(0,x);c.Texture.deleteWebGLTexture(B);
y.drawImage(B,0,x,w,z-2*x,0,x+5,w,z-2*x);y._drawWebGL();y.filterType=null;A.canvasContext.clearRect(0,0,w,z);A.canvasContext.drawImage(C,0,0,w,z,0,0,w,z);y.clearScreen();y.setAlpha(1,c.BlendMode.NORMAL);y.setTransform(new c.Matrix(1,0,0,1,0,0));c.Texture.deleteWebGLTexture(A);for(p=0;p<r;p++)y.drawImage(A,0,0,w,z,t,v,w,z);y._drawWebGL();y.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);y.currentBlendMode=null;y.drawImage(a,g,b,e,f,l+s+10,h+x+15,k,m);y._drawWebGL();B.canvasContext.clearRect(0,
0,w,z);B.canvasContext.drawImage(C,0,0,w,z,0,0,w,z);c.Texture.deleteWebGLTexture(B);this._drawImage(B,0,0,w,z,l-s-10,h-x-15,w,z);this._drawWebGL();c.RenderTexture.release(A);c.RenderTexture.release(B)};b._drawWebGL=function(){if(0!=this.currentBatchSize&&!this.contextLost){var a=c.getTimer();this.start();var g=this.gl;g.bindTexture(g.TEXTURE_2D,this.currentBaseTexture);var b=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);g.bufferSubData(g.ARRAY_BUFFER,0,b);g.drawElements(g.TRIANGLES,
6*this.currentBatchSize,g.UNSIGNED_SHORT,0);this.currentBatchSize=0;this.renderCost+=c.getTimer()-a;c.Profiler.getInstance().onDrawImage()}};b.setTransform=function(a){var g=this.worldTransform;g.a=a.a;g.b=a.b;g.c=a.c;g.d=a.d;g.tx=a.tx;g.ty=a.ty};b.setAlpha=function(a,g){this.worldAlpha=a;this.setBlendMode(g)};b.createWebGLTexture=function(a){a=a._bitmapData;a.webGLTexture||(a.webGLTexture={});if(!a.webGLTexture[this.glID]){var g=this.gl;a.webGLTexture[this.glID]=g.createTexture();a.webGLTexture[this.glID].glContext=
g;g.bindTexture(g.TEXTURE_2D,a.webGLTexture[this.glID]);g.pixelStorei(g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,a);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE);g.bindTexture(g.TEXTURE_2D,null)}};b.pushMask=function(a){this._drawWebGL();var g=this.gl;
0==this.maskList.length&&g.enable(g.SCISSOR_TEST);a=this.getScissorRect(a);this.maskList.push(a);this.scissor(a.x,a.y,a.width,a.height)};b.getScissorRect=function(a){var g=this.maskList[this.maskList.length-1],b,d,e;g?g.intersects(g)?(b=Math.max(a.x+this.worldTransform.tx,g.x),d=Math.max(a.y+this.worldTransform.ty,g.y),e=Math.min(a.x+this.worldTransform.tx+a.width,g.x+g.width)-b,a=Math.min(a.y+this.worldTransform.ty+a.height,g.y+g.height)-d):a=e=d=b=0:(b=a.x+this.worldTransform.tx,d=a.y+this.worldTransform.ty,
e=a.width,a=a.height);(g=this.maskDataFreeList.pop())?(g.x=b,g.y=d,g.width=e,g.height=a):g=new c.Rectangle(b,d,e,a);return g};b.popMask=function(){this._drawWebGL();var a=this.gl,g=this.maskList.pop();this.maskDataFreeList.push(g);g=this.maskList.length;0!=g?(g=this.maskList[g-1],(0<g.width||0<g.height)&&this.scissor(g.x,g.y,g.width,g.height)):a.disable(a.SCISSOR_TEST)};b.scissor=function(a,g,b,d){var e=this.gl;0>b&&(b=0);0>d&&(d=0);e.scissor(a,-g+c.MainContext.instance.stage.stageHeight-d,b,d)};
b.setGlobalColorTransform=function(a){if(this.colorTransformMatrix!=a&&(this._drawWebGL(),this.colorTransformMatrix=a)){a=a.concat();var g=this.shaderManager.colorTransformShader;g.uniforms.colorAdd.value.w=a.splice(19,1)[0]/255;g.uniforms.colorAdd.value.z=a.splice(14,1)[0]/255;g.uniforms.colorAdd.value.y=a.splice(9,1)[0]/255;g.uniforms.colorAdd.value.x=a.splice(4,1)[0]/255;g.uniforms.matrix.value=a}};b.setBlurData=function(a,g){var b=this.shaderManager.blurShader;b.uniforms.blur.value.x=a;b.uniforms.blur.value.y=
g};b.setGlobalFilters=function(a){this._drawWebGL();this.setFilterProperties(a)};b.setFilterProperties=function(a){if((this.filters=a)&&a.length)for(var g=0;1>g;g++){var b=a[g];this.filterType=b.type;switch(b.type){case "blur":this.setBlurData(b.blurX,b.blurY);break;case "colorTransform":this.setGlobalColorTransform(b._matrix)}}else this.filterType=null};b.setupFont=function(a,g){void 0===g&&(g=null);this.canvasContext.setupFont(a,g)};b.measureText=function(a){return this.canvasContext.measureText(a)};
b.renderGraphics=function(a){this._drawWebGL();var g=this.gl,b=this.shaderManager.primitiveShader;this.graphicsPoints?(this.graphicsPoints.length=0,this.graphicsIndices.length=0):(this.graphicsPoints=[],this.graphicsIndices=[],this.graphicsBuffer=g.createBuffer(),this.graphicsIndexBuffer=g.createBuffer());this.updateGraphics(a);this.shaderManager.activateShader(b);g.blendFunc(g.ONE,g.ONE_MINUS_SRC_ALPHA);g.uniformMatrix3fv(b.translationMatrix,!1,this.worldTransform.toArray(!0));g.uniform2f(b.projectionVector,
this.projectionX,-this.projectionY);g.uniform2f(b.offsetVector,0,0);g.uniform3fv(b.tintColor,[1,1,1]);g.uniform1f(b.alpha,this.worldAlpha);g.bindBuffer(g.ARRAY_BUFFER,this.graphicsBuffer);g.vertexAttribPointer(b.aVertexPosition,2,g.FLOAT,!1,24,0);g.vertexAttribPointer(b.colorAttribute,4,g.FLOAT,!1,24,8);g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,this.graphicsIndexBuffer);g.drawElements(g.TRIANGLE_STRIP,this.graphicsIndices.length,g.UNSIGNED_SHORT,0);this.shaderManager.activateShader(this.shaderManager.defaultShader)};
b.updateGraphics=function(a){var g=this.gl;this.buildRectangle(a);g.bindBuffer(g.ARRAY_BUFFER,this.graphicsBuffer);g.bufferData(g.ARRAY_BUFFER,new Float32Array(this.graphicsPoints),g.STATIC_DRAW);g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,this.graphicsIndexBuffer);g.bufferData(g.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.graphicsIndices),g.STATIC_DRAW)};b.buildRectangle=function(a){var g=a.x,b=a.y,c=a.w;a=a.h;var d=this.graphicsStyle.a,e=this.graphicsStyle.r*d,f=this.graphicsStyle.g*d,k=this.graphicsStyle.b*
d,m=this.graphicsPoints,p=this.graphicsIndices,r=m.length/6;m.push(g,b);m.push(e,f,k,d);m.push(g+c,b);m.push(e,f,k,d);m.push(g,b+a);m.push(e,f,k,d);m.push(g+c,b+a);m.push(e,f,k,d);p.push(r,r,r+1,r+2,r+3,r+3)};b.setGraphicsStyle=function(a,g,b,c){this.graphicsStyle.r=a;this.graphicsStyle.g=g;this.graphicsStyle.b=b;this.graphicsStyle.a=c};d.glID=0;d.isInit=!1;return d}(c.RendererContext);c.WebGLRenderer=f;f.prototype.__class__="egret.WebGLRenderer"})(egret||(egret={}));var egret_webgl_graphics;
(function(c){c.beginFill=function(c,d){void 0===d&&(d=1);this._pushCommand(new f(this._setStyle,this,[(c>>16)/255,((c&65280)>>8)/255,(c&255)/255,d]))};c.beginGradientFill=function(c,d,b,a,g){};c.drawRect=function(c,d,b,a){this._pushCommand(new f(function(a){this.renderContext.renderGraphics(a)},this,[{x:c,y:d,w:b,h:a}]));this._checkRect(c,d,b,a)};c.drawCircle=function(c,d,b){};c.drawRoundRect=function(c,d,b,a,g,u){};c.drawEllipse=function(c,d,b,a){};c.lineStyle=function(c,d,b,a,g,u,q,f){};c.lineTo=
function(c,d){};c.curveTo=function(c,d,b,a){};c.cubicCurveTo=function(c,d,b,a,g,u){};c.moveTo=function(c,d){};c.clear=function(){this._maxY=this._maxX=this._minY=this._minX=this.commandQueue.length=0};c.endFill=function(){};c._pushCommand=function(c){this.commandQueue.push(c)};c._draw=function(c){var d=this.commandQueue.length;if(0!=d)for(this.renderContext=c,c=0;c<d;c++){var b=this.commandQueue[c];b.method.apply(b.thisObject,b.args)}};var f=function(){return function(c,d,b){this.method=c;this.thisObject=
d;this.args=b}}();f.prototype.__class__="egret_webgl_graphics.Command";c._setStyle=function(c,d,b,a){this.renderContext.setGraphicsStyle(c,d,b,a)};c.init=function(){for(var e in c)egret.Graphics.prototype[e]=c[e]}})(egret_webgl_graphics||(egret_webgl_graphics={}));
(function(c){var f=function(){function e(){}e.compileProgram=function(d,b,a){a=e.compileFragmentShader(d,a);b=e.compileVertexShader(d,b);var g=d.createProgram();d.attachShader(g,b);d.attachShader(g,a);d.linkProgram(g);d.getProgramParameter(g,d.LINK_STATUS)||c.$warn(1020);return g};e.compileFragmentShader=function(c,b){return e._compileShader(c,b,c.FRAGMENT_SHADER)};e.compileVertexShader=function(c,b){return e._compileShader(c,b,c.VERTEX_SHADER)};e._compileShader=function(d,b,a){a=d.createShader(a);
d.shaderSource(a,b);d.compileShader(a);return d.getShaderParameter(a,d.COMPILE_STATUS)?a:(c.Logger.info(d.getShaderInfoLog(a)),null)};e.checkCanUseWebGL=function(){if(void 0==e.canUseWebGL)try{var c=document.createElement("canvas");e.canUseWebGL=!!window.WebGLRenderingContext&&!(!c.getContext("webgl")&&!c.getContext("experimental-webgl"))}catch(b){e.canUseWebGL=!1}return e.canUseWebGL};return e}();c.WebGLUtils=f;f.prototype.__class__="egret.WebGLUtils"})(egret||(egret={}));
(function(c){var f=function(){function e(b){this.defaultVertexSrc="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec2 aColor;\nuniform vec2 projectionVector;\nuniform vec2 offsetVector;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nconst vec2 center = vec2(-1.0, 1.0);\nvoid main(void) {\n   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.x, aColor.x, aColor.x, aColor.x);\n}";
this.program=this.gl=null;this.fragmentSrc="precision lowp float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nvoid main(void) {\ngl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;\n}";this.uniforms=null;this.gl=b;this.init()}var d=e.prototype;d.init=function(){var b=this.gl,a=c.WebGLUtils.compileProgram(b,this.defaultVertexSrc,this.fragmentSrc);b.useProgram(a);this.uSampler=b.getUniformLocation(a,"uSampler");this.projectionVector=b.getUniformLocation(a,
"projectionVector");this.offsetVector=b.getUniformLocation(a,"offsetVector");this.dimensions=b.getUniformLocation(a,"dimensions");this.aVertexPosition=b.getAttribLocation(a,"aVertexPosition");this.aTextureCoord=b.getAttribLocation(a,"aTextureCoord");this.colorAttribute=b.getAttribLocation(a,"aColor");-1===this.colorAttribute&&(this.colorAttribute=2);this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var g in this.uniforms)this.uniforms[g].uniformLocation=b.getUniformLocation(a,
g);this.initUniforms();this.program=a};d.initUniforms=function(){if(this.uniforms){var b=this.gl,a,g;for(g in this.uniforms){a=this.uniforms[g];var c=a.type;"mat2"===c||"mat3"===c||"mat4"===c?(a.glMatrix=!0,a.glValueLength=1,"mat2"===c?a.glFunc=b.uniformMatrix2fv:"mat3"===c?a.glFunc=b.uniformMatrix3fv:"mat4"===c&&(a.glFunc=b.uniformMatrix4fv)):(a.glFunc=b["uniform"+c],a.glValueLength="2f"===c||"2i"===c?2:"3f"===c||"3i"===c?3:"4f"===c||"4i"===c?4:1)}}};d.syncUniforms=function(){if(this.uniforms){var b,
a=this.gl,g;for(g in this.uniforms)b=this.uniforms[g],1===b.glValueLength?!0===b.glMatrix?b.glFunc.call(a,b.uniformLocation,b.transpose,b.value):b.glFunc.call(a,b.uniformLocation,b.value):2===b.glValueLength?b.glFunc.call(a,b.uniformLocation,b.value.x,b.value.y):3===b.glValueLength?b.glFunc.call(a,b.uniformLocation,b.value.x,b.value.y,b.value.z):4===b.glValueLength&&b.glFunc.call(a,b.uniformLocation,b.value.x,b.value.y,b.value.z,b.value.w)}};return e}();c.EgretShader=f;f.prototype.__class__="egret.EgretShader"})(egret||
(egret={}));
(function(c){var f=function(c){function d(b){c.call(this,b);this.fragmentSrc="precision mediump float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform float invert;\nuniform mat4 matrix;\nuniform vec4 colorAdd;\nuniform sampler2D uSampler;\nvoid main(void) {\nvec4 texColor = texture2D(uSampler, vTextureCoord);\nvec4 locColor = texColor * matrix;\nif(texColor.a != 0.0){\nlocColor += colorAdd;\n}\ngl_FragColor = vColor*vec4(locColor.rgb*locColor.a,locColor.a);\n}";this.uniforms={matrix:{type:"mat4",
value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},colorAdd:{type:"4f",value:{x:0,y:0,z:0,w:0}}};this.init()}__extends(d,c);return d}(c.EgretShader);c.ColorTransformShader=f;f.prototype.__class__="egret.ColorTransformShader"})(egret||(egret={}));
(function(c){var f=function(c){function d(b){c.call(this,b);this.fragmentSrc="precision mediump float;uniform vec2 blur;uniform sampler2D uSampler;varying vec2 vTextureCoord;void main(){gl_FragColor = vec4(0.0);gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.028 * blur.x, -0.028 * blur.y))) * 0.0044299121055113265;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.024 * blur.x, -0.024 * blur.y))) * 0.00895781211794;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.020 * blur.x, -0.020 * blur.y))) * 0.0215963866053;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.016 * blur.x, -0.016 * blur.y))) * 0.0443683338718;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.012 * blur.x, -0.012 * blur.y))) * 0.0776744219933;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.008 * blur.x, -0.008 * blur.y))) * 0.115876621105;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.004 * blur.x, -0.004 * blur.y))) * 0.147308056121;gl_FragColor += texture2D(uSampler, vTextureCoord) * 0.159576912161;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.004 * blur.x,  0.004 * blur.y))) * 0.147308056121;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.008 * blur.x,  0.008 * blur.y))) * 0.115876621105;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.012 * blur.x,  0.012 * blur.y))) * 0.0776744219933;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.016 * blur.x,  0.016 * blur.y))) * 0.0443683338718;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.020 * blur.x,  0.020 * blur.y))) * 0.0215963866053;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.024 * blur.x,  0.024 * blur.y))) * 0.00895781211794;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.028 * blur.x,  0.028 * blur.y))) * 0.0044299121055113265;}";this.uniforms=
{blur:{type:"2f",value:{x:2,y:2}}};this.init()}__extends(d,c);return d}(c.EgretShader);c.BlurShader=f;f.prototype.__class__="egret.BlurShader"})(egret||(egret={}));
(function(c){var f=function(){function e(c){this.alpha=this.translationMatrix=this.attributes=this.colorAttribute=this.aVertexPosition=this.tintColor=this.offsetVector=this.projectionVector=this.program=this.gl=null;this.fragmentSrc="precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n   gl_FragColor = vColor;\n}";this.vertexSrc="attribute vec2 aVertexPosition;\nattribute vec4 aColor;\nuniform mat3 translationMatrix;\nuniform vec2 projectionVector;\nuniform vec2 offsetVector;\nuniform float alpha;\nuniform vec3 tint;\nvarying vec4 vColor;\nvoid main(void) {\n   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);\n   v -= offsetVector.xyx;\n   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);\n   vColor = aColor * vec4(tint * alpha, alpha);\n}";
this.gl=c;this.init()}e.prototype.init=function(){var d=this.gl,b=c.WebGLUtils.compileProgram(d,this.vertexSrc,this.fragmentSrc);d.useProgram(b);this.projectionVector=d.getUniformLocation(b,"projectionVector");this.offsetVector=d.getUniformLocation(b,"offsetVector");this.tintColor=d.getUniformLocation(b,"tint");this.aVertexPosition=d.getAttribLocation(b,"aVertexPosition");this.colorAttribute=d.getAttribLocation(b,"aColor");this.attributes=[this.aVertexPosition,this.colorAttribute];this.translationMatrix=
d.getUniformLocation(b,"translationMatrix");this.alpha=d.getUniformLocation(b,"alpha");this.program=b};return e}();c.PrimitiveShader=f;f.prototype.__class__="egret.PrimitiveShader"})(egret||(egret={}));
(function(c){var f=function(){function e(b){this.gl=null;this.maxAttibs=10;this.attribState=[];this.tempAttribState=[];this.blurShader=this.colorTransformShader=this.primitiveShader=this.defaultShader=this.currentShader=null;for(var a=0;a<this.maxAttibs;a++)this.attribState[a]=!1;this.setContext(b)}var d=e.prototype;d.setContext=function(b){this.gl=b;this.primitiveShader=new c.PrimitiveShader(b);this.defaultShader=new c.EgretShader(b);this.colorTransformShader=new c.ColorTransformShader(b);this.blurShader=
new c.BlurShader(b);this.activateShader(this.defaultShader)};d.activateShader=function(b){this.currentShader!=b&&(this.gl.useProgram(b.program),this.setAttribs(b.attributes),this.currentShader=b)};d.setAttribs=function(b){var a,g;g=this.tempAttribState.length;for(a=0;a<g;a++)this.tempAttribState[a]=!1;g=b.length;for(a=0;a<g;a++)this.tempAttribState[b[a]]=!0;b=this.gl;g=this.attribState.length;for(a=0;a<g;a++)this.attribState[a]!==this.tempAttribState[a]&&(this.attribState[a]=this.tempAttribState[a],
this.tempAttribState[a]?b.enableVertexAttribArray(a):b.disableVertexAttribArray(a))};return e}();c.WebGLShaderManager=f;f.prototype.__class__="egret.WebGLShaderManager"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);c.Texture.createBitmapData=c.Texture._createBitmapDataForCanvasAndWebGl}__extends(d,e);var b=d.prototype;b.initVersion=function(a){this._versionCtr=a};b.proceed=function(a){function g(){if(4==d.readyState)if(d.status!=a._status&&(a._status=d.status,c.HTTPStatusEvent.dispatchHTTPStatusEvent(a,d.status)),400<=d.status||0==d.status)c.IOErrorEvent.dispatchIOErrorEvent(a);else{switch(a.dataFormat){case c.URLLoaderDataFormat.TEXT:a.data=d.responseText;
break;case c.URLLoaderDataFormat.VARIABLES:a.data=new c.URLVariables(d.responseText);break;case c.URLLoaderDataFormat.BINARY:a.data=d.response;break;default:a.data=d.responseText}c.__callAsync(c.Event.dispatchEvent,c.Event,a,c.Event.COMPLETE)}}if(a.dataFormat==c.URLLoaderDataFormat.TEXTURE)this.loadTexture(a);else if(a.dataFormat==c.URLLoaderDataFormat.SOUND)c.Html5Capatibility._audioType==c.AudioType.WEB_AUDIO?this.loadWebAudio(a):c.Html5Capatibility._audioType==c.AudioType.QQ_AUDIO?this.loadQQAudio(a):
this.loadSound(a);else{var b=a._request,d=this.getXHR();d.onreadystatechange=g;var e=this.getVirtualUrl(c.NetContext._getUrl(b));d.open(b.method,e,!0);this.setResponseType(d,a.dataFormat);b.method!=c.URLRequestMethod.GET&&b.data?b.data instanceof c.URLVariables?(d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),d.send(b.data.toString())):(d.setRequestHeader("Content-Type","multipart/form-data"),d.send(b.data)):d.send()}};b.loadSound=function(a){function g(d){c.clearTimeout(e.__timeoutId);
e.removeEventListener("canplaythrough",g,!1);e.removeEventListener("error",b,!1);d=new c.Html5Audio;d._setAudio(e);var q=new c.Sound;q._setAudio(d);a.data=q;c.__callAsync(c.Event.dispatchEvent,c.Event,a,c.Event.COMPLETE)}function b(d){c.clearTimeout(e.__timeoutId);e.removeEventListener("canplaythrough",g,!1);e.removeEventListener("error",b,!1);c.IOErrorEvent.dispatchIOErrorEvent(a)}var d=this.getVirtualUrl(a._request.url),e=new Audio(d);e.__timeoutId=c.setTimeout(g,this,100);e.addEventListener("canplaythrough",
g,!1);e.addEventListener("error",b,!1);e.load()};b.loadQQAudio=function(a){var g=c.Html5Capatibility._QQRootPath+this.getVirtualUrl(a._request.url);console.log("loadQQAudio");QZAppExternal.preloadSound(function(b){if(0==b.code){b=new c.QQAudio;b._setPath(g);var d=new c.Sound;d._setAudio(b);a.data=d;c.__callAsync(c.Event.dispatchEvent,c.Event,a,c.Event.COMPLETE)}else c.IOErrorEvent.dispatchIOErrorEvent(a)},{bid:-1,url:g,refresh:1})};b.loadWebAudio=function(a){var g=this.getVirtualUrl(a._request.url),
b=new XMLHttpRequest;b.open("GET",g,!0);b.responseType="arraybuffer";console.log("loadWebAudio");b.onload=function(){var g=new c.WebAudio;g._setArrayBuffer(b.response,function(){var b=new c.Sound;b._setAudio(g);a.data=b;c.__callAsync(c.Event.dispatchEvent,c.Event,a,c.Event.COMPLETE)})};b.send()};b.getXHR=function(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")};b.setResponseType=function(a,g){switch(g){case c.URLLoaderDataFormat.TEXT:case c.URLLoaderDataFormat.VARIABLES:a.responseType=
c.URLLoaderDataFormat.TEXT;break;case c.URLLoaderDataFormat.BINARY:a.responseType="arraybuffer";break;default:a.responseType=g}};b.loadTexture=function(a){var g=this.getVirtualUrl(a._request.url);c.Texture.createBitmapData(g,function(g,b){if(0!=g)c.IOErrorEvent.dispatchIOErrorEvent(a);else{var d=new c.Texture;d._setBitmapData(b);a.data=d;c.__callAsync(c.Event.dispatchEvent,c.Event,a,c.Event.COMPLETE)}})};b.getVirtualUrl=function(a){return this._versionCtr?this._versionCtr.getVirtualUrl(a):a};return d}(c.NetContext);
c.HTML5NetContext=f;f.prototype.__class__="egret.HTML5NetContext"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._isTouchDown=!1;this.rootDiv=null;this.rootDiv=document.getElementById(c.StageDelegate.canvas_div_name);if(!this.rootDiv){var a=document.getElementById(c.StageDelegate.egret_root_div);this.rootDiv=c.Browser.getInstance().$new("div");this.rootDiv.id=c.StageDelegate.canvas_div_name;a.appendChild(this.rootDiv)}}__extends(d,e);var b=d.prototype;b.prevent=function(a){a.stopPropagation();!0==a.isScroll||c.HTMLInput.getInstance().isInputOn()||
a.preventDefault()};b.run=function(){var a=this;window.navigator.msPointerEnabled?(this.rootDiv.addEventListener("MSPointerDown",function(g){a._onTouchBegin(g);a.prevent(g)},!1),this.rootDiv.addEventListener("MSPointerMove",function(g){a._onTouchMove(g);a.prevent(g)},!1),this.rootDiv.addEventListener("MSPointerUp",function(g){a._onTouchEnd(g);a.prevent(g)},!1)):c.MainContext.deviceType==c.MainContext.DEVICE_MOBILE?this.addTouchListener():c.MainContext.deviceType==c.MainContext.DEVICE_PC&&(this.addTouchListener(),
this.addMouseListener());window.addEventListener("mousedown",function(g){a.inOutOfCanvas(g)?a.dispatchLeaveStageEvent():a._isTouchDown=!0});window.addEventListener("mouseup",function(g){a._isTouchDown&&(a.inOutOfCanvas(g)?a.dispatchLeaveStageEvent():a._onTouchEnd(g));a._isTouchDown=!1})};b.addMouseListener=function(){var a=this;this.rootDiv.addEventListener("mousedown",function(g){a._onTouchBegin(g)});this.rootDiv.addEventListener("mousemove",function(g){a._onTouchMove(g)});this.rootDiv.addEventListener("mouseup",
function(g){a._onTouchEnd(g)})};b.addTouchListener=function(){var a=this;this.rootDiv.addEventListener("touchstart",function(g){for(var b=g.changedTouches.length,c=0;c<b;c++)a._onTouchBegin(g.changedTouches[c]);a.prevent(g)},!1);this.rootDiv.addEventListener("touchmove",function(g){for(var b=g.changedTouches.length,c=0;c<b;c++)a._onTouchMove(g.changedTouches[c]);a.prevent(g)},!1);this.rootDiv.addEventListener("touchend",function(g){for(var b=g.changedTouches.length,c=0;c<b;c++)a._onTouchEnd(g.changedTouches[c]);
a.prevent(g)},!1);this.rootDiv.addEventListener("touchcancel",function(g){for(var b=g.changedTouches.length,c=0;c<b;c++)a._onTouchEnd(g.changedTouches[c]);a.prevent(g)},!1)};b.inOutOfCanvas=function(a){var g=this.getLocation(this.rootDiv,a);a=g.x;var g=g.y,b=c.MainContext.instance.stage;return 0>a||0>g||a>b.stageWidth||g>b.stageHeight?!0:!1};b.dispatchLeaveStageEvent=function(){this.touchingIdentifiers.length=0;c.MainContext.instance.stage.dispatchEventWith(c.Event.LEAVE_STAGE)};b._onTouchBegin=function(a){var g=
this.getLocation(this.rootDiv,a),b=-1;a.hasOwnProperty("identifier")&&(b=a.identifier);this.onTouchBegan(g.x,g.y,b)};b._onTouchMove=function(a){var g=this.getLocation(this.rootDiv,a),b=-1;a.hasOwnProperty("identifier")&&(b=a.identifier);this.onTouchMove(g.x,g.y,b)};b._onTouchEnd=function(a){var g=this.getLocation(this.rootDiv,a),b=-1;a.hasOwnProperty("identifier")&&(b=a.identifier);this.onTouchEnd(g.x,g.y,b)};b.getLocation=function(a,g){var b=document.documentElement,d=window,e,f;"function"===typeof a.getBoundingClientRect?
(f=a.getBoundingClientRect(),e=f.left,f=f.top):f=e=0;e+=d.pageXOffset-b.clientLeft;f+=d.pageYOffset-b.clientTop;null!=g.pageX?(b=g.pageX,d=g.pageY):(e-=document.body.scrollLeft,f-=document.body.scrollTop,b=g.clientX,d=g.clientY);var h=c.Point.identity;h.x=(b-e)/c.StageDelegate.getInstance().getScaleX();h.y=(d-f)/c.StageDelegate.getInstance().getScaleY();return h};return d}(c.TouchContext);c.HTML5TouchContext=f;f.prototype.__class__="egret.HTML5TouchContext"})(egret||(egret={}));
(function(c){var f=function(d){function b(){d.call(this);this._isNeedShow=!1;this.inputDiv=this.inputElement=null;this._gscaleY=this._gscaleX=0;this._isNeesHide=!1;this.textValue="";this._styleInfoes={};e.getInstance()}__extends(b,d);var a=b.prototype;a._initElement=function(a,b,d,e){var f=c.StageDelegate.getInstance().getScaleX(),h=c.StageDelegate.getInstance().getScaleY();this.inputDiv.style.left=a*f+"px";this.inputDiv.style.top=b*h+"px";this._gscaleX=f*d;this._gscaleY=h*e};a._show=function(a,b,
c,d){this._multiline=a;e.getInstance().isCurrentStageText(this)?this.inputElement.onblur=null:(this.inputElement=e.getInstance().getInputElement(this),this.inputDiv=e.getInstance()._inputDIV);this._isNeedShow=e.getInstance()._needShow=!0};a.onBlurHandler=function(){e.getInstance().clearInputElement();window.scrollTo(0,0)};a.executeShow=function(){this.inputElement.value=this._getText();null==this.inputElement.onblur&&(this.inputElement.onblur=this.onBlurHandler);this._resetStageText();0<this._textfield._TF_Props_._maxChars?
this.inputElement.setAttribute("maxlength",this._textfield._TF_Props_._maxChars):this.inputElement.removeAttribute("maxlength");this.inputElement.selectionStart=this.inputElement.value.length;this.inputElement.selectionEnd=this.inputElement.value.length;this.inputElement.focus()};a._hide=function(){this._isNeesHide=!0;0<=c.Browser.getInstance().getUserAgent().indexOf("ios")&&e.getInstance().disconnectStageText(this)};a._getText=function(){this.textValue||(this.textValue="");return this.textValue};
a._setText=function(a){this.textValue=a;this.resetText()};a.resetText=function(){this.inputElement&&(this.inputElement.value=this.textValue)};a._onInput=function(){this.textValue=this.inputElement.value;c.Event.dispatchEvent(this,"updateText",!1)};a._onClickHandler=function(a){this._isNeedShow&&(a.stopImmediatePropagation(),this._isNeedShow=!1,this.executeShow(),this.dispatchEvent(new c.Event("focus")))};a._onDisconnect=function(){this.inputElement=null;this.dispatchEvent(new c.Event("blur"))};a.setElementStyle=
function(a,b){this.inputElement&&this._styleInfoes[a]!=b&&(this.inputElement.style[a]=b)};a._removeInput=function(){this.inputElement&&e.getInstance().disconnectStageText(this)};a._resetStageText=function(){if(this.inputElement){var a=this._textfield,b=a._TF_Props_;this.setElementStyle("fontFamily",b._fontFamily);this.setElementStyle("fontStyle",b._italic?"italic":"normal");this.setElementStyle("fontWeight",b._bold?"bold":"normal");this.setElementStyle("textAlign",b._textAlign);this.setElementStyle("fontSize",
b._size*this._gscaleY+"px");this.setElementStyle("lineHeight",b._size*this._gscaleY+"px");this.setElementStyle("color",b._textColorString);this.setElementStyle("width",a._getSize(c.Rectangle.identity).width*this._gscaleX+"px");this.setElementStyle("height",a._getSize(c.Rectangle.identity).height*this._gscaleY+"px");this.setElementStyle("verticalAlign",b._verticalAlign)}};return b}(c.StageText);c.HTML5StageText=f;f.prototype.__class__="egret.HTML5StageText";var e=function(){function d(){this._needShow=
!1}var b=d.prototype;b.isInputOn=function(){return null!=this._stageText};b.isCurrentStageText=function(a){return this._stageText==a};b.initValue=function(a){a.style.position="absolute";a.style.left="0px";a.style.top="0px";a.style.border="none";a.style.padding="0"};b._initStageDelegateDiv=function(){var a=this,g=c.Browser.getInstance().$("#StageDelegateDiv");g||(g=c.Browser.getInstance().$new("div"),g.id="StageDelegateDiv",document.getElementById(c.StageDelegate.egret_root_div).appendChild(g),a.initValue(g),
g.style.width="0px",g.style.height="0px",a._inputDIV=c.Browser.getInstance().$new("div"),a.initValue(a._inputDIV),a._inputDIV.style.width="0px",a._inputDIV.style.height="0px",a._inputDIV.style.left="0px",a._inputDIV.style.top="-100px",a._inputDIV.style[c.Browser.getInstance().getTrans("transformOrigin")]="0% 0% 0px",g.appendChild(a._inputDIV),document.getElementById(c.StageDelegate.canvas_div_name).addEventListener("click",function(g){a._needShow?(a._needShow=!1,c.MainContext.instance.stage._changeSizeDispatchFlag=
!1,a._stageText._onClickHandler(g),d.getInstance().show()):a._inputElement&&(a.clearInputElement(),a._inputElement.blur(),a._inputElement=null)}),a.initInputElement(!0),a.initInputElement(!1))};b.initInputElement=function(a){var g=this;a?(a=document.createElement("textarea"),a.style.resize="none",g._multiElement=a,a.id="egretTextarea"):(a=document.createElement("input"),g._simpleElement=a,a.id="egretInput");a.type="text";g._inputDIV.appendChild(a);a.setAttribute("tabindex","-1");a.style.width="1px";
a.style.height="12px";g.initValue(a);a.style.outline="thin";a.style.background="none";a.style.overflow="hidden";a.style.wordBreak="break-all";a.style.opacity=0;a.oninput=function(){g._stageText&&g._stageText._onInput()}};b.show=function(){var a=this._inputElement;c.__callAsync(function(){a.style.opacity=1},this)};b.disconnectStageText=function(a){if(null==this._stageText||this._stageText==a)this.clearInputElement(),this._inputElement&&this._inputElement.blur()};b.clearInputElement=function(){this._inputElement&&
(this._inputElement.value="",this._inputElement.onblur=null,this._inputElement.style.width="1px",this._inputElement.style.height="12px",this._inputElement.style.left="0px",this._inputElement.style.top="0px",this._inputElement.style.opacity=0,(this._simpleElement==this._inputElement?this._multiElement:this._simpleElement).style.display="block",this._inputDIV.style.left="0px",this._inputDIV.style.top="-100px");this._stageText&&(this._stageText._onDisconnect(),this._stageText=null);c.MainContext.instance.stage._changeSizeDispatchFlag=
!0};b.getInputElement=function(a){this.clearInputElement();this._stageText=a;this._inputElement=this._stageText._multiline?this._multiElement:this._simpleElement;(this._simpleElement==this._inputElement?this._multiElement:this._simpleElement).style.display="none";return this._inputElement};d.getInstance=function(){null==d._instance&&(d._instance=new c.HTMLInput);return d._instance};return d}();c.HTMLInput=e;e.prototype.__class__="egret.HTMLInput"})(egret||(egret={}));
egret.StageText.create=function(){egret.HTMLInput.getInstance()._initStageDelegateDiv();return new egret.HTML5StageText};
(function(c){var f=function(){function e(){this._loop=!1;this.paused=!0;this._listeners=[];this._onEndedCall=null;this._volume=1;this._startTime=0}var d=e.prototype;d._play=function(b){this.removeListeners();c.Html5Capatibility._audioMustLoad&&this._audio.load();this.paused=!1;this._audio.autoplay=!0;this._audio.volume=this._volume;var a=this,g=function(b){a._audio.removeEventListener("ended",g);a._onEndedCall&&a._onEndedCall.call(null,b);a.clear()};this._audio.addEventListener("ended",g);this.initStart();
try{this._audio.currentTime=this._startTime}catch(d){}finally{this._audio.play()}};d.clear=function(){try{this._audio.pause()}catch(b){}finally{this.removeListeners(),this._loop&&!this.paused&&this._play()}};d._pause=function(){this.paused=!0;this._audio.pause()};d._load=function(){this._audio.load()};d._setAudio=function(b){this._audio=b};d.initStart=function(){for(var b=0;b<this._listeners.length;b++){var a=this._listeners[b];this._audio.addEventListener(a.type,a.listener,a.useCapture)}};d._addEventListener=
function(b,a,g){void 0===g&&(g=!1);"ended"==b?this._onEndedCall=a:(this._listeners.push({type:b,listener:a,useCapture:g}),this._audio&&this._audio.addEventListener(b,a,g))};d.removeListeners=function(){for(var b=0;b<this._listeners.length;b++){var a=this._listeners[b];this._audio&&this._audio.removeEventListener(a.type,a.listener,a.useCapture)}};d._removeEventListener=function(b,a,g){void 0===g&&(g=!1);if("ended"==b)this._onEndedCall=null;else for(var c=0;c<this._listeners.length;c++){var d=this._listeners[c];
if(d.listener==a&&d.useCapture==g&&d.type==b){this._listeners.splice(c,1);this._audio&&this._audio.removeEventListener(b,a,g);break}}};d._preload=function(b,a,g){void 0===a&&(a=null);void 0===g&&(g=null);c.callLater(a,g)};d._destroy=function(){};d._getVolume=function(){return this._volume};d._setVolume=function(b){this._volume=Math.max(0,Math.min(b,1));this._audio.volume=this._volume};d._setLoop=function(b){this._loop=b};d._getCurrentTime=function(){return this._audio.currentTime};d._setCurrentTime=
function(b){this._startTime=b};return e}();c.Html5Audio=f;f.prototype.__class__="egret.Html5Audio"})(egret||(egret={}));
(function(c){var f=function(){function e(){this.context=e.ctx;this.bufferSource=null;this.paused=!0;this._loop=!1;this._listeners=[];this._onEndedCall=null;this._volume=1;this._currentTime=this._startTime=0;this.gain=e.ctx.createGain?e.ctx.createGain():e.ctx.createGainNode()}var d=e.prototype;e.decodeAudios=function(){if(!(0>=e.decodeArr.length||e.isDecoding)){e.isDecoding=!0;var b=e.decodeArr.shift();e.ctx.decodeAudioData(b.buffer,function(a){b.self.audioBuffer=a;b.callback&&b.callback();e.isDecoding=
!1;e.decodeAudios()})}};d._play=function(b){var a=this;this.bufferSource&&(this.bufferSource.onended=null,this.removeListeners(),this.bufferSource=null);b=this.context;var g=this.gain,c=b.createBufferSource();this.bufferSource=c;this.addListeners();c.buffer=this.audioBuffer;c.connect(g);g.connect(b.destination);c.onended=function(g){a.clear();a._onEndedCall&&a._onEndedCall.call(null,g);a._loop&&!a.paused&&a._play()};this.paused=!1;this._startTime=Date.now();this.gain.gain.value=this._volume;c.start(0,
this._currentTime);this._currentTime=0};d.clear=function(){if(this.bufferSource){this.removeListeners();var b=this.bufferSource;b.stop?b.stop(0):b.noteOff(0);this.bufferSource.disconnect();this.bufferSource=null}};d.addListeners=function(){for(var b=0;b<this._listeners.length;b++){var a=this._listeners[b];this.bufferSource.addEventListener(a.type,a.listener,a.useCapture)}};d.removeListeners=function(){for(var b=0;b<this._listeners.length;b++){var a=this._listeners[b];this.bufferSource.removeEventListener(a.type,
a.listener,a.useCapture)}};d._pause=function(){this.paused=!0;this.clear()};d._addEventListener=function(b,a,g){void 0===g&&(g=!1);"ended"==b?this._onEndedCall=a:(this._listeners.push({type:b,listener:a,useCapture:g}),this.bufferSource&&this.bufferSource.addEventListener(b,a,g))};d._removeEventListener=function(b,a,g){void 0===g&&(g=!1);if("ended"==b)this._onEndedCall=null;else for(var c=0;c<this._listeners.length;c++){var d=this._listeners[c];if(d.listener==a&&d.useCapture==g&&d.type==b){this._listeners.splice(c,
1);this.bufferSource&&this.bufferSource.removeEventListener(b,a,g);break}}};d._load=function(){this._setArrayBuffer(this._arrayBuffer,null)};d._setArrayBuffer=function(b,a){this._arrayBuffer=b;e.decodeArr.push({buffer:b,callback:a,self:this});e.decodeAudios()};d._preload=function(b,a,g){void 0===a&&(a=null);void 0===g&&(g=null);c.callLater(a,g)};d._getVolume=function(){return this._volume};d._setVolume=function(b){this._volume=b;this.gain.gain.value=b};d._setLoop=function(b){this._loop=b};d._getCurrentTime=
function(){return this.bufferSource?(Date.now()-this._startTime)/1E3:0};d._setCurrentTime=function(b){this._currentTime=b};d._destroy=function(){};e.canUseWebAudio=window.AudioContext||window.webkitAudioContext||window.mozAudioContext;e.ctx=e.canUseWebAudio?new (window.AudioContext||window.webkitAudioContext||window.mozAudioContext):void 0;e.decodeArr=[];e.isDecoding=!1;return e}();c.WebAudio=f;f.prototype.__class__="egret.WebAudio"})(egret||(egret={}));
(function(c){var f=function(){function e(){this._loop=!1;this._currentTime=0}var d=e.prototype;d._play=function(b){this._type=b;b==c.Sound.EFFECT?QZAppExternal.playLocalSound(function(a){alert(JSON.stringify(a))},{bid:-1,url:this._path,loop:this._loop?-1:0}):QZAppExternal.playLocalBackSound({bid:-1,url:this._path,loop:this._loop?-1:0})};d._pause=function(){this._type==c.Sound.EFFECT?QZAppExternal.stopSound():QZAppExternal.stopBackSound()};d._addEventListener=function(b,a,g){};d._removeEventListener=
function(b,a,g){};d._load=function(){};d._preload=function(b,a,g){void 0===a&&(a=null);void 0===g&&(g=null);c.callLater(a,g)};d._setPath=function(b){this._path=b};d._getVolume=function(){return 1};d._setVolume=function(b){};d._setLoop=function(b){this._loop=b};d._getCurrentTime=function(){return 0};d._setCurrentTime=function(b){this._currentTime=b};d._destroy=function(){};return e}();c.QQAudio=f;f.prototype.__class__="egret.QQAudio"})(egret||(egret={}));
(function(c){var f=function(){function b(){}b.QQ_AUDIO=1;b.WEB_AUDIO=2;b.HTML5_AUDIO=3;return b}();c.AudioType=f;f.prototype.__class__="egret.AudioType";var e=function(){function b(){}b.WPHONE=1;b.IOS=2;b.ADNROID=3;return b}();c.SystemOSType=e;e.prototype.__class__="egret.SystemOSType";var d=function(b){function a(){b.call(this)}__extends(a,b);a._init=function(){var g=navigator.userAgent.toLowerCase();a.ua=g;a._canUseBlob=!1;a._audioType=f.HTML5_AUDIO;a._AudioClass=c.Html5Audio;a._audioMustLoad=!0;
if(0<=g.indexOf("windows phone"))a._System_OS=e.WPHONE,a._audioMustLoad=!1;else if(0<=g.indexOf("android"))a._System_OS=e.ADNROID,0<=g.indexOf("ucbrowser")&&(a._audioMustLoad=!1),window.hasOwnProperty("QZAppExternal")&&0<=g.indexOf("qzone")&&(a._AudioClass=c.QQAudio,a._audioType=f.QQ_AUDIO,(g=document.getElementsByTagName("base"))&&0<g.length?a._QQRootPath=g[0].baseURI:(g=window.location.href.indexOf("?"),-1==g&&(g=window.location.href.length),g=window.location.href.substring(0,g),g=g.substring(0,
g.lastIndexOf("/")),a._QQRootPath=g+"/"));else if(0<=g.indexOf("iphone")||0<=g.indexOf("ipad")||0<=g.indexOf("ipod"))a._System_OS=e.IOS,7<=a.getIOSVersion()&&(a._canUseBlob=!0,a._AudioClass=c.WebAudio,a._audioType=f.WEB_AUDIO);window.URL||window.webkitURL||(a._canUseBlob=!1);window.AudioContext||window.webkitAudioContext||window.mozAudioContext||a._audioType!=f.WEB_AUDIO||(a._audioType=f.HTML5_AUDIO,a._AudioClass=c.Html5Audio)};a.getIOSVersion=function(){var g=a.ua.toLowerCase().match(/cpu [^\d]*\d.*like mac os x/)[0];
return parseInt(g.match(/\d(_\d)*/)[0])||0};a._canUseBlob=!1;a._audioType=0;a._audioMustLoad=!1;a._QQRootPath="";a._System_OS=0;a.ua="";return a}(c.HashObject);c.Html5Capatibility=d;d.prototype.__class__="egret.Html5Capatibility";d._init()})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.localVersionDataPath="localVersion.manifest";this.localVersionData=null;this.changeVersionDataPath="version.manifest";this.changeVersionData=null;this.baseVersionDataPath="base.manifest";this.baseVersionData=null;this.localVersionCodePath="localCode.manifest";this.serverVersionCodePath="code.manifest";this._call=this._load=null}__extends(d,e);var b=d.prototype;b.fetchVersion=function(){this._load=new c.NativeResourceLoader;this._load.addEventListener(c.IOErrorEvent.IO_ERROR,
this.loadError,this);this._load.addEventListener(c.Event.COMPLETE,this.fileLoadComplete,this);this.initLocalVersionData()};b.initLocalVersionData=function(){var a=this.getData("appVersion.manifest",!0);if(a){if(1==a.debug){this.baseVersionData=null;if(a=this.getData(this.localVersionDataPath,!1))for(var g in a)this.deleteFile(g);this.deleteFile(this.localVersionDataPath);this.deleteFile(this.localVersionCodePath);this.loadOver();return}var b=this.getData("appVersion.manifest",!1);if(null==b||b.version!=
a.version){this.localVersionData=this.getData(this.localVersionDataPath,!0);null==this.localVersionData&&(this.localVersionData={});this.deleteFile(this.localVersionCodePath);this.save("appVersion.manifest",JSON.stringify(a));if(a=this.getData(this.localVersionCodePath,!1))for(g in a)a[g]!=this.localVersionData[g]&&this.deleteFile(g);else a={};for(g in this.localVersionData)a[g]!=this.localVersionData[g]&&this.deleteFile(g);this.save(this.localVersionDataPath,JSON.stringify(this.localVersionData));
this.loadCodeVersion();return}}this.localVersionData=this.getLocalData(this.localVersionDataPath);null==this.localVersionData&&(this.localVersionData=this.getLocalData(this.baseVersionDataPath),null==this.localVersionData&&(this.localVersionData={}),this.save(this.localVersionDataPath,JSON.stringify(this.localVersionData)));this.loadCodeVersion()};b.deleteFile=function(a){egret_native.deleteUpdateFile&&egret_native.deleteUpdateFile(a)};b.loadCodeVersion=function(){var a=1;this.newCode=1;var g=this.getLocalData(this.localVersionCodePath);
null!=g&&(a=g.code);g=this.getLocalData(this.serverVersionCodePath);null!=g&&(this.newCode=g.code);this.loadBaseVersion(a!=this.newCode)};b.loadBaseVersion=function(a){this.baseVersionData=this.getLocalData(this.baseVersionDataPath);this.changeVersionData=this.getLocalData(this.changeVersionDataPath);var g=this;null==g.baseVersionData||a?g.loadFile(g.baseVersionDataPath,function(){g.baseVersionData=g.getLocalData(g.baseVersionDataPath);g.loadBaseOver()}):g.loadBaseOver()};b.loadBaseOver=function(){this.save(this.localVersionCodePath,
JSON.stringify({code:this.newCode}));this.loadOver()};b.loadFile=function(a,g){void 0===g&&(g=null);this._call=g;this._load.load(a,1E3)};b.fileLoadComplete=function(a){this._call&&this._call()};b.loadError=function(a){this._load.removeEventListener(c.IOErrorEvent.IO_ERROR,this.loadError,this);this._load.removeEventListener(c.Event.COMPLETE,this.fileLoadComplete,this);this.dispatchEvent(a)};b.loadOver=function(){this._load.removeEventListener(c.IOErrorEvent.IO_ERROR,this.loadError,this);this._load.removeEventListener(c.Event.COMPLETE,
this.fileLoadComplete,this);this.dispatchEvent(new c.Event(c.Event.COMPLETE))};b.save=function(a,g){egret_native.writeFileSync?egret_native.writeFileSync(a,g):egret_native.saveRecord&&egret_native.saveRecord(a,g)};b.getData=function(a,g){if(egret_native.readUpdateFileSync&&egret_native.readResourceFileSync){var b=g?egret_native.readResourceFileSync(a):egret_native.readUpdateFileSync(a);return null!=b?JSON.parse(b):null}return this.getLocalDataByOld(a)};b.getLocalData=function(a){if(egret_native.readUpdateFileSync&&
egret_native.readResourceFileSync){var g=egret_native.readUpdateFileSync(a);if(null!=g)return JSON.parse(g);g=egret_native.readResourceFileSync(a);return null!=g?JSON.parse(g):null}return this.getLocalDataByOld(a)};b.getLocalDataByOld=function(a){var g=null;egret_native.isRecordExists(a)?(a=egret_native.loadRecord(a),g=JSON.parse(a)):egret_native.isFileExists(a)&&(a=egret_native.readFileSync(a),g=JSON.parse(a));return g};b.getChangeList=function(){if(!this.baseVersionData)return[];var a={},g;for(g in this.changeVersionData)1==
this.changeVersionData[g].d?delete this.baseVersionData[g]:this.baseVersionData[g]=this.changeVersionData[g];for(g in this.baseVersionData)null!=this.localVersionData[g]&&this.compareVersion(this.localVersionData,this.baseVersionData,g)||(a[g]={url:g,size:this.baseVersionData[g].s});var b=[];for(g in a)b.push(a[g]);return b};b.compareVersion=function(a,g,b){return null==a[b]||null==g[b]?!1:a[b].v==g[b].v};b.checkIsNewVersion=function(a){return this.baseVersionData?null!=this.changeVersionData[a]?
this.compareVersion(this.changeVersionData,this.localVersionData,a):null!=this.baseVersionData[a]?this.compareVersion(this.baseVersionData,this.localVersionData,a):!0:!0};b.saveVersion=function(a){if(this.baseVersionData){var g=!1;null!=this.changeVersionData[a]?this.compareVersion(this.changeVersionData,this.localVersionData,a)||(g=!0,this.localVersionData[a]=this.changeVersionData[a]):null==this.baseVersionData[a]||this.compareVersion(this.baseVersionData,this.localVersionData,a)||(g=!0,this.localVersionData[a]=
this.baseVersionData[a]);g&&this.save(this.localVersionDataPath,JSON.stringify(this.localVersionData))}};b.getVirtualUrl=function(a){return a};return d}(c.EventDispatcher);c.NativeVersionController=f;f.prototype.__class__="egret.NativeVersionController"})(egret||(egret={}));var RES;
(function(c){var f=function(c){function d(b,a,g){void 0===a&&(a=!1);void 0===g&&(g=!1);c.call(this,b,a,g);this.itemsTotal=this.itemsLoaded=0;this.groupName="";this.resItem=null}__extends(d,c);d.dispatchResourceEvent=function(b,a,g,c,e,f){void 0===g&&(g="");void 0===c&&(c=null);void 0===e&&(e=0);void 0===f&&(f=0);var l=egret.Event._getPropertyData(d);l.groupName=g;l.resItem=c;l.itemsLoaded=e;l.itemsTotal=f;egret.Event._dispatchByTarget(d,b,a,l)};d.ITEM_LOAD_ERROR="itemLoadError";d.CONFIG_COMPLETE=
"configComplete";d.CONFIG_LOAD_ERROR="configLoadError";d.GROUP_PROGRESS="groupProgress";d.GROUP_COMPLETE="groupComplete";d.GROUP_LOAD_ERROR="groupLoadError";return d}(egret.Event);c.ResourceEvent=f;f.prototype.__class__="RES.ResourceEvent"})(RES||(RES={}));
(function(c){var f=function(){function c(b,a,g){this.groupName="";this.data=null;this._loaded=!1;this.name=b;this.url=a;this.type=g}var d=c.prototype;Object.defineProperty(d,"loaded",{get:function(){return this.data?this.data.loaded:this._loaded},set:function(b){this.data&&(this.data.loaded=b);this._loaded=b},enumerable:!0,configurable:!0});d.toString=function(){return'[ResourceItem name="'+this.name+'" url="'+this.url+'" type="'+this.type+'"]'};c.TYPE_XML="xml";c.TYPE_IMAGE="image";c.TYPE_BIN="bin";
c.TYPE_TEXT="text";c.TYPE_JSON="json";c.TYPE_SHEET="sheet";c.TYPE_FONT="font";c.TYPE_SOUND="sound";return c}();c.ResourceItem=f;f.prototype.__class__="RES.ResourceItem"})(RES||(RES={}));
(function(c){var f=function(){function e(){this.keyMap={};this.groupDic={};c.configInstance=this}var d=e.prototype;d.getGroupByName=function(b){var a=[];if(!this.groupDic[b])return a;b=this.groupDic[b];for(var g=b.length,c=0;c<g;c++)a.push(this.parseResourceItem(b[c]));return a};d.getRawGroupByName=function(b){return this.groupDic[b]?this.groupDic[b]:[]};d.createGroup=function(b,a,g){void 0===g&&(g=!1);if(!g&&this.groupDic[b]||!a||0==a.length)return!1;g=this.groupDic;for(var c=[],d=a.length,e=0;e<
d;e++){var f=a[e],h=g[f];if(h)for(var f=h.length,k=0;k<f;k++){var m=h[k];-1==c.indexOf(m)&&c.push(m)}else(m=this.keyMap[f])?-1==c.indexOf(m)&&c.push(m):egret.$warn(2E3,f)}if(0==c.length)return!1;this.groupDic[b]=c;return!0};d.parseConfig=function(b,a){if(b){var g=b.resources;if(g)for(var c=g.length,d=0;d<c;d++){var e=g[d],f=e.url;f&&-1==f.indexOf("://")&&(e.url=a+f);this.addItemToKeyMap(e)}if(g=b.groups)for(c=g.length,d=0;d<c;d++){for(var f=g[d],h=[],k=f.keys.split(","),m=k.length,p=0;p<m;p++)e=k[p].trim(),
(e=this.keyMap[e])&&-1==h.indexOf(e)&&h.push(e);this.groupDic[f.name]=h}}};d.addSubkey=function(b,a){var g=this.keyMap[a];g&&!this.keyMap[b]&&(this.keyMap[b]=g)};d.addItemToKeyMap=function(b){this.keyMap[b.name]||(this.keyMap[b.name]=b);if(b.hasOwnProperty("subkeys")){var a=b.subkeys.split(",");b.subkeys=a;for(var g=a.length,c=0;c<g;c++){var d=a[c];null==this.keyMap[d]&&(this.keyMap[d]=b)}}};d.getName=function(b){return(b=this.keyMap[b])?b.name:""};d.getType=function(b){return(b=this.keyMap[b])?b.type:
""};d.getRawResourceItem=function(b){return this.keyMap[b]};d.getResourceItem=function(b){return(b=this.keyMap[b])?this.parseResourceItem(b):null};d.parseResourceItem=function(b){var a=new c.ResourceItem(b.name,b.url,b.type);a.data=b;return a};return e}();c.ResourceConfig=f;f.prototype.__class__="RES.ResourceConfig"})(RES||(RES={}));
(function(c){var f=function(e){function d(){e.call(this);this.thread=2;this.loadingCount=0;this.resInstance=this.callBack=null;this.groupTotalDic={};this.numLoadedDic={};this.itemListDic={};this.groupErrorDic={};this.retryTimesDic={};this.maxRetryTimes=3;this.failedList=[];this.priorityQueue={};this.lazyLoadList=[];this.analyzerDic={};this.queueIndex=0}__extends(d,e);var b=d.prototype;b.isGroupInLoading=function(a){return void 0!==this.itemListDic[a]};b.loadGroup=function(a,g,b){void 0===b&&(b=0);
if(!this.itemListDic[g]&&g)if(a&&0!=a.length){this.priorityQueue[b]?this.priorityQueue[b].push(g):this.priorityQueue[b]=[g];this.itemListDic[g]=a;b=a.length;for(var d=0;d<b;d++)a[d].groupName=g;this.groupTotalDic[g]=a.length;this.numLoadedDic[g]=0;this.next()}else egret.$warn(2001,g),a=new c.ResourceEvent(c.ResourceEvent.GROUP_LOAD_ERROR),a.groupName=g,this.dispatchEvent(a)};b.loadItem=function(a){this.lazyLoadList.push(a);a.groupName="";this.next()};b.next=function(){for(;this.loadingCount<this.thread;){var a=
this.getOneResourceItem();if(!a)break;this.loadingCount++;if(a.loaded)this.onItemComplete(a);else{var g=this.analyzerDic[a.type];g||(g=this.analyzerDic[a.type]=egret.Injector.getInstance(c.AnalyzerBase,a.type));g.loadFile(a,this.onItemComplete,this)}}};b.getOneResourceItem=function(){if(0<this.failedList.length)return this.failedList.shift();var a=Number.NEGATIVE_INFINITY,g;for(g in this.priorityQueue)a=Math.max(a,g);a=this.priorityQueue[a];if(!a||0==a.length)return 0==this.lazyLoadList.length?null:
this.lazyLoadList.pop();g=a.length;for(var b,c=0;c<g;c++){this.queueIndex>=g&&(this.queueIndex=0);b=this.itemListDic[a[this.queueIndex]];if(0<b.length)break;this.queueIndex++}return 0==b.length?null:b.shift()};b.onItemComplete=function(a){this.loadingCount--;var g=a.groupName;if(!a.loaded){var b=this.retryTimesDic[a.name]||1;if(b>this.maxRetryTimes)delete this.retryTimesDic[a.name],c.ResourceEvent.dispatchResourceEvent(this.resInstance,c.ResourceEvent.ITEM_LOAD_ERROR,g,a);else{this.retryTimesDic[a.name]=
b+1;this.failedList.push(a);this.next();return}}if(g){this.numLoadedDic[g]++;var b=this.numLoadedDic[g],d=this.groupTotalDic[g];a.loaded||(this.groupErrorDic[g]=!0);c.ResourceEvent.dispatchResourceEvent(this.resInstance,c.ResourceEvent.GROUP_PROGRESS,g,a,b,d);b==d&&(a=this.groupErrorDic[g],this.removeGroupName(g),delete this.groupTotalDic[g],delete this.numLoadedDic[g],delete this.itemListDic[g],delete this.groupErrorDic[g],a?c.ResourceEvent.dispatchResourceEvent(this,c.ResourceEvent.GROUP_LOAD_ERROR,
g):c.ResourceEvent.dispatchResourceEvent(this,c.ResourceEvent.GROUP_COMPLETE,g))}else this.callBack.call(this.resInstance,a);this.next()};b.removeGroupName=function(a){for(var g in this.priorityQueue){for(var b=this.priorityQueue[g],c=b.length,d=0,e=!1,c=b.length,f=0;f<c;f++){if(b[f]==a){b.splice(d,1);e=!0;break}d++}if(e){0==b.length&&delete this.priorityQueue[g];break}}};return d}(egret.EventDispatcher);c.ResourceLoader=f;f.prototype.__class__="RES.ResourceLoader"})(RES||(RES={}));
(function(c){var f=function(e){function d(){e.call(this);this.resourceConfig=null;this.resourceConfig=c.configInstance}__extends(d,e);var b=d.prototype;b.addSubkey=function(a,g){this.resourceConfig.addSubkey(a,g)};b.loadFile=function(a,g,b){};b.getRes=function(a){};b.destroyRes=function(a){return!1};d.getStringPrefix=function(a){if(!a)return"";var g=a.indexOf(".");return-1!=g?a.substring(0,g):""};d.getStringTail=function(a){if(!a)return"";var g=a.indexOf(".");return-1!=g?a.substring(g+1):""};return d}(egret.HashObject);
c.AnalyzerBase=f;f.prototype.__class__="RES.AnalyzerBase"})(RES||(RES={}));
(function(c){var f=function(c){function d(){c.call(this);this.fileDic={};this.resItemDic=[];this._dataFormat=egret.URLLoaderDataFormat.BINARY;this.recycler=new egret.Recycler}__extends(d,c);var b=d.prototype;b.loadFile=function(a,g,b){if(this.fileDic[a.name])g.call(b,a);else{var c=this.getLoader();this.resItemDic[c.hashCode]={item:a,func:g,thisObject:b};c.load(new egret.URLRequest(a.url))}};b.getLoader=function(){var a=this.recycler.pop();a||(a=new egret.URLLoader,a.addEventListener(egret.Event.COMPLETE,
this.onLoadFinish,this),a.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this));a.dataFormat=this._dataFormat;return a};b.onLoadFinish=function(a){var g=a.target,b=this.resItemDic[g.hashCode];delete this.resItemDic[g.hashCode];var c=b.item,d=b.func;c.loaded=a.type==egret.Event.COMPLETE;c.loaded&&this.analyzeData(c,g.data);this.recycler.push(g);d.call(b.thisObject,c)};b.analyzeData=function(a,g){var b=a.name;!this.fileDic[b]&&g&&(this.fileDic[b]=g)};b.getRes=function(a){return this.fileDic[a]};
b.hasRes=function(a){return null!=this.getRes(a)};b.destroyRes=function(a){return this.fileDic[a]?(this.onResourceDestroy(this.fileDic[a]),delete this.fileDic[a],!0):!1};b.onResourceDestroy=function(a){};return d}(c.AnalyzerBase);c.BinAnalyzer=f;f.prototype.__class__="RES.BinAnalyzer"})(RES||(RES={}));
(function(c){var f=function(c){function d(){c.call(this);this._dataFormat=egret.URLLoaderDataFormat.TEXTURE}__extends(d,c);var b=d.prototype;b.analyzeData=function(a,g){var b=a.name;!this.fileDic[b]&&g&&(this.fileDic[b]=g,(b=a.data)&&b.scale9grid&&(b=b.scale9grid.split(","),g.scale9Grid=new egret.Rectangle(parseInt(b[0]),parseInt(b[1]),parseInt(b[2]),parseInt(b[3]))))};b.onResourceDestroy=function(a){a.dispose()};return d}(c.BinAnalyzer);c.ImageAnalyzer=f;f.prototype.__class__="RES.ImageAnalyzer"})(RES||
(RES={}));(function(c){var f=function(c){function d(){c.call(this);this._dataFormat=egret.URLLoaderDataFormat.TEXT}__extends(d,c);d.prototype.analyzeData=function(b,a){var g=b.name;if(!this.fileDic[g]&&a)try{this.fileDic[g]=JSON.parse(a)}catch(c){egret.$warn(1017,b.url,a)}};return d}(c.BinAnalyzer);c.JsonAnalyzer=f;f.prototype.__class__="RES.JsonAnalyzer"})(RES||(RES={}));
(function(c){var f=function(c){function d(){c.call(this);this._dataFormat=egret.URLLoaderDataFormat.TEXT}__extends(d,c);return d}(c.BinAnalyzer);c.TextAnalyzer=f;f.prototype.__class__="RES.TextAnalyzer"})(RES||(RES={}));
(function(c){var f=function(e){function d(){e.call(this);this.sheetMap={};this.textureMap={};this._dataFormat=egret.URLLoaderDataFormat.TEXT}__extends(d,e);var b=d.prototype;b.getRes=function(a){var g=this.fileDic[a];g||(g=this.textureMap[a]);!g&&(g=c.AnalyzerBase.getStringPrefix(a),g=this.fileDic[g])&&(a=c.AnalyzerBase.getStringTail(a),g=g.getTexture(a));return g};b.onLoadFinish=function(a){var g=a.target,b=this.resItemDic[g.hashCode];delete this.resItemDic[g.hashCode];var c=b.item,d=b.func;c.loaded=
a.type==egret.Event.COMPLETE;if(c.loaded)if("string"==typeof g.data){if(c.loaded=!1,a=this.analyzeConfig(c,g.data)){g=c.url;c.url=a;this._dataFormat=egret.URLLoaderDataFormat.TEXTURE;this.loadFile(c,d,b.thisObject);this._dataFormat=egret.URLLoaderDataFormat.TEXT;c.url=g;return}}else this.analyzeBitmap(c,g.data);this.recycler.push(g);d.call(b.thisObject,c)};b.analyzeConfig=function(a,g){var b=a.name,c,d="";try{c=JSON.parse(g)}catch(e){egret.$warn(1017,a.url,g)}c&&(this.sheetMap[b]=c,d=this.getRelativePath(a.url,
c.file));return d};b.analyzeBitmap=function(a,g){var b=a.name;if(!this.fileDic[b]&&g){var c=this.sheetMap[b];delete this.sheetMap[b];c=this.parseSpriteSheet(g,c,a.data&&a.data.subkeys?"":b);this.fileDic[b]=c}};b.getRelativePath=function(a,g){a=a.split("\\").join("/");var b=a.lastIndexOf("/");return a=-1!=b?a.substring(0,b+1)+g:g};b.parseSpriteSheet=function(a,g,b){g=g.frames;if(!g)return null;var c=new egret.SpriteSheet(a),d=this.textureMap,e;for(e in g){var f=g[e];a=c.createTexture(e,f.x,f.y,f.w,
f.h,f.offX,f.offY,f.sourceW,f.sourceH);f.scale9grid&&(f=f.scale9grid.split(","),a.scale9Grid=new egret.Rectangle(parseInt(f[0]),parseInt(f[1]),parseInt(f[2]),parseInt(f[3])));null==d[e]&&(d[e]=a,b&&this.addSubkey(e,b))}return c};b.destroyRes=function(a){var g=this.fileDic[a];if(g){delete this.fileDic[a];for(var b in g._textureMap)this.textureMap[b]&&delete this.textureMap[b];this.onResourceDestroy(g);return!0}return!1};b.onResourceDestroy=function(a){a.dispose()};return d}(c.BinAnalyzer);c.SheetAnalyzer=
f;f.prototype.__class__="RES.SheetAnalyzer"})(RES||(RES={}));
(function(c){var f=function(c){function d(){c.call(this)}__extends(d,c);var b=d.prototype;b.analyzeConfig=function(a,g){var b=a.name,c,d="";try{c=JSON.parse(g)}catch(e){}c?d=this.getRelativePath(a.url,c.file):(c=g,d=this.getTexturePath(a.url,c));this.sheetMap[b]=c;return d};b.analyzeBitmap=function(a,g){var b=a.name;if(!this.fileDic[b]&&g){var c=this.sheetMap[b];delete this.sheetMap[b];c=new egret.BitmapFont(g,c);this.fileDic[b]=c}};b.getTexturePath=function(a,g){var b="",c=g.split("\n")[2],d=c.indexOf('file="');
-1!=d&&(c=c.substring(d+6),d=c.indexOf('"'),b=c.substring(0,d));a=a.split("\\").join("/");d=a.lastIndexOf("/");return a=-1!=d?a.substring(0,d+1)+b:b};b.onResourceDestroy=function(a){a.dispose()};return d}(c.SheetAnalyzer);c.FontAnalyzer=f;f.prototype.__class__="RES.FontAnalyzer"})(RES||(RES={}));
(function(c){var f=function(c){function d(){c.call(this);this._dataFormat=egret.URLLoaderDataFormat.SOUND}__extends(d,c);d.prototype.analyzeData=function(b,a){var g=b.name;!this.fileDic[g]&&a&&(this.fileDic[g]=a,(g=b.data)&&g.soundType?a.preload(g.soundType):a.preload(egret.Sound.EFFECT))};return d}(c.BinAnalyzer);c.SoundAnalyzer=f;f.prototype.__class__="RES.SoundAnalyzer"})(RES||(RES={}));
(function(c){var f=function(c){function d(){c.call(this);this._dataFormat=egret.URLLoaderDataFormat.TEXT}__extends(d,c);d.prototype.analyzeData=function(b,a){var g=b.name;if(!this.fileDic[g]&&a)try{var c=egret.XML.parse(a);this.fileDic[g]=c}catch(d){}};return d}(c.BinAnalyzer);c.XMLAnalyzer=f;f.prototype.__class__="RES.XMLAnalyzer"})(RES||(RES={}));
(function(c){c.loadConfig=function(c,b,a){void 0===b&&(b="");void 0===a&&(a="json");e.loadConfig(c,b,a)};c.loadGroup=function(c,b){void 0===b&&(b=0);e.loadGroup(c,b)};c.isGroupLoaded=function(c){return e.isGroupLoaded(c)};c.getGroupByName=function(c){return e.getGroupByName(c)};c.createGroup=function(c,b,a){void 0===a&&(a=!1);return e.createGroup(c,b,a)};c.hasRes=function(c){return e.hasRes(c)};c.parseConfig=function(c,b){void 0===b&&(b="");e.parseConfig(c,b)};c.getRes=function(c){return e.getRes(c)};
c.getResAsync=function(c,b,a){e.getResAsync(c,b,a)};c.getResByUrl=function(c,b,a,g){void 0===g&&(g="");e.getResByUrl(c,b,a,g)};c.destroyRes=function(c,b){return e.destroyRes(c,b)};c.setMaxLoadingThread=function(c){e.setMaxLoadingThread(c)};c.setMaxRetryTimes=function(c){e.setMaxRetryTimes(c)};c.addEventListener=function(c,b,a,g,u){void 0===g&&(g=!1);void 0===u&&(u=0);e.addEventListener(c,b,a,g,u)};c.removeEventListener=function(c,b,a,g){void 0===g&&(g=!1);e.removeEventListener(c,b,a,g)};var f=function(d){function b(){d.call(this);
this.analyzerDic={};this.configItemList=[];this.configComplete=this.callLaterFlag=!1;this.loadedGroups=[];this.groupNameList=[];this.asyncDic={};this.init()}__extends(b,d);var a=b.prototype;a.getAnalyzerByType=function(a){var b=this.analyzerDic[a];b||(b=this.analyzerDic[a]=egret.Injector.getInstance(c.AnalyzerBase,a));return b};a.init=function(){egret.Injector.hasMapRule(c.AnalyzerBase,c.ResourceItem.TYPE_BIN)||egret.Injector.mapClass(c.AnalyzerBase,c.BinAnalyzer,c.ResourceItem.TYPE_BIN);egret.Injector.hasMapRule(c.AnalyzerBase,
c.ResourceItem.TYPE_IMAGE)||egret.Injector.mapClass(c.AnalyzerBase,c.ImageAnalyzer,c.ResourceItem.TYPE_IMAGE);egret.Injector.hasMapRule(c.AnalyzerBase,c.ResourceItem.TYPE_TEXT)||egret.Injector.mapClass(c.AnalyzerBase,c.TextAnalyzer,c.ResourceItem.TYPE_TEXT);egret.Injector.hasMapRule(c.AnalyzerBase,c.ResourceItem.TYPE_JSON)||egret.Injector.mapClass(c.AnalyzerBase,c.JsonAnalyzer,c.ResourceItem.TYPE_JSON);egret.Injector.hasMapRule(c.AnalyzerBase,c.ResourceItem.TYPE_SHEET)||egret.Injector.mapClass(c.AnalyzerBase,
c.SheetAnalyzer,c.ResourceItem.TYPE_SHEET);egret.Injector.hasMapRule(c.AnalyzerBase,c.ResourceItem.TYPE_FONT)||egret.Injector.mapClass(c.AnalyzerBase,c.FontAnalyzer,c.ResourceItem.TYPE_FONT);egret.Injector.hasMapRule(c.AnalyzerBase,c.ResourceItem.TYPE_SOUND)||egret.Injector.mapClass(c.AnalyzerBase,c.SoundAnalyzer,c.ResourceItem.TYPE_SOUND);egret.Injector.hasMapRule(c.AnalyzerBase,c.ResourceItem.TYPE_XML)||egret.Injector.mapClass(c.AnalyzerBase,c.XMLAnalyzer,c.ResourceItem.TYPE_XML);this.resConfig=
new c.ResourceConfig;this.resLoader=new c.ResourceLoader;this.resLoader.callBack=this.onResourceItemComp;this.resLoader.resInstance=this;this.resLoader.addEventListener(c.ResourceEvent.GROUP_COMPLETE,this.onGroupComp,this);this.resLoader.addEventListener(c.ResourceEvent.GROUP_LOAD_ERROR,this.onGroupError,this)};a.loadConfig=function(a,b,c){void 0===c&&(c="json");this.configItemList.push({url:a,resourceRoot:b,type:c});this.callLaterFlag||(egret.callLater(this.startLoadConfig,this),this.callLaterFlag=
!0)};a.startLoadConfig=function(){this.callLaterFlag=!1;var a=this.configItemList;this.configItemList=[];this.loadingConfigList=a;for(var d=a.length,e=[],f=0;f<d;f++){var l=a[f],l=new c.ResourceItem(l.url,l.url,l.type);e.push(l)}this.resLoader.loadGroup(e,b.GROUP_CONFIG,Number.MAX_VALUE)};a.isGroupLoaded=function(a){return-1!=this.loadedGroups.indexOf(a)};a.getGroupByName=function(a){return this.resConfig.getGroupByName(a)};a.loadGroup=function(a,b){void 0===b&&(b=0);if(-1!=this.loadedGroups.indexOf(a))c.ResourceEvent.dispatchResourceEvent(this,
c.ResourceEvent.GROUP_COMPLETE,a);else if(!this.resLoader.isGroupInLoading(a))if(this.configComplete){var d=this.resConfig.getGroupByName(a);this.resLoader.loadGroup(d,a,b)}else this.groupNameList.push({name:a,priority:b})};a.createGroup=function(a,b,c){void 0===c&&(c=!1);if(c){var d=this.loadedGroups.indexOf(a);-1!=d&&this.loadedGroups.splice(d,1)}return this.resConfig.createGroup(a,b,c)};a.onGroupComp=function(a){if(a.groupName==b.GROUP_CONFIG){a=this.loadingConfigList.length;for(var d=0;d<a;d++){var e=
this.loadingConfigList[d],f=this.getAnalyzerByType(e.type),l=f.getRes(e.url);f.destroyRes(e.url);this.resConfig.parseConfig(l,e.resourceRoot)}this.configComplete=!0;this.loadingConfigList=null;c.ResourceEvent.dispatchResourceEvent(this,c.ResourceEvent.CONFIG_COMPLETE);this.loadDelayGroups()}else this.loadedGroups.push(a.groupName),this.dispatchEvent(a)};a.loadDelayGroups=function(){var a=this.groupNameList;this.groupNameList=[];for(var b=a.length,c=0;c<b;c++){var d=a[c];this.loadGroup(d.name,d.priority)}};
a.onGroupError=function(a){a.groupName==b.GROUP_CONFIG?(this.loadingConfigList=null,c.ResourceEvent.dispatchResourceEvent(this,c.ResourceEvent.CONFIG_LOAD_ERROR)):this.dispatchEvent(a)};a.hasRes=function(a){var b=this.resConfig.getType(a);return""==b&&(a=c.AnalyzerBase.getStringPrefix(a),b=this.resConfig.getType(a),""==b)?!1:!0};a.parseConfig=function(a,b){this.resConfig.parseConfig(a,b);this.configComplete||this.loadingConfigList||(this.configComplete=!0,this.loadDelayGroups())};a.getRes=function(a){var b=
this.resConfig.getType(a);return""==b&&(b=c.AnalyzerBase.getStringPrefix(a),b=this.resConfig.getType(b),""==b)?null:this.getAnalyzerByType(b).getRes(a)};a.getResAsync=function(a,b,d){var e=this.resConfig.getType(a),f=this.resConfig.getName(a);if(""==e&&(f=c.AnalyzerBase.getStringPrefix(a),e=this.resConfig.getType(f),""==e)){b.call(d,null);return}(e=this.getAnalyzerByType(e).getRes(a))?b.call(d,e):(a={key:a,compFunc:b,thisObject:d},this.asyncDic[f]?this.asyncDic[f].push(a):(this.asyncDic[f]=[a],f=
this.resConfig.getResourceItem(f),this.resLoader.loadItem(f)))};a.getResByUrl=function(a,b,d,e){void 0===e&&(e="");if(a){e||(e=this.getTypeByUrl(a));var f=this.getAnalyzerByType(e).getRes(a);f?b.call(d,f):(b={key:a,compFunc:b,thisObject:d},this.asyncDic[a]?this.asyncDic[a].push(b):(this.asyncDic[a]=[b],a=new c.ResourceItem(a,a,e),this.resLoader.loadItem(a)))}else b.call(d,null)};a.getTypeByUrl=function(a){(a=a.substr(a.lastIndexOf(".")+1))&&(a=a.toLowerCase());switch(a){case c.ResourceItem.TYPE_XML:case c.ResourceItem.TYPE_JSON:case c.ResourceItem.TYPE_SHEET:break;
case "png":case "jpg":case "gif":case "jpeg":case "bmp":a=c.ResourceItem.TYPE_IMAGE;break;case "fnt":a=c.ResourceItem.TYPE_FONT;break;case "txt":a=c.ResourceItem.TYPE_TEXT;break;case "mp3":case "ogg":case "mpeg":case "wav":case "m4a":case "mp4":case "aiff":case "wma":case "mid":a=c.ResourceItem.TYPE_SOUND;break;default:a=c.ResourceItem.TYPE_BIN}return a};a.onResourceItemComp=function(a){var b=this.asyncDic[a.name];delete this.asyncDic[a.name];a=this.getAnalyzerByType(a.type);for(var c=b.length,d=
0;d<c;d++){var e=b[d],f=a.getRes(e.key);e.compFunc.call(e.thisObject,f,e.key)}};a.destroyRes=function(a,b){void 0===b&&(b=!0);var c=this.resConfig.getRawGroupByName(a);if(c&&0<c.length){var d=this.loadedGroups.indexOf(a);-1!=d&&this.loadedGroups.splice(d,1);for(var e=c.length,f=0;f<e;f++)if(d=c[f],b||!this.isResInLoadedGroup(d.name)){d.loaded=!1;var k=this.getAnalyzerByType(d.type);k.destroyRes(d.name);this.removeLoadedGroupsByItemName(d.name)}return!0}c=this.resConfig.getType(a);if(""==c)return!1;
d=this.resConfig.getRawResourceItem(a);d.loaded=!1;k=this.getAnalyzerByType(c);c=k.destroyRes(a);this.removeLoadedGroupsByItemName(d.name);return c};a.removeLoadedGroupsByItemName=function(a){for(var b=this.loadedGroups,c=b.length,d=0;d<c;d++)for(var e=this.resConfig.getRawGroupByName(b[d]),f=e.length,k=0;k<f;k++)if(e[k].name==a){b.splice(d,1);d--;c=b.length;break}};a.isResInLoadedGroup=function(a){for(var b=this.loadedGroups,c=b.length,d=0;d<c;d++)for(var e=this.resConfig.getRawGroupByName(b[d]),
f=e.length,k=0;k<f;k++)if(e[k].name==a)return!0;return!1};a.setMaxLoadingThread=function(a){1>a&&(a=1);this.resLoader.thread=a};a.setMaxRetryTimes=function(a){a=Math.max(a,0);this.resLoader.maxRetryTimes=a};b.GROUP_CONFIG="RES__CONFIG";return b}(egret.EventDispatcher);f.prototype.__class__="RES.Resource";var e=new f})(RES||(RES={}));
(function(c){(function(f){var e=function(d){function b(){d.call(this);this.targetLevel=Number.MAX_VALUE;this.updateCompleteQueue=new f.DepthQueue;this.invalidateClientPropertiesFlag=this.invalidatePropertiesFlag=!1;this.invalidatePropertiesQueue=new f.DepthQueue;this.invalidateClientSizeFlag=this.invalidateSizeFlag=!1;this.invalidateSizeQueue=new f.DepthQueue;this.invalidateDisplayListFlag=!1;this.invalidateDisplayListQueue=new f.DepthQueue;this.listenersAttached=!1}__extends(b,d);var a=b.prototype;
a.invalidateProperties=function(a){this.invalidatePropertiesFlag||(this.invalidatePropertiesFlag=!0,this.listenersAttached||this.attachListeners());this.targetLevel<=a.nestLevel&&(this.invalidateClientPropertiesFlag=!0);this.invalidatePropertiesQueue.insert(a)};a.validateProperties=function(){for(var a=this.invalidatePropertiesQueue.shift();a;)a.parent&&(a.validateProperties(),a.updateCompletePendingFlag||(this.updateCompleteQueue.insert(a),a.updateCompletePendingFlag=!0)),a=this.invalidatePropertiesQueue.shift();
this.invalidatePropertiesQueue.isEmpty()&&(this.invalidatePropertiesFlag=!1)};a.invalidateSize=function(a){this.invalidateSizeFlag||(this.invalidateSizeFlag=!0,this.listenersAttached||this.attachListeners());this.targetLevel<=a.nestLevel&&(this.invalidateClientSizeFlag=!0);this.invalidateSizeQueue.insert(a)};a.validateSize=function(){for(var a=this.invalidateSizeQueue.pop();a;)a.parent&&(a.validateSize(),a.updateCompletePendingFlag||(this.updateCompleteQueue.insert(a),a.updateCompletePendingFlag=
!0)),a=this.invalidateSizeQueue.pop();this.invalidateSizeQueue.isEmpty()&&(this.invalidateSizeFlag=!1)};a.invalidateDisplayList=function(a){this.invalidateDisplayListFlag||(this.invalidateDisplayListFlag=!0,this.listenersAttached||this.attachListeners());this.invalidateDisplayListQueue.insert(a)};a.validateDisplayList=function(){for(var a=this.invalidateDisplayListQueue.shift();a;)a.parent&&(a.validateDisplayList(),a.updateCompletePendingFlag||(this.updateCompleteQueue.insert(a),a.updateCompletePendingFlag=
!0)),a=this.invalidateDisplayListQueue.shift();this.invalidateDisplayListQueue.isEmpty()&&(this.invalidateDisplayListFlag=!1)};a.attachListeners=function(){f.UIGlobals.stage.addEventListener(c.Event.ENTER_FRAME,this.doPhasedInstantiationCallBack,this);f.UIGlobals.stage.addEventListener(c.Event.RENDER,this.doPhasedInstantiationCallBack,this);f.UIGlobals.stage.invalidate();this.listenersAttached=!0};a.doPhasedInstantiationCallBack=function(a){f.UIGlobals.stage.removeEventListener(c.Event.ENTER_FRAME,
this.doPhasedInstantiationCallBack,this);f.UIGlobals.stage.removeEventListener(c.Event.RENDER,this.doPhasedInstantiationCallBack,this);this.doPhasedInstantiation()};a.doPhasedInstantiation=function(){this.invalidatePropertiesFlag&&this.validateProperties();this.invalidateSizeFlag&&this.validateSize();this.invalidateDisplayListFlag&&this.validateDisplayList();if(this.invalidatePropertiesFlag||this.invalidateSizeFlag||this.invalidateDisplayListFlag)this.attachListeners();else{this.listenersAttached=
!1;for(var a=this.updateCompleteQueue.pop();a;)a.initialized||(a.initialized=!0),a.hasEventListener(f.UIEvent.UPDATE_COMPLETE)&&f.UIEvent.dispatchUIEvent(a,f.UIEvent.UPDATE_COMPLETE),a.updateCompletePendingFlag=!1,a=this.updateCompleteQueue.pop();f.UIEvent.dispatchUIEvent(this,f.UIEvent.UPDATE_COMPLETE)}};a.validateNow=function(){for(var a=0;this.listenersAttached&&100>a++;)this.doPhasedInstantiationCallBack()};a.validateClient=function(a,b){void 0===b&&(b=!1);var c,d=!1,e=this.targetLevel;this.targetLevel==
Number.MAX_VALUE&&(this.targetLevel=a.nestLevel);for(;!d;){d=!0;for(c=this.invalidatePropertiesQueue.removeSmallestChild(a);c;)c.parent&&(c.validateProperties(),c.updateCompletePendingFlag||(this.updateCompleteQueue.insert(c),c.updateCompletePendingFlag=!0)),c=this.invalidatePropertiesQueue.removeSmallestChild(a);this.invalidatePropertiesQueue.isEmpty()&&(this.invalidatePropertiesFlag=!1);this.invalidateClientPropertiesFlag=!1;for(c=this.invalidateSizeQueue.removeLargestChild(a);c;){c.parent&&(c.validateSize(),
c.updateCompletePendingFlag||(this.updateCompleteQueue.insert(c),c.updateCompletePendingFlag=!0));if(this.invalidateClientPropertiesFlag&&(c=this.invalidatePropertiesQueue.removeSmallestChild(a))){this.invalidatePropertiesQueue.insert(c);d=!1;break}c=this.invalidateSizeQueue.removeLargestChild(a)}this.invalidateSizeQueue.isEmpty()&&(this.invalidateSizeFlag=!1);this.invalidateClientSizeFlag=this.invalidateClientPropertiesFlag=!1;if(!b){for(c=this.invalidateDisplayListQueue.removeSmallestChild(a);c;){c.parent&&
(c.validateDisplayList(),c.updateCompletePendingFlag||(this.updateCompleteQueue.insert(c),c.updateCompletePendingFlag=!0));if(this.invalidateClientPropertiesFlag&&(c=this.invalidatePropertiesQueue.removeSmallestChild(a))){this.invalidatePropertiesQueue.insert(c);d=!1;break}if(this.invalidateClientSizeFlag&&(c=this.invalidateSizeQueue.removeLargestChild(a))){this.invalidateSizeQueue.insert(c);d=!1;break}c=this.invalidateDisplayListQueue.removeSmallestChild(a)}this.invalidateDisplayListQueue.isEmpty()&&
(this.invalidateDisplayListFlag=!1)}}if(e==Number.MAX_VALUE&&(this.targetLevel=Number.MAX_VALUE,!b))for(c=this.updateCompleteQueue.removeLargestChild(a);c;)c.initialized||(c.initialized=!0),c.hasEventListener(f.UIEvent.UPDATE_COMPLETE)&&f.UIEvent.dispatchUIEvent(c,f.UIEvent.UPDATE_COMPLETE),c.updateCompletePendingFlag=!1,c=this.updateCompleteQueue.removeLargestChild(a)};return b}(c.EventDispatcher);f.LayoutManager=e;e.prototype.__class__="egret.gui.LayoutManager"})(c.gui||(c.gui={}))})(egret||(egret=
{}));
(function(c){(function(f){var e=function(){function b(){this.depthBins=[];this.minDepth=0;this.maxDepth=-1}var a=b.prototype;a.insert=function(a){var b=a.nestLevel,c=a.hashCode;this.maxDepth<this.minDepth?this.minDepth=this.maxDepth=b:(b<this.minDepth&&(this.minDepth=b),b>this.maxDepth&&(this.maxDepth=b));var e=this.depthBins[b];e?null==e.items[c]&&(e.items[c]=a,e.length++):(e=new d,this.depthBins[b]=e,e.items[c]=a,e.length++)};a.pop=function(){var a=null;if(this.minDepth<=this.maxDepth){for(var b=this.depthBins[this.maxDepth];!b||
0==b.length;){this.maxDepth--;if(this.maxDepth<this.minDepth)return null;b=this.depthBins[this.maxDepth]}var c=b.items,d;for(d in c){a=c[d];this.remove(a,this.maxDepth);break}for(;!b||0==b.length;){this.maxDepth--;if(this.maxDepth<this.minDepth)break;b=this.depthBins[this.maxDepth]}}return a};a.shift=function(){var a=null;if(this.minDepth<=this.maxDepth){for(var b=this.depthBins[this.minDepth];!b||0==b.length;){this.minDepth++;if(this.minDepth>this.maxDepth)return null;b=this.depthBins[this.minDepth]}var c=
b.items,d;for(d in c){a=c[d];this.remove(a,this.minDepth);break}for(;!b||0==b.length;){this.minDepth++;if(this.minDepth>this.maxDepth)break;b=this.depthBins[this.minDepth]}}return a};a.removeLargestChild=function(a){for(var b=this.maxDepth,d=a.nestLevel,e=a.hashCode;d<=b;){var f=this.depthBins[b];if(f&&0<f.length){if(b==a.nestLevel){if(f.items[e])return this.remove(a,b),a}else{var f=f.items,h;for(h in f){var k=f[h];if(k instanceof c.DisplayObject&&a instanceof c.DisplayObjectContainer&&a.contains(k))return this.remove(k,
b),k}}b--}else if(b==this.maxDepth&&this.maxDepth--,b--,b<d)break}return null};a.removeSmallestChild=function(a){for(var b=a.nestLevel,d=a.hashCode;b<=this.maxDepth;){var e=this.depthBins[b];if(e&&0<e.length){if(b==a.nestLevel){if(e.items[d])return this.remove(a,b),a}else{var e=e.items,f;for(f in e){var h=e[f];if(h instanceof c.DisplayObject&&a instanceof c.DisplayObjectContainer&&a.contains(h))return this.remove(h,b),h}}b++}else if(b==this.minDepth&&this.minDepth++,b++,b>this.maxDepth)break}return null};
a.remove=function(a,b){void 0===b&&(b=-1);var c=a.hashCode,d=this.depthBins[0<=b?b:a.nestLevel];return d&&null!=d.items[c]?(delete d.items[c],d.length--,a):null};a.removeAll=function(){this.minDepth=this.depthBins.length=0;this.maxDepth=-1};a.isEmpty=function(){return this.minDepth>this.maxDepth};return b}();f.DepthQueue=e;e.prototype.__class__="egret.gui.DepthQueue";var d=function(){return function(){this.length=0;this.items=[]}}();f.DepthBin=d;d.prototype.__class__="egret.gui.DepthBin"})(c.gui||
(c.gui={}))})(egret||(egret={}));
(function(c){(function(c){var e=function(){function d(){}Object.defineProperty(d,"stage",{get:function(){return d._stage},enumerable:!0,configurable:!0});d._initlize=function(b){d.initlized||(d._stage=b,d._layoutManager=new c.LayoutManager,d.initlized=!0)};Object.defineProperty(d,"uiStage",{get:function(){return d._uiStage},enumerable:!0,configurable:!0});d.initlized=!1;return d}();c.UIGlobals=e;e.prototype.__class__="egret.gui.UIGlobals"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(c){var e=function(){return function(){this._id=null;this._isPopUp=!1;this._owner=null;this._initialized=this._updateCompletePendingFlag=!1;this._nestLevel=0;this._enabled=!0;this._minWidth=this._height=this._width=0;this._maxWidth=1E4;this._minHeight=0;this._maxHeight=1E4;this._measuredHeight=this._measuredWidth=0;this._percentHeight=this._percentWidth=this._verticalCenter=this._horizontalCenter=this._bottom=this._top=this._right=this._left=NaN;this._includeInLayout=!0;this._oldY=
this._oldX=this._oldHeight=this._oldWidth=NaN;this._invalidateSizeFlag=this._invalidatePropertiesFlag=!1;this._oldPreferHeight=this._oldPreferWidth=NaN;this._hasOwnStyleChain=this._initializeCalled=this._validateNowFlag=this._invalidateDisplayListFlag=!1;this._styleProtoChain=null;this._layoutHeightExplicitlySet=this._layoutWidthExplicitlySet=this._hasNoStyleChild=!1}}();c.UIComponentProperties=e;e.prototype.__class__="egret.gui.UIComponentProperties"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(f){var e=function(d){function b(){d.call(this);this._UIC_Props_=new c.gui.UIComponentProperties;this.touchEnabled=!0;this.addEventListener(c.Event.ADDED_TO_STAGE,this.onAddedToStage,this);this.addEventListener(c.Event.ADDED_TO_STAGE,this.checkInvalidateFlag,this);void 0===b.prototypeCanSet&&(b.prototypeCanSet=void 0!=={}.__proto__)}__extends(b,d);var a=b.prototype;a.onAddedToStage=function(a){this.removeEventListener(c.Event.ADDED_TO_STAGE,this.onAddedToStage,this);this._initialize();
f.UIGlobals._initlize(this.stage);0<this._UIC_Props_._nestLevel&&this.checkInvalidateFlag()};Object.defineProperty(a,"id",{get:function(){return this._UIC_Props_._id},set:function(a){this._UIC_Props_._id=a},enumerable:!0,configurable:!0});Object.defineProperty(a,"isPopUp",{get:function(){return this._UIC_Props_._isPopUp},set:function(a){this._UIC_Props_._isPopUp=a},enumerable:!0,configurable:!0});Object.defineProperty(a,"owner",{get:function(){return this._UIC_Props_._owner?this._UIC_Props_._owner:
this.parent},enumerable:!0,configurable:!0});a.ownerChanged=function(a){this._UIC_Props_._owner=a};Object.defineProperty(a,"updateCompletePendingFlag",{get:function(){return this._UIC_Props_._updateCompletePendingFlag},set:function(a){this._UIC_Props_._updateCompletePendingFlag=a},enumerable:!0,configurable:!0});Object.defineProperty(a,"initialized",{get:function(){return this._UIC_Props_._initialized},set:function(a){this._UIC_Props_._initialized!=a&&(this._UIC_Props_._initialized=a)&&(this.childrenCreated(),
f.UIEvent.dispatchUIEvent(this,f.UIEvent.CREATION_COMPLETE))},enumerable:!0,configurable:!0});a._initialize=function(){this._UIC_Props_._initializeCalled||(f.UIGlobals.stage&&this.removeEventListener(c.Event.ADDED_TO_STAGE,this.onAddedToStage,this),this._UIC_Props_._initializeCalled=!0,f.UIEvent.dispatchUIEvent(this,f.UIEvent.INITIALIZE),this.createChildren(),this.invalidateProperties(),this.invalidateSize(),this.invalidateDisplayList())};a.createChildren=function(){};a.childrenCreated=function(){};
Object.defineProperty(a,"nestLevel",{get:function(){return this._UIC_Props_._nestLevel},set:function(a){this._UIC_Props_._nestLevel!=a&&(this._UIC_Props_._nestLevel=a,0==this._UIC_Props_._nestLevel?this.addEventListener(c.Event.ADDED_TO_STAGE,this.checkInvalidateFlag,this):this.removeEventListener(c.Event.ADDED_TO_STAGE,this.checkInvalidateFlag,this),this._updateChildrenNestLevel())},enumerable:!0,configurable:!0});a._updateChildrenNestLevel=function(){for(var a=this.numChildren-1;0<=a;a--){var b=
this.getChildAt(a);b&&"nestLevel"in b&&(b.nestLevel=this._UIC_Props_._nestLevel+1)}};a.getStyle=function(a){var b=this._UIC_Props_._styleProtoChain;return b?b[a]:void 0};a.setStyle=function(a,b){var c=this._UIC_Props_._styleProtoChain;this._UIC_Props_._hasOwnStyleChain||(c=this._createOwnStyleProtoChain(c));c[a]=b;this.styleChanged(a);this.notifyStyleChangeInChildren(a)};a.styleChanged=function(a){};a.notifyStyleChangeInChildren=function(a){if(!this._UIC_Props_._hasNoStyleChild)for(var b=this.numChildren-
1;0<=b;b--){var c=this.getChildAt(b);c&&"styleChanged"in c&&(c.styleChanged(a),c.notifyStyleChangeInChildren(a))}};a._createOwnStyleProtoChain=function(a){this._UIC_Props_._hasOwnStyleChain=!0;b.prototypeCanSet?(this._UIC_Props_._styleProtoChain={},this._UIC_Props_._styleProtoChain.__proto__=a?a:b.emptyStyleChain):this._UIC_Props_._styleProtoChain=this.createProtoChain(a);a=this._UIC_Props_._styleProtoChain;if(!this._UIC_Props_._hasNoStyleChild)for(var c=this.numChildren-1;0<=c;c--){var d=this.getChildAt(c);
d&&"regenerateStyleCache"in d&&d.regenerateStyleCache(a)}return a};a.createProtoChain=function(a){function b(){}b.prototype=a;a=new b;b.prototype=null;return a};a.clearStyle=function(a){this._UIC_Props_._hasOwnStyleChain&&(delete this._UIC_Props_._styleProtoChain[a],this.styleChanged(a),this.notifyStyleChangeInChildren(a))};a.regenerateStyleCache=function(a){if(!b.prototypeCanSet)this.regenerateStyleCacheForIE(a);else if(this._UIC_Props_._hasOwnStyleChain)this._UIC_Props_._styleProtoChain.__proto__=
a?a:b.emptyStyleChain;else if(this._UIC_Props_._styleProtoChain!=a){this._UIC_Props_._styleProtoChain=a;for(var c=this.numChildren-1;0<=c;c--){var d=this.getChildAt(c);d&&"regenerateStyleCache"in d&&d.regenerateStyleCache(a)}}};a.regenerateStyleCacheForIE=function(a){if(this._UIC_Props_._hasOwnStyleChain){var b=this._UIC_Props_._styleProtoChain;a=this.createProtoChain(a);for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}this._UIC_Props_._styleProtoChain=a;if(!this._UIC_Props_._hasNoStyleChild)for(b=
this.numChildren-1;0<=b;b--)(c=this.getChildAt(b))&&"regenerateStyleCacheForIE"in c&&c.regenerateStyleCacheForIE(a)};a._addToDisplayList=function(a,b){void 0===b&&(b=!0);var c=this.numChildren;a.parent==this&&c--;this._addingChild(a);this._doAddChild(a,c,b);this._childAdded(a);return a};a._addToDisplayListAt=function(a,b,c){void 0===c&&(c=!0);this._addingChild(a);this._doAddChild(a,b,c);this._childAdded(a);return a};a._removeFromDisplayList=function(a,b){void 0===b&&(b=!0);var d=this._children.indexOf(a);
if(0<=d)return this._doRemoveChild(d,b),this._childRemoved(a),a;c.$error(1008);return null};a._removeFromDisplayListAt=function(a,b){void 0===b&&(b=!0);if(0<=a&&a<this._children.length){var d=this._doRemoveChild(a,b);this._childRemoved(d);return d}c.$error(1007);return null};a.addChild=function(a){this._addingChild(a);d.prototype.addChild.call(this,a);this._childAdded(a);return a};a.addChildAt=function(a,b){this._addingChild(a);d.prototype.addChildAt.call(this,a,b);this._childAdded(a);return a};a._addingChild=
function(a){if(a&&("nestLevel"in a&&(a.nestLevel=this._UIC_Props_._nestLevel+1),"styleChanged"in a)){var b=this._UIC_Props_._styleProtoChain;if(b||a._UIC_Props_&&a._UIC_Props_._styleProtoChain)a.regenerateStyleCache(b),a.styleChanged(null),a.notifyStyleChangeInChildren(null)}};a._childAdded=function(a){a instanceof b&&(a._initialize(),a.checkInvalidateFlag())};a.removeChild=function(a){d.prototype.removeChild.call(this,a);this._childRemoved(a);return a};a.removeChildAt=function(a){a=d.prototype.removeChildAt.call(this,
a);this._childRemoved(a);return a};a._childRemoved=function(a){a&&"nestLevel"in a&&(a.nestLevel=0)};a.checkInvalidateFlag=function(a){f.UIGlobals._layoutManager&&(this._UIC_Props_._invalidatePropertiesFlag&&f.UIGlobals._layoutManager.invalidateProperties(this),this._UIC_Props_._invalidateSizeFlag&&f.UIGlobals._layoutManager.invalidateSize(this),this._UIC_Props_._invalidateDisplayListFlag&&f.UIGlobals._layoutManager.invalidateDisplayList(this),this._UIC_Props_._validateNowFlag&&(f.UIGlobals._layoutManager.validateClient(this),
this._UIC_Props_._validateNowFlag=!1))};Object.defineProperty(a,"enabled",{get:function(){return this._UIC_Props_._enabled},set:function(a){this._UIC_Props_._enabled=a},enumerable:!0,configurable:!0});Object.defineProperty(a,"width",{get:function(){return this._UIC_Props_._width},set:function(a){this._setWidth(a)},enumerable:!0,configurable:!0});a._setWidth=function(a){if(this._UIC_Props_._width!=a||this._DO_Props_._explicitWidth!=a)d.prototype._setWidth.call(this,a),isNaN(a)?this.invalidateSize():
this._UIC_Props_._width=a,this.invalidateProperties(),this.invalidateDisplayList(),this.invalidateParentSizeAndDisplayList()};Object.defineProperty(a,"height",{get:function(){return this._UIC_Props_._height},set:function(a){this._setHeight(a)},enumerable:!0,configurable:!0});a._setHeight=function(a){if(this._UIC_Props_._height!=a||this._DO_Props_._explicitHeight!=a)d.prototype._setHeight.call(this,a),isNaN(a)?this.invalidateSize():this._UIC_Props_._height=a,this.invalidateProperties(),this.invalidateDisplayList(),
this.invalidateParentSizeAndDisplayList()};Object.defineProperty(a,"scaleX",{get:function(){return this._DO_Props_._scaleX},set:function(a){this._setScaleX(a)},enumerable:!0,configurable:!0});a._setScaleX=function(a){this._DO_Props_._scaleX!=a&&(this._DO_Props_._scaleX=a,this.invalidateParentSizeAndDisplayList())};Object.defineProperty(a,"scaleY",{get:function(){return this._DO_Props_._scaleY},set:function(a){this._setScaleY(a)},enumerable:!0,configurable:!0});a._setScaleY=function(a){this._DO_Props_._scaleY!=
a&&(this._DO_Props_._scaleY=a,this.invalidateParentSizeAndDisplayList())};Object.defineProperty(a,"minWidth",{get:function(){return this._UIC_Props_._minWidth},set:function(a){this._UIC_Props_._minWidth!=a&&(this._UIC_Props_._minWidth=a,this.invalidateSize())},enumerable:!0,configurable:!0});Object.defineProperty(a,"maxWidth",{get:function(){return this._UIC_Props_._maxWidth},set:function(a){this._UIC_Props_._maxWidth!=a&&(this._UIC_Props_._maxWidth=a,this.invalidateSize())},enumerable:!0,configurable:!0});
a._getMaxWidth=function(){return this._UIC_Props_._maxWidth};Object.defineProperty(a,"minHeight",{get:function(){return this._UIC_Props_._minHeight},set:function(a){this._UIC_Props_._minHeight!=a&&(this._UIC_Props_._minHeight=a,this.invalidateSize())},enumerable:!0,configurable:!0});Object.defineProperty(a,"maxHeight",{get:function(){return this._UIC_Props_._maxHeight},set:function(a){this._UIC_Props_._maxHeight!=a&&(this._UIC_Props_._maxHeight=a,this.invalidateSize())},enumerable:!0,configurable:!0});
Object.defineProperty(a,"measuredWidth",{get:function(){return this._UIC_Props_._measuredWidth},set:function(a){this._UIC_Props_._measuredWidth=a},enumerable:!0,configurable:!0});Object.defineProperty(a,"measuredHeight",{get:function(){return this._UIC_Props_._measuredHeight},set:function(a){this._UIC_Props_._measuredHeight=a},enumerable:!0,configurable:!0});a.setActualSize=function(a,b){var c=!1;this._UIC_Props_._width!=a&&(this._UIC_Props_._width=a,c=!0);this._UIC_Props_._height!=b&&(this._UIC_Props_._height=
b,c=!0);c&&(this.invalidateDisplayList(),this.dispatchResizeEvent())};Object.defineProperty(a,"x",{get:function(){return this._DO_Props_._x},set:function(a){this._DO_Props_._x!=a&&(this._setX(a),this.invalidateProperties(),this._UIC_Props_._includeInLayout&&this.parent&&this.parent instanceof b&&this.parent._childXYChanged())},enumerable:!0,configurable:!0});Object.defineProperty(a,"y",{get:function(){return this._DO_Props_._y},set:function(a){this._DO_Props_._y!=a&&(this._setY(a),this.invalidateProperties(),
this._UIC_Props_._includeInLayout&&this.parent&&this.parent instanceof b&&this.parent._childXYChanged())},enumerable:!0,configurable:!0});a.invalidateProperties=function(){this._UIC_Props_._invalidatePropertiesFlag||(this._UIC_Props_._invalidatePropertiesFlag=!0,this.parent&&f.UIGlobals._layoutManager&&f.UIGlobals._layoutManager.invalidateProperties(this))};a.validateProperties=function(){this._UIC_Props_._invalidatePropertiesFlag&&(this.commitProperties(),this._UIC_Props_._invalidatePropertiesFlag=
!1)};a.invalidateSize=function(){this._UIC_Props_._invalidateSizeFlag||(this._UIC_Props_._invalidateSizeFlag=!0,this.parent&&f.UIGlobals._layoutManager&&f.UIGlobals._layoutManager.invalidateSize(this))};a.validateSize=function(a){void 0===a&&(a=!1);if(a)for(a=0;a<this.numChildren;a++){var b=this.getChildAt(a);"validateSize"in b&&b.validateSize(!0)}this._UIC_Props_._invalidateSizeFlag&&(this.measureSizes()&&(this.invalidateDisplayList(),this.invalidateParentSizeAndDisplayList()),this._UIC_Props_._invalidateSizeFlag=
!1)};a.measureSizes=function(){var a=!1;if(!this._UIC_Props_._invalidateSizeFlag)return a;this.canSkipMeasurement()||(this.measure(),this.measuredWidth<this.minWidth&&(this.measuredWidth=this.minWidth),this.measuredWidth>this.maxWidth&&(this.measuredWidth=this.maxWidth),this.measuredHeight<this.minHeight&&(this.measuredHeight=this.minHeight),this.measuredHeight>this.maxHeight&&(this.measuredHeight=this.maxHeight));if(isNaN(this._UIC_Props_._oldPreferWidth))this._UIC_Props_._oldPreferWidth=this.preferredWidth,
this._UIC_Props_._oldPreferHeight=this.preferredHeight,a=!0;else{if(this.preferredWidth!=this._UIC_Props_._oldPreferWidth||this.preferredHeight!=this._UIC_Props_._oldPreferHeight)a=!0;this._UIC_Props_._oldPreferWidth=this.preferredWidth;this._UIC_Props_._oldPreferHeight=this.preferredHeight}return a};a.invalidateDisplayList=function(){this._UIC_Props_._invalidateDisplayListFlag||(this._UIC_Props_._invalidateDisplayListFlag=!0,this.parent&&f.UIGlobals._layoutManager&&f.UIGlobals._layoutManager.invalidateDisplayList(this),
this._setSizeDirty())};a.validateDisplayList=function(){if(this._UIC_Props_._invalidateDisplayListFlag){var a=0,b=0,a=this._UIC_Props_._layoutWidthExplicitlySet?this._UIC_Props_._width:isNaN(this.explicitWidth)?this.measuredWidth:this._DO_Props_._explicitWidth,b=this._UIC_Props_._layoutHeightExplicitlySet?this._UIC_Props_._height:isNaN(this.explicitHeight)?this.measuredHeight:this._DO_Props_._explicitHeight;isNaN(a)&&(a=0);isNaN(b)&&(b=0);this.setActualSize(a,b);this.updateDisplayList(a,b);this._UIC_Props_._invalidateDisplayListFlag=
!1}};a.validateNow=function(a){void 0===a&&(a=!1);this._UIC_Props_._validateNowFlag||null==f.UIGlobals._layoutManager?this._UIC_Props_._validateNowFlag=!0:f.UIGlobals._layoutManager.validateClient(this,a)};a.invalidateParentSizeAndDisplayList=function(){if(this.parent&&this._UIC_Props_._includeInLayout&&"invalidateSize"in this.parent){var a=this.parent;a.invalidateSize();a.invalidateDisplayList()}};a.updateDisplayList=function(a,b){};a.canSkipMeasurement=function(){return!isNaN(this._DO_Props_._explicitWidth)&&
!isNaN(this._DO_Props_._explicitHeight)};a.commitProperties=function(){this._UIC_Props_._oldWidth==this._UIC_Props_._width&&this._UIC_Props_._oldHeight==this._UIC_Props_._height||this.dispatchResizeEvent();this._UIC_Props_._oldX==this.x&&this._UIC_Props_._oldY==this.y||this.dispatchMoveEvent()};a.measure=function(){this._UIC_Props_._measuredHeight=0;this._UIC_Props_._measuredWidth=0};a.dispatchMoveEvent=function(){this.hasEventListener(f.MoveEvent.MOVE)&&f.MoveEvent.dispatchMoveEvent(this,this._UIC_Props_._oldX,
this._UIC_Props_._oldY);this._UIC_Props_._oldX=this.x;this._UIC_Props_._oldY=this.y};a._childXYChanged=function(){};a.dispatchResizeEvent=function(){this.hasEventListener(f.ResizeEvent.RESIZE)&&f.ResizeEvent.dispatchResizeEvent(this,this._UIC_Props_._oldWidth,this._UIC_Props_._oldHeight);this._UIC_Props_._oldWidth=this._UIC_Props_._width;this._UIC_Props_._oldHeight=this._UIC_Props_._height};Object.defineProperty(a,"includeInLayout",{get:function(){return this._UIC_Props_._includeInLayout},set:function(a){this._UIC_Props_._includeInLayout!=
a&&(this._UIC_Props_._includeInLayout=!0,this.invalidateParentSizeAndDisplayList(),this._UIC_Props_._includeInLayout=a)},enumerable:!0,configurable:!0});Object.defineProperty(a,"left",{get:function(){return this._UIC_Props_._left},set:function(a){this._UIC_Props_._left!=a&&(this._UIC_Props_._left=a,this.invalidateParentSizeAndDisplayList())},enumerable:!0,configurable:!0});Object.defineProperty(a,"right",{get:function(){return this._UIC_Props_._right},set:function(a){this._UIC_Props_._right!=a&&(this._UIC_Props_._right=
a,this.invalidateParentSizeAndDisplayList())},enumerable:!0,configurable:!0});Object.defineProperty(a,"top",{get:function(){return this._UIC_Props_._top},set:function(a){this._UIC_Props_._top!=a&&(this._UIC_Props_._top=a,this.invalidateParentSizeAndDisplayList())},enumerable:!0,configurable:!0});Object.defineProperty(a,"bottom",{get:function(){return this._UIC_Props_._bottom},set:function(a){this._UIC_Props_._bottom!=a&&(this._UIC_Props_._bottom=a,this.invalidateParentSizeAndDisplayList())},enumerable:!0,
configurable:!0});Object.defineProperty(a,"horizontalCenter",{get:function(){return this._UIC_Props_._horizontalCenter},set:function(a){this._UIC_Props_._horizontalCenter!=a&&(this._UIC_Props_._horizontalCenter=a,this.invalidateParentSizeAndDisplayList())},enumerable:!0,configurable:!0});Object.defineProperty(a,"verticalCenter",{get:function(){return this._UIC_Props_._verticalCenter},set:function(a){this._UIC_Props_._verticalCenter!=a&&(this._UIC_Props_._verticalCenter=a,this.invalidateParentSizeAndDisplayList())},
enumerable:!0,configurable:!0});Object.defineProperty(a,"percentWidth",{get:function(){return this._UIC_Props_._percentWidth},set:function(a){this._UIC_Props_._percentWidth!=a&&(this._UIC_Props_._percentWidth=a,this.invalidateParentSizeAndDisplayList())},enumerable:!0,configurable:!0});Object.defineProperty(a,"percentHeight",{get:function(){return this._UIC_Props_._percentHeight},set:function(a){this._UIC_Props_._percentHeight!=a&&(this._UIC_Props_._percentHeight=a,this.invalidateParentSizeAndDisplayList())},
enumerable:!0,configurable:!0});a.setLayoutBoundsSize=function(a,b){isNaN(a)?(this._UIC_Props_._layoutWidthExplicitlySet=!1,a=this.preferredWidth):this._UIC_Props_._layoutWidthExplicitlySet=!0;isNaN(b)?(this._UIC_Props_._layoutHeightExplicitlySet=!1,b=this.preferredHeight):this._UIC_Props_._layoutHeightExplicitlySet=!0;this.setActualSize(a/this._DO_Props_._scaleX,b/this._DO_Props_._scaleY)};a.setLayoutBoundsPosition=function(a,b){0>this._DO_Props_._scaleX&&(a+=this.layoutBoundsWidth);0>this._DO_Props_._scaleY&&
(b+=this.layoutBoundsHeight);var c=!1;this._DO_Props_._x!=a&&(this._setX(a),c=!0);this._DO_Props_._y!=b&&(this._setY(b),c=!0);c&&this.dispatchMoveEvent()};Object.defineProperty(a,"preferredWidth",{get:function(){var a=this._DO_Props_._hasWidthSet?this._DO_Props_._explicitWidth:this._UIC_Props_._measuredWidth,b=this._DO_Props_._scaleX;0>b&&(b=-b);return a*b},enumerable:!0,configurable:!0});Object.defineProperty(a,"preferredHeight",{get:function(){var a=this._DO_Props_._hasHeightSet?this._DO_Props_._explicitHeight:
this._UIC_Props_._measuredHeight,b=this._DO_Props_._scaleY;0>b&&(b=-b);return a*b},enumerable:!0,configurable:!0});Object.defineProperty(a,"preferredX",{get:function(){return 0<=this._DO_Props_._scaleX?this._DO_Props_._x:this._DO_Props_._x-this.preferredWidth},enumerable:!0,configurable:!0});Object.defineProperty(a,"preferredY",{get:function(){return 0<=this._DO_Props_._scaleY?this._DO_Props_._y:this._DO_Props_._y-this.preferredHeight},enumerable:!0,configurable:!0});Object.defineProperty(a,"layoutBoundsX",
{get:function(){return 0<=this._DO_Props_._scaleX?this._DO_Props_._x:this._DO_Props_._x-this.layoutBoundsWidth},enumerable:!0,configurable:!0});Object.defineProperty(a,"layoutBoundsY",{get:function(){return 0<=this._DO_Props_._scaleY?this._DO_Props_._y:this._DO_Props_._y-this.layoutBoundsHeight},enumerable:!0,configurable:!0});Object.defineProperty(a,"layoutBoundsWidth",{get:function(){var a=0,a=this._UIC_Props_._layoutWidthExplicitlySet?this._UIC_Props_._width:this._DO_Props_._hasWidthSet?this._DO_Props_._explicitWidth:
this._UIC_Props_._measuredWidth,b=this._DO_Props_._scaleX;0>b&&(b=-b);return a*b},enumerable:!0,configurable:!0});Object.defineProperty(a,"layoutBoundsHeight",{get:function(){var a=0,a=this._UIC_Props_._layoutHeightExplicitlySet?this._UIC_Props_._height:this._DO_Props_._hasHeightSet?this._DO_Props_._explicitHeight:this._UIC_Props_._measuredHeight,b=this.scaleY;0>b&&(b=-b);return a*b},enumerable:!0,configurable:!0});b.prototypeCanSet=void 0;b.emptyStyleChain={};return b}(c.DisplayObjectContainer);
f.UIComponent=e;e.prototype.__class__="egret.gui.UIComponent"})(c.gui||(c.gui={}))})(egret||(egret={}));(function(c){(function(f){var e=function(c){function b(a){void 0===a&&(a=null);c.call(this);this.generator=null;this.generator=a}__extends(b,c);b.prototype.newInstance=function(){return new this.generator};return b}(c.HashObject);f.ClassFactory=e;e.prototype.__class__="egret.gui.ClassFactory"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(f){var e=function(c){function b(){c.call(this)}__extends(b,c);var a=b.prototype;a.initialize=function(a){};a.apply=function(a){};a.remove=function(a){};a.initializeFromObject=function(a){for(var b in a)this[b]=a[b];return this};return b}(c.HashObject);f.OverrideBase=e;e.prototype.__class__="egret.gui.OverrideBase"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(c){var e=function(d){function b(a,c,e,f){d.call(this);this.propertyName="";this.position=b.LAST;this.target=this.relativeTo=null;this.target=a;this.propertyName=c;this.position=e;this.relativeTo=f}__extends(b,d);var a=b.prototype;a.initialize=function(a){if((a=a[this.target])&&!(a instanceof c.SkinnableComponent)&&"_initialize"in a)try{a._initialize()}catch(b){}};a.apply=function(a){var c,d;try{d=a[this.relativeTo]}catch(e){}var f=a[this.target];a=this.propertyName?a[this.propertyName]:
a;if(f&&a){switch(this.position){case b.FIRST:c=0;break;case b.LAST:c=-1;break;case b.BEFORE:c=a.getElementIndex(d);break;case b.AFTER:c=a.getElementIndex(d)+1}-1==c&&(c=a.numElements);a.addElementAt(f,c)}};a.remove=function(a){var b=null==this.propertyName||""==this.propertyName?a:a[this.propertyName];(a=a[this.target])&&b&&-1!=b.getElementIndex(a)&&b.removeElement(a)};b.FIRST="first";b.LAST="last";b.BEFORE="before";b.AFTER="after";return b}(c.OverrideBase);c.AddItems=e;e.prototype.__class__="egret.gui.AddItems"})(c.gui||
(c.gui={}))})(egret||(egret={}));
(function(c){(function(c){var e=function(c){function b(a,b,e){c.call(this);this.oldValue=this.value=this.target=this.name=null;this.target=a;this.name=b;this.value=e}__extends(b,c);var a=b.prototype;a.apply=function(a){a=null==this.target||""==this.target?a:a[this.target];null!=a&&(this.oldValue=a[this.name],this.setPropertyValue(a,this.name,this.value,this.oldValue))};a.remove=function(a){a=null==this.target||""==this.target?a:a[this.target];null!=a&&(this.setPropertyValue(a,this.name,this.oldValue,
this.oldValue),this.oldValue=null)};a.setPropertyValue=function(a,b,c,d){a[b]=void 0===c||null===c?c:"number"==typeof d?parseFloat(c):"boolean"==typeof d?this.toBoolean(c):c};a.toBoolean=function(a){return"string"==typeof a?"true"==a.toLowerCase():!1!=a};return b}(c.OverrideBase);c.SetProperty=e;e.prototype.__class__="egret.gui.SetProperty"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(c){var e=function(c){function b(a,b,e){c.call(this);this.target=a;this.name=b;this.value=e}__extends(b,c);var a=b.prototype;a.apply=function(a){a=null==this.target||""==this.target?a:a[this.target];null!=a&&(this.oldValue=a.getStyle(this.name),this.setStyleValue(a,this.name,this.value,this.oldValue))};a.remove=function(a){a=null==this.target||""==this.target?a:a[this.target];null!=a&&(this.setStyleValue(a,this.name,this.oldValue,this.oldValue),this.oldValue=null)};a.setStyleValue=
function(a,b,c,d){void 0===c?a.clearStyle(b):null===c?a.setStyle(b,c):"number"==typeof d?a.setStyle(b,parseFloat(c)):"boolean"==typeof d?a.setStyle(b,this.toBoolean(c)):a.setStyle(b,c)};a.toBoolean=function(a){return"string"==typeof a?"true"==a.toLowerCase():!1!=a};return b}(c.OverrideBase);c.SetStyle=e;e.prototype.__class__="egret.gui.SetStyle"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(f){var e=function(c){function b(a,g){c.call(this);this.initialized=!1;this.name=null;this.name=a;this.overrides=g}__extends(b,c);b.prototype.initialize=function(a){if(!this.initialized){this.initialized=!0;for(var g=0;g<this.overrides.length;g++)this.overrides[g].initialize(a)}};return b}(c.HashObject);f.State=e;e.prototype.__class__="egret.gui.State"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(f){var e={};f.getScale9Grid=function(d){if(e[d])return e[d];if(!d)return null;var b=d.split(","),b=new c.Rectangle(parseInt(b[0]),parseInt(b[1]),parseInt(b[2]),parseInt(b[3]));return e[d]=b}})(c.gui||(c.gui={}))})(egret||(egret={}));(function(c){(function(c){c.setProperties=function(c,d,b){for(var a=d.length,g=0;g<a;g++)c[d[g]]=b[g];return c}})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(c){var e=function(){function c(a){void 0===a&&(a=0.5);this._easeInFraction=0.5;this.easeInFraction=a}var b=c.prototype;Object.defineProperty(b,"easeInFraction",{get:function(){return this._easeInFraction},set:function(a){this._easeInFraction=a},enumerable:!0,configurable:!0});b.ease=function(a){var g=1-this._easeInFraction;return a<=this._easeInFraction&&0<this._easeInFraction?this._easeInFraction*this._easeIn(a/this._easeInFraction):this._easeInFraction+g*this._easeOut((a-
this._easeInFraction)/g)};b._easeIn=function(a){return a};b._easeOut=function(a){return a};return c}();c.EaseInOutBase=e;e.prototype.__class__="egret.gui.EaseInOutBase"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(c){var e=function(c){function b(a){void 0===a&&(a=0.5);c.call(this,a)}__extends(b,c);var a=b.prototype;a._easeIn=function(a){return 1-Math.cos(a*Math.PI/2)};a._easeOut=function(a){return Math.sin(a*Math.PI/2)};return b}(c.EaseInOutBase);c.Sine=e;e.prototype.__class__="egret.gui.Sine"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(c){var e=function(){function c(){}var b=c.prototype;c.getInstance=function(){c.theInstance||(c.theInstance=new c);return c.theInstance};b.interpolate=function(a,g,b){return 0==a?g:1==a?b:g+a*(b-g)};b.increment=function(a,g){return a+g};b.decrement=function(a,g){return a-g};return c}();c.NumberInterpolator=e;e.prototype.__class__="egret.gui.NumberInterpolator"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(c){var e=function(){function c(){}c.LOOP="loop";c.REVERSE="reverse";return c}();c.RepeatBehavior=e;e.prototype.__class__="egret.gui.RepeatBehavior"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(c){var e=function(){function c(b,a,g){void 0===b&&(b=NaN);void 0===a&&(a=null);void 0===g&&(g=null);this.value=a;this.time=b;this.valueBy=g}c.prototype.clone=function(){var b=new c(this.time,this.value,this.valueBy);b.easer=this.easer;b._timeFraction=this._timeFraction;return b};return c}();c.Keyframe=e;e.prototype.__class__="egret.gui.Keyframe"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(c){var e=function(){function d(a){void 0===a&&(a=null);this.interpolator=c.NumberInterpolator.getInstance();this.property=a}var b=d.prototype;b.clone=function(){var a=new d(this.property);a.interpolator=this.interpolator;if(null!==this.keyframes){a.keyframes=[];for(var g=0;g<this.keyframes.length;++g)a.keyframes[g]=this.keyframes[g].clone()}return a};b._scaleKeyframes=function(a){for(var g=this.keyframes.length,b=0;b<g;++b){var c=this.keyframes[b];c._timeFraction=c.time/a}};
b.getValue=function(a){if(!this.keyframes)return null;var g=this.keyframes.length;if(2==g&&1==this.keyframes[1]._timeFraction){var b=null!=this.keyframes[1].easer?this.keyframes[1].easer.ease(a):a;return this.interpolator.interpolate(b,this.keyframes[0].value,this.keyframes[1].value)}isNaN(this.keyframes[0]._timeFraction)&&this._scaleKeyframes(this.keyframes[this.keyframes.length-1].time);for(var c=0,b=this.keyframes[0].value,d=1;d<g;++d){var e=this.keyframes[d];if(a>=c&&a<e._timeFraction)return a=
(a-c)/(e._timeFraction-c),a=null!=e.easer?e.easer.ease(a):a,this.interpolator.interpolate(a,b,e.value);c=e._timeFraction;b=e.value}return this.keyframes[g-1].value};return d}();c.MotionPath=e;e.prototype.__class__="egret.gui.MotionPath"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(c){var e=function(d){function b(a,b,e,n){void 0===a&&(a=null);void 0===b&&(b=null);void 0===e&&(e=null);void 0===n&&(n=null);d.call(this);this.property=a;this.keyframes=[new c.Keyframe(0,b),new c.Keyframe(NaN,e,n)]}__extends(b,d);var a=b.prototype;Object.defineProperty(a,"valueFrom",{get:function(){return this.keyframes[0].value},set:function(a){this.keyframes[0].value=a},enumerable:!0,configurable:!0});Object.defineProperty(a,"valueTo",{get:function(){return this.keyframes[this.keyframes.length-
1].value},set:function(a){this.keyframes[this.keyframes.length-1].value=a},enumerable:!0,configurable:!0});Object.defineProperty(a,"valueBy",{get:function(){return this.keyframes[this.keyframes.length-1].valueBy},set:function(a){this.keyframes[this.keyframes.length-1].valueBy=a},enumerable:!0,configurable:!0});return b}(c.MotionPath);c.SimpleMotionPath=e;e.prototype.__class__="egret.gui.SimpleMotionPath"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(f){var e=function(){function d(a,b){this._easer=d.defaultEaser;this.repeatFunction=this.stopFunction=this.updateFunction=this.endFunction=this.startFunction=this.thisObject=null;this.id=-1;this.started=this._invertValues=this._doReverse=this._isPlaying=this._doSeek=!1;this.delayedStartTime=this.delayTime=-1;this._playheadTime=0;this.duration=500;this._repeatBehavior=f.RepeatBehavior.LOOP;this._repeatCount=1;this._startDelay=this._repeatDelay=0;this.interpolator=null;this._cycleTime=
0;this.updateFunction=a;this.thisObject=b}var b=d.prototype;Object.defineProperty(b,"easer",{get:function(){return this._easer},set:function(a){a||(a=d.defaultEaser);this._easer=a},enumerable:!0,configurable:!0});Object.defineProperty(b,"playheadTime",{get:function(){return this._playheadTime+this.startDelay},set:function(a){this._invertValues=!1;this.seek(a,!0)},enumerable:!0,configurable:!0});Object.defineProperty(b,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0});
Object.defineProperty(b,"repeatBehavior",{get:function(){return this._repeatBehavior},set:function(a){this._repeatBehavior=a},enumerable:!0,configurable:!0});Object.defineProperty(b,"repeatCount",{get:function(){return this._repeatCount},set:function(a){this._repeatCount=a},enumerable:!0,configurable:!0});Object.defineProperty(b,"repeatDelay",{get:function(){return this._repeatDelay},set:function(a){this._repeatDelay=a},enumerable:!0,configurable:!0});Object.defineProperty(b,"startDelay",{get:function(){return this._startDelay},
set:function(a){this._startDelay=a},enumerable:!0,configurable:!0});Object.defineProperty(b,"cycleTime",{get:function(){return this._cycleTime},enumerable:!0,configurable:!0});Object.defineProperty(b,"cycleFraction",{get:function(){return this._cycleFraction},enumerable:!0,configurable:!0});Object.defineProperty(b,"playReversed",{get:function(){return this._playReversed},set:function(a){this._isPlaying&&this._invertValues!=a&&(this._invertValues=a,this.seek(this.duration-this._cycleTime,!0));this._playReversed=
this._doReverse=a},enumerable:!0,configurable:!0});d.addAnimation=function(a){if(a.motionPaths&&0<a.motionPaths.length&&a.motionPaths[0]&&("width"==a.motionPaths[0].property||"height"==a.motionPaths[0].property)){d.activeAnimations.splice(0,0,a);a.id=0;for(var b=1;b<d.activeAnimations.length;++b)d.activeAnimations[b].id=b}else a.id=d.activeAnimations.length,d.activeAnimations.push(a);d.timer||(d.pulse(),d.timer=new c.Timer(d.TIMER_RESOLUTION),d.timer.addEventListener(c.TimerEvent.TIMER,d.timerHandler,
d),d.timer.start());d.intervalTime=d.currentTime;a.cycleStartTime=d.intervalTime};d.removeAnimationAt=function(a){void 0===a&&(a=0);if(0<=a&&a<d.activeAnimations.length){d.activeAnimations.splice(a,1);for(var b=d.activeAnimations.length;a<b;a++)d.activeAnimations[a].id--}d.stopTimerIfDone()};d.removeAnimation=function(a){d.removeAnimationAt(a.id)};d.timerHandler=function(a){d.intervalTime=d.pulse();for(a=0;a<d.activeAnimations.length;){var b=!0,c=d.activeAnimations[a];c&&(b=!c.doInterval());b&&++a}for(;0<
d.delayedStartAnims.length;)if(a=d.delayedStartAnims[0],a.delayedStartTime<d.currentTime)a.playReversed?a.end():a.start();else break};b.doInterval=function(){var a=!1,b=!1;if(this._isPlaying||this._doSeek){var e=d.intervalTime-this.cycleStartTime;this._playheadTime=d.intervalTime-this.startTime;if(e>=this.duration){var q=2;0<this.duration+this.repeatDelay&&(q+=Math.floor((this._playheadTime-this.duration)/(this.duration+this.repeatDelay)));if(0==this.repeatCount||q<=this.repeatCount)if(0==this.repeatDelay)this._cycleTime=
e%this.duration,this.cycleStartTime=d.intervalTime-this._cycleTime,e=this._cycleTime,this.repeatBehavior==f.RepeatBehavior.REVERSE&&(this._invertValues=1<this.repeatCount?!(q%2):!this._invertValues),b=!0;else return this._doSeek?(this._cycleTime=e%(this.duration+this.repeatDelay),this._cycleTime>this.duration&&(this._cycleTime=this.duration),this.calculateValue(this._cycleTime),this.sendUpdateEvent()):(this._cycleTime=this.duration,this.calculateValue(this._cycleTime),this.sendUpdateEvent(),d.removeAnimation(this),
a=new c.Timer(this.repeatDelay,1),a.addEventListener(c.TimerEvent.TIMER,this.repeat,this),a.start()),!1;else e>this.duration&&(this._playheadTime=e=this.duration)}this._cycleTime=e;this.calculateValue(e);e>=this.duration&&!this._doSeek?this.playReversed&&0!=this.startDelay?(this.stopAnimation(),this.addToDelayedAnimations(this.startDelay)):(this.end(),a=!0):(b&&this.sendAnimationEvent("repeatFunction"),this.sendUpdateEvent())}return a};b.sendUpdateEvent=function(){this.sendAnimationEvent("updateFunction")};
b.sendAnimationEvent=function(a){null!=this[a]&&this[a].call(this.thisObject,this)};b.calculateValue=function(a){var b=0;this.currentValue={};if(0==this.duration)for(b=0;b<this.motionPaths.length;++b)this.currentValue[this.motionPaths[b].property]=this._invertValues?this.motionPaths[b].keyframes[0].value:this.motionPaths[b].keyframes[this.motionPaths[b].keyframes.length-1].value;else if(this._invertValues&&(a=this.duration-a),this._cycleFraction=this.easer.ease(a/this.duration),this.motionPaths)for(b=
0;b<this.motionPaths.length;++b)this.currentValue[this.motionPaths[b].property]=this.motionPaths[b].getValue(this._cycleFraction)};b.removeFromDelayedAnimations=function(){if(0<=this.delayedStartTime){for(var a=0;a<d.delayedStartAnims.length;++a)if(d.delayedStartAnims[a]==this){d.delayedStartAnims.splice(a,1);break}this.delayedStartTime=-1}};b.end=function(){0<this.startDelay&&0<d.delayedStartAnims.length&&this.removeFromDelayedAnimations();this.started||this.sendAnimationEvent("startFunction");1<
this.repeatCount&&"reverse"==this.repeatBehavior&&0==this.repeatCount%2&&(this._invertValues=!0);this._doReverse&&0<this.startDelay||(this.calculateValue(this.duration),this.sendUpdateEvent());this.sendAnimationEvent("endFunction");this.isPlaying?this.stopAnimation():d.stopTimerIfDone()};d.stopTimerIfDone=function(){d.timer&&0==d.activeAnimations.length&&0==d.delayedStartAnims.length&&(d.intervalTime=NaN,d.timer.reset(),d.timer=null)};b.addToDelayedAnimations=function(a){d.timer||(d.pulse(),d.timer=
new c.Timer(d.TIMER_RESOLUTION),d.timer.addEventListener(c.TimerEvent.TIMER,d.timerHandler,d),d.timer.start());a=d.currentTime+a;for(var b=-1,e=0;e<d.delayedStartAnims.length;++e)if(a<d.delayedStartAnims[e].delayedStartTime){b=e;break}0<=b?d.delayedStartAnims.splice(b,0,this):d.delayedStartAnims.push(this);this.delayedStartTime=a};b.play=function(){this.stopAnimation();for(var a=0,b=0,a=0;a<this.motionPaths.length;++a){var c=this.motionPaths[a].keyframes;isNaN(c[0].time)?c[0].time=0:0<c[0].time&&
(b=c[0].time,c.splice(0,0,new f.Keyframe(0,null)),c.splice(1,0,new f.Keyframe(b-1,null)),this.playReversed&&(c[0].value=c[2].value,c[1].value=c[2].value));for(b=1;b<c.length;++b)isNaN(c[b].time)&&(c[b].time=this.duration)}for(a=0;a<this.motionPaths.length;++a)this.motionPaths[a]._scaleKeyframes(this.duration);this._doReverse&&(this._invertValues=!0);0<this.startDelay&&!this.playReversed?this.addToDelayedAnimations(this.startDelay):this.start()};b.seek=function(a,b){void 0===b&&(b=!1);this.startTime=
this.cycleStartTime=d.intervalTime-a;this._doSeek=!0;if(!this._isPlaying||this.playReversed){var c=this._isPlaying;d.intervalTime=d.currentTime;if(b&&0<this.startDelay&&0<=this.delayedStartTime){this.removeFromDelayedAnimations();c=a-this.startDelay;this.playReversed&&(c-=this.duration);0>c?this.addToDelayedAnimations(this.startDelay-a):(a-=this.startDelay,this.isPlaying||this.start(),this.startTime=this.cycleStartTime=d.intervalTime-a,this.doInterval(),this._doSeek=!1);return}c||(this.sendAnimationEvent("startFunction"),
this.setupInterpolation());this.startTime=this.cycleStartTime=d.intervalTime-a}this.doInterval();this._doSeek=!1};b.setupInterpolation=function(){if(this.interpolator&&this.motionPaths)for(var a=0;a<this.motionPaths.length;++a)this.motionPaths[a].interpolator=this.interpolator};b.reverse=function(){this._isPlaying?(this._doReverse=!1,this.seek(this.duration-this._cycleTime),this._invertValues=!this._invertValues):this._doReverse=!this._doReverse};b.pause=function(){0<=this.delayedStartTime&&(this.delayTime=
this.delayedStartTime-d.currentTime,this.removeFromDelayedAnimations());this._isPlaying=!1};b.stopAnimation=function(){this.removeFromDelayedAnimations();0<=this.id&&(d.removeAnimationAt(this.id),this.id=-1,this._isPlaying=this._invertValues=!1)};b.stop=function(){this.stopAnimation();this.sendAnimationEvent("stopFunction")};b.resume=function(){this._isPlaying=!0;0<=this.delayTime?this.addToDelayedAnimations(this.delayTime):(this.cycleStartTime=d.intervalTime-this._cycleTime,this.startTime=d.intervalTime-
this._playheadTime,this._doReverse&&(this.reverse(),this._doReverse=!1))};b.repeat=function(a){this.repeatBehavior==f.RepeatBehavior.REVERSE&&(this._invertValues=!this._invertValues);this.calculateValue(0);this.sendAnimationEvent("repeatFunction");this.sendUpdateEvent();d.addAnimation(this)};b.start=function(a){a=0;if(!this.playReversed&&0<=this.delayedStartTime){var b=d.currentTime-this.delayedStartTime;0<b&&(a=Math.min(b,this.duration));this.removeFromDelayedAnimations()}this.sendAnimationEvent("startFunction");
this.setupInterpolation();this.calculateValue(0);this.sendUpdateEvent();d.addAnimation(this);this.startTime=this.cycleStartTime;this._isPlaying=!0;0<a&&this.seek(a);this.started=!0};d.pulse=function(){if(0>d.startTime)return d.startTime=c.getTimer(),d._currentTime=0,d._currentTime;d._currentTime=c.getTimer()-d.startTime;return d._currentTime};Object.defineProperty(d,"currentTime",{get:function(){return 0>d._currentTime?d.pulse():d._currentTime},enumerable:!0,configurable:!0});d.TIMER_RESOLUTION=1E3/
60;d.defaultEaser=new f.Sine(0.5);d.intervalTime=NaN;d.activeAnimations=[];d.timer=null;d.delayedStartAnims=[];d.startTime=-1;d._currentTime=-1;return d}();f.Animation=e;e.prototype.__class__="egret.gui.Animation"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(f){var e=function(d){function b(a){d.call(this);this.delayElapsedTime=this.delayStartTime=0;this.durationExplicitlySet=!1;this._playCount=0;this._stopRepeat=!1;this._duration=500;this._startDelay=this._repeatDelay=this._repeatCount=0;this.target=a}__extends(b,d);var a=b.prototype;Object.defineProperty(a,"_actualDuration",{get:function(){var a=NaN;0<this.repeatCount&&(a=this.duration*this.repeatCount+this.repeatDelay*(this.repeatCount-1)+this.startDelay);return a},enumerable:!0,
configurable:!0});Object.defineProperty(a,"duration",{get:function(){return!this.durationExplicitlySet&&this.parentCompositeEffectInstance?this.parentCompositeEffectInstance.duration:this._duration},set:function(a){this.durationExplicitlySet=!0;this._duration=a},enumerable:!0,configurable:!0});Object.defineProperty(a,"effect",{get:function(){return this._effect},set:function(a){this._effect=a},enumerable:!0,configurable:!0});Object.defineProperty(a,"playheadTime",{get:function(){return Math.max(this._playCount-
1,0)*(this.duration+this.repeatDelay)+(this.playReversed?0:this.startDelay)},set:function(a){this._setPlayheadTime(a)},enumerable:!0,configurable:!0});a._setPlayheadTime=function(a){this._delayTimer&&this._delayTimer.running&&(this._delayTimer.reset(),a<this.startDelay?(this._delayTimer=new c.Timer(this.startDelay-a,1),this.delayStartTime=c.getTimer(),this._delayTimer.addEventListener(c.TimerEvent.TIMER,this.delayTimerHandler,this),this._delayTimer.start()):(this._playCount=0,this.play()))};Object.defineProperty(a,
"playReversed",{get:function(){return this._playReversed},set:function(a){this._setPlayReversed(a)},enumerable:!0,configurable:!0});a._setPlayReversed=function(a){this._playReversed=a};Object.defineProperty(a,"repeatCount",{get:function(){return this._repeatCount},set:function(a){this._repeatCount=a},enumerable:!0,configurable:!0});Object.defineProperty(a,"repeatDelay",{get:function(){return this._repeatDelay},set:function(a){this._repeatDelay=a},enumerable:!0,configurable:!0});Object.defineProperty(a,
"startDelay",{get:function(){return this._startDelay},set:function(a){this._startDelay=a},enumerable:!0,configurable:!0});Object.defineProperty(a,"target",{get:function(){return this._target},set:function(a){this._target=a},enumerable:!0,configurable:!0});a.startEffect=function(){0<this.startDelay&&!this.playReversed?(this._delayTimer=new c.Timer(this.startDelay,1),this.delayStartTime=c.getTimer(),this._delayTimer.addEventListener(c.TimerEvent.TIMER,this.delayTimerHandler,this),this._delayTimer.start()):
this.play()};a.play=function(){this._playCount++;this.dispatchEvent(new f.EffectEvent(f.EffectEvent.EFFECT_START,!1,!1,this));this.target&&"dispatchEvent"in this.target&&this.target.dispatchEvent(new f.EffectEvent(f.EffectEvent.EFFECT_START,!1,!1,this))};a.pause=function(){this._delayTimer&&this._delayTimer.running&&!isNaN(this.delayStartTime)&&(this._delayTimer.stop(),this.delayElapsedTime=c.getTimer()-this.delayStartTime)};a.stop=function(){this._delayTimer&&this._delayTimer.reset();this._stopRepeat=
!0;this.dispatchEvent(new f.EffectEvent(f.EffectEvent.EFFECT_STOP,!1,!1,this));this.target&&"dispatchEvent"in this.target&&this.target.dispatchEvent(new f.EffectEvent(f.EffectEvent.EFFECT_STOP,!1,!1,this));this.finishEffect()};a.resume=function(){!this._delayTimer||this._delayTimer.running||isNaN(this.delayElapsedTime)||(this._delayTimer.delay=this.playReversed?this.delayElapsedTime:this._delayTimer.delay-this.delayElapsedTime,this.delayStartTime=c.getTimer(),this._delayTimer.start())};a.reverse=
function(){0<this.repeatCount&&(this._playCount=this.repeatCount-this._playCount+1)};a.end=function(){this._delayTimer&&this._delayTimer.reset();this._stopRepeat=!0;this.finishEffect()};a.finishEffect=function(){this._playCount=0;this.dispatchEvent(new f.EffectEvent(f.EffectEvent.EFFECT_END,!1,!1,this));this.target&&"dispatchEvent"in this.target&&this.target.dispatchEvent(new f.EffectEvent(f.EffectEvent.EFFECT_END,!1,!1,this))};a.finishRepeat=function(){!this._stopRepeat&&0!=this._playCount&&(this._playCount<
this.repeatCount||0==this.repeatCount)?0<this.repeatDelay?(this._delayTimer=new c.Timer(this.repeatDelay,1),this.delayStartTime=c.getTimer(),this._delayTimer.addEventListener(c.TimerEvent.TIMER,this.delayTimerHandler,this),this._delayTimer.start()):this.play():this.finishEffect()};a._playWithNoDuration=function(){this.duration=0;this.repeatCount=1;this.startDelay=this.repeatDelay=0;this.startEffect()};a.delayTimerHandler=function(a){this._delayTimer.reset();this.delayElapsedTime=this.delayStartTime=
NaN;this.play()};return b}(c.EventDispatcher);f.EffectInstance=e;e.prototype.__class__="egret.gui.EffectInstance"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(c){var e=function(d){function b(a){d.call(this,a);this._activeEffectQueue=[];this._playheadTime=0;this._childSets=[]}__extends(b,d);var a=b.prototype;Object.defineProperty(a,"_actualDuration",{get:function(){var a=NaN;0<this.repeatCount&&(a=this._durationWithoutRepeat*this.repeatCount+this.repeatDelay*(this.repeatCount-1)+this.startDelay);return a},enumerable:!0,configurable:!0});Object.defineProperty(a,"playheadTime",{get:function(){return this._playheadTime},enumerable:!0,
configurable:!0});a._setPlayheadTime=function(a){this._timerAnimation?this._timerAnimation.playheadTime=a:this._playheadTime=a;d.prototype._setPlayheadTime.call(this,a)};Object.defineProperty(a,"_durationWithoutRepeat",{get:function(){return 0},enumerable:!0,configurable:!0});a.play=function(){this._timerAnimation=new c.Animation(this.animationUpdate,this);this._timerAnimation.duration=this._durationWithoutRepeat;this._timerAnimation.motionPaths=[new c.SimpleMotionPath("timer",0,0)];this._timerAnimation.endFunction=
this.animationEnd;this._timerAnimation.play();d.prototype.play.call(this)};a.pause=function(){d.prototype.pause.call(this);this._timerAnimation&&this._timerAnimation.pause()};a.stop=function(){d.prototype.stop.call(this);this._timerAnimation&&this._timerAnimation.stop()};a.end=function(){d.prototype.end.call(this);this._timerAnimation&&this._timerAnimation.end()};a.resume=function(){d.prototype.resume.call(this);this._timerAnimation&&this._timerAnimation.resume()};a.reverse=function(){d.prototype.reverse.call(this);
this._setPlayReversed(!this.playReversed);this._timerAnimation&&this._timerAnimation.reverse()};a.finishEffect=function(){this._activeEffectQueue=null;d.prototype.finishEffect.call(this)};a.addChildSet=function(a){if(a){var b=a.length;if(0<b){this._childSets?this._childSets.push(a):this._childSets=[a];for(var d=0;d<b;d++)a[d].addEventListener(c.EffectEvent.EFFECT_END,this._effectEndHandler,this),a[d].parentCompositeEffectInstance=this}}};a._playWithNoDuration=function(){d.prototype._playWithNoDuration.call(this);
this.end()};a.animationUpdate=function(a){this._playheadTime=this._timerAnimation?this._timerAnimation.playheadTime:this._playheadTime};a.animationEnd=function(a){this._playheadTime=this._timerAnimation?this._timerAnimation.playheadTime:this._playheadTime};a._onEffectEnd=function(a){};a._effectEndHandler=function(a){this._onEffectEnd(a.effectInstance)};return b}(c.EffectInstance);c.CompositeEffectInstance=e;e.prototype.__class__="egret.gui.CompositeEffectInstance"})(c.gui||(c.gui={}))})(egret||(egret=
{}));
(function(c){(function(f){var e=function(c){function b(a){void 0===a&&(a=null);c.call(this);this._instances=[];this._isPaused=!1;this._duration=500;this.durationExplicitlySet=!1;this._perElementOffset=0;this.repeatCount=1;this.startDelay=this.repeatDelay=0;this._targets=[];this._playheadTime=0;this.target=a}__extends(b,c);var a=b.prototype;Object.defineProperty(a,"duration",{get:function(){return!this.durationExplicitlySet&&this._parentCompositeEffect?this._parentCompositeEffect.duration:this._duration},set:function(a){this.durationExplicitlySet=
!0;this._duration=a},enumerable:!0,configurable:!0});Object.defineProperty(a,"isPlaying",{get:function(){return this._instances&&0<this._instances.length},enumerable:!0,configurable:!0});Object.defineProperty(a,"isPaused",{get:function(){return this.isPlaying?this._isPaused:!1},enumerable:!0,configurable:!0});Object.defineProperty(a,"perElementOffset",{get:function(){return this._perElementOffset},set:function(a){this._perElementOffset=a},enumerable:!0,configurable:!0});Object.defineProperty(a,"target",
{get:function(){return 0<this._targets.length?this._targets[0]:null},set:function(a){this._targets.splice(0);a&&(this._targets[0]=a)},enumerable:!0,configurable:!0});Object.defineProperty(a,"targets",{get:function(){return this._targets},set:function(a){for(var b=a.length-1;0<=b;b--)null==a[b]&&a.splice(b,1);this._targets=a},enumerable:!0,configurable:!0});Object.defineProperty(a,"playheadTime",{get:function(){for(var a=0;a<this._instances.length;a++)if(this._instances[a])return this._instances[a].playheadTime;
return this._playheadTime},set:function(a){var b=!1;0==this._instances.length&&(this.play(),b=!0);for(var c=0;c<this._instances.length;c++)this._instances[c]&&(this._instances[c].playheadTime=a);b&&this.pause();this._playheadTime=a},enumerable:!0,configurable:!0});a.createInstances=function(a){void 0===a&&(a=null);a||(a=this.targets);for(var b=[],c=0,d=a.length,e=0;e<d;e++){var f=this.createInstance(a[e]);f&&(f.startDelay+=c,c+=this.perElementOffset,b.push(f))}return b};a.createInstance=function(a){void 0===
a&&(a=null);a||(a=this.target);a=new this.instanceClass(a);this._initInstance(a);a.addEventListener(f.EffectEvent.EFFECT_START,this._effectStartHandler,this);a.addEventListener(f.EffectEvent.EFFECT_STOP,this._effectStopHandler,this);a.addEventListener(f.EffectEvent.EFFECT_END,this._effectEndHandler,this);this._instances.push(a);return a};a._initInstance=function(a){a.duration=this.duration;a.durationExplicitlySet=this.durationExplicitlySet;a.effect=this;a.repeatCount=this.repeatCount;a.repeatDelay=
this.repeatDelay;a.startDelay=this.startDelay};a.deleteInstance=function(a){a.removeEventListener(f.EffectEvent.EFFECT_START,this._effectStartHandler,this);a.removeEventListener(f.EffectEvent.EFFECT_STOP,this._effectStopHandler,this);a.removeEventListener(f.EffectEvent.EFFECT_END,this._effectEndHandler,this);for(var b=this._instances.length,c=0;c<b;c++)this._instances[c]===a&&this._instances.splice(c,1)};a.play=function(a,b){void 0===a&&(a=null);void 0===b&&(b=!1);this._isPaused=this.effectStopped=
!1;this.playReversed=b;for(var c=this.createInstances(a),d=c.length,e=0;e<d;e++){var f=c[e];f.playReversed=b;f.startEffect()}return c};a.pause=function(){if(this.isPlaying&&!this._isPaused){this._isPaused=!0;for(var a=this._instances.length,b=0;b<a;b++)this._instances[b].pause()}};a.stop=function(){for(var a=this._instances.length-1;0<=a;a--){var b=this._instances[a];b&&b.stop()}};a.resume=function(){if(this.isPlaying&&this._isPaused){this._isPaused=!1;for(var a=this._instances.length,b=0;b<a;b++)this._instances[b].resume()}};
a.reverse=function(){if(this.isPlaying)for(var a=this._instances.length,b=0;b<a;b++)this._instances[b].reverse()};a.end=function(a){void 0===a&&(a=null);if(a)a.end();else for(a=this._instances.length-1;0<=a;a--){var b=this._instances[a];b&&b.end()}};a._effectStartHandler=function(a){this.dispatchEvent(a)};a._effectStopHandler=function(a){this.dispatchEvent(a);this.effectStopped=!0};a._effectEndHandler=function(a){this.deleteInstance(a.effectInstance);this.dispatchEvent(a)};return b}(c.EventDispatcher);
f.Effect=e;e.prototype.__class__="egret.gui.Effect"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(c){var e=function(d){function b(a){void 0===a&&(a=null);d.call(this,a);this._children=[];this.instanceClass=c.CompositeEffectInstance}__extends(b,d);var a=b.prototype;Object.defineProperty(a,"children",{get:function(){return this._children},set:function(a){var b=0;if(this._children)for(b=0;b<this._children.length;++b)this._children[b]&&(this._children[b]._parentCompositeEffect=null);if(this._children=a)for(b=0;b<this._children.length;++b)this._children[b]&&(this._children[b]._parentCompositeEffect=
this)},enumerable:!0,configurable:!0});Object.defineProperty(a,"compositeDuration",{get:function(){return this.duration},enumerable:!0,configurable:!0});a.createInstance=function(a){void 0===a&&(a=null);this.childTargets||(this.childTargets=[a]);a=d.prototype.createInstance.call(this,a);this.childTargets=null;return a};a.createInstances=function(a){void 0===a&&(a=null);a||(a=this.targets);this.childTargets=a;a=this.createInstance();this.childTargets=null;return a?[a]:[]};a._initInstance=function(a){d.prototype._initInstance.call(this,
a);var b=this.childTargets;b instanceof Array||(b=[b]);if(this.children)for(var c=this.children.length,e=0;e<c;e++){var f=this.children[e];0==f.targets.length?a.addChildSet(this.children[e].createInstances(b)):a.addChildSet(this.children[e].createInstances(f.targets))}};a.addChild=function(a){this.children.push(a);a._parentCompositeEffect=this};return b}(c.Effect);c.CompositeEffect=e;e.prototype.__class__="egret.gui.CompositeEffect"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(c){var e=function(){function c(){}c.END="end";c.STOP="stop";return c}();c.InterruptionBehavior=e;e.prototype.__class__="egret.gui.InterruptionBehavior"})(c.gui||(c.gui={}))})(egret||(egret={}));(function(c){(function(c){var e=function(){return function(){this.toState=this.fromState="*";this.autoReverse=!1;this.interruptionBehavior=c.InterruptionBehavior.END}}();c.Transition=e;e.prototype.__class__="egret.gui.Transition"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(f){var e=function(d){function b(a,b){void 0===b&&(b=!0);d.call(this);this.scale9Grid=null;this.fillMode="scale";this.sourceChanged=!1;this._content=this._source=null;this.contentReused=this.createChildrenCalled=this._contentIsTexture=!1;this.autoScale=!0;this.touchChildren=!1;a&&(this.source=a);this.autoScale=b}__extends(b,d);var a=b.prototype;Object.defineProperty(a,"source",{get:function(){return this._source},set:function(a){this._source!=a&&(this._source=a,this.createChildrenCalled?
this.parseSource():this.sourceChanged=!0,this._setSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(a,"content",{get:function(){return this._content},enumerable:!0,configurable:!0});a.createChildren=function(){d.prototype.createChildren.call(this);this.sourceChanged&&this.parseSource();this.createChildrenCalled=!0};a.parseSource=function(){this.sourceChanged=!1;var a=b.assetAdapter;a||(a=this.getAdapter());if(this._source){var c=this.contentReused?null:this._content;this.contentReused=
!0;a.getAsset(this._source,this.contentChanged,this,c)}else this.contentChanged(null,null)};a.getAdapter=function(){var a;try{a=c.Injector.getInstance("egret.gui.IAssetAdapter")}catch(d){a=new f.DefaultAssetAdapter}return b.assetAdapter=a};a.contentChanged=function(a,b){if(b===this._source){var d=this._content;this._content=a;this._content instanceof c.Texture?(this._texture_to_render=a,this._contentIsTexture=!0):(this._texture_to_render=null,this._contentIsTexture=!1);d!==a&&(d instanceof c.DisplayObject&&
d.parent==this&&(d._sizeChangeCallBack=null,d._sizeChangeCallTarget=null,this._removeFromDisplayList(d)),a instanceof c.DisplayObject&&(a._sizeChangeCallBack=this.invalidateSize,a._sizeChangeCallTarget=this,this._addToDisplayListAt(a,0)));this.invalidateSize();this.invalidateDisplayList();this.contentReused=!1;this.hasEventListener(f.UIEvent.CONTENT_CHANGED)&&f.UIEvent.dispatchUIEvent(this,f.UIEvent.CONTENT_CHANGED)}};a.measure=function(){d.prototype.measure.call(this);var a=this._content;if(a instanceof
c.DisplayObject)if("preferredWidth"in a)this.measuredWidth=a.preferredWidth,this.measuredHeight=a.preferredHeight;else{var b=a.explicitWidth,e=a.explicitHeight;a.width=NaN;a.height=NaN;this.measuredWidth=a.measuredWidth*a.scaleX;this.measuredHeight=a.measuredHeight*a.scaleY;a.width=b;a.height=e}else this._contentIsTexture&&(this.measuredWidth=a._textureWidth,this.measuredHeight=a._textureHeight)};a.updateDisplayList=function(a,b){d.prototype.updateDisplayList.call(this,a,b);var e=this._content;this.autoScale&&
e instanceof c.DisplayObject&&("setLayoutBoundsSize"in e?e.setLayoutBoundsSize(a,b):(e.width=a/e.scaleX,e.height=b/e.scaleY));this._setSizeDirty()};a._render=function(a){if(this._contentIsTexture){var b=this._content,e,f;this.autoScale?(e=this._UIC_Props_._width,f=this._UIC_Props_._height):(e=b._textureWidth,f=b._textureHeight);this._texture_to_render=b;c.Bitmap._drawBitmap(a,e,f,this)}d.prototype._render.call(this,a)};a._measureBounds=function(){if(this._contentIsTexture){var a=this._content,b=this.width,
e=this.height;return c.Rectangle.identity.initialize(Math.floor(a._offsetX*b/a._textureWidth),Math.floor(a._offsetY*e/a._textureHeight),b,e)}return d.prototype._measureBounds.call(this)};a.addChild=function(a){throw Error(c.getString(3004,c.getString(3003)));};a.addChildAt=function(a,b){throw Error(c.getString(3005,c.getString(3003)));};a.removeChild=function(a){throw Error(c.getString(3006,c.getString(3003)));};a.removeChildAt=function(a){throw Error(c.getString(3007,c.getString(3003)));};a.setChildIndex=
function(a,b){throw Error(c.getString(3008,c.getString(3003)));};a.swapChildren=function(a,b){throw Error(c.getString(3009,c.getString(3003)));};a.swapChildrenAt=function(a,b){throw Error(c.getString(3010,c.getString(3003)));};b.assetAdapter=null;return b}(f.UIComponent);f.UIAsset=e;e.prototype.__class__="egret.gui.UIAsset"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(f){var e=function(d){function b(){d.call(this);this.hostComponentKey=null;this._skinNameExplicitlySet=!1;this._skinName=null;this._createChildrenCalled=!1;this._skin=null;this.stateIsDirty=this.skinLayoutEnabled=!1;this.explicitMouseEnabled=this.explicitMouseChildren=this._autoMouseEnabled=!0}__extends(b,d);var a=b.prototype;Object.defineProperty(a,"skinName",{get:function(){return this._skinName},set:function(a){this._skinName!=a&&(this._skinName=a,this._skinNameExplicitlySet=
!0,this._createChildrenCalled&&this.parseSkinName())},enumerable:!0,configurable:!0});a.createChildren=function(){d.prototype.createChildren.call(this);this.parseSkinName();this._createChildrenCalled=!0};a.parseSkinName=function(){var a=b.skinAdapter;a||(a=this.getSkinAdapter());var d=this.hostComponentKey||c.getQualifiedClassName(this),a=a.getSkin(this._skinName,d);a||(d=b._defaultTheme)&&(a=d.getDefaultSkin(this));this._setSkin(a)};a.getSkinAdapter=function(){var a;try{a=c.Injector.getInstance("egret.gui.ISkinAdapter")}catch(d){a=
new f.DefaultSkinAdapter}return b.skinAdapter=a};Object.defineProperty(a,"skin",{get:function(){return this._skin},enumerable:!0,configurable:!0});a._setSkin=function(a){var b=this._skin;this.detachSkin(b);b instanceof c.DisplayObject&&this._removeFromDisplayList(b);this._skin=a;a instanceof c.DisplayObject&&this._addToDisplayListAt(this._skin,0);this.attachSkin(a);this.invalidateSkinState();this.invalidateSize();this.invalidateDisplayList();this.hasEventListener(f.UIEvent.SKIN_CHANGED)&&f.UIEvent.dispatchUIEvent(this,
f.UIEvent.SKIN_CHANGED)};a.attachSkin=function(a){this.skinLayoutEnabled=!a||a instanceof c.DisplayObject?!1:!0;a&&"hostComponent"in a&&(a.hostComponent=this,this.findSkinParts())};a.findSkinParts=function(){var a=this._skin;if(a&&"skinParts"in a)for(var b=a.skinParts,c=b.length,d=0;d<c;d++){var e=b[d];if(e in a)try{this[e]=a[e],this.partAdded(e,a[e])}catch(f){}}};a.detachSkin=function(a){if(a){if("skinParts"in a)for(var b=a.skinParts,c=b.length,d=0;d<c;d++){var e=b[d];e in this&&(null!=this[e]&&
this.partRemoved(e,this[e]),this[e]=null)}a.hostComponent=null}};a.partAdded=function(a,b){f.SkinPartEvent.dispatchSkinPartEvent(this,f.SkinPartEvent.PART_ADDED,a,b)};a.partRemoved=function(a,b){f.SkinPartEvent.dispatchSkinPartEvent(this,f.SkinPartEvent.PART_REMOVED,a,b)};a.invalidateSkinState=function(){this.stateIsDirty||(this.stateIsDirty=!0,this.invalidateProperties())};a.validateSkinState=function(){var a=this.getCurrentSkinState(),b=this._skin;b&&"currentState"in b&&(b.currentState=a);this.hasEventListener("stateChanged")&&
this.dispatchEventWith("stateChanged")};Object.defineProperty(a,"autoTouchEnabled",{get:function(){return this._autoMouseEnabled},set:function(a){this._autoMouseEnabled!=a&&((this._autoMouseEnabled=a)?(this._touchChildren=this.enabled?this.explicitMouseChildren:!1,this._DO_Props_._touchEnabled=this.enabled?this.explicitMouseEnabled:!1):(this._touchChildren=this.explicitMouseChildren,this._DO_Props_._touchEnabled=this.explicitMouseEnabled))},enumerable:!0,configurable:!0});Object.defineProperty(a,
"touchChildren",{get:function(){return this._touchChildren},set:function(a){this.enabled&&(this._touchChildren=a);this.explicitMouseChildren=a},enumerable:!0,configurable:!0});Object.defineProperty(a,"touchEnabled",{get:function(){return this._DO_Props_._touchEnabled},set:function(a){this.enabled&&(this._DO_Props_._touchEnabled=a);this.explicitMouseEnabled=a},enumerable:!0,configurable:!0});Object.defineProperty(a,"enabled",{get:function(){return this._UIC_Props_._enabled},set:function(a){this._setEnabled(a)},
enumerable:!0,configurable:!0});a._setEnabled=function(a){this._UIC_Props_._enabled!=a&&(this._UIC_Props_._enabled=a,this._autoMouseEnabled&&(this._touchChildren=a?this.explicitMouseChildren:!1,this._DO_Props_._touchEnabled=a?this.explicitMouseEnabled:!1),this.invalidateSkinState())};a.getCurrentSkinState=function(){return this.enabled?"normal":"disabled"};a.commitProperties=function(){d.prototype.commitProperties.call(this);this.stateIsDirty&&(this.stateIsDirty=!1,this.validateSkinState())};a._childXYChanged=
function(){this.skinLayoutEnabled&&(this.invalidateSize(),this.invalidateDisplayList())};a.measure=function(){d.prototype.measure.call(this);var a=this._skin;a&&(this.skinLayoutEnabled?(a.measure(),this.measuredWidth=a.preferredWidth,this.measuredHeight=a.preferredHeight):"preferredWidth"in a?(this.measuredWidth=a.preferredWidth,this.measuredHeight=a.preferredHeight):(this.measuredWidth=a.width,this.measuredHeight=a.height))};a.updateDisplayList=function(a,b){d.prototype.updateDisplayList.call(this,
a,b);var e=this._skin;e&&(this.skinLayoutEnabled?e.updateDisplayList(a,b):"setLayoutBoundsSize"in e?e.setLayoutBoundsSize(a,b):e instanceof c.DisplayObject&&(e.scaleX=0==e.width?1:a/e.width,e.scaleY=0==e.height?1:b/e.height))};a.addChild=function(a){throw Error(c.getString(3004,c.getString(3003)));};a.addChildAt=function(a,b){throw Error(c.getString(3005,c.getString(3003)));};a.removeChild=function(a){throw Error(c.getString(3006,c.getString(3003)));};a.removeChildAt=function(a){throw Error(c.getString(3007,
c.getString(3003)));};a.setChildIndex=function(a,b){throw Error(c.getString(3008,c.getString(3003)));};a.swapChildren=function(a,b){throw Error(c.getString(3009,c.getString(3003)));};a.swapChildrenAt=function(a,b){throw Error(c.getString(3010,c.getString(3003)));};b.skinAdapter=null;b._defaultTheme=null;return b}(f.UIComponent);f.SkinnableComponent=e;e.prototype.__class__="egret.gui.SkinnableComponent"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(f){var e=function(){function d(){}d.prototype.getSkin=function(b,a){if(!b)return null;if(b.prototype)return new b;if("string"==typeof b){var g=c.getDefinitionByName(b);return g?new g:null}return b};return d}();f.DefaultSkinAdapter=e;e.prototype.__class__="egret.gui.DefaultSkinAdapter"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(f){var e=function(){function d(){}d.prototype.getAsset=function(b,a,g,d){var e=b;b.prototype&&(e=new b);if(e instanceof c.DisplayObject||e instanceof c.Texture)a.call(g,e,b);else if("string"==typeof b){var f=new c.URLLoader;f.dataFormat=c.URLLoaderDataFormat.TEXTURE;f.addEventListener(c.Event.COMPLETE,function(c){e=f.data;a.call(g,e,b)},this);f.load(new c.URLRequest(b))}else a.call(g,e,b)};return d}();f.DefaultAssetAdapter=e;e.prototype.__class__="egret.gui.DefaultAssetAdapter"})(c.gui||
(c.gui={}))})(egret||(egret={}));
(function(c){(function(f){var e=function(){function d(a){this.skinMap={};this.delyList=[];this.loadConfig(a)}var b=d.prototype;d.load=function(a){this.initialized||(this.initialized=!0,f.SkinnableComponent._defaultTheme=new d(a))};b.loadConfig=function(a){var b=new c.URLLoader;b.addEventListener(c.Event.COMPLETE,this.onLoadComplete,this);b.addEventListener(c.IOErrorEvent.IO_ERROR,this.onLoadError,this);b.dataFormat=c.URLLoaderDataFormat.TEXT;b.load(new c.URLRequest(a))};b.onLoadComplete=function(a){a=
a.target;try{this.skinMap=JSON.parse(a.data).skins}catch(b){c.$warn(1017,a._request.url,a.data)}this.handleDelyList()};b.onLoadError=function(a){c.$warn(3E3,a.target._request.url);this.handleDelyList()};b.handleDelyList=function(){if(this.skinMap){var a=this.delyList;this.delyList=[];for(var b=a.length,c=0;c<b;c++){var d=a[c];if(!d._skin){var e=this.getDefaultSkin(d);d._setSkin(e)}}}else this.skinMap={},this.delyList=[]};b.getDefaultSkin=function(a){var b=this.skinMap;if(!b)return-1==this.delyList.indexOf(a)&&
this.delyList.push(a),null;var d,e=a.hostComponentKey;if(e)d=b[e];else for(;a;){e=c.getQualifiedClassName(a);if(d=b[e])break;a=c.getDefinitionByName(c.getQualifiedSuperclassName(a))}if(!d)return null;b=c.getDefinitionByName(d);return b?new b:(c.$warn(3001,d),null)};d.initialized=!1;return d}();f.Theme=e;e.prototype.__class__="egret.gui.Theme"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(f){var e=function(c){function b(){c.call(this);this._target=null}__extends(b,c);var a=b.prototype;Object.defineProperty(a,"target",{get:function(){return this._target},set:function(a){this._target=a},enumerable:!0,configurable:!0});a.measure=function(){if(null!=this.target){for(var a=0,b=0,c=this._target,d=c.numElements,e=0;e<d;e++){var f=c.getElementAt(e);if(f&&f.includeInLayout){var k=f.horizontalCenter,m=f.verticalCenter,p=f.left,r=f.right,s=f.top,t=f.bottom;isNaN(p)||isNaN(r)?
isNaN(k)?isNaN(p)&&isNaN(r)?k=f.preferredX:(k=isNaN(p)?0:p,k+=isNaN(r)?0:r):k=2*Math.abs(k):k=p+r;isNaN(s)||isNaN(t)?isNaN(m)?isNaN(s)&&isNaN(t)?m=f.preferredY:(m=isNaN(s)?0:s,m+=isNaN(t)?0:t):m=2*Math.abs(m):m=s+t;t=f.preferredHeight;a=Math.ceil(Math.max(a,k+f.preferredWidth));b=Math.ceil(Math.max(b,m+t))}}this.target.measuredWidth=a;this.target.measuredHeight=b}};a.updateDisplayList=function(a,b){if(null!=this.target)for(var c=this.target.numElements,d=0;d<c;d++){var e=this.target.getElementAt(d);
if(null!=e&&e.includeInLayout){var f=e.horizontalCenter,k=e.verticalCenter,m=e.left,p=e.right,r=e.top,s=e.bottom,t=e.percentWidth,v=e.percentHeight,x=NaN,w=NaN;isNaN(m)||isNaN(p)?isNaN(t)||(x=Math.round(a*Math.min(0.01*t,1))):x=a-p-m;isNaN(r)||isNaN(s)?isNaN(v)||(w=Math.round(b*Math.min(0.01*v,1))):w=b-s-r;e.setLayoutBoundsSize(x,w);t=e.layoutBoundsWidth;v=e.layoutBoundsHeight;w=x=NaN;x=isNaN(f)?isNaN(m)?isNaN(p)?e.layoutBoundsX:a-t-p:m:Math.round((a-t)/2+f);w=isNaN(k)?isNaN(r)?isNaN(s)?e.layoutBoundsY:
b-v-s:r:Math.round((b-v)/2+k);e.setLayoutBoundsPosition(x,w)}}};return b}(c.HashObject);f.SkinBasicLayout=e;e.prototype.__class__="egret.gui.SkinBasicLayout"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(f){var e=function(d){function b(){d.call(this);this._textField=null;this.fontFamilyChanged=this.allStyleChanged=!1;this._fontFamily="SimSun";this._sizeChanged=!1;this._size=30;this._focusEnabled=!0;this.textAlignChanged=this._italic=this.italicChanged=this._bold=this.boldChanged=!1;this._textAlign=c.HorizontalAlign.LEFT;this.verticalAlignChanged=!1;this._verticalAlign=c.VerticalAlign.TOP;this.lineSpacingChanged=!1;this._lineSpacing=0;this.textColorChanged=!1;this._textColor=
16777215;this._textChanged=!1;this._text="";this._textFlow=null;this._textFlowChanged=!1;this._UIC_Props_._hasNoStyleChild=!0}__extends(b,d);var a=b.prototype;a.styleChanged=function(a){if(!this.allStyleChanged){if(a)switch(a){case "textColor":this.textColorChanged=!0;break;case "fontFamily":this.fontFamilyChanged=!0;break;case "size":this._sizeChanged=!0;break;case "bold":this.boldChanged=!0;break;case "italic":this.italicChanged=!0;break;case "textAlign":this.textAlignChanged=!0;break;case "verticalAlign":this.verticalAlignChanged=
!0}else this.allStyleChanged=!0;this.invalidateProperties();this.invalidateSize();this.invalidateDisplayList()}};Object.defineProperty(a,"fontFamily",{get:function(){var a=this._UIC_Props_._styleProtoChain;return a&&void 0!==a.fontFamily?a.fontFamily:this._fontFamily},set:function(a){this.setStyle("fontFamily",a)},enumerable:!0,configurable:!0});Object.defineProperty(a,"size",{get:function(){var a=this._UIC_Props_._styleProtoChain;return a&&void 0!==a.size?a.size:this._size},set:function(a){void 0===
a&&(a=0);this.setStyle("size",a)},enumerable:!0,configurable:!0});Object.defineProperty(a,"focusEnabled",{get:function(){return this._focusEnabled},set:function(a){this._focusEnabled=a},enumerable:!0,configurable:!0});a.setFocus=function(){!1!=this._focusEnabled&&this._textField&&this._textField.setFocus()};Object.defineProperty(a,"bold",{get:function(){var a=this._UIC_Props_._styleProtoChain;return a&&void 0!==a.bold?a.bold:this._bold},set:function(a){this.setStyle("bold",a)},enumerable:!0,configurable:!0});
Object.defineProperty(a,"italic",{get:function(){var a=this._UIC_Props_._styleProtoChain;return a&&void 0!==a.italic?a.italic:this._italic},set:function(a){this.setStyle("italic",a)},enumerable:!0,configurable:!0});Object.defineProperty(a,"textAlign",{get:function(){var a=this._UIC_Props_._styleProtoChain;return a&&void 0!==a.textAlign?a.textAlign:this._textAlign},set:function(a){this.setStyle("textAlign",a)},enumerable:!0,configurable:!0});Object.defineProperty(a,"verticalAlign",{get:function(){var a=
this._UIC_Props_._styleProtoChain;return a&&void 0!==a.verticalAlign?a.verticalAlign:this._verticalAlign},set:function(a){this.setStyle("verticalAlign",a)},enumerable:!0,configurable:!0});Object.defineProperty(a,"lineSpacing",{get:function(){return this._getLineSpacing()},set:function(a){this._setLineSpacing(a)},enumerable:!0,configurable:!0});a._getLineSpacing=function(){return this._lineSpacing};a._setLineSpacing=function(a){this._lineSpacing!=a&&(this._lineSpacing=a,this.lineSpacingChanged=!0,
this.invalidateProperties(),this.invalidateSize(),this.invalidateDisplayList())};Object.defineProperty(a,"textColor",{get:function(){var a=this._UIC_Props_._styleProtoChain;return a&&void 0!==a.textColor?a.textColor:this._textColor},set:function(a){this.setStyle("textColor",a)},enumerable:!0,configurable:!0});Object.defineProperty(a,"text",{get:function(){return this._text},set:function(a){a!=this._text&&(this._text=a||"",this._textChanged=!0,this._textFlowChanged=!1,this._textFlow=[],this.invalidateProperties(),
this.invalidateSize(),this.invalidateDisplayList())},enumerable:!0,configurable:!0});Object.defineProperty(a,"textFlow",{get:function(){return this._textFlow},set:function(a){this._textFlow=a||[];this._textFlowChanged=!0;this._textChanged=!1;this._text="";this.invalidateProperties();this.invalidateSize();this.invalidateDisplayList()},enumerable:!0,configurable:!0});Object.defineProperty(a,"textHeight",{get:function(){return null==this._textField?0:this._textField.textHeight},enumerable:!0,configurable:!0});
Object.defineProperty(a,"textWidth",{get:function(){return null==this._textField?0:this._textField.textWidth},enumerable:!0,configurable:!0});a.createChildren=function(){d.prototype.createChildren.call(this);this._textField||this.checkTextField()};a.commitProperties=function(){d.prototype.commitProperties.call(this);this._textField||this.checkTextField();this.allStyleChanged&&(this.allStyleChanged=!1,this.verticalAlignChanged=this.textAlignChanged=this.italicChanged=this.boldChanged=this._sizeChanged=
this.fontFamilyChanged=this.textColorChanged=!0);this.fontFamilyChanged&&(this._textField.fontFamily=this.fontFamily,this.fontFamilyChanged=!1);this._sizeChanged&&(this._textField.size=this.size,this._sizeChanged=!1);this.boldChanged&&(this._textField.bold=this.bold,this.boldChanged=!1);this.italic&&(this._textField.italic=this.italic,this.italicChanged=!1);this.textAlignChanged&&(this._textField.textAlign=this.textAlign,this.textAlignChanged=!1);this.verticalAlignChanged&&(this._textField.verticalAlign=
this.verticalAlign,this.verticalAlignChanged=!1);this.lineSpacingChanged&&(this._textField.lineSpacing=this._lineSpacing,this.lineSpacingChanged=!1);this.textColorChanged&&(this._textField.textColor=this.textColor,this.textColorChanged=!1);this._textChanged&&(this._textField.text=this._text);this._textFlowChanged&&(this._textField.textFlow=this._textFlow);if(this._textChanged||this._textFlowChanged)this._text=this._textField.text,this._textFlow=this._textField.textFlow,this._textFlowChanged=this._textChanged=
!1};a.checkTextField=function(){this._textField||(this._createTextField(),this._textChanged&&(this._textField.text=this._text),this._textFlowChanged&&(this._textField.textFlow=this._textFlow),this.invalidateProperties())};a._createTextField=function(){this._textField=new c.TextField;this._textField.fontFamily=this.fontFamily;this._textField.size=this.size;this._textField.textAlign=this.textAlign;this._textField.verticalAlign=this.verticalAlign;this._textField.lineSpacing=this._lineSpacing;this._textField.textColor=
this.textColor;this._textField.multiline=!0;this._addToDisplayList(this._textField)};a._textFieldChanged=function(){this._text=this._textField.text;this._textFlow=this._textField.textFlow};a.measure=function(){d.prototype.measure.call(this);this.measuredWidth=b.DEFAULT_MEASURED_WIDTH;this.measuredHeight=b.DEFAULT_MEASURED_HEIGHT};a.$updateDisplayList=function(a,b){d.prototype.updateDisplayList.call(this,a,b)};a.updateDisplayList=function(a,b){d.prototype.updateDisplayList.call(this,a,b);this._textField.width=
a;this._textField.height=b};a.dispatchPropertyChangeEvent=function(a,b,c){this.hasEventListener("propertyChange")&&f.PropertyChangeEvent.dispatchPropertyChangeEvent(this,f.PropertyChangeEventKind.UPDATE,a,b,c,this)};b.DEFAULT_MEASURED_WIDTH=160;b.DEFAULT_MEASURED_HEIGHT=22;return b}(f.UIComponent);f.TextBase=e;e.prototype.__class__="egret.gui.TextBase"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(f){var e=function(d){function b(){d.call(this);this._contentHeight=this._contentWidth=0;this._layout=null;this._clipAndEnableScrolling=!1;this._verticalScrollPosition=this._horizontalScrollPosition=0;this.touchEnabled=this._layoutInvalidateSizeFlag=this._layoutInvalidateDisplayListFlag=!1}__extends(b,d);var a=b.prototype;a.createChildren=function(){d.prototype.createChildren.call(this);this._layout||(this.layout=new f.BasicLayout)};Object.defineProperty(a,"contentWidth",{get:function(){return this._contentWidth},
enumerable:!0,configurable:!0});a.setContentWidth=function(a){if(a!=this._contentWidth){var b=this._contentWidth;this._contentWidth=a;this.hasEventListener("propertyChange")&&f.PropertyChangeEvent.dispatchPropertyChangeEvent(this,f.PropertyChangeEventKind.UPDATE,"contentWidth",b,a,this)}};Object.defineProperty(a,"contentHeight",{get:function(){return this._contentHeight},enumerable:!0,configurable:!0});a.setContentHeight=function(a){if(a!=this._contentHeight){var b=this._contentHeight;this._contentHeight=
a;this.hasEventListener("propertyChange")&&f.PropertyChangeEvent.dispatchPropertyChangeEvent(this,f.PropertyChangeEventKind.UPDATE,"contentHeight",b,a,this)}};a.setContentSize=function(a,b){if(a!=this._contentWidth||b!=this._contentHeight)this.setContentWidth(a),this.setContentHeight(b)};Object.defineProperty(a,"layout",{get:function(){return this._layout},set:function(a){this._setLayout(a)},enumerable:!0,configurable:!0});a._setLayout=function(a){if(this._layout!=a){this._layout&&(this._layout.target=
null);if(this._layout=a)this._layout.target=this;this.invalidateSize();this.invalidateDisplayList();this.dispatchEventWith("layoutChanged")}};Object.defineProperty(a,"clipAndEnableScrolling",{get:function(){return this._clipAndEnableScrolling},set:function(a){a!=this._clipAndEnableScrolling&&(this.scrollRect=(this._clipAndEnableScrolling=a)?new c.Rectangle(this._horizontalScrollPosition,this._verticalScrollPosition,this.width,this.height):null)},enumerable:!0,configurable:!0});Object.defineProperty(a,
"horizontalScrollPosition",{get:function(){return this._horizontalScrollPosition},set:function(a){if(a!=this._horizontalScrollPosition){var b=this._horizontalScrollPosition;this._horizontalScrollPosition=a;this.scrollPositionChanged();f.PropertyChangeEvent.dispatchPropertyChangeEvent(this,f.PropertyChangeEventKind.UPDATE,"horizontalScrollPosition",b,a,this)}},enumerable:!0,configurable:!0});Object.defineProperty(a,"verticalScrollPosition",{get:function(){return this._verticalScrollPosition},set:function(a){if(a!=
this._verticalScrollPosition){var b=this._verticalScrollPosition;this._verticalScrollPosition=a;this.scrollPositionChanged();f.PropertyChangeEvent.dispatchPropertyChangeEvent(this,f.PropertyChangeEventKind.UPDATE,"verticalScrollPosition",b,a,this)}},enumerable:!0,configurable:!0});a.scrollPositionChanged=function(){this._clipAndEnableScrolling&&(this.updateScrollRect(this.width,this.height),this._invalidateDisplayListExceptLayout(),this._layout&&this._layout.scrollPositionChanged())};a.updateScrollRect=
function(a,b){var d=this._DO_Props_._scrollRect;this._clipAndEnableScrolling?d?(d.x=this._horizontalScrollPosition,d.y=this._verticalScrollPosition,d.width=a,d.height=b):this._DO_Props_._scrollRect=new c.Rectangle(this._horizontalScrollPosition,this._verticalScrollPosition,a,b):d&&(this._DO_Props_._scrollRect=null)};a.measure=function(){this._layout&&this._layoutInvalidateSizeFlag&&(d.prototype.measure.call(this),this._layout.measure())};a._invalidateDisplayListExceptLayout=function(){d.prototype.invalidateDisplayList.call(this)};
a.invalidateDisplayList=function(){d.prototype.invalidateDisplayList.call(this);this._layoutInvalidateDisplayListFlag=!0};a._childXYChanged=function(){this.invalidateSize();this.invalidateDisplayList()};a._invalidateSizeExceptLayout=function(){d.prototype.invalidateSize.call(this)};a.invalidateSize=function(){d.prototype.invalidateSize.call(this);this._layoutInvalidateSizeFlag=!0};a.updateDisplayList=function(a,b){d.prototype.updateDisplayList.call(this,a,b);this._layoutInvalidateDisplayListFlag&&
this._layout&&(this._layoutInvalidateDisplayListFlag=!1,this._layout.updateDisplayList(a,b),this.updateScrollRect(a,b))};Object.defineProperty(a,"numElements",{get:function(){return-1},enumerable:!0,configurable:!0});a.getElementAt=function(a){return null};a.getElementIndex=function(a){return-1};a.getElementIndicesInView=function(){var a=[],b;if(this.scrollRect)for(b=0;b<this.numChildren;b++){var d=this.getChildAt(b);if(d){var e=new c.Rectangle;e.x=d.layoutBoundsX;e.y=d.layoutBoundsY;e.width=d.layoutBoundsWidth;
e.height=d.layoutBoundsHeight;this.scrollRect.intersects(e)&&a.push(b)}}else for(b=0;b<this.numChildren;b++)a.push(b);return a};a.setVirtualElementIndicesInView=function(a,b){};a.getVirtualElementAt=function(a){return this.getElementAt(a)};return b}(f.UIComponent);f.GroupBase=e;e.prototype.__class__="egret.gui.GroupBase"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(c){var e=function(d){function b(){d.call(this);this._maxDisplayedLines=0;this.lastUnscaledWidth=NaN;this.strokeColorChanged=!1;this._stroke=this._strokeColor=0;this.strokeChanged=!1;this._padding=0;this._paddingBottom=this._paddingTop=this._paddingRight=this._paddingLeft=NaN;this.addEventListener(c.UIEvent.UPDATE_COMPLETE,this.updateCompleteHandler,this)}__extends(b,d);var a=b.prototype;a.updateCompleteHandler=function(a){this.lastUnscaledWidth=NaN};Object.defineProperty(a,
"maxDisplayedLines",{get:function(){return this._maxDisplayedLines},set:function(a){this._maxDisplayedLines!=a&&(this._maxDisplayedLines=a,this.invalidateSize(),this.invalidateDisplayList())},enumerable:!0,configurable:!0});Object.defineProperty(a,"strokeColor",{get:function(){return this._strokeColor},set:function(a){this._setStrokeColor(a)},enumerable:!0,configurable:!0});a._setStrokeColor=function(a){this._strokeColor!=a&&(this._strokeColor=a,this.strokeColorChanged=!0,this.invalidateProperties())};
Object.defineProperty(a,"stroke",{get:function(){return this._stroke},set:function(a){this._stroke!=a&&(this._stroke=a,this.strokeChanged=!0,this.invalidateProperties())},enumerable:!0,configurable:!0});Object.defineProperty(a,"padding",{get:function(){return this._padding},set:function(a){this._padding!=a&&(this._padding=a,this.invalidateSize(),this.invalidateDisplayList())},enumerable:!0,configurable:!0});Object.defineProperty(a,"paddingLeft",{get:function(){return this._paddingLeft},set:function(a){this._paddingLeft!=
a&&(this._paddingLeft=a,this.invalidateSize(),this.invalidateDisplayList())},enumerable:!0,configurable:!0});Object.defineProperty(a,"paddingRight",{get:function(){return this._paddingRight},set:function(a){this._paddingRight!=a&&(this._paddingRight=a,this.invalidateSize(),this.invalidateDisplayList())},enumerable:!0,configurable:!0});Object.defineProperty(a,"paddingTop",{get:function(){return this._paddingTop},set:function(a){this._paddingTop!=a&&(this._paddingTop=a,this.invalidateSize(),this.invalidateDisplayList())},
enumerable:!0,configurable:!0});Object.defineProperty(a,"paddingBottom",{get:function(){return this._paddingBottom},set:function(a){this._paddingBottom!=a&&(this._paddingBottom=a,this.invalidateSize(),this.invalidateDisplayList())},enumerable:!0,configurable:!0});a.commitProperties=function(){d.prototype.commitProperties.call(this);this.strokeColorChanged&&(this._textField.strokeColor=this._strokeColor,this.strokeColorChanged=!1);this.strokeChanged&&(this._textField.stroke=this._stroke,this.strokeChanged=
!1)};a.measure=function(){this._UIC_Props_._invalidatePropertiesFlag&&this.validateProperties();if(this.isSpecialCase())if(isNaN(this.lastUnscaledWidth))this._UIC_Props_._oldPreferWidth=NaN,this._UIC_Props_._oldPreferHeight=NaN;else{this.measureUsingWidth(this.lastUnscaledWidth);return}var a;isNaN(this.explicitWidth)?1E4!=this.maxWidth&&(a=this.maxWidth):a=this.explicitWidth;this.measureUsingWidth(a)};a.isSpecialCase=function(){return 1!=this._maxDisplayedLines&&(!isNaN(this.percentWidth)||!isNaN(this.left)&&
!isNaN(this.right))&&isNaN(this.explicitHeight)&&isNaN(this.percentHeight)};a.measureUsingWidth=function(a){this._textChanged&&(this._textField.text=this._text);this._textFlowChanged&&(this._textField.textFlow=this._textFlow);var b=isNaN(this._padding)?0:this._padding,c=isNaN(this._paddingLeft)?b:this._paddingLeft,d=isNaN(this._paddingRight)?b:this._paddingRight,e=isNaN(this._paddingTop)?b:this._paddingTop,b=isNaN(this._paddingBottom)?b:this._paddingBottom;this._textField.width=NaN;this._textField.height=
NaN;isNaN(a)||(this._textField.width=a-c-d);this.measuredWidth=Math.ceil(this._textField.measuredWidth);this.measuredHeight=Math.ceil(this._textField.measuredHeight);0<this._maxDisplayedLines&&this._textField.numLines>this._maxDisplayedLines&&(a=this._textField.lineSpacing,this.measuredHeight=(this._textField.size+a)*this._maxDisplayedLines-a);this.measuredWidth+=c+d;this.measuredHeight+=e+b};a.updateDisplayList=function(a,b){this.$updateDisplayList(a,b);var c=isNaN(this._padding)?0:this._padding,
d=isNaN(this._paddingLeft)?c:this._paddingLeft,e=isNaN(this._paddingRight)?c:this._paddingRight,f=isNaN(this._paddingTop)?c:this._paddingTop,c=isNaN(this._paddingBottom)?c:this._paddingBottom;this._textField.x=d;this._textField.y=f;if(this.isSpecialCase()){var k=isNaN(this.lastUnscaledWidth)||this.lastUnscaledWidth!=a;this.lastUnscaledWidth=a;if(k){this._UIC_Props_._oldPreferWidth=NaN;this._UIC_Props_._oldPreferHeight=NaN;this.invalidateSize();return}}this._UIC_Props_._invalidateSizeFlag&&this.validateSize();
this._textField.visible||(this._textField.visible=!0);this._textField.width=a-d-e;d=b-f-c;this._textField.height=d;0<this._maxDisplayedLines&&this._textField.numLines>this._maxDisplayedLines&&(e=this._textField.lineSpacing,this._textField.height=Math.min(d,(this._textField.size+e)*this._maxDisplayedLines-e))};return b}(c.TextBase);c.Label=e;e.prototype.__class__="egret.gui.Label"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(f){var e=function(d){function b(){d.call(this);this.elementsContentChanged=this.createChildrenCalled=!1;this._elementsContent=[]}__extends(b,d);var a=b.prototype;a.createChildren=function(){d.prototype.createChildren.call(this);this.createChildrenCalled=!0;this.elementsContentChanged&&(this.elementsContentChanged=!1,this.setElementsContent(this._elementsContent))};a._getElementsContent=function(){return this._elementsContent};Object.defineProperty(a,"elementsContent",{set:function(a){null==
a&&(a=[]);if(a!=this._elementsContent)if(this.createChildrenCalled)this.setElementsContent(a);else{this.elementsContentChanged=!0;for(var b=this._elementsContent.length-1;0<=b;b--)this._elementRemoved(this._elementsContent[b],b);this._elementsContent=a}},enumerable:!0,configurable:!0});a.setElementsContent=function(a){var b;for(b=this._elementsContent.length-1;0<=b;b--)this._elementRemoved(this._elementsContent[b],b);this._elementsContent=a.concat();a=this._elementsContent.length;for(b=0;b<a;b++){var c=
this._elementsContent[b];c.parent&&"removeElement"in c.parent?c.parent.removeElement(c):c.owner&&"removeElement"in c.owner&&c.owner.removeElement(c);this._elementAdded(c,b)}};Object.defineProperty(a,"numElements",{get:function(){return this._elementsContent.length},enumerable:!0,configurable:!0});a.getElementAt=function(a){this.checkForRangeError(a);return this._elementsContent[a]};a.checkForRangeError=function(a,b){void 0===b&&(b=!1);var d=this._elementsContent.length-1;b&&d++;(0>a||a>d)&&c.$error(3011,
a)};a.addElement=function(a){var b=this.numElements;a.parent==this&&(b=this.numElements-1);return this.addElementAt(a,b)};a.addElementAt=function(a,b){if(a==this)return a;this.checkForRangeError(b,!0);var c=a.owner;if(c==this||a.parent==this)return this.setElementIndex(a,b),a;c&&"removeElement"in c&&a.owner.removeElement(a);this._elementsContent.splice(b,0,a);this.elementsContentChanged||this._elementAdded(a,b);return a};a.removeElement=function(a){return this.removeElementAt(this.getElementIndex(a))};
a.removeElementAt=function(a){this.checkForRangeError(a);var b=this._elementsContent[a];this.elementsContentChanged||this._elementRemoved(b,a);this._elementsContent.splice(a,1);return b};a.removeAllElements=function(){for(var a=this.numElements-1;0<=a;a--)this.removeElementAt(a)};a.getElementIndex=function(a){return this._elementsContent.indexOf(a)};a.setElementIndex=function(a,b){this.checkForRangeError(b);var c=this.getElementIndex(a);-1!=c&&c!=b&&(this.elementsContentChanged||this._elementRemoved(a,
c,!1),this._elementsContent.splice(c,1),this._elementsContent.splice(b,0,a),this.elementsContentChanged||this._elementAdded(a,b,!1))};a.swapElements=function(a,b){this.swapElementsAt(this.getElementIndex(a),this.getElementIndex(b))};a.swapElementsAt=function(a,b){this.checkForRangeError(a);this.checkForRangeError(b);if(a>b){var c=b;b=a;a=c}else if(a==b)return;var c=this._elementsContent,d=c[a],e=c[b];this.elementsContentChanged||(this._elementRemoved(d,a,!1),this._elementRemoved(e,b,!1));c[a]=e;c[b]=
d;this.elementsContentChanged||(this._elementAdded(e,a,!1),this._elementAdded(d,b,!1))};a._elementAdded=function(a,b,d){void 0===d&&(d=!0);a instanceof c.DisplayObject&&this._addToDisplayListAt(a,b,d);d&&this.hasEventListener(f.ElementExistenceEvent.ELEMENT_ADD)&&f.ElementExistenceEvent.dispatchElementExistenceEvent(this,f.ElementExistenceEvent.ELEMENT_ADD,a,b);this.invalidateSize();this.invalidateDisplayList()};a._elementRemoved=function(a,b,d){void 0===d&&(d=!0);d&&this.hasEventListener(f.ElementExistenceEvent.ELEMENT_REMOVE)&&
f.ElementExistenceEvent.dispatchElementExistenceEvent(this,f.ElementExistenceEvent.ELEMENT_REMOVE,a,b);a instanceof c.DisplayObject&&a.parent==this&&this._removeFromDisplayList(a,d);this.invalidateSize();this.invalidateDisplayList()};a.addChild=function(a){c.$error(3004,c.getString(3003));return null};a.addChildAt=function(a,b){c.$error(3005,c.getString(3003));return null};a.removeChild=function(a){c.$error(3006,c.getString(3003));return null};a.removeChildAt=function(a){c.$error(3007,c.getString(3003));
return null};a.setChildIndex=function(a,b){c.$error(3008,c.getString(3003))};a.swapChildren=function(a,b){c.$error(3009,c.getString(3003))};a.swapChildrenAt=function(a,b){c.$error(3010,c.getString(3003))};return b}(f.GroupBase);f.Group=e;e.prototype.__class__="egret.gui.Group"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(f){var e=function(d){function b(){d.call(this);this.maxWidth=1E4;this.minWidth=0;this.maxHeight=1E4;this.minHeight=0;this._hasWidthSet=!1;this._width=NaN;this._hasHeightSet=!1;this._height=NaN;this.measuredHeight=this.measuredWidth=0;this._initialized=!1;this._hostComponent=null;this._elementsContent=[];this.skinLayout=null;this._states=[];this.playStateTransition=!0;this.currentStateChanged=!1;this.requestedCurrentState=this._currentState=null;this.initialized=!1;this.skinLayout=
new f.SkinBasicLayout;this.skinLayout.target=this}__extends(b,d);var a=b.prototype;Object.defineProperty(a,"width",{get:function(){return this._width},set:function(a){this._width!=a&&(this._width=a,this._hasWidthSet=c.NumberUtils.isNumber(a))},enumerable:!0,configurable:!0});Object.defineProperty(a,"height",{get:function(){return this._height},set:function(a){this._height!=a&&(this._height=a,this._hasHeightSet=c.NumberUtils.isNumber(a))},enumerable:!0,configurable:!0});Object.defineProperty(a,"preferredWidth",
{get:function(){return this._hasWidthSet?this._width:this.measuredWidth},enumerable:!0,configurable:!0});Object.defineProperty(a,"preferredHeight",{get:function(){return this._hasHeightSet?this._height:this.measuredHeight},enumerable:!0,configurable:!0});a.createChildren=function(){};Object.defineProperty(a,"hostComponent",{get:function(){return this._hostComponent},set:function(a){this._setHostComponent(a)},enumerable:!0,configurable:!0});a._setHostComponent=function(a){if(this._hostComponent!=a){var b;
if(this._hostComponent)for(b=this._elementsContent.length-1;0<=b;b--)this._elementRemoved(this._elementsContent[b],b);this._hostComponent=a;this._initialized||(this._initialized=!0,this.createChildren());if(this._hostComponent){a=this._elementsContent.length;for(b=0;b<a;b++)this._elementAdded(this._elementsContent[b],b);this.initializeStates();this.currentStateChanged&&this.commitCurrentState()}}};a._getElementsContent=function(){return this._elementsContent};Object.defineProperty(a,"elementsContent",
{set:function(a){null==a&&(a=[]);if(a!=this._elementsContent)if(this._hostComponent){var b;for(b=this._elementsContent.length-1;0<=b;b--)this._elementRemoved(this._elementsContent[b],b);this._elementsContent=a.concat();a=this._elementsContent.length;for(b=0;b<a;b++){var c=this._elementsContent[b];c.parent&&"removeElement"in c.parent?c.parent.removeElement(c):c.owner&&"removeElement"in c.owner&&c.owner.removeElement(c);this._elementAdded(c,b)}}else this._elementsContent=a.concat()},enumerable:!0,configurable:!0});
Object.defineProperty(a,"numElements",{get:function(){return this._elementsContent.length},enumerable:!0,configurable:!0});a.getElementAt=function(a){this.checkForRangeError(a);return this._elementsContent[a]};a.checkForRangeError=function(a,b){void 0===b&&(b=!1);var d=this._elementsContent.length-1;b&&d++;(0>a||a>d)&&c.$error(3011,a)};a.addElement=function(a){var b=this.numElements;a.owner==this&&(b=this.numElements-1);return this.addElementAt(a,b)};a.addElementAt=function(a,b){this.checkForRangeError(b,
!0);var c=a.owner;if(c==this)return this.setElementIndex(a,b),a;c&&"removeElement"in c&&c.removeElement(a);this._elementsContent.splice(b,0,a);this._hostComponent?this._elementAdded(a,b):a.ownerChanged(this);return a};a.removeElement=function(a){return this.removeElementAt(this.getElementIndex(a))};a.removeElementAt=function(a){this.checkForRangeError(a);var b=this._elementsContent[a];this._hostComponent?this._elementRemoved(b,a):b.ownerChanged(null);this._elementsContent.splice(a,1);return b};a.getElementIndex=
function(a){return this._elementsContent.indexOf(a)};a.setElementIndex=function(a,b){this.checkForRangeError(b);var c=this.getElementIndex(a);-1!=c&&c!=b&&(this._hostComponent&&this._elementRemoved(a,c,!1),this._elementsContent.splice(c,1),this._elementsContent.splice(b,0,a),this._hostComponent&&this._elementAdded(a,b,!1))};a._elementAdded=function(a,b,d){void 0===d&&(d=!0);a.ownerChanged(this);a instanceof c.DisplayObject&&this._hostComponent._addToDisplayListAt(a,b,d);d&&this.hasEventListener(f.ElementExistenceEvent.ELEMENT_ADD)&&
f.ElementExistenceEvent.dispatchElementExistenceEvent(this,f.ElementExistenceEvent.ELEMENT_ADD,a,b);this._hostComponent.invalidateSize();this._hostComponent.invalidateDisplayList()};a._elementRemoved=function(a,b,d){void 0===d&&(d=!0);d&&this.hasEventListener(f.ElementExistenceEvent.ELEMENT_REMOVE)&&f.ElementExistenceEvent.dispatchElementExistenceEvent(this,f.ElementExistenceEvent.ELEMENT_REMOVE,a,b);a instanceof c.DisplayObject&&a.parent==this._hostComponent&&this._hostComponent._removeFromDisplayList(a,
d);a.ownerChanged(null);this._hostComponent.invalidateSize();this._hostComponent.invalidateDisplayList()};a.measure=function(){this.skinLayout.measure();this.measuredWidth<this.minWidth&&(this.measuredWidth=this.minWidth);this.measuredWidth>this.maxWidth&&(this.measuredWidth=this.maxWidth);this.measuredHeight<this.minHeight&&(this.measuredHeight=this.minHeight);this.measuredHeight>this.maxHeight&&(this.measuredHeight=this.maxHeight)};a.updateDisplayList=function(a,b){this.skinLayout.updateDisplayList(a,
b)};Object.defineProperty(a,"states",{get:function(){return this._states},set:function(a){this._setStates(a)},enumerable:!0,configurable:!0});a._setStates=function(a){a||(a=[]);if("string"==typeof a[0])for(var b=a.length,c=0;c<b;c++){var d=new f.State(a[c],[]);a[c]=d}this._states=a;this.currentStateChanged=!0;this.requestedCurrentState=this._currentState;this.hasState(this.requestedCurrentState)||(this.requestedCurrentState=this.getDefaultState())};Object.defineProperty(a,"transitions",{get:function(){return this._transitions},
set:function(a){this._transitions=a},enumerable:!0,configurable:!0});Object.defineProperty(a,"currentState",{get:function(){return this.currentStateChanged?this.requestedCurrentState:this._currentState?this._currentState:this.getDefaultState()},set:function(a){a||(a=this.getDefaultState());a!=this.currentState&&a&&this.currentState&&(this.requestedCurrentState=a,this.currentStateChanged=!0,this._hostComponent&&this.commitCurrentState())},enumerable:!0,configurable:!0});a.hasState=function(a){return null!=
this.getState(a)};a.getDefaultState=function(){return 0<this._states.length?this._states[0].name:null};a.commitCurrentState=function(){if(this.currentStateChanged){this.currentStateChanged=!1;this.getState(this.requestedCurrentState)||(this.requestedCurrentState=this.getDefaultState());var a;this.playStateTransition&&(a=this.getTransition(this._currentState,this.requestedCurrentState));var b,c;this._currentTransition&&(this._currentTransition.effect.removeEventListener(f.EffectEvent.EFFECT_END,this.transition_effectEndHandler,
this),a&&this._currentTransition.interruptionBehavior==f.InterruptionBehavior.STOP?(c=this._currentTransition.effect,c.stop()):(this._currentTransition.autoReverse&&this.transitionFromState==this.requestedCurrentState&&this.transitionToState==this._currentState&&(b=0==this._currentTransition.effect.duration?0:this._currentTransition.effect.playheadTime/this.getTotalDuration(this._currentTransition.effect)),this._currentTransition.effect.end()),this._currentTransition=null);c=this._currentState?this._currentState:
"";this.hasEventListener(f.StateChangeEvent.CURRENT_STATE_CHANGING)&&f.StateChangeEvent.dispatchStateChangeEvent(this,f.StateChangeEvent.CURRENT_STATE_CHANGING,c,this.requestedCurrentState?this.requestedCurrentState:"");this.removeState(this._currentState);(this._currentState=this.requestedCurrentState)&&this.applyState(this._currentState);this.hasEventListener(f.StateChangeEvent.CURRENT_STATE_CHANGE)&&f.StateChangeEvent.dispatchStateChangeEvent(this,f.StateChangeEvent.CURRENT_STATE_CHANGE,c,this._currentState?
this._currentState:"");if(a){var d=a&&a.autoReverse&&(a.toState==c||a.fromState==this._currentState);f.UIGlobals._layoutManager.validateNow();this._currentTransition=a;this.transitionFromState=c;this.transitionToState=this._currentState;a.effect.addEventListener(f.EffectEvent.EFFECT_END,this.transition_effectEndHandler,this);a.effect.play(null,d);isNaN(b)||0==a.effect.duration||(a.effect.playheadTime=(1-b)*this.getTotalDuration(a.effect))}else this.hasEventListener(f.StateChangeEvent.STATE_CHANGE_COMPLETE)&&
f.StateChangeEvent.dispatchStateChangeEvent(this,f.StateChangeEvent.STATE_CHANGE_COMPLETE,c,this._currentState)}};a.transition_effectEndHandler=function(a){this._currentTransition=null;this.hasEventListener(f.StateChangeEvent.STATE_CHANGE_COMPLETE)&&f.StateChangeEvent.dispatchStateChangeEvent(this,f.StateChangeEvent.STATE_CHANGE_COMPLETE,this.transitionFromState,this.transitionToState)};a.getState=function(a){if(!a)return null;for(var b=this._states,c=b.length,d=0;d<c;d++){var e=b[d];if(e.name==a)return e}return null};
a.removeState=function(a){if(a=this.getState(a)){a=a.overrides;for(var b=a.length-1;0<=b;b--)a[b].remove(this)}};a.applyState=function(a){if(a=this.getState(a)){a=a.overrides;for(var b=a.length,c=0;c<b;c++)a[c].apply(this)}};a.initializeStates=function(){if(!this.initialized){this.initialized=!0;for(var a=this._states,b=a.length,c=0;c<b;c++)a[c].initialize(this)}};a.getTransition=function(a,b){var c=null,d=0;if(!this.transitions)return null;a||(a="");b||(b="");for(var e=0;e<this.transitions.length;e++){var f=
this.transitions[e];if("*"==f.fromState&&"*"==f.toState&&1>d)c=f,d=1;else if(f.toState==a&&"*"==f.fromState&&f.autoReverse&&2>d)c=f,d=2;else if("*"==f.toState&&f.fromState==b&&f.autoReverse&&3>d)c=f,d=3;else if(f.toState==a&&f.fromState==b&&f.autoReverse&&4>d)c=f,d=4;else if(f.fromState==a&&"*"==f.toState&&5>d)c=f,d=5;else if("*"==f.fromState&&f.toState==b&&6>d)c=f,d=6;else if(f.fromState==a&&f.toState==b&&7>d){c=f;break}}c&&!c.effect&&(c=null);return c};a.getTotalDuration=function(a){var b=0,b=a instanceof
f.CompositeEffect?a.compositeDuration:a.duration,c="repeatCount"in a?a.repeatCount:0;return b=b*c+("repeatDelay"in a?a.repeatDelay:0)*(c-1)+("startDelay"in a?a.startDelay:0)};return b}(c.EventDispatcher);f.Skin=e;e.prototype.__class__="egret.gui.Skin"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(f){var e=function(d){function b(a,b,e){void 0===a&&(a=null);void 0===b&&(b=null);void 0===e&&(e=null);d.call(this);this.labelDisplay=new c.gui.Label;this.iconDisplay=new c.gui.UIAsset;var f={};f.up=a;f.down=b;f.disabled=e;this.stateMap=f;this._setStates(["up","down","disabled"])}__extends(b,d);var a=b.prototype;Object.defineProperty(a,"skinParts",{get:function(){return b._skinParts},enumerable:!0,configurable:!0});a.createChildren=function(){d.prototype.createChildren.call(this);
var a=new f.UIAsset;a.left=a.top=a.bottom=a.right=0;this.addElement(a);this.backgroundAsset=a;this.iconDisplay.includeInLayout=!1;this.addElement(this.iconDisplay);this.labelDisplay.includeInLayout=!1;this.labelDisplay.paddingLeft=5;this.labelDisplay.paddingRight=5;this.addElement(this.labelDisplay)};a.commitCurrentState=function(){d.prototype.commitCurrentState.call(this);var a=this.currentState;this.stateMap[a]&&(this.backgroundAsset.source=this.stateMap[a])};a.measure=function(){d.prototype.measure.call(this);
var a=this.iconDisplay.preferredWidth+this.labelDisplay.preferredWidth+20,b=Math.max(this.iconDisplay.preferredHeight,this.labelDisplay.preferredHeight)+20;a>this.measuredWidth&&(a<this.minWidth&&(a=this.minWidth),a>this.maxWidth&&(a=this.maxWidth),this.measuredWidth=a);b>this.measuredHeight&&(b<this.minHeight&&(b=this.minHeight),b>this.maxHeight&&(b=this.maxHeight),this.measuredHeight=b)};a.updateDisplayList=function(a,b){d.prototype.updateDisplayList.call(this,a,b);var c=this.iconDisplay.layoutBoundsWidth,
e=this.labelDisplay.layoutBoundsHeight,f=0.5*(a-c-this.labelDisplay.layoutBoundsWidth);this.iconDisplay.setLayoutBoundsPosition(f,0.5*(b-this.iconDisplay.layoutBoundsHeight));this.labelDisplay.setLayoutBoundsPosition(f+c,0.5*(b-e))};b._skinParts=["labelDisplay","iconDisplay"];return b}(f.Skin);f.ButtonSkin=e;e.prototype.__class__="egret.gui.ButtonSkin"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(c){var e=function(d){function b(){d.call(this);this._placeHolderGroup=this.contentGroup=null;this.contentGroupProperties={}}__extends(b,d);var a=b.prototype;a._getCurrentContentGroup=function(){return null==this.contentGroup?(null==this._placeHolderGroup&&(this._placeHolderGroup=new c.Group,this._placeHolderGroup.visible=!1,this._addToDisplayList(this._placeHolderGroup)),this._placeHolderGroup.addEventListener(c.ElementExistenceEvent.ELEMENT_ADD,this._contentGroup_elementAddedHandler,
this),this._placeHolderGroup.addEventListener(c.ElementExistenceEvent.ELEMENT_REMOVE,this._contentGroup_elementRemovedHandler,this),this._placeHolderGroup):this.contentGroup};Object.defineProperty(a,"elementsContent",{set:function(a){this._getCurrentContentGroup().elementsContent=a},enumerable:!0,configurable:!0});Object.defineProperty(a,"numElements",{get:function(){return this._getCurrentContentGroup().numElements},enumerable:!0,configurable:!0});a.getElementAt=function(a){return this._getCurrentContentGroup().getElementAt(a)};
a.addElement=function(a){return this._getCurrentContentGroup().addElement(a)};a.addElementAt=function(a,b){return this._getCurrentContentGroup().addElementAt(a,b)};a.removeElement=function(a){return this._getCurrentContentGroup().removeElement(a)};a.removeElementAt=function(a){return this._getCurrentContentGroup().removeElementAt(a)};a.removeAllElements=function(){this._getCurrentContentGroup().removeAllElements()};a.getElementIndex=function(a){return this._getCurrentContentGroup().getElementIndex(a)};
a.setElementIndex=function(a,b){this._getCurrentContentGroup().setElementIndex(a,b)};a.swapElements=function(a,b){this._getCurrentContentGroup().swapElements(a,b)};a.swapElementsAt=function(a,b){this._getCurrentContentGroup().swapElementsAt(a,b)};Object.defineProperty(a,"layout",{get:function(){return null!=this.contentGroup?this.contentGroup.layout:this.contentGroupProperties.layout},set:function(a){null!=this.contentGroup?this.contentGroup.layout=a:this.contentGroupProperties.layout=a},enumerable:!0,
configurable:!0});a.partAdded=function(a,b){d.prototype.partAdded.call(this,a,b);if(b==this.contentGroup){void 0!==this.contentGroupProperties.layout&&(this.contentGroup.layout=this.contentGroupProperties.layout,this.contentGroupProperties={});if(this._placeHolderGroup){this._placeHolderGroup.removeEventListener(c.ElementExistenceEvent.ELEMENT_ADD,this._contentGroup_elementAddedHandler,this);this._placeHolderGroup.removeEventListener(c.ElementExistenceEvent.ELEMENT_REMOVE,this._contentGroup_elementRemovedHandler,
this);for(var e=this._placeHolderGroup._getElementsContent().concat(),n=this._placeHolderGroup.numElements;0<n;n--){var l=this._placeHolderGroup.removeElementAt(0);l.ownerChanged(null)}this._removeFromDisplayList(this._placeHolderGroup);this.contentGroup.elementsContent=e;for(n=e.length-1;0<=n;n--)l=e[n],l.ownerChanged(this);this._placeHolderGroup=null}this.contentGroup.addEventListener(c.ElementExistenceEvent.ELEMENT_ADD,this._contentGroup_elementAddedHandler,this);this.contentGroup.addEventListener(c.ElementExistenceEvent.ELEMENT_REMOVE,
this._contentGroup_elementRemovedHandler,this)}};a.partRemoved=function(a,b){d.prototype.partRemoved.call(this,a,b);if(b==this.contentGroup&&(this.contentGroup.removeEventListener(c.ElementExistenceEvent.ELEMENT_ADD,this._contentGroup_elementAddedHandler,this),this.contentGroup.removeEventListener(c.ElementExistenceEvent.ELEMENT_REMOVE,this._contentGroup_elementRemovedHandler,this),this.contentGroupProperties.layout=this.contentGroup.layout,this.contentGroup.layout=null,0<this.contentGroup.numElements)){for(this._placeHolderGroup=
new c.Group;0<this.contentGroup.numElements;)this._placeHolderGroup.addElement(this.contentGroup.getElementAt(0));this._placeHolderGroup.addEventListener(c.ElementExistenceEvent.ELEMENT_ADD,this._contentGroup_elementAddedHandler,this);this._placeHolderGroup.addEventListener(c.ElementExistenceEvent.ELEMENT_REMOVE,this._contentGroup_elementRemovedHandler,this)}};a._contentGroup_elementAddedHandler=function(a){a.element.ownerChanged(this);this.dispatchEvent(a)};a._contentGroup_elementRemovedHandler=
function(a){a.element.ownerChanged(null);this.dispatchEvent(a)};return b}(c.SkinnableComponent);c.SkinnableContainer=e;e.prototype.__class__="egret.gui.SkinnableContainer"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(f){var e=function(d){function b(a,b,c){void 0===b&&(b=!1);void 0===c&&(c=!1);d.call(this,a,b,c)}__extends(b,d);b.dispatchUIEvent=function(a,g){c.Event._dispatchByTarget(b,a,g)};b.INITIALIZE="initialize";b.CREATION_COMPLETE="creationComplete";b.UPDATE_COMPLETE="updateComplete";b.BUTTON_DOWN="buttonDown";b.CHANGE_END="changeEnd";b.CHANGE_START="changeStart";b.CHANGING="changing";b.VALUE_COMMIT="valueCommit";b.SKIN_CHANGED="skinChanged";b.CONTENT_CHANGED="contentChanged";b.OPEN=
"open";b.CLOSE="close";b.PLAY_COMPLETE="playComplete";return b}(c.Event);f.UIEvent=e;e.prototype.__class__="egret.gui.UIEvent"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(f){var e=function(d){function b(a,b,c,e,f,l,h,k){void 0===b&&(b=!1);void 0===c&&(c=!1);void 0===e&&(e=null);void 0===f&&(f=null);void 0===l&&(l=null);void 0===h&&(h=null);void 0===k&&(k=null);d.call(this,a,b,c);this.source=this.property=this.oldValue=this.newValue=this.kind=null;this.kind=e;this.property=f;this.oldValue=l;this.newValue=h;this.source=k}__extends(b,d);b.dispatchPropertyChangeEvent=function(a,g,d,e,f,l){void 0===g&&(g=null);void 0===d&&(d=null);void 0===e&&(e=
null);void 0===f&&(f=null);void 0===l&&(l=null);var h=c.Event._getPropertyData(b);h.kind=g;h.property=d;h.oldValue=e;h.newValue=f;h.source=l;c.Event._dispatchByTarget(b,a,b.PROPERTY_CHANGE,h)};b.PROPERTY_CHANGE="propertyChange";return b}(c.Event);f.PropertyChangeEvent=e;e.prototype.__class__="egret.gui.PropertyChangeEvent"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(c){var e=function(){function c(){}c.UPDATE="update";c.DELETE="delete";return c}();c.PropertyChangeEventKind=e;e.prototype.__class__="egret.gui.PropertyChangeEventKind"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(f){var e=function(d){function b(a,b,c,e,f){void 0===b&&(b=NaN);void 0===c&&(c=NaN);void 0===e&&(e=!1);void 0===f&&(f=!1);d.call(this,a,e,f);this.oldY=this.oldX=NaN;this.oldX=b;this.oldY=c}__extends(b,d);b.dispatchMoveEvent=function(a,g,d){void 0===g&&(g=NaN);void 0===d&&(d=NaN);var e=c.Event._getPropertyData(b);e.oldX=g;e.oldY=d;c.Event._dispatchByTarget(b,a,b.MOVE,e)};b.MOVE="move";return b}(c.Event);f.MoveEvent=e;e.prototype.__class__="egret.gui.MoveEvent"})(c.gui||(c.gui=
{}))})(egret||(egret={}));
(function(c){(function(f){var e=function(d){function b(a,b,c,e,f){void 0===b&&(b=NaN);void 0===c&&(c=NaN);void 0===e&&(e=!1);void 0===f&&(f=!1);d.call(this,a,e,f);this.oldWidth=this.oldHeight=NaN;this.oldWidth=b;this.oldHeight=c}__extends(b,d);b.dispatchResizeEvent=function(a,g,d){void 0===g&&(g=NaN);void 0===d&&(d=NaN);var e=c.Event._getPropertyData(b);e.oldWidth=g;e.oldHeight=d;c.Event._dispatchByTarget(b,a,b.RESIZE,e)};b.RESIZE="resize";return b}(c.Event);f.ResizeEvent=e;e.prototype.__class__=
"egret.gui.ResizeEvent"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(f){var e=function(d){function b(a,b,c,e,f){void 0===b&&(b=!1);void 0===c&&(c=!1);void 0===e&&(e=null);void 0===f&&(f=null);d.call(this,a,b,c);this.partName=this.instance=null;this.partName=e;this.instance=f}__extends(b,d);b.dispatchSkinPartEvent=function(a,g,d,e){void 0===d&&(d=null);void 0===e&&(e=null);var f=c.Event._getPropertyData(b);f.partName=d;f.instance=e;c.Event._dispatchByTarget(b,a,g,f)};b.PART_ADDED="partAdded";b.PART_REMOVED="partRemoved";return b}(c.Event);f.SkinPartEvent=
e;e.prototype.__class__="egret.gui.SkinPartEvent"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(f){var e=function(d){function b(a,b,c,e,f){void 0===b&&(b=!1);void 0===c&&(c=!1);void 0===e&&(e=null);void 0===f&&(f=-1);d.call(this,a,b,c);this.index=NaN;this.element=null;this.element=e;this.index=f}__extends(b,d);b.dispatchElementExistenceEvent=function(a,g,d,e){void 0===d&&(d=null);void 0===e&&(e=-1);var f=c.Event._getPropertyData(b);f.element=d;f.index=e;c.Event._dispatchByTarget(b,a,g,f)};b.ELEMENT_ADD="elementAdd";b.ELEMENT_REMOVE="elementRemove";return b}(c.Event);f.ElementExistenceEvent=
e;e.prototype.__class__="egret.gui.ElementExistenceEvent"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(f){var e=function(d){function b(a,b,c,e,f){void 0===b&&(b=!1);void 0===c&&(c=!1);void 0===e&&(e=null);void 0===f&&(f=null);d.call(this,a,b,c);this.oldState=this.newState=null;this.oldState=e;this.newState=f}__extends(b,d);b.dispatchStateChangeEvent=function(a,g,d,e){void 0===d&&(d=null);void 0===e&&(e=null);var f=c.Event._getPropertyData(b);f.oldState=d;f.newState=e;c.Event._dispatchByTarget(b,a,g,f)};b.CURRENT_STATE_CHANGE="currentStateChange";b.CURRENT_STATE_CHANGING="currentStateChanging";
b.STATE_CHANGE_COMPLETE="stateChangeComplete";return b}(c.Event);f.StateChangeEvent=e;e.prototype.__class__="egret.gui.StateChangeEvent"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(f){var e=function(c){function b(a,b,e,f){void 0===b&&(b=!1);void 0===e&&(e=!1);void 0===f&&(f=null);c.call(this,a,b,e);this.effectInstance=f}__extends(b,c);b.EFFECT_END="effectEnd";b.EFFECT_STOP="effectStop";b.EFFECT_START="effectStart";b.EFFECT_REPEAT="effectRepeat";b.EFFECT_UPDATE="effectUpdate";return b}(c.Event);f.EffectEvent=e;e.prototype.__class__="egret.gui.EffectEvent"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(f){var e=function(c){function b(){c.call(this);this._target=null;this._useVirtualLayout=!1;this._typicalLayoutRect=null}__extends(b,c);var a=b.prototype;Object.defineProperty(a,"target",{get:function(){return this._target},set:function(a){this._target!=a&&(this._target=a,this.clearVirtualLayoutCache())},enumerable:!0,configurable:!0});Object.defineProperty(a,"useVirtualLayout",{get:function(){return this._useVirtualLayout},set:function(a){this._useVirtualLayout!=a&&(this._useVirtualLayout=
a,this.dispatchEventWith("useVirtualLayoutChanged"),this._useVirtualLayout&&!a&&this.clearVirtualLayoutCache(),this.target&&this.target.invalidateDisplayList())},enumerable:!0,configurable:!0});Object.defineProperty(a,"typicalLayoutRect",{get:function(){return this._typicalLayoutRect},set:function(a){this._typicalLayoutRect!=a&&(this._typicalLayoutRect=a,this.target&&this.target.invalidateSize())},enumerable:!0,configurable:!0});a.scrollPositionChanged=function(){};a.clearVirtualLayoutCache=function(){};
a.elementAdded=function(a){};a.elementRemoved=function(a){};a.measure=function(){};a.updateDisplayList=function(a,b){};return b}(c.EventDispatcher);f.LayoutBase=e;e.prototype.__class__="egret.gui.LayoutBase"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){(function(f){var e=function(d){function b(){d.call(this);this._mouseWheelSpeed=20}__extends(b,d);var a=b.prototype;Object.defineProperty(a,"useVirtualLayout",{set:function(a){},enumerable:!0,configurable:!0});Object.defineProperty(a,"mouseWheelSpeed",{get:function(){return this._mouseWheelSpeed},set:function(a){0==a&&(a=1);this._mouseWheelSpeed=a},enumerable:!0,configurable:!0});a.getElementBoundsLeftOfScrollRect=function(a){var b=new c.Rectangle;b.x=a.x-this._mouseWheelSpeed;b.right=
a.x;return b};a.getElementBoundsRightOfScrollRect=function(a){var b=new c.Rectangle;b.x=a.right;b.right=a.right+this._mouseWheelSpeed;return b};a.getElementBoundsAboveScrollRect=function(a){var b=new c.Rectangle;b.y=a.y-this._mouseWheelSpeed;b.bottom=a.y;return b};a.getElementBoundsBelowScrollRect=function(a){var b=new c.Rectangle;b.y=a.bottom;b.bottom=a.bottom+this._mouseWheelSpeed;return b};a.measure=function(){d.prototype.measure.call(this);if(null!=this.target){for(var a=0,b=0,c=this.target.numElements,
e=0;e<c;e++){var f=this.target.getElementAt(e);if(f&&f.includeInLayout){var h=f.horizontalCenter,k=f.verticalCenter,m=f.left,p=f.right,r=f.top,s=f.bottom;isNaN(m)||isNaN(p)?isNaN(h)?isNaN(m)&&isNaN(p)?h=f.preferredX:(h=isNaN(m)?0:m,h+=isNaN(p)?0:p):h=2*Math.abs(h):h=m+p;isNaN(r)||isNaN(s)?isNaN(k)?isNaN(r)&&isNaN(s)?k=f.preferredY:(k=isNaN(r)?0:r,k+=isNaN(s)?0:s):k=2*Math.abs(k):k=r+s;s=f.preferredHeight;a=Math.ceil(Math.max(a,h+f.preferredWidth));b=Math.ceil(Math.max(b,k+s))}}this.target.measuredWidth=
a;this.target.measuredHeight=b}};a.updateDisplayList=function(a,b){d.prototype.updateDisplayList.call(this,a,b);if(null!=this.target){for(var c=this.target.numElements,e=0,f=0,h=0;h<c;h++){var k=this.target.getElementAt(h);if(null!=k&&k.includeInLayout){var m=k.horizontalCenter,p=k.verticalCenter,r=k.left,s=k.right,t=k.top,v=k.bottom,x=k.percentWidth,w=k.percentHeight,z=NaN,y=NaN;isNaN(r)||isNaN(s)?isNaN(x)||(z=Math.round(a*Math.min(0.01*x,1))):z=a-s-r;isNaN(t)||isNaN(v)?isNaN(w)||(y=Math.round(b*
Math.min(0.01*w,1))):y=b-v-t;k.setLayoutBoundsSize(z,y);x=k.layoutBoundsWidth;w=k.layoutBoundsHeight;y=z=NaN;z=isNaN(m)?isNaN(r)?isNaN(s)?k.layoutBoundsX:a-x-s:r:Math.round((a-x)/2+m);y=isNaN(p)?isNaN(t)?isNaN(v)?k.layoutBoundsY:b-w-v:t:Math.round((b-w)/2+p);k.setLayoutBoundsPosition(z,y);e=Math.max(e,z+x);f=Math.max(f,y+w)}}this.target.setContentSize(e,f)}};return b}(f.LayoutBase);f.BasicLayout=e;e.prototype.__class__="egret.gui.BasicLayout"})(c.gui||(c.gui={}))})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._isDestroy=!1;this._listenerData2=this._listenerData=null;this._listenerData={};this._listenerData2={}}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"className",{get:function(){return this.constructor.name},enumerable:!0,configurable:!0});b.toString=function(){for(var a=this.parent,b=this.className;null!=a;)b=null!=this.stage&&a==this.stage?"Stage."+b:"className"in a?a.className+"."+b:a.name+"."+b,a=a.parent;return b};b.addEventListener=
function(a,b,c,d,f){void 0===d&&(d=!1);void 0===f&&(f=0);this._isDestroy||(e.prototype.addEventListener.call(this,a,b,c,d,f),d?this._listenerData2[a]=b:this._listenerData[a]=b)};b.removeEventListener=function(a,b,c,d){void 0===d&&(d=!1);this._isDestroy||e.prototype.removeEventListener.call(this,a,b,c,d)};b.destroy=function(){if(!this._isDestroy){c.DisplayObjectUtil.destroyChildren(this,!0);this.parent&&this.parent.removeChild(this);for(var a in this._listenerData)this.removeEventListener(a,this._listenerData[a],
this,!1);for(a in this._listenerData2)this.removeEventListener(a,this._listenerData2[a],this,!0);this._listenerData2=this._listenerData=null;this._isDestroy=!0}};return d}(c.DisplayObjectContainer);c.CoreContainer=f;f.prototype.__class__="egret.CoreContainer"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._id=this._data=null;this._depth=this._lastY=this._lastX=this._alpha=this._y=this._x=0;this._depthPoint3D=this._depthPoint=this._namePad=null;this._enabled=!0;this.touchChildren=this.touchEnabled=!1;this._namePad=new c.SceneElementNamePad;this.addChild(this._namePad);this._depthPoint=new c.Point;this._depthPoint3D=new c.Point3D;this.addListeners()}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"enabled",{get:function(){return this._enabled},
set:function(a){this._enabled!=a&&(this.touchEnabled=this._enabled=a)},enumerable:!0,configurable:!0});Object.defineProperty(b,"alpha",{get:function(){return this._alpha},set:function(a){this._alpha!=a&&(this._alpha=a,e.prototype._setAlpha.call(this,a))},enumerable:!0,configurable:!0});Object.defineProperty(b,"y",{get:function(){return this._y},set:function(a){this._y!=a&&(this._y=a,e.prototype._setY.call(this,a))},enumerable:!0,configurable:!0});Object.defineProperty(b,"x",{get:function(){return this._x},
set:function(a){this._x!=a&&(this._x=a,e.prototype._setX.call(this,a))},enumerable:!0,configurable:!0});Object.defineProperty(b,"namePad",{get:function(){return this._namePad},enumerable:!0,configurable:!0});Object.defineProperty(b,"depth",{get:function(){return this.getDepth()},enumerable:!0,configurable:!0});b.getDepth=function(){if(this._lastX!=this._x||this._lastY!=this._y)this._lastX=this._x,this._lastY=this._y,this._depthPoint.x=this._x,this._depthPoint.y=this._y,this._depth=c.IsoUtil.getDepth(c.IsoUtil.getPoint3D(this._depthPoint,
this._depthPoint3D));return this._depth};Object.defineProperty(b,"id",{get:function(){return this._id||this.name},set:function(a){this._id=a},enumerable:!0,configurable:!0});Object.defineProperty(b,"data",{get:function(){return this._data},set:function(a){this.setData(a)},enumerable:!0,configurable:!0});b.setData=function(a){if(this._data=a)if(this._data.vo&&this._data.vo.id)this._id=this._data.vo.idString;else if(this._data.lo&&this._data.lo.id)this._id=this._data.lo.idString;else throw Error("\u65e0\u6548\u7684\u573a\u666f\u5143\u7d20\u6570\u636e\uff0cid \u4e0d\u80fd\u4e3a 0");
};b.updateName=function(){var a=null;this._data&&(this._data.vo&&(a=this._data.vo.name),!a&&this._data.lo&&(a=this._data.lo.name));a&&this._namePad.setName(a)};b.updateXY=function(){var a=this._data.vo;a&&(this.x=a.x,this.y=a.y)};b.addToScene=function(){this.updateName();this.updateXY();this.addListeners()};b.removeFromScene=function(){};b.addListeners=function(){};b.setNameTextFormat=function(a,b){void 0===a&&(a=20);void 0===b&&(b=16777215);this._namePad.setNameTextFormat(a,b)};b.destroy=function(){this._isDestroy||
(this._namePad.destroy(),e.prototype.destroy.call(this))};return d}(c.CoreContainer);c.SceneElement=f;f.prototype.__class__="egret.SceneElement"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._overFilters=[new c.GlowFilter(65535,1,2,2,3,1)];this._layerHashMap=this._sceneAvatarVo=this._avatar=null;this.touchEnabled=!0;this._layerHashMap=new c.HashMap;this._sceneAvatarVo=new c.SceneAvatarVo;this._avatar=new c.Avatar;this.show(this._avatar,c.SceneElementLayerType.ACTION)}__extends(d,e);var b=d.prototype;b.setAvatarDirectionSplit=function(a){this._avatar.directionSplit=a};b.setIsCheckResource=function(a){this._avatar.isCheckResource=
a};b.setMovieName=function(a){var b=this._data;b||(b=new c.SceneElementDataItem);var d=b.lo;d||(d=new c.SceneElementLo,d.id=c.dataManager().sceneElementData.getAutoElementId(),d.idString=d.id+"");d.movieName=a;b.lo=d;this.setData(b)};Object.defineProperty(b,"avatar",{get:function(){return this._avatar},enumerable:!0,configurable:!0});Object.defineProperty(b,"sceneAvatarVo",{get:function(){return this._sceneAvatarVo},set:function(a){this._sceneAvatarVo=a},enumerable:!0,configurable:!0});Object.defineProperty(b,
"isPlayed",{get:function(){return this._avatar.isPlayed},enumerable:!0,configurable:!0});Object.defineProperty(b,"actionType",{get:function(){return this._avatar.actionType},set:function(a){this._avatar.actionType!=a&&(this._avatar.actionType=a)},enumerable:!0,configurable:!0});Object.defineProperty(b,"direction",{get:function(){return this._avatar.direction},set:function(a){this._avatar.direction!=a&&(this._avatar.direction=a)},enumerable:!0,configurable:!0});b.play=function(a,b,d,e,f,l,h,k){void 0===
a&&(a=-1);void 0===b&&(b=-1);void 0===d&&(d=-1);void 0===e&&(e=0);void 0===f&&(f=null);void 0===l&&(l=null);void 0===h&&(h=null);void 0===k&&(k=null);if(!this._isDestroy&&this._sceneAvatarVo.body){if(f&&!l)throw Error("\u672a\u6307\u5b9a\u56de\u8c03\u51fd\u6570\u5bf9\u8c61");this._partTypes=c.ActionPartType.TYPES_BODY_ONLY;this._avatar.play(a,b,d,e,f,l,h,k);this._avatar.setPartTypes(this._partTypes,this.getPartUrl,this,this.loadActionComplete,this);this._namePad.y=this._avatar.topLineY}};b.loadActionComplete=
function(){this._namePad.y=this._avatar.topLineY};b.stop=function(a,b,c){void 0===a&&(a=-1);void 0===b&&(b=-1);void 0===c&&(c=-1);this._avatar.stop(a,b,c)};b.setActionVo=function(a,b){this._avatar.setActionPart(a,b)};b.getActionVo=function(a){return this._avatar.getActionVo(a)};b.setActionUrl=function(a,b,c){void 0===c&&(c=null);this._avatar.setActionUrl(a,b,c)};b.getLayerContainer=function(a){void 0===a&&(a=0);var b=null,b=this._layerHashMap.get(a);if(!b){var d=c.SceneElementLayerType.LAYER_MOUSE_CONFIGS[a],
b=new c.DisplayObjectContainer;b.name="sceneElementInteractiveLayer"+a;b.touchEnabled=d.touchEnabled;b.touchChildren=d.touchChildren;this.addChild(b);this._layerHashMap.put(a,b);a=this._layerHashMap.keys();a.sort(c.ArrayUtil.numeric);for(var d=a.length,e=0;e<d;e++)this.setChildIndex(this._layerHashMap.get(a[e]),e)}return b};b.show=function(a,b,c,d){void 0===c&&(c=NaN);void 0===d&&(d=NaN);(b=this.getLayerContainer(b))&&a.parent!=b&&b.addChild(a);isNaN(c)||(a.x=c);isNaN(d)||(a.y=d)};b.hide=function(a){a&&
a.parent&&a.parent.removeChild(a)};b.updateAvatar=function(a){this.setData(a);this._avatar.clear(!1);this.stage&&this._partTypes&&this._avatar.setPartTypes(this._partTypes,this.getPartUrl,this,this.loadActionComplete,this)};b.setData=function(a){e.prototype.setData.call(this,a);c.SceneElementData.getInstance().setSceneAvatarVo(this._sceneAvatarVo,a.lo)};b.addToScene=function(){e.prototype.addToScene.call(this)};b.removeFromScene=function(){e.prototype.removeFromScene.call(this);this.stop();this._avatar.clear()};
b.destroy=function(){this._isDestroy||(this._avatar.destroy(),e.prototype.destroy.call(this))};b.addListeners=function(){e.prototype.addListeners.call(this)};b.roleOverHandler=function(a){};b.checkAlpha=function(){};b.roleOutHandler=function(a){this.filters=null};b.getPartUrl=function(a){var b=c.PathData.PATH_MOVIES_COMMON;a=this._sceneAvatarVo[a];return c.dataManager().sceneElementData.getActionUrl(b,a,this._avatar.actionType)};return d}(c.SceneElement);c.SceneElementInteractive=f;f.prototype.__class__=
"egret.SceneElementInteractive"})(egret||(egret={}));(function(c){var f=function(){return function(){}}();c.BaseVo=f;f.prototype.__class__="egret.BaseVo"})(egret||(egret={}));
(function(c){var f=function(e){function d(a,b){void 0===a&&(a=0);void 0===b&&(b=-1);e.call(this);this.applicationManager=null;this._layerType=0;this._align=c.AlignType.NONE;this._updateHashMap=null;this._right=this._left=this._bottom=this._top=0;this._layerType=a;this._align=b;this._updateHashMap=new c.HashMap}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"right",{get:function(){return this._right},set:function(a){this._right!=a&&(this._right=a,this.align=this._align)},enumerable:!0,configurable:!0});
Object.defineProperty(b,"left",{get:function(){return this._left},set:function(a){this._left!=a&&(this._left=a,this.align=this._align)},enumerable:!0,configurable:!0});Object.defineProperty(b,"bottom",{get:function(){return this._bottom},set:function(a){this._bottom!=a&&(this._bottom=a,this.align=this._align)},enumerable:!0,configurable:!0});Object.defineProperty(b,"top",{get:function(){return this._top},set:function(a){this._top!=a&&(this._top=a,this.align=this._align)},enumerable:!0,configurable:!0});
Object.defineProperty(b,"align",{get:function(){return this._align},set:function(a){this._align=a;this.applicationManager?this.applicationManager.setAlign(this,this._align):c.ApplicationManager.getInstance().setAlign(this,this._align)},enumerable:!0,configurable:!0});Object.defineProperty(b,"layerType",{get:function(){return this._layerType},set:function(a){this._layerType!=a&&(this._layerType=a)},enumerable:!0,configurable:!0});b.initWindow=function(){};b.addEvents=function(){};b.globalUpdate=function(a){for(var b=
1;b<arguments.length;b++);};b.update=function(){for(var a=0;a<arguments.length;a++);};b.recall=function(){this.stage&&this.addEvents();this.applicationManager?this.applicationManager.dispatchRecall(this):c.ApplicationManager.getInstance().dispatchRecall(this)};b.remove=function(){};b.addUpdateType=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];for(var b=a.length,c=0;c<b;c++){var d=a[c];this._updateHashMap.containsKey(d)||this._updateHashMap.put(d,!0)}};b.removeUpdateType=function(){for(var a=
[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];for(var b=a.length,c=0;c<b;c++)this._updateHashMap.remove(a[c])};b.hasUpdateType=function(a){void 0===a&&(a=0);return this._updateHashMap.get(a)};b.destroy=function(){this._isDestroy||e.prototype.destroy.call(this)};return d}(c.CoreContainer);c.Window=f;f.prototype.__class__="egret.Window"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.pathPartValue=1E3;this.onStopMove=this.nodeChangedHandler=this.movingEndHandler=this.movingHandler=null;this.passingPointFlag=!1;this._finalY=this._finalX=this._targetY=this._targetX=this._speed=0;this._lastTempNode=this._lastNode=this._currentNode=this._pathTargetNode=this._targetNode=null;this._hasSetTarget=this._hasPath=!1;this._isMovingEnd=!0;this._isDispatchStart=!1;this._isoSize=20;this._mapHeight=this._mapWidth=this._halfSize=this._isoSize2=
0;this._isoMap=null;this._nodeInterval=2;this._isFollowed=!1;this._pathTypeMap=this._pathNodes=this._mapNodes=this.pathTypes=null;this._trackIndex=this._moveIndex=0;this._recoverPoints=this._passingPoints=this._passingNodes=null;this._maxY=this._maxX=this._floorOffsetHeight=this._floorOffsetWidth=this._toplimitOffsetHeight=this._toplimitOffsetWidth=this._timeDelay=this._speedAbsY=this._speedAbsX=this._speedY=this._speedX=0;this._finalPoint=null;this._isRole=this._isMoving=!1;this._centerNode=this._targetPoint3D=
this._neerPoint3D=this._neerNode=this._neerPoint=this._nodePoint=this._nodeColumns=this._nodeLines=this._isoNodePoint=this._isoPoint=this._pathPartPoint=this._distancePoint=null;this._passingNodeIndex=this._passingIndex=0;this._nodeChangedFlag=!0;this._pathNodes=[];this._pathTypeMap=new c.HashMap;var a=d.PASSING_POINT_COUNT+1;this._passingNodes=[];this._passingPoints=[];this._recoverPoints=[];for(var b=0;b<a;b++)this._recoverPoints[b]=new c.PassingPoint;this._isoNodePoint=new c.Point;this._distancePoint=
new c.Point;this._pathPartPoint=new c.Point;this._nodePoint=new c.Point;this._neerPoint=new c.Point;this._isoPoint=new c.Point;this._targetPoint3D=new c.Point3D;this._neerPoint3D=new c.Point3D;this._nodeLines=[];this._nodeColumns=[];this._neerNode=new c.IsoNode;this._neerNode.init();this._targetNode=new c.IsoNode;this._targetNode.init();this._currentNode=new c.IsoNode;this._currentNode.init();this._lastNode=new c.IsoNode;this._lastNode.init();this._lastTempNode=new c.IsoNode;this._lastTempNode.init();
this._centerNode=new c.IsoNode;this._centerNode.init()}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"finalPoint",{get:function(){return this._finalPoint},enumerable:!0,configurable:!0});Object.defineProperty(b,"finalY",{get:function(){return this._finalPoint?this._finalPoint.x:this._finalY},enumerable:!0,configurable:!0});Object.defineProperty(b,"finalX",{get:function(){return this._finalPoint?this._finalPoint.y:this._finalX},enumerable:!0,configurable:!0});Object.defineProperty(b,"isRole",
{get:function(){return this._isRole},set:function(a){this._isRole=a;this.pathPartValue=4600},enumerable:!0,configurable:!0});Object.defineProperty(b,"isMoving",{get:function(){return this._isMoving},enumerable:!0,configurable:!0});Object.defineProperty(b,"pathNodes",{get:function(){return this._pathNodes},enumerable:!0,configurable:!0});Object.defineProperty(b,"passingPoints",{get:function(){return this._passingPoints},enumerable:!0,configurable:!0});Object.defineProperty(b,"passingNodes",{get:function(){return this._passingNodes},
enumerable:!0,configurable:!0});Object.defineProperty(b,"depth",{get:function(){var a=this.currentNode;return(a=this._isoMap.getMapNode(a.row,a.column))?a.depth:e.prototype.getDepth.call(this)},enumerable:!0,configurable:!0});Object.defineProperty(b,"isFollowed",{get:function(){return this._isFollowed},set:function(a){this._isFollowed=a},enumerable:!0,configurable:!0});Object.defineProperty(b,"nodeInterval",{get:function(){return this._nodeInterval},set:function(a){this._nodeInterval=a},enumerable:!0,
configurable:!0});Object.defineProperty(b,"speed",{get:function(){return this._speed},set:function(a){this._speed!=a&&(this._speed=a,this._speed=Math.max(2,this._speed))},enumerable:!0,configurable:!0});Object.defineProperty(b,"lastNode",{get:function(){return this._lastNode},enumerable:!0,configurable:!0});Object.defineProperty(b,"currentNode",{get:function(){-1==this._currentNode.row&&this._currentNode.copyBy(this.centerNode);return this._currentNode},enumerable:!0,configurable:!0});Object.defineProperty(b,
"canMove",{get:function(){return this._x+""==this._finalX+""&&this._y+""==this._finalY+""?!1:!0},enumerable:!0,configurable:!0});Object.defineProperty(b,"isArrive",{get:function(){return this._x+""==this._finalX+""&&this._y+""==this._finalY+""&&null==this._finalPoint},enumerable:!0,configurable:!0});Object.defineProperty(b,"centerNode",{get:function(){this._centerNode.copyBy(this.getIsoNode(this._x,this._y));return this._centerNode},enumerable:!0,configurable:!0});Object.defineProperty(b,"targetNode",
{get:function(){return this._targetNode},enumerable:!0,configurable:!0});b.destroy=function(){this._isDestroy||(this.stopMove(),e.prototype.destroy.call(this))};b.clearFollowPoints=function(){for(var a=0;a<d.PASSING_POINT_COUNT;a++)this._passingPoints[a]&&(this._recoverPoints[a]=this._passingPoints[a],this._passingPoints[a]=null);this._passingIndex=0;for(var b=d.PASSING_NODE_COUNT+1,a=0;a<b;a++)this._passingNodes[a]=null;this._passingNodeIndex=0};b.getIsoNode=function(a,b){var c=Math.round(b/this._halfSize),
d=Math.round(a/this._isoSize);this._nodeLines[0]=c-1;this._nodeLines[1]=c;this._nodeLines[2]=c+1;this._nodeColumns[0]=d-1;this._nodeColumns[1]=d;this._nodeColumns[2]=d+1;this._isoNodePoint.x=a;this._isoNodePoint.y=b;return this.getNeerNode(this._isoNodePoint,this._nodeLines,this._nodeColumns)};b.gotoXY=function(a,b){this.setTargetNode(this.getIsoNode(a,b));this._hasSetTarget=!0;this.gotoGrid(this._targetNode.row,this._targetNode.column)};b.gotoGrid=function(a,b){this._hasSetTarget||this.setTargetNode(this.getIsoNodeByRow(a,
b));this._hasSetTarget=!1;var c=this.getIsoPoint(a,b);this.setXY(c.x,c.y);this.setCurrentNode(this.centerNode)};b.moveTo=function(a,b,c){void 0===c&&(c=!0);this._isNoPath=!1;this.setCurrentNode(this.centerNode);this.setTargetNode(this.getIsoNode(a,b));this._hasSetTarget=!0;this.moveToGridPath(this._targetNode.row,this._targetNode.column,c)};b.moveTo2=function(a,b){this._isNoPath=!1;this.setCurrentNode(this.centerNode);this.setTargetNode(this.getIsoNode(a,b));this._hasSetTarget=!0;this.moveToGrid(this._targetNode.row,
this._targetNode.column)};b.moveTo3=function(a,b){this._isNoPath=!0;this.calcDistance(a,b);if(!this.checkDistance()){this.addEngine(!0);var d=c.ActionMovieClipData.getInstance().calculateDirection(this._x,this._y,a,b);this.play(-1,c.ActionType.WALK,d)}this._isMovingEnd=!this.canMove;this._isDispatchStart||this._isMovingEnd||(this._isDispatchStart=!0)};b.stopMove=function(){this._isMoving&&(this._finalPoint=null,this.stopMoveInternal(),null!=this.onStopMove&&this.onStopMove.apply(this.scene,[this]))};
b.stopMoveInternal=function(a){void 0===a&&(a=!0);this._isMoving&&!this.checkFinalPoint()&&(this.addEngine(!1),this.clearPathNodes(),a&&this.play(-1,c.ActionType.PREPARE))};b.checkFinalPoint=function(){return this._finalPoint?(this.moveTo(this._finalPoint.x,this._finalPoint.y),!0):!1};b.moveToGrid=function(a,b){this._hasSetTarget||this.setTargetNode(this.getIsoNodeByRow(a,b));this._hasSetTarget=!1;var d=this.getIsoPoint(a,b),e=d.x,d=d.y;this.calcDistance(e,d);this.checkDistance()||(this.addEngine(!0),
e=c.ActionMovieClipData.getInstance().calculateDirection(this._x,this._y,e,d),this.play(-1,c.ActionType.WALK,e));this._isMovingEnd=!this.canMove;this._isDispatchStart||this._isMovingEnd||(this._isDispatchStart=!0)};b.moveToNode=function(a){this.setTargetNode(a);this._hasSetTarget=!1;var b=a.point2D;a=b.x;b=b.y;this.calcDistance(a,b);this.checkDistance()||(this.addEngine(!0),a=c.ActionMovieClipData.getInstance().calculateDirection(this._x,this._y,a,b),this.play(-1,c.ActionType.WALK,a));this._isMovingEnd=
!this.canMove;this._isDispatchStart||this._isMovingEnd||(this._isDispatchStart=!0)};b.moveToGridPath=function(a,b,d){void 0===d&&(d=!1);var e=this._currentNode.row,f=this._currentNode.column;if(a==e&&b==f)this.stopMove();else{this._currentNode||this.setCurrentNode(this.centerNode);var l=this._mapNodes.length-1;a>=l&&(a=l);l=this._mapNodes[a].length-1;b>=l&&(b=l);e=this._mapNodes[e][f];a=this._mapNodes[a][b];if(-1==this.pathTypes.indexOf(a.type))var h=c.IsoUtil.getNeerNodeByType2(a,e,this._mapNodes,
this.pathTypes);h&&(a=h);d?this.checkPathPart(a.row,a.column):2>this._pathNodes.length||(d=a.point2D,d=this.getPointDistance(d.x,d.y),this._finalX=d.x,this._finalY=d.y,this.hasEventListener(c.SceneElementEvent.SCENE_ELEMENT_PATH_CHANGED)&&this.dispatchEvent(new c.SceneElementEvent(c.SceneElementEvent.SCENE_ELEMENT_PATH_CHANGED)),this.moveByPath())}};b.checkPathPart=function(a,b){void 0===b&&(b=0);var d=this.getIsoNodeByRow(a,b);this._pathPartPoint.x=this._x;this._pathPartPoint.y=this._y;if(c.DimensionUtil.distance(d.point2D,
this._pathPartPoint)>=this.pathPartValue){this._finalPoint=d.point2D;for(var e=Math.atan2(this._finalPoint.y-this._y,this._finalPoint.x-this._x),f=Math.cos(e)*this.pathPartValue,d=Math.sin(e)*this.pathPartValue,e=f/10,l=d/10,f=f+this._x,h=d+this._y,d=this.getIsoNode(f,h),k=0;!this._isoMap.canCross(d.row,d.column);)if(f+=e,h+=l,d=this._isoMap.getIsoNode(f,h),k++,100<k){c.LogManager.error(this,"\u67e5\u627e\u5206\u6bb5\u8def\u5f84\u9012\u5f52\u8fbe\u5230\u6700\u5927\u503c");break}a=d.row;b=d.column}else this._finalPoint=
null;this.moveToGridPath(a,b,!1)};b.moveByPoints=function(a){var b=a.length-6*this._nodeInterval;if(0<=b){if(a=a[b])this.setXY(a.x,a.y),b=-1,isNaN(a.tx)||(b=c.ActionMovieClipData.getInstance().calculateDirection(this._x,this._y,a.tx,a.ty)),this.play(-1,c.ActionType.WALK,b)}else this.stopMove()};b.moveByTrack=function(a){var b=a.length-this._nodeInterval;0<=b&&this.moveToNode(a[b])};b.moveByPath=function(){this._moveIndex=0;this._hasPath=!0;this.moveToNextNode()};b.moveToNextNode=function(){if(this._pathNodes&&
0!=this._pathNodes.length){var a=this._pathNodes.length;this._moveIndex++;(this._hasPath=!(this._moveIndex>=a))?(this._pathTargetNode=this._pathNodes[this._moveIndex],this.moveToNode(this._pathTargetNode)):(a=this._moveIndex-1,0<=a&&!this._pathNodes[a]&&this.stopMove(),this.clearPathNodes())}};b.clearPathNodes=function(){this._pathNodes&&(this._pathNodes.length=0)};b.setCurrentNode=function(a){this.setNode(a,d.CURRENT_NODE)};b.setNode=function(a,b,c){if(!this._isNoPath){c=this[b];var e=-1,f=-1;c&&
(e=c.row,f=c.column,this._lastTempNode.copyBy(c));this[b].copyBy(a);!a||e==a.row&&f==a.column||b!=d.CURRENT_NODE||(this._lastNode.copyBy(this._lastTempNode),this.setPassingNode(a),this.checkNode())}};b.setTargetNode=function(a,b){void 0===b&&(b=!0);this.setNode(a,d.TARGET_NODE,b)};b.getNeerNode=function(a,b,d){var e=Number.POSITIVE_INFINITY,f=0,l=f=0,h=b.length,k=d.length,m=0,p=0,r=NaN,s=NaN,l=f=NaN,f=a.x/2,l=a.y;this._targetPoint3D.x=l+f;this._targetPoint3D.z=l-f;for(a=0;a<h;a++)if(m=b[a],!(0>m))for(var t=
0;t<k;t++)if(p=d[t],!(0>p)&&(f=m%2,l=p%2,0==f&&0==l||1==f&&1==l))this._nodePoint.x=p*this._isoSize,this._nodePoint.y=m*this._halfSize,f=this._nodePoint.x/2,l=this._nodePoint.y,this._neerPoint3D.x=l+f,this._neerPoint3D.z=l-f,f=c.DimensionUtil.distance3D(this._targetPoint3D,this._neerPoint3D),f<e&&(e=f,r=this._neerPoint3D.x,s=this._neerPoint3D.z,this._neerPoint.x=this._nodePoint.x,this._neerPoint.y=this._nodePoint.y);this._neerPoint3D.x=r;this._neerPoint3D.z=s;this._neerNode.point3D=this._neerPoint3D;
this._neerNode.point2D=this._neerPoint;this._neerNode.row=Math.round(this._neerPoint.y/this._halfSize);this._neerNode.column=this._neerPoint.x/this._isoSize2|0;return this._neerNode};b.getIsoNodeByRow=function(a,b){if(this._isoMap)return this._isoMap.getMapNode(a,b);var d=new c.IsoNode;d.row=a;d.column=b;d.point2D=this.getIsoPoint(a,b);return d};b.calcDistance=function(a,b){var c=Math.atan2(b-this._y,a-this._x);this._speedX=Math.cos(c)*this._speed;this._speedY=Math.sin(c)*this._speed;this._speedAbsX=
Math.abs(this._speedX);this._speedAbsY=Math.abs(this._speedY);c=this.getPointDistance(a,b);this._targetX=c.x;this._targetY=c.y;c=this._targetNode.point2D;this.addPassingPoint(this._x,this._y,c.x,c.y);this._hasPath||(this._finalX=this._targetX,this._finalY=this._targetY)};b.getPointDistance=function(a,b){var c=0;this._floorOffsetWidth>=c&&(c=this._floorOffsetWidth);var d=0;this._floorOffsetHeight>=d&&(d=this._floorOffsetHeight);this._distancePoint.x=this.limitValue(a,c,this._maxX);this._distancePoint.y=
this.limitValue(b,d,this._maxY);return this._distancePoint};b.moveMap=function(){this.checkDistance()?this.stopMoveInternal(!this._isFollowed):(this.updateMap(),this.addPassingPoint(this._x,this._y),this._isMovingEnd||null==this.movingHandler||this.movingHandler.apply(this.scene),this._x+""==this._targetX+""&&this._y+""==this._targetY+""&&(this._pathTargetNode?this.setCurrentNode(this._pathTargetNode):this.setCurrentNode(this._targetNode),this.moveToNextNode(),this.checkDistance()&&this.stopMoveInternal(!this._isFollowed),
this.isArrive&&!this._isMovingEnd&&(this._isMovingEnd=!0,this._isDispatchStart=!1,!this._hasPath&&this._isMovingEnd&&this.setCurrentNode(this._targetNode),null!=this.movingEndHandler&&this.movingEndHandler.apply(this.scene,[this]))))};b.updateMap=function(){var a=this._x,b=this._y,c=this._speedX,d=this._speedY,e=this._targetX-a,f=this._targetY-b;Math.abs(e)<this._speedAbsX&&(c=e);Math.abs(f)<this._speedAbsY&&(d=f);this.setXY(a+c,b+d)};b.setXY=function(a,b){var c=d.MOVER_WIDTH/2,e=d.MOVER_HEIGHT;a=
this.limitValue(a,c,this._maxX-c);b=this.limitValue(b,e,this._maxY);this._isNoPath||this.setCurrentNode(this.getIsoNode(a,b));if(this._nodeChangedFlag){if(c=this._data.vo)c.x=a,c.y=b;this.x=a;this.y=b}};b.updateXY=function(){e.prototype.updateXY.call(this);var a=this._data.vo;a&&this.setXY(a.x,a.y)};b.checkDistance=function(){return this._hasPath||this._x+""!=this._finalX+""||this._y+""!=this._finalY+""?!1:!0};b.addEngine=function(a){this._nodeChangedFlag=!0;a?this._isMoving||(this._engineId=c.EnterFrameManager.getInstance().addExecute(this.mapContainerEnterFrame,
this),this._isMoving=!0):this._isMoving&&(c.EnterFrameManager.getInstance().removeExecute(this._engineId),this._isMoving=!1)};b.mapContainerEnterFrame=function(a){this.moveMap()};b.setMapData=function(a){if(this._isoMap=a)this.pathTypes=this._isoMap.pathTypes,this._mapNodes=this._isoMap.mapNodes,this._isoSize=this._isoMap.isoSize,this._halfSize=this._isoSize/2,this._isoSize2=2*this._isoSize,this._mapWidth=this._isoMap.mapWidth,this._mapHeight=this._isoMap.mapHeight,this._maxX=this._mapWidth-this._toplimitOffsetWidth,
this._maxY=this._mapHeight-this._toplimitOffsetHeight;this.clearFollowPoints()};b.getIsoPoint=function(a,b){var c=a*this._halfSize,d=b*this._isoSize2;1==a%2&&(d+=this._isoSize);this._isoPoint.x=d;this._isoPoint.y=c;return this._isoPoint};b.limitValue=function(a,b,c){a<b&&(a=b);a>c&&(a=c);return a};b.checkNode=function(){var a=this.currentNode;if(this._isoMap)var b=this._isoMap.getMapNode(a.row,a.column);this.alpha=b&&b.type==c.PathType.TRANSPARENT?0.6:1;null!=this.nodeChangedHandler&&(this._nodeChangedFlag=
this.nodeChangedHandler.apply(this.scene,[this]))};b.addPassingPoint=function(a,b,c,e){void 0===c&&(c=NaN);void 0===e&&(e=NaN);if(this.passingPointFlag){var f=this._recoverPoints[this._passingIndex];if(!f)throw Error();this._recoverPoints[this._passingIndex]=null;f.x=a;f.y=b;f.tx=c;f.ty=e;this._passingPoints[this._passingIndex]=f;this._passingIndex++;if(this._passingIndex>d.PASSING_POINT_COUNT){this._passingIndex=d.PASSING_POINT_COUNT;this._recoverPoints[this._passingIndex]=this._passingPoints[0];
a=d.PASSING_POINT_COUNT+1;for(b=1;b<a;b++)this._passingPoints[b-1]=this._passingPoints[b];this._passingPoints[d.PASSING_POINT_COUNT]=null}}};b.setPassingNode=function(a){this._passingNodes[this._passingNodeIndex]=a;this._passingNodeIndex++;if(this._passingNodeIndex>d.PASSING_NODE_COUNT){a=d.PASSING_NODE_COUNT+1;this._passingNodeIndex=d.PASSING_NODE_COUNT;for(var b=1;b<a;b++)this._passingNodes[b-1]=this._passingNodes[b];this._passingNodes[d.PASSING_NODE_COUNT]=null}};b.removeFromScene=function(){this.stopMove();
e.prototype.removeFromScene.call(this)};d.MOVER_WIDTH=100;d.MOVER_HEIGHT=180;d.CURRENT_NODE="_currentNode";d.TARGET_NODE="_targetNode";d.PASSING_POINT_COUNT=2;d.PASSING_NODE_COUNT=2;return d}(c.SceneElementInteractive);c.SceneElementMover=f;f.prototype.__class__="egret.SceneElementMover"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._isDestroy=!1;this._listenerData2=this._listenerData=null;this._listenerData={};this._listenerData2={}}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"className",{get:function(){return this.constructor.name},enumerable:!0,configurable:!0});Object.defineProperty(b,"tooltip",{get:function(){return null},set:function(a){a&&(this.touchEnabled=!0);c.TooltipManager.setTooltip(this,a)},enumerable:!0,configurable:!0});b.toString=function(){for(var a=
this.parent,b=this.className;null!=a;)b=null!=this.stage&&a==this.stage?"Stage."+b:"className"in a?a.className+"."+b:a.name+"."+b,a=a.parent;return b};b.addEventListener=function(a,b,c,d,f){void 0===d&&(d=!1);void 0===f&&(f=0);this._isDestroy||(e.prototype.addEventListener.call(this,a,b,c,d,f),d?this._listenerData2[a]=b:this._listenerData[a]=b)};b.removeEventListener=function(a,b,c,d){void 0===d&&(d=!1);this._isDestroy||e.prototype.removeEventListener.call(this,a,b,c,d)};b.destroy=function(){if(!this._isDestroy){c.DisplayObjectUtil.destroyChildren(this,
!1);this.parent&&this.parent.removeChild(this);for(var a in this._listenerData)this.removeEventListener(a,this._listenerData[a],this,!1);for(a in this._listenerData2)this.removeEventListener(a,this._listenerData2[a],this,!0);this._listenerData2=this._listenerData=null;this._isDestroy=!0}};return d}(c.Sprite);c.CoreSprite=f;f.prototype.__class__="egret.CoreSprite"})(egret||(egret={}));
(function(c){var f=function(e){function d(a,b,d,f,n,l,h){void 0===a&&(a=1E3);void 0===b&&(b=1E3);void 0===d&&(d=20);void 0===f&&(f=200);void 0===n&&(n=160);void 0===l&&(l=0);void 0===h&&(h=0);e.call(this);this._pathShape=this._mapTileContainer=this._sceneContainer=this._renderShape=this._viewShape=this._mapContainer=this.layerConfigs=null;this._viewHeight=this._viewWidth=this._renderOffsetHeight=this._renderOffsetWidth=this._mapHeight=this._mapWidth=0;this._viewRect=this._renderRect=null;this._isoSize=
20;this._pathThickness=this._halfSize=this._isoSize2=0;this._pathColor=16750848;this._renderRectAlpha=0;this._lastTileMap=this._updateData=this._mapTiles=this._oPoint2=this._oPoint=this._cPoint2=this._cPoint=null;this._isShowRender=this._isShowPath=this._isShowView=this._isShowTile=!1;this._isDrawInteractive=!0;this._pathPolicy=c.PathPolicyType.VIEW;this._layerHashMap=null;this._renderMY=this._renderMX=0;this._stage=this._renderParams=null;this.touchEnabled=!1;this._updateData={};this._renderRect=
new c.Rectangle;this._viewRect=new c.Rectangle;this._layerHashMap=new c.HashMap;this._oPoint=new c.Point;this._oPoint2=new c.Point;this._cPoint=new c.Point;this._cPoint2=new c.Point;this._mapContainer=new c.DisplayObjectContainer;this._mapContainer.touchEnabled=!1;this.addChild(this._mapContainer);this._sceneContainer=new c.DisplayObjectContainer;this._sceneContainer.touchEnabled=!1;this._mapContainer.addChild(this._sceneContainer);this._mapTileContainer=new c.Sprite;this._mapTileContainer.touchEnabled=
!0;this._mapTileContainer.touchChildren=!1;this._sceneContainer.addChild(this._mapTileContainer);this._renderParams=["renderRect"];this.showPath(!0);this.setProperties(a,b,d,f,n,l,h);this.addEventListener(c.Event.ADDED_TO_STAGE,this.thisAddedToStage,this)}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"isDrawInteractive",{get:function(){return this._isDrawInteractive},set:function(a){this._isDrawInteractive!=a&&(this._isDrawInteractive=a,this.drawMapRect())},enumerable:!0,configurable:!0});
Object.defineProperty(b,"mapTileContainer",{get:function(){return this._mapTileContainer},enumerable:!0,configurable:!0});Object.defineProperty(b,"renderRectAlpha",{get:function(){return this._renderRectAlpha},set:function(a){this._renderRectAlpha!=a&&(this._renderRectAlpha=a,this.drawMapRect())},enumerable:!0,configurable:!0});Object.defineProperty(b,"pathPolicy",{get:function(){return this._pathPolicy},set:function(a){this._pathPolicy!=a&&(this._pathPolicy=a)},enumerable:!0,configurable:!0});Object.defineProperty(b,
"pathColor",{get:function(){return this._pathColor},set:function(a){this._pathColor!=a&&(this._pathColor=a)},enumerable:!0,configurable:!0});Object.defineProperty(b,"pathThickness",{get:function(){return this._pathThickness},set:function(a){this._pathThickness!=a&&(this._pathThickness=a)},enumerable:!0,configurable:!0});Object.defineProperty(b,"isoSize",{get:function(){return this._isoSize},enumerable:!0,configurable:!0});Object.defineProperty(b,"renderOffsetHeight",{get:function(){return this._renderOffsetHeight},
enumerable:!0,configurable:!0});Object.defineProperty(b,"renderOffsetWidth",{get:function(){return this._renderOffsetWidth},enumerable:!0,configurable:!0});Object.defineProperty(b,"mapHeight",{get:function(){return this._mapHeight},enumerable:!0,configurable:!0});Object.defineProperty(b,"mapWidth",{get:function(){return this._mapWidth},enumerable:!0,configurable:!0});Object.defineProperty(b,"x",{set:function(a){this._setX(a);this.localToGlobal(0,0,this._oPoint);this.localToGlobal(this._viewWidth/
2,this._viewHeight/2,this._cPoint)},enumerable:!0,configurable:!0});Object.defineProperty(b,"y",{set:function(a){this._setY(a);this.localToGlobal(0,0,this._oPoint);this.localToGlobal(this._viewWidth/2,this._viewHeight/2,this._cPoint)},enumerable:!0,configurable:!0});Object.defineProperty(b,"viewHeight",{get:function(){return this._viewHeight},enumerable:!0,configurable:!0});Object.defineProperty(b,"viewWidth",{get:function(){return this._viewWidth},enumerable:!0,configurable:!0});Object.defineProperty(b,
"totalRows",{get:function(){var a=Math.ceil(this._mapHeight/this._isoSize);0==this._mapHeight%this._isoSize&&a++;return 2*a},enumerable:!0,configurable:!0});Object.defineProperty(b,"totalColumns",{get:function(){var a=Math.ceil(this._mapWidth/this._isoSize2);0==this._mapWidth%this._isoSize2&&a++;return a},enumerable:!0,configurable:!0});Object.defineProperty(b,"viewRect",{get:function(){var a=this.originalPoint;this._viewRect.x=a.x;this._viewRect.y=a.y;return this._viewRect},enumerable:!0,configurable:!0});
Object.defineProperty(b,"renderRect",{get:function(){if(this.getUpdateData(this._renderParams)){var a=this.originalPoint,b=a.x-this._renderOffsetWidth,b=this.limitValue(b,0,this._renderMX),a=a.y-this._renderOffsetHeight,c=this._renderMY;0>c&&(c=0);a=this.limitValue(a,0,c);this._renderRect.x=b;this._renderRect.y=a;this.setUpdateData("renderRect",!1)}return this._renderRect},enumerable:!0,configurable:!0});Object.defineProperty(b,"originalPoint",{get:function(){this._mapContainer.globalToLocal(this._oPoint.x,
this._oPoint.y,this._oPoint2);return this._oPoint2},enumerable:!0,configurable:!0});Object.defineProperty(b,"centerPoint",{get:function(){this._mapContainer.globalToLocal(this._cPoint.x,this._cPoint.y,this._cPoint2);return this._cPoint2},enumerable:!0,configurable:!0});b.destroy=function(){if(!this._isDestroy){if(this._mapTiles)for(var a=0;a<this._mapTiles.length;a++)c.DisplayObjectUtil.destroyTargets.apply(null,this._mapTiles[a]);e.prototype.destroy.call(this)}};b.setProperties=function(a,b,d,e,
f,l,h){void 0===a&&(a=0);void 0===b&&(b=0);void 0===d&&(d=0);void 0===e&&(e=0);void 0===f&&(f=0);void 0===l&&(l=0);void 0===h&&(h=0);var k="_mapWidth _mapHeight _isoSize _viewWidth _viewHeight _renderOffsetWidth _renderOffsetHeight".split(" "),m;for(m in arguments)0<arguments[m]&&(this[k[m]]=arguments[m]);this._renderOffsetWidth=Math.max(0,this._renderOffsetWidth);this._renderOffsetHeight=Math.max(0,this._renderOffsetHeight);this._renderRect.width=this._viewWidth+2*this._renderOffsetWidth;this._renderRect.height=
this._viewHeight+2*this._renderOffsetHeight;this._viewRect.width=this._viewWidth;this._viewRect.height=this._viewHeight;this._renderMX=this._mapWidth-this._renderRect.width;this._renderMY=this._mapHeight-this._renderRect.height;this.setUpdateData("renderRect");this.drawRenderRect();this.showMapTile(this._isShowTile);this.showViewport(this._isShowView);this.localToGlobal(this._viewWidth/2,this._viewHeight/2,this._cPoint);this._halfSize=this._isoSize/2;this._isoSize2=2*this._isoSize;this.hasEventListener(c.IsoMapEvent.ISO_MAP_PROPERTY_CHANGED)&&
this.dispatchEvent(new c.IsoMapEvent(c.IsoMapEvent.ISO_MAP_PROPERTY_CHANGED,!1,!1))};b.showViewport=function(a){void 0===a&&(a=!0);(this._isShowView=a)?(this._viewShape||(this._viewShape=new c.Shape,this.addChild(this._viewShape)),this._viewShape.visible=!0,0<this.numChildren&&this.setChildIndex(this._viewShape,this.numChildren-1),this.drawView()):this._viewShape&&(this._viewShape.visible=!1)};b.showRenderRect=function(a){void 0===a&&(a=!0);(this._isShowRender=a)?(this._renderShape||(this._renderShape=
new c.Shape,this._mapContainer.addChild(this._renderShape)),this._renderShape.visible=!0,this.setMapLayer(),this.drawRenderRect()):this._renderShape&&(this._renderShape.visible=!1)};b.showMapTile=function(a){void 0===a&&(a=!0);this._isShowTile=a;0<this._mapTileContainer.numChildren&&c.DisplayObjectUtil.destroyChildren(this._mapTileContainer);a?(this._mapTileContainer.graphics.clear(),this._mapTiles=c.IsoUtil.drawTiles(this._mapTileContainer,this._mapWidth,this._mapHeight,this._isoSize,6710886)):this.drawMapRect()};
b.showPath=function(a){void 0===a&&(a=!0);(this._isShowPath=a)?(this._pathShape||(this._pathShape=new c.Shape,this._mapContainer.addChild(this._pathShape)),this.setMapLayer(),this._pathShape.visible=!0):this._pathShape&&(this._pathShape.graphics.clear(),this._pathShape.visible=!1)};b.drawPath=function(a){this._pathShape.graphics.clear();if(this._isShowPath){var b=0,c=null,d=null,c=null;if(a){b=a.length-1;this._pathShape.graphics.lineStyle(this._pathThickness,this._pathColor,1,!0,"none");for(var e=
0;e<b;e++){c=a[e];d=a[e+1];if(!c||!d)break;c=this.getIsoPoint(c.row,c.column);this._pathShape.graphics.moveTo(c.x,c.y);c=this.getIsoPoint(d.row,d.column);this._pathShape.graphics.lineTo(c.x,c.y)}}}};b.getIsoPoint=function(a,b){var d=a*this._halfSize,e=b*this._isoSize2;1==a%2&&(e+=this._isoSize);return new c.Point(e,d)};b.setTileColor=function(a,b,d,e){void 0===e&&(e=null);if(this._mapTiles&&this._mapTiles[a])var f=this._mapTiles[a][b];f&&(f.color=d,e?(a=f.getChildByName("infoText"),a||(a=new c.TextField,
a.size=10,a.name="infoText",f.addChild(a)),a.text=e,a.x=-a.width/2,a.y=-a.height/2):(a=f.getChildByName("infoText"))&&a.parent&&a.parent.removeChild(a))};b.showTileText=function(a,b){if(this._mapTiles&&this._mapTiles[a])var d=this._mapTiles[a][b];if(d){var e=d.getChildByName("textField");e||(e=new c.TextField,d.addChild(e));e.text=a+"-"+b;e.x=-e.width/2;e.y=-e.height/2}};b.checkTiles=function(a){if(this._isShowTile)for(var b=this._mapTiles.length,c=this._mapTiles[0].length,d=0;d<b;d++)for(var e=0;e<
c;e++){var f=this._mapTiles[d][e];a.containsPoint(f.point)?f.parent!=this._mapTileContainer&&this._mapTileContainer.addChild(f):f.parent&&f.parent.removeChild(f)}};b.drawView=function(){this._isShowView&&(c.DisplayObjectUtil.drawRectBorder(this._viewShape,this._viewWidth,this._viewHeight,65280,1,2),this._viewShape.graphics.moveTo(0,0),this._viewShape.graphics.lineTo(this._viewWidth,this._viewHeight),this._viewShape.graphics.moveTo(0,this._viewHeight),this._viewShape.graphics.lineTo(this._viewWidth,
0))};b.setUpdateData=function(a,b){void 0===b&&(b=!0);this._updateData[a]=b};b.getUpdateData=function(a){var b=!1;if(this._updateData)for(var c=a.length,d=0;d<c;d++){var e=a[d];if(b=b||this._updateData[e])break}return b};b.thisAddedToStage=function(a){this.removeEventListener(c.Event.ADDED_TO_STAGE,this.thisAddedToStage,this);this._stage=this.stage;this.localToGlobal(0,0,this._oPoint);this.localToGlobal(this._viewWidth/2,this._viewHeight/2,this._cPoint);this.addListeners()};b.addListeners=function(){};
b.initMap=function(){};b.selectedTile=function(a,b){if(this._mapTiles)var c=this._mapTiles[a][b];c&&(c.color=16776960,this._lastTileMap&&this._lastTileMap!=c&&(this._lastTileMap.color=6710886),this._lastTileMap=c)};b.drawRenderRect=function(){if(this._isShowRender){var a=this.renderRect;this._renderShape.graphics.clear();this._renderShape.graphics.beginFill(16711680,0.3);this._renderShape.graphics.lineStyle(3,16711680,1);this._renderShape.graphics.drawRect(a.x,a.y,a.width,a.height);this._renderShape.graphics.endFill()}};
b.drawMapRect=function(){this._mapTileContainer.graphics.clear();if(!this._isShowTile&&this._isDrawInteractive){var a=this.renderRect;this._mapTileContainer.graphics.beginFill(6710886,this._renderRectAlpha);this._mapTileContainer.graphics.drawRect(a.x,a.y,a.width,a.height);this._mapTileContainer.graphics.endFill()}};b.limitValue=function(a,b,c){a<b&&(a=b);a>c&&(a=c);return a};b.setMapLayer=function(){for(var a=[this._sceneContainer,this._renderShape,this._pathShape],b=null,c=0;c<a.length;c++){for(b=
a[c];(!b||b.parent!=this._mapContainer)&&(a.splice(c,1),b=a[c],0!=a.length););b&&b.parent==this._mapContainer&&this._mapContainer.setChildIndex(b,c)}};b.getLayerContainer=function(a){if(!this.layerConfigs)return c.LogManager.error(this,"\u5c42\u7ea7\u914d\u7f6e\u5c5e\u6027layerConfigs\u672a\u8bbe\u7f6e."),null;var b=null,b=this._layerHashMap.get(a);if(!b){var d=this.layerConfigs[a],b=new c.DisplayObjectContainer;b.name="sceneContainerLayer"+a;b.touchEnabled=d.touchEnabled;b.touchChildren=d.touchChildren;
this._sceneContainer.addChild(b);this._layerHashMap.put(a,b);a=this._layerHashMap.keys();a.sort(c.ArrayUtil.numeric);for(var d=a.length,e=0;e<d;e++)this._sceneContainer.setChildIndex(this._layerHashMap.get(a[e]),e)}return b};b.show=function(a,b,c,d){void 0===c&&(c=NaN);void 0===d&&(d=NaN);(b=this.getLayerContainer(b))&&a.parent!=b&&b.addChild(a);isNaN(c)||(a.x=c);isNaN(d)||(a.y=d)};b.hide=function(a){a&&a.parent&&a.parent.removeChild(a)};return d}(c.CoreContainer);c.IsoMapRender=f;f.prototype.__class__=
"egret.IsoMapRender"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.isCreate=!1;this.addEventListener(c.gui.UIEvent.CREATION_COMPLETE,this.createCompleteEvent,this)}__extends(d,e);var b=d.prototype;b.createCompleteEvent=function(a){this.removeEventListener(c.gui.UIEvent.CREATION_COMPLETE,this.createCompleteEvent,this);this.onCreate()};b.onCreate=function(){this.isCreate=!0};return d}(c.gui.SkinnableContainer);c.BaseView=f;f.prototype.__class__="egret.BaseView"})(egret||(egret={}));
(function(c){var f=function(c){function d(){c.call(this);this.id=0;this.idString=null;this.y=this.x=0;this.name=""}__extends(d,c);return d}(c.BaseVo);c.SceneElementVo=f;f.prototype.__class__="egret.SceneElementVo"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this,c.ApplicationLayerType.BOTTOM);this.RENDER_OFFSET_HEIGHT=this.RENDER_OFFSET_WIDTH=100;this.DELAY_SORT=8;this.PATH_TYPES=[{label:"\u4e0d\u53ef\u901a\u8fc7",data:{type:c.PathType.OBSTACLE,color:16711680}},{label:"\u53ef\u884c\u8d70",data:{type:c.PathType.WALKABLE,color:0}},{label:"\u900f\u660e",data:{type:c.PathType.TRANSPARENT,color:255}}];this._viewWidth=600;this._viewHeight=400;this._biologyMap=this._elementsMap=this._elementsIdMap=this._pieceMap=
this._isoMap=null;this._biologyIndex=0;this._isClear=!1;this._role=null;this._roleOffsetY=this._roleOffsetX=0;this._indexMap=this._sortFields=this._sceneEditLo=null;this._elementsIdMap=new c.HashMap;this._elementsMap=new c.HashMap;this._indexMap=new c.HashMap;this._biologyMap=[];this._sortFields=["depth","id"]}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"isoMap",{get:function(){return this._isoMap},enumerable:!0,configurable:!0});b.getBiologyMap=function(){return this._biologyMap};b.initData=
function(a){this._sceneEditLo=a;this.clearScene();this.setRoleViewProperties();this._isoMap.setProperties(a.width,a.height,a.gridSize,this._viewWidth,this._viewHeight);this._isoMap.setMapNodes(a.nodeTypes);this._pieceMap.initData(a);this._isClear=!1};b.setRole=function(a){this._role=a;this._role.addEventListener(c.SceneElementEvent.SCENE_ELEMENT_PATH_CHANGED,this.sceneElementPathChanged,this)};b.isInRenderRect=function(a,b){void 0===b&&(b=0);return this._isoMap.renderRect.contains(a,b)};b.addElement=
function(a,b,d,e){void 0===d&&(d=NaN);void 0===e&&(e=NaN);if(this._elementsMap.containsKey(a.hashCode))return null;this._isoMap.show(a,b,d,e);var f=null;a instanceof c.SceneElement?(f=a.id,a instanceof c.SceneElementMover&&(a.setMapData(this._isoMap),isNaN(d)||isNaN(e)||a.setXY(d,e)),a.addToScene()):f=a.name;if(null==f)throw Error("\u573a\u666f\u5143\u7d20 id \u4e0d\u80fd\u4e3a\u7a7a");this._elementsMap.put(a.hashCode,!0);this._elementsIdMap.put(f,a);b==c.SceneLayerType.BIOLOGY&&(this._biologyMap[this._biologyIndex]=
a,this._biologyIndex++,this._indexMap.put(a.hashCode,a.parent.getChildIndex(a)));return a};b.getElementSpeed=function(){c.LogManager.error(this,"\u5b50\u7c7b\u5e94\u91cd\u5199\u6b64\u65b9\u6cd5");return 0};b.removeElement=function(a,b){void 0===b&&(b=!0);if(!a)return a;var d=null!=a.stage;this._isoMap.hide(a);var e=null;a instanceof c.SceneElement?(e=a.id,a.removeFromScene()):e=a.name;this._elementsMap.remove(a.hashCode);this._elementsIdMap.remove(e);this.removeBiology(a);b&&d&&a instanceof c.SceneElement&&
this.recoverElement(a);return a};b.removeBiology=function(a){if(a){for(var b=this._biologyIndex,c=0,d=0;d<b;d++)if(a==this._biologyMap[d]){c=b-1;d<c&&(this._biologyMap[d]=this._biologyMap[c]);this._biologyMap[c]=null;this._biologyIndex--;break}if(0>this._biologyIndex)throw Error("removeBiology");this._indexMap.remove(a.hashCode)}};b.recoverElement=function(a){};b.removeElementById=function(a){a=this._elementsIdMap.remove(a);this._elementsMap.remove(a.hashCode);this.removeBiology(a);return a?this.removeElement(a):
null};b.getElement=function(a){return this._elementsIdMap.get(a)};b.renderElement=function(a){};b.renderFixedElements=function(a){};b.renderDynamicElements=function(a){};b.getFixedElementMap=function(){return null};b.renderElementInternal=function(a,b,c){return null};b.clearScene=function(){this._isClear=!0;this._pieceMap.clearMap();for(var a=this._elementsIdMap.values(),b=a.length,c=0;c<b;c++)this.removeElement(a[c])};b.initWindow=function(){e.prototype.initWindow.call(this);this._pieceMap=new c.PieceMap2;
this._pieceMap.rootPath=c.dataManager().pathData.getResourceUrl(c.PathData.PATH_MAP);this._isoMap=new c.IsoMap(0,0,0,0,0,this.RENDER_OFFSET_WIDTH,this.RENDER_OFFSET_HEIGHT);this._isoMap.pathPolicy=c.PathPolicyType.ALL;this._isoMap.showPath(!1);this._isoMap.isDrawInteractive=!1;this.addChild(this._isoMap);for(var a=this.PATH_TYPES.length,b=0;b<a;b++){var d=this.PATH_TYPES[b];this._isoMap.setTileTypeColor(d.data.type,d.data.color)}this._isoMap.pathTypes=[c.PathType.WALKABLE,c.PathType.TRANSPARENT];
this._isoMap.speed=6;this._isoMap.layerConfigs=c.SceneLayerType.LAYER_MOUSE_CONFIGS;this._isoMap.show(this._pieceMap,c.SceneLayerType.NEARBY_VIEW);this._isoMap.show(this._isoMap.mapTileContainer,c.SceneLayerType.NEARBY_VIEW);this.recall()};b.addEvents=function(){e.prototype.addEvents.call(this);this._isoMap.setRenderChangeHandler(this.renderChangedHandler,this);this._isoMap.addEventListener(c.IsoMapEvent.ISO_MAP_PROPERTY_CHANGED,this.mapChanged,this);c.ApplicationManager.getInstance().stage.addEventListener(c.Event.RESIZE,
this.stageResize,this);c.EnterFrameManager.getInstance().hasExecute(this._sortId)||(this._sortId=c.EnterFrameManager.getInstance().addExecute(this.sortBiology,this,this.DELAY_SORT))};b.remove=function(){e.prototype.remove.call(this);this._isoMap.setRenderChangeHandler(null);this._role&&this._role.removeEventListener(c.SceneElementEvent.SCENE_ELEMENT_PATH_CHANGED,this.sceneElementPathChanged,this);c.ApplicationManager.getInstance().stage.removeEventListener(c.Event.RESIZE,this.stageResize,this);c.EnterFrameManager.getInstance().removeExecute(this._sortId);
this.clearScene()};b.destroy=function(){this._isDestroy||(this.clearScene(),this._isoMap.destroy(),this._pieceMap.destroy(),e.prototype.destroy.call(this))};b.mapChanged=function(a){a=this._biologyMap.length;for(var b=0;b<a;b++){var d=this._biologyMap[b];d instanceof c.SceneElementMover&&d.setMapData(this._isoMap)}};b.renderChangedHandler=function(a){this._isClear||this.updateRenderRect()};b.sceneElementPathChanged=function(a){this._role&&(this._isoMap.pathNodes=this._role.pathNodes.concat(),this._isoMap.drawCurrentPath())};
b.updateRenderRect=function(){var a=this._isoMap.renderRect;this._pieceMap.renderMap(this._isoMap.viewRect,a);this.renderFixedElements(a);this.renderDynamicElements(a)};b.sortBiology=function(a){1<this._biologyIndex&&this._biologyMap.sort(this.sortElement);a=this._isoMap.getLayerContainer(c.SceneLayerType.BIOLOGY);for(var b=this._biologyIndex,d=null,e=0;e<b;e++)(d=this._biologyMap[e])&&this._indexMap.get(d.hashCode)!=e&&(this._indexMap.put(d.hashCode,e),a.setChildIndex(d,e))};b.sortElement=function(a,
b){if(!a||!b)return 0;var c=a.getDepth(),d=b.getDepth();return c>d?1:c<d?-1:0};b.stageResize=function(a){};b.setRoleViewProperties=function(){this._viewWidth=c.ApplicationManager.getInstance().stage.stageWidth;this._viewHeight=c.ApplicationManager.getInstance().stage.stageHeight;this._roleOffsetX=this._viewWidth/2;this._roleOffsetY=this._viewHeight/2};return d}(c.Window);c.SceneRender=f;f.prototype.__class__="egret.SceneRender"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._frameCount=this._timerCount=0;this._radiansCache=[];this._damageTargets=[];this._skillTimeData={};this._positionRadians=[];this._positionCache=[];this._positionTargets=[];this._positionPoint=new c.Point;this._hpChangeTypes=[c.UpdateType.DAMAGE_HP_CHANGE];this.speed=6;this._hpBar=new c.HPBar;this._namePad.show(this._hpBar,-1);for(var a=0;6>a;a++)this._positionRadians[a]=60*a/180*Math.PI;var b=this;this._positionSort=function(a,d){var e=
c.SceneElementMover.MOVER_WIDTH/2,f=c.SceneElementMover.MOVER_HEIGHT,h=b.getAttackRange(),k=Math.cos(a)*h+b._x,m=Math.sin(a)*h+b._y,k=b.limitValue(k,e,b._maxX-e),m=b.limitValue(m,f,b._maxY),p=Math.cos(d)*h+b._x,h=Math.sin(d)*h+b._y,p=b.limitValue(p,e,b._maxX-e),h=b.limitValue(h,f,b._maxY),f=e=0,r;for(r in b._positionTargets)e+=c.DimensionUtil.distance2(k,m,b._positionTargets[r].vo.x,b._positionTargets[r].vo.y),f+=c.DimensionUtil.distance2(p,h,b._positionTargets[r].vo.x,b._positionTargets[r].vo.y);
return e>f?-1:e<f?1:0};this._positionSort2=function(a,d){var e=c.SceneElementMover.MOVER_WIDTH/2,f=c.SceneElementMover.MOVER_HEIGHT,h=b.getAttackRange(),k=Math.cos(a)*h+b._x,m=Math.sin(a)*h+b._y,k=b.limitValue(k,e,b._maxX-e),m=b.limitValue(m,f,b._maxY),p=Math.cos(d)*h+b._x,h=Math.sin(d)*h+b._y,p=b.limitValue(p,e,b._maxX-e),h=b.limitValue(h,f,b._maxY),e=c.DimensionUtil.distance2(k,m,b._attackTarget.vo.x,b._attackTarget.vo.y),p=c.DimensionUtil.distance2(p,h,b._attackTarget.vo.x,b._attackTarget.vo.y);
return e<p?-1:e>p?1:0}}__extends(d,e);var b=d.prototype;b.setHPStyle=function(a,b,c,d){this._hpBar.setStyle(a,b,c,d);this._namePad.updateLayout()};b.updateXY=function(){e.prototype.updateXY.call(this)};b.addToScene=function(){e.prototype.addToScene.call(this);this.updateHp()};b.updateHp=function(){var a=this._data.vo;this._hpBar.setProperty(a.hp+"",a.hp/a.hpTotal)};b.play=function(a,b,c,d,f,l,h,k){void 0===a&&(a=-1);void 0===b&&(b=-1);void 0===c&&(c=-1);void 0===d&&(d=0);void 0===f&&(f=null);void 0===
l&&(l=null);void 0===h&&(h=null);void 0===k&&(k=null);this._isLocked||(e.prototype.play.apply(this,arguments),this.clearAttack())};b.removeFromScene=function(){this.stopAll();e.prototype.removeFromScene.call(this)};b.setChaseArriveHandler=function(a,b){this._chaseArriveItem||(this._chaseArriveItem=new c.ScriptItem);this._chaseArriveItem.execute=a;this._chaseArriveItem.target=b};b.chaseArmies=function(a){if(!(0>=this.data.vo.hp))if(this.armies=a){c.TimerManager.getInstance().hasExecute(this._chaseTimerId)||
(this._chaseTimerId=c.TimerManager.getInstance().addExecute(this.checkAutoAttack,this,500));a=1E5;var b,d=this.getPriorityTarget(),e=this.x,f=this.y;if(!d)for(var l in this.armies)b=this.armies[l].vo,0<b.hp&&(b=c.DimensionUtil.distance2(e,f,b.x,b.y),b<a&&(a=b,d=this.armies[l]));d?(this._attackTarget=d,this.checkChaseArrive()||c.EnterFrameManager.getInstance().hasExecute(this._chaseId)||(this._chaseId=c.EnterFrameManager.getInstance().addExecute(this.checkChaseArrive,this,3))):(this._attackTarget=
null,this.attackEnd())}else this._attackTarget=null,this.attackEnd()};b.getPriorityTarget=function(){return null};b.checkAutoAttack=function(){this._timerCount++;0==this._timerCount%2&&this.chaseArmies(this.armies)};b.checkChaseArrive=function(){this._frameCount++;this.getElementMinRange();if(this.checkRange()||this._isLocked)return!1;if(c.DimensionUtil.distance2(this._x,this._y,this._attackTarget.vo.x,this._attackTarget.vo.y)<this.getAttackRange())return c.EnterFrameManager.getInstance().removeExecute(this._chaseId),
this.attack(),this._chaseArriveItem&&(this._chaseArriveItem.params=[this._attackTarget],this._chaseArriveItem.apply()),!0;0==this._frameCount%3&&this.moveTo3(this._attackTarget.vo.x,this._attackTarget.vo.y);return!1};b.resetPositionPoint=function(){this._positionPoint.x=0;this._positionPoint.y=0};b.checkRange=function(){if(!this._attackTarget||0>=this._attackTarget.vo.hp)return!1;if(0<this._positionPoint.x&&0<this._positionPoint.y){if(this._x+""!=this._positionPoint.x+""&&this._y+""!=this._positionPoint.y+
"")return!0;this.resetPositionPoint()}var a=this.getElementMinRange();if(this.scene){var b=this.scene.getBiologyMap();this._positionTargets.length=0;for(var e in b)if(b[e]instanceof d&&b[e]!=this){var f=b[e];c.DimensionUtil.distance2(this._x,this._y,f.data.vo.x,f.data.vo.y)<a&&this._positionTargets.push(f.data)}if(0<this._positionTargets.length){this._positionRadians.sort(this._positionSort);this._positionCache.length=0;a=this._positionRadians.length/3|0;for(b=0;b<a;b++)this._positionCache.push(this._positionRadians[b]);
this._positionCache.sort(this._positionSort2);var a=c.SceneElementMover.MOVER_WIDTH/2,b=c.SceneElementMover.MOVER_HEIGHT,f=this.getAttackRange(),n=this._positionCache[0];e=Math.cos(n)*f+this._x;f=Math.sin(n)*f+this._y;e=this.limitValue(e,a,this._maxX-a);f=this.limitValue(f,b,this._maxY);this._positionPoint.x=e;this._positionPoint.y=f;this.moveTo3(e,f);return!0}}return!1};b.getAttackRange=function(a){return 150};b.getElementMinRange=function(){return 80};b.attack=function(){if(!this._isLocked&&this._attackTarget)if(0>=
this._attackTarget.vo.hp)this.chaseArmies(this.armies);else{this.stopMove();var a=c.ActionMovieClipData.getInstance().calculateDirection(this.x,this.y,this._attackTarget.vo.x,this._attackTarget.vo.y);this.play(0,c.ActionType.ATTACK,a,1,this.attackEnd,this);this._avatar.setFrameHandler(this.playSkill,this)}};b.attackEnd=function(){this.resetPositionPoint();this._attackTarget||c.TimerManager.getInstance().removeExecute(this._chaseTimerId);this._avatar.actionType==c.ActionType.ATTACK&&this.play(0,c.ActionType.PREPARE)};
b.clearAttack=function(){this._timerCount=0;this._avatar.setFrameHandler(null)};b.playSkill=function(){};b.stopAll=function(){c.Tween.removeTweens(this);c.EnterFrameManager.getInstance().removeExecute(this._chaseId);c.TimerManager.getInstance().removeExecute(this._chaseTimerId);this.isSkillStatus=!1;this._attackTarget=this.armies=null;this.setXY(this._x,this._y);this.unlock();this.stopMove();this.attackEnd();this.clearAttack()};b.changeSceneEffect=function(){this.stopAll();this.enterSceneEffect()};
b.enterSceneEffect=function(){if(this.scene){var a=c.SceneElementManager.getInstance().getElement(c.ElementEffect);a.setIsCheckResource(!1);a.setMovieName(c.MovieName.EFFECT_01);this.scene.addElement(a,c.SceneLayerType.BATTLE_EFFECT,this.x,this.y)}};b.levelUpEffect=function(){if(this.scene){var a=c.SceneElementManager.getInstance().getElement(c.ElementEffect);a.setIsCheckResource(!1);a.setMaster(this);a.setMovieName(c.MovieName.LEVEL_UP);this.scene.addElement(a,c.SceneLayerType.BATTLE_EFFECT,this.x,
this.y)}};b.damage=function(a,b,d,e,f){void 0===a&&(a=0);void 0===b&&(b=null);void 0===d&&(d=0);void 0===e&&(e=0);void 0===f&&(f=0);this._attackTarget&&(0<d&&(b=this.getDamageTargetsByRange(d,e,f)),b||(b=this.getDamageTargets(a,e,f)),d=this.getDamageRadians(b),a=c.dataManager().fightData.damage(this.data,a,b),c.globalUpdateWindows(this._hpChangeTypes,b,a,d))};b.getDamageTargets=function(a,b,c){this._damageTargets.length=0;this._damageTargets.push(this._attackTarget);return this._damageTargets};b.getDamageRadians=
function(a){this._radiansCache.length=0;for(var b in a)this._radiansCache.push(Math.atan2(a[b].vo.y-this.y,a[b].vo.x-this.x));return this._radiansCache};b.getDamageTargetsByRange=function(a,b,d){void 0===a&&(a=0);void 0===b&&(b=0);void 0===d&&(d=0);this._damageTargets.length=0;this._damageTargets.push(this._attackTarget);0==a&&this.getAttackRange();0==b&&(b=this._x);0==d&&(d=this._y);for(var e in this.armies)if(this.armies[e]&&this._attackTarget!=this.armies[e]){var f=this.armies[e].vo;0<f.hp&&c.DimensionUtil.distance2(b,
d,f.x,f.y)<=a&&this._damageTargets.push(this.armies[e])}return this._damageTargets};b.setSkillTime=function(a){this._skillTimeData[a]=c.getTimer()};b.getSkillTime=function(a){return this._skillTimeData[a]?c.getTimer()-this._skillTimeData[a]:1E9};b.setUseSkill=function(a){this.setSkillTime(a);this.skillType=a};b.onCollide=function(a,b,d,e,f){var l=c.SceneElementMover.MOVER_WIDTH/2,h=c.SceneElementMover.MOVER_HEIGHT,k=a._x+Math.cos(d)*e;d=a._y+Math.sin(d)*e;k=this.limitValue(k,l,this._maxX-l);d=this.limitValue(d,
h,this._maxY);c.Tween.get(this,{onChange:this.onChangeCollide,onChangeObj:this}).to({x:k,y:d},f).call(this.collideComplete,this,[a,b,k,d])};b.onChangeCollide=function(){this.scene&&(this.setXY(this._x,this._y),c.RoleManager.getInstance().role==this&&this.scene.isoMap.gotoXY2(this._x,this._y))};b.collideComplete=function(a,b,c,d){this.setXY(c,d)};b.lock=function(){this._isLocked=!0;this._avatar.stopMovie()};b.unlock=function(){this.resetPositionPoint();this._isLocked=!1;this.scene&&this._avatar.playMovie();
c.EnterFrameManager.getInstance().hasExecute(this._chaseId)||this.chaseArmies(this.armies)};b.stepBack=function(a,b,d){this.stopMove();var e=Math.atan2(this._y-b,this._x-a);a=Math.cos(e)*d+a;b=Math.sin(e)*d+b;c.Tween.get(this).to({x:a,y:b},200).call(this.stepBackComplete,this,[a,b])};b.stepBackComplete=function(a,b){this.setXY(a,b);this.resetPositionPoint();this.chaseArmies(this.armies)};return d}(c.SceneElementMover);c.SceneElementDriver=f;f.prototype.__class__="egret.SceneElementDriver"})(egret||
(egret={}));
(function(c){var f=function(){function e(){this.id=0;this._idString=null;this.name="";this.coorPoint=null;this.sceneId=0;this._point=this.actionConfig=this.movieName=null}var d=e.prototype;Object.defineProperty(d,"point",{get:function(){if(!this._point){var b=this.coorPoint.split(",");this._point=new c.Point(b[0],b[1])}return this._point},set:function(b){},enumerable:!0,configurable:!0});Object.defineProperty(d,"idString",{get:function(){this._idString||(this._idString=this.id+"");return this._idString},set:function(b){},
enumerable:!0,configurable:!0});return e}();c.SceneElementLo=f;f.prototype.__class__="egret.SceneElementLo"})(egret||(egret={}));
(function(c){var f=function(){function c(){this.vo=this.lo=null}Object.defineProperty(c.prototype,"id",{get:function(){if(this.vo){if(this.vo.idString)return this.vo.idString;if(this.vo.id)return this.vo.id+""}return this.lo&&this.lo.id?this.lo.id+"":null},enumerable:!0,configurable:!0});return c}();c.SceneElementDataItem=f;f.prototype.__class__="egret.SceneElementDataItem"})(egret||(egret={}));
(function(c){var f=function(c){function d(){c.apply(this,arguments);this.hpTotal=this.hp=1E3}__extends(d,c);return d}(c.SceneElementVo);c.SceneDriverVo=f;f.prototype.__class__="egret.SceneDriverVo"})(egret||(egret={}));
(function(c){var f=function(){function c(b,a,g,d){void 0===b&&(b=null);void 0===a&&(a=null);void 0===g&&(g=0);void 0===d&&(d=null);this._priority=0;this.id=NaN;this.params=this.execute=this.target=null;this._currentCount=this.repeatCount=0;this.execute=b;this.params=a;this.priority=g;this.target=d;this._currentCount=0}var d=c.prototype;Object.defineProperty(d,"currentCount",{get:function(){return this._currentCount},enumerable:!0,configurable:!0});Object.defineProperty(d,"priority",{get:function(){return this._priority},
set:function(b){this._priority!=b&&(b=Math.max(b,c.PRIORITY_MIN),this._priority=b=Math.min(b,c.PRIORITY_MAX))},enumerable:!0,configurable:!0});Object.defineProperty(d,"isCompleted",{get:function(){return 0<this.repeatCount&&this._currentCount>=this.repeatCount},enumerable:!0,configurable:!0});d.apply=function(){if(null==this.execute)return null;this._currentCount++;return this.execute.apply(this.target,this.params)};d.destroy=function(){this._priority=this.repeatCount=this._currentCount=0;this.params=
this.execute=this.target=null};c.PRIORITY_MAX=10;c.PRIORITY_MIN=0;return c}();c.ScriptItem=f;f.prototype.__class__="egret.ScriptItem"})(egret||(egret={}));
(function(c){var f=function(){function e(){this.column=this.row=-1;this.size=0;this.point2D=null;this.depth=0;this.nextNode=this.preNode=this.point3D=null;this.h=this.g=this.f=0;this.factor=1;this.flag=!1}var d=e.prototype;d.toString=function(){return"[IsoNode(row = "+this.row+",column = "+this.column+",depth = "+this.depth+")]"};d.copyBy=function(b){this.row=b.row;this.column=b.column;this.size=b.size;this.depth=b.depth;this.f=b.f;this.g=b.g;this.h=b.h;this.factor=b.factor;this.nextNode&&b.nextNode&&
this.nextNode.copyBy(b.nextNode);this.preNode&&b.preNode&&this.preNode.copyBy(b.preNode);this.point2D&&b.point2D&&(this.point2D.x=b.point2D.x,this.point2D.y=b.point2D.y);this.point3D&&b.point3D&&(this.point3D.x=b.point3D.x,this.point3D.y=b.point3D.y,this.point3D.z=b.point3D.z)};d.init=function(){this.preNode=new e;this.nextNode=new e;this.point2D=new c.Point;this.point3D=new c.Point3D};return e}();c.IsoNode=f;f.prototype.__class__="egret.IsoNode"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.speed=8}__extends(d,e);var b=d.prototype;b.updateAvatar=function(a){this.setData(a);this._avatar.clear();this.stage&&this._partTypes&&this._avatar.setPartTypes(this._partTypes,this.getPartUrl,this,this.loadActionComplete,this)};b.setData=function(a){e.prototype.setData.call(this,a);a=a.vo;c.SceneElementData.getInstance().setSceneAvatarVoPlayer2(this._sceneAvatarVo,a.vocation,a.sex,a.bodyLevel,a.weaponLevel,a.wingLevel)};b.play=function(a,
b,d,e,f,l,h,k){void 0===a&&(a=-1);void 0===b&&(b=-1);void 0===d&&(d=-1);void 0===e&&(e=0);void 0===f&&(f=null);void 0===l&&(l=null);void 0===h&&(h=null);void 0===k&&(k=null);this._isLocked||this._isDestroy||!this._sceneAvatarVo.body||(this._data.vo.mountsState==c.MountedType.NONE?this._partTypes=c.ActionPartType.TYPES_NORMAL:(this._partTypes=c.ActionPartType.TYPES,this._data.vo.mountsState==c.MountedType.FLYED&&(b=c.ActionType.PREPARE)),this._avatar.play(a,b,d,e,f,l,h,k),this._avatar.setPartTypes(this._partTypes,
this.getPartUrl,this,this.loadActionComplete,this),this.clearAttack(),this._namePad.y=this._avatar.topLineY)};b.getPartUrl=function(a){var b=null;a==c.ActionPartType.BODY?b=c.PathData.PATH_MOVIES_PLAYER:a==c.ActionPartType.WEAPON?b=c.PathData.PATH_MOVIES_WEAPON:a==c.ActionPartType.WING?b=c.PathData.PATH_MOVIES_WING:a==c.ActionPartType.MOUNTS&&(b=c.PathData.PATH_MOVIES_MOUNTS);a=this._sceneAvatarVo[a];return c.dataManager().sceneElementData.getActionUrl(b,a,this._avatar.actionType)};b.getPriorityTarget=
function(){var a=this.data.vo,b;for(b in this.armies){var d=this.armies[b].vo;if(0<d.hp&&d instanceof c.ScenePlayerVo&&d.vocation==a.vocation)return this.armies[b]}return null};b.checkAutoAttack=function(){};b.checkAutoAttack2=function(){this._isLocked||(this._attackTarget&&0>=this._attackTarget.vo.hp?this.chaseArmies(this.armies):this.attack())};b.attack=function(){if(!this._isLocked&&!this.isSkillStatus&&this._attackTarget)if(0>=this._attackTarget.vo.hp)this.chaseArmies(this.armies);else{this.stopMove();
var a=c.ActionMovieClipData.getInstance().calculateDirection(this.x,this.y,this._attackTarget.vo.x,this._attackTarget.vo.y);this._avatar.actionType==c.ActionType.ATTACK?this.direction=a:(this.play(0,c.ActionType.ATTACK,a),this._avatar.setFrameHandler(this.playSkill,this))}};return d}(c.SceneElementDriver);c.ElementPlayer=f;f.prototype.__class__="egret.ElementPlayer"})(egret||(egret={}));
(function(c){var f=function(){function e(){c.LogManager.debug(this,"\u6e38\u620f\u542f\u52a8")}var d=e.prototype;d.loadConfig=function(){};d.initComponents=function(){};d.setLanguage=function(){};d.openWindows=function(){};return e}();c.ApplicationRunner=f;f.prototype.__class__="egret.ApplicationRunner"})(egret||(egret={}));
(function(c){var f=function(){function c(){this.length=this.length=0;this.content={}}var d=c.prototype;d.size=function(){return this.length};d.isEmpty=function(){return 0==this.length};d.keys=function(){var b=Array(this.length),a=0,c;for(c in this.content)b[a]=c,a++;return b};d.eachKey=function(b,a){for(var c in this.content)b.apply(a,[c])};d.eachValue=function(b,a){for(var c in this.content)b.apply(a,[this.content[c]])};d.values=function(){var b=Array(this.length),a=0,c;for(c in this.content)b[a]=
this.content[c],a++;return b};d.containsValue=function(b){for(var a in this.content)if(this.content[a]===b)return!0;return!1};d.containsKey=function(b){return void 0!=this.content[b]?!0:!1};d.get=function(b){b=this.content[b];return void 0!==b?b:null};d.getValue=function(b){return this.get(b)};d.put=function(b,a){if(null==b)throw Error("cannot put a value with undefined or null key!");if(null==a)return this.remove(b);if("string"!=typeof b&&"number"!=typeof b)throw Error("JS\u4e0d\u652f\u6301\u5bf9\u8c61\u4f5c\u4e3aKey");
var c=this.content[b];c||this.length++;this.content[b]=a;return c};d.remove=function(b){if(void 0==this.content[b])return null;var a=this.content[b];delete this.content[b];this.length--;return a};d.clear=function(){c.deleteObjectKey(this.content);this.length=0};d.clone=function(){var b=new c,a;for(a in this.content)b.put(a,this.content[a]);return b};d.toString=function(){for(var b=this.keys(),a=this.values(),c="HashMap Content:\n",d=0;d<b.length;d++)c+=b[d]+" -> "+a[d]+"\n";return c};c.deleteObjectKey=
function(b){for(var a in b)c._keyArray.push(a);a=c._keyArray.length;for(var g=0;g<a;g++)delete b[c._keyArray[g]];c._keyArray.length=0};c._keyArray=[];return c}();c.HashMap=f;f.prototype.__class__="egret.HashMap"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._dataItems=this._baseMovieClipVo=this._shadow=this._bitmap=null;this._hasData=!1;this._frameRate=this._frameIndexMax=this._totalFramesManual=this._totalFrames=0;this._shadow=new c.Bitmap;this._shadow.cacheAsBitmap=!0;this.addChild(this._shadow);this._bitmap=new c.Bitmap;this.addChild(this._bitmap)}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"totalFramesManual",{get:function(){return this._totalFramesManual},set:function(a){this._totalFramesManual=
a},enumerable:!0,configurable:!0});Object.defineProperty(b,"frameRate",{get:function(){return this._frameRate},enumerable:!0,configurable:!0});Object.defineProperty(b,"totalFrames",{get:function(){return this._totalFrames},enumerable:!0,configurable:!0});Object.defineProperty(b,"baseMovieClipVo",{get:function(){return this._baseMovieClipVo},set:function(a){(this._baseMovieClipVo=a)?(this._dataItems=this._baseMovieClipVo.dataItems,this._hasData=!0,this._totalFrames=this._dataItems.length,this._frameIndexMax=
this._totalFrames-1,this._frameRate=this._baseMovieClipVo.frameRate):this._bitmap&&this._bitmap.texture&&(this._dataItems=null,this._hasData=!1,this._frameRate=this._frameIndexMax=this._totalFrames=0)},enumerable:!0,configurable:!0});b.clear=function(){this.baseMovieClipVo=null;this._bitmap.texture=null};b.destroy=function(){this._isDestroy||(this.clear(),e.prototype.destroy.call(this))};b.setFrameIndex=function(a){void 0===a&&(a=0);if(this._hasData){0<this._totalFramesManual?a>this._frameIndexMax&&
(a%=this._frameIndexMax):a>=this._totalFrames&&(a=0);var b=this._dataItems[a]}b?(this._bitmap.x=b.x,this._bitmap.y=b.y,this._bitmap.texture=b.bitmapData):this._bitmap.texture=null};return d}(c.CoreContainer);c.BaseMovieClip2=f;f.prototype.__class__="egret.BaseMovieClip2"})(egret||(egret={}));
(function(c){var f=function(e){function d(a){void 0===a&&(a=!1);e.call(this);a&&this.addEventListener(c.Event.ADDED_TO_STAGE,this.thisAddedToStage,this)}__extends(d,e);var b=d.prototype;b.initWindow=function(){e.prototype.initWindow.call(this);this.stage?c.ApplicationManager.getInstance().init(this):c.LogManager.warn(this,"\u821e\u53f0\u4e0d\u5b58\u5728\uff0c\u4e3b\u7a0b\u5e8f\u6709\u8bef")};b.destroy=function(){this._isDestroy||e.prototype.destroy.call(this)};b.thisAddedToStage=function(a){this.removeEventListener(c.Event.ADDED_TO_STAGE,
this.thisAddedToStage,this);this.initWindow()};return d}(c.Window);c.Application=f;f.prototype.__class__="egret.Application"})(egret||(egret={}));
(function(c){var f=function(e){function d(a){e.call(this);this._size=this.vz=this.vy=this.vx=this.line=this.column=0;this._walkable=!1;this._depth=0;this._updateData=this._point=this._rect=null;this._updateData={};this._rect=new c.Rectangle(0,0,a,a);this._size=a;this._position=new c.Point3D;this._point=new c.Point;this.updateScreenPosition()}__extends(d,e);var b=d.prototype;b.toString=function(){return"[IsoObject (x:"+this._position.x+", y:"+this._position.y+", z:"+this._position.z+")]"};Object.defineProperty(b,
"x",{get:function(){return this._position.x},set:function(a){this._position.x!=a&&(this._position.x=a,this.updateScreenPosition())},enumerable:!0,configurable:!0});Object.defineProperty(b,"y",{get:function(){return this._position.y},set:function(a){this._position.y!=a&&(this._position.y=a,this.updateScreenPosition())},enumerable:!0,configurable:!0});Object.defineProperty(b,"z",{get:function(){return this._position.z},set:function(a){this._position.z!=a&&(this._position.z=a,this.updateScreenPosition())},
enumerable:!0,configurable:!0});Object.defineProperty(b,"position",{get:function(){this.getUpdateData("position")&&(this._position=c.IsoUtil.getPoint3D(this._point),this.setUpdateData("position",!1));return this._position},set:function(a){if(this._position.x!=a.x||this._position.y!=a.y||this._position.z!=a.z)this._position=a,this.updateScreenPosition()},enumerable:!0,configurable:!0});Object.defineProperty(b,"depth",{get:function(){this.getUpdateData("depth")&&(this._depth=0.866*(this.position.x+
this.position.z)-0.707*this.position.y,this.setUpdateData("depth",!1));return this._depth},enumerable:!0,configurable:!0});Object.defineProperty(b,"walkable",{get:function(){return this._walkable},set:function(a){this._walkable=a},enumerable:!0,configurable:!0});Object.defineProperty(b,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(b,"rect",{get:function(){this.getUpdateData("rect")&&(this._rect.x=this.position.x-this._size/2,this._rect.y=this.position.z-
this._size/2,this.setUpdateData("rect",!1));return this._rect},enumerable:!0,configurable:!0});Object.defineProperty(b,"point",{get:function(){return this._point},set:function(a){if(this._point.x!=a.x||this._point.y!=a.y)this._point=a,this._setX(this._point.x),this._setY(this._point.y),this.invalidate()},enumerable:!0,configurable:!0});b.destroy=function(){this._isDestroy||e.prototype.destroy.call(this)};b.updateScreenPosition=function(){this.point=c.IsoUtil.getPoint2D(this._position);this.setUpdateData("position",
!1)};b.setUpdateData=function(a,b){void 0===b&&(b=!0);this._updateData[a]=b};b.getUpdateData=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];b=!1;if(this._updateData)for(var c=a.length,d=0;d<c;d++){var e=a[d];if(b=b||this._updateData[e])break}return b};b.invalidate=function(){this.setUpdateData("depth");this.setUpdateData("rect");this.setUpdateData("position")};return d}(c.CoreSprite);c.IsoBase=f;f.prototype.__class__="egret.IsoBase"})(egret||(egret={}));
(function(c){var f=function(e){function d(a,b,d,f,n,l,h){void 0===a&&(a=1E3);void 0===b&&(b=1E3);void 0===d&&(d=20);void 0===f&&(f=200);void 0===n&&(n=160);void 0===l&&(l=0);void 0===h&&(h=0);e.call(this,a,b,d,f,n,l,h);this.moveType=c.MapMoveType.FACTOR;this.stopMoveHandler=null;this._speed=0;this._moveFactor=0.2;this._targetY=this._targetX=this._speedY=this._speedX=0;this._isAddedMove=this._isAdded=!1;this._currentMapY=this._currentMapX=this._timeDelay=0;this._isMapMoved=!1;this._unRenderH=this._unRenderW=
this._renderDisY=this._renderDisX=this._minMapY=this._minMapX=0;this._centerNode=this._targetPoint3D=this._neerPoint3D=this._neerNode=this._neerPoint=this._nodePoint=this._nodeColumns=this._nodeLines=this._isoNodePoint=null;this._nodeLines=[];this._nodeColumns=[];this._nodePoint=new c.Point;this._neerPoint=new c.Point;this._isoNodePoint=new c.Point;this._neerNode=new c.IsoNode;this._neerNode.init();this._centerNode=new c.IsoNode;this._centerNode.init();this._neerPoint3D=new c.Point3D;this._targetPoint3D=
new c.Point3D;this.speed=2}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"moveFactor",{get:function(){return this._moveFactor},set:function(a){this._moveFactor!=a&&(this._moveFactor=Math.max(0,a),this._moveFactor=Math.min(1,this._moveFactor))},enumerable:!0,configurable:!0});Object.defineProperty(b,"currentMapY",{get:function(){return this._currentMapY},enumerable:!0,configurable:!0});Object.defineProperty(b,"currentMapX",{get:function(){return this._currentMapX},enumerable:!0,configurable:!0});
Object.defineProperty(b,"speed",{get:function(){return this._speed},set:function(a){this._speed!=a&&(this._speed=a,this._speed=Math.max(2,this._speed))},enumerable:!0,configurable:!0});Object.defineProperty(b,"centerNode",{get:function(){var a=this.centerPoint;this._centerNode.copyBy(this.getIsoNode(a.x,a.y));return this._centerNode},enumerable:!0,configurable:!0});Object.defineProperty(b,"mapMouseX",{get:function(){return this._mapTileContainer.anchorX},enumerable:!0,configurable:!0});Object.defineProperty(b,
"mapMouseY",{get:function(){return this._mapTileContainer.anchorY},enumerable:!0,configurable:!0});b.setProperties=function(a,b,c,d,f,l,h){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===d&&(d=0);void 0===f&&(f=0);void 0===l&&(l=0);void 0===h&&(h=0);e.prototype.setProperties.call(this,a,b,c,d,f,l,h);this._minMapX=this._viewWidth-this._mapWidth;this._minMapY=this._viewHeight-this._mapHeight;this._renderDisX=4*this._isoSize;this._renderDisY=4*this._isoSize;this._unRenderW=this._mapWidth-
this._viewWidth-this._renderDisX;this._unRenderH=this._mapHeight-this._viewHeight-this._renderDisY;0<this._currentMapX&&0<this._currentMapY&&this.gotoXY(this._currentMapX,this._currentMapY);this._renderChangeItem&&this._renderChangeItem.apply()};b.destroy=function(){this._isDestroy||(this._mapContainer.removeEventListener(c.Event.ENTER_FRAME,this.mapContainerEnterFrame,this),this._mapTileContainer.removeEventListener(c.TouchEvent.TOUCH_BEGIN,this.tileContainerMouseDown,this),this._mapTileContainer.removeEventListener(c.TouchEvent.TOUCH_END,
this.tileContainerMouseUp,this),e.prototype.destroy.call(this))};b.setCurrentMapXY=function(a,b){void 0===b&&(b=0);this._currentMapX=a;this._currentMapY=b};b.getIsoNode=function(a,b){var c=Math.round(b/this._halfSize),d=Math.round(a/this._isoSize);this._nodeLines[0]=c-1;this._nodeLines[1]=c;this._nodeLines[2]=c+1;this._nodeColumns[0]=d-1;this._nodeColumns[1]=d;this._nodeColumns[2]=d+1;this._isoNodePoint.x=a;this._isoNodePoint.y=b;return this.getNeerNode(this._isoNodePoint,this._nodeLines,this._nodeColumns)};
b.gotoXY=function(a,b){var c=this.getIsoNode(a,b).point2D;this._currentMapX=c.x;this._currentMapY=c.y;c=this.centerPoint;this.setMapContainerXY(this._mapContainer.x-(this._currentMapX-c.x),this._mapContainer.y-(this._currentMapY-c.y));this.checkRenderRect(!0)};b.gotoXY2=function(a,b){this._currentMapX=a;this._currentMapY=b;var c=this.centerPoint;this.setMapContainerXY(this._mapContainer.x-(this._currentMapX-c.x),this._mapContainer.y-(this._currentMapY-c.y));this.checkRenderRect(!0)};b.moveTo=function(a,
b){this._isMapMoved=!0;this.calcDistance(a,b);this.checkDistance()||this.addMoveEngine(!0)};b.getPointDistance=function(a,b){var d=new c.Point;d.x=Math.floor(this.limitValue(a,this._minMapX,0));d.y=Math.floor(this.limitValue(b,this._minMapY,0));return d};b.stopMove=function(){this.addMoveEngine(!1);this._isMapMoved=!1;this.checkRenderRect();null!=this.stopMoveHandler&&this.stopMoveHandler()};b.setMapXY=function(a,b){this.setMapContainerXY(a,b);this.checkRenderRect()};b.addListeners=function(){this._mapTileContainer.addEventListener(c.TouchEvent.TOUCH_BEGIN,
this.tileContainerMouseDown,this)};b.tileContainerMouseDown=function(a){this.addEngine(!0);this._stage.addEventListener(c.TouchEvent.TOUCH_END,this.tileContainerMouseUp,this);c.TimeRecordManager.getInstance().resetRelativeTime("checkStartMove")};b.tileContainerMouseUp=function(a){this._stage.removeEventListener(c.TouchEvent.TOUCH_END,this.tileContainerMouseUp,this);this.addEngine(!1)};b.initMap=function(){};b.getNeerNode=function(a,b,d){var e=Number.POSITIVE_INFINITY,f=0,l=f=0,h=b.length,k=d.length,
m=0,p=0,r=NaN,s=NaN,l=f=NaN,f=a.x/2,l=a.y;this._targetPoint3D.x=l+f;this._targetPoint3D.z=l-f;for(a=0;a<h;a++)if(m=b[a],!(0>m))for(var t=0;t<k;t++)if(p=d[t],!(0>p)&&(f=m%2,l=p%2,0==f&&0==l||1==f&&1==l))this._nodePoint.x=p*this._isoSize,this._nodePoint.y=m*this._halfSize,f=this._nodePoint.x/2,l=this._nodePoint.y,this._neerPoint3D.x=l+f,this._neerPoint3D.z=l-f,f=c.DimensionUtil.distance3D(this._targetPoint3D,this._neerPoint3D),f<e&&(e=f,r=this._neerPoint3D.x,s=this._neerPoint3D.z,this._neerPoint.x=
this._nodePoint.x,this._neerPoint.y=this._nodePoint.y);this._neerPoint3D.x=r;this._neerPoint3D.z=s;this._neerNode.point3D=this._neerPoint3D;this._neerNode.point2D=this._neerPoint;this._neerNode.row=Math.round(this._neerPoint.y/this._halfSize);this._neerNode.column=this._neerPoint.x/this._isoSize2|0;return this._neerNode};b.getIsoNodeByRow=function(a,b){var d=new c.IsoNode;d.row=a;d.column=b;d.point2D=this.getIsoPoint(a,b);return d};b.moveMap=function(){this._isMapMoved&&(this.checkDistance()?this.stopMove():
(this.updateMap(),this.checkDistance()&&this.stopMove()))};b.calcDistance=function(a,b){var d=this.centerPoint,e=this.getIsoNode(a,b),e=new c.Point(e.point2D.x,e.point2D.y);e.x=this._mapContainer.x+(d.x-e.x);e.y=this._mapContainer.y+(d.y-e.y);d=this.getPointDistance(e.x,e.y);this._targetX=d.x;this._targetY=d.y;d=Math.atan2(this._targetY-this._mapContainer.y,this._targetX-this._mapContainer.x);this._speedX=Math.cos(d)*this._speed;this._speedY=Math.sin(d)*this._speed};b.updateMap=function(){var a=this._mapContainer.x,
b=this._mapContainer.y,d=this._targetX-a,e=this._targetY-b;if(this.moveType==c.MapMoveType.CONSTANT_VELOCITY){var f=this._speedX,l=this._speedY;Math.abs(d)<Math.abs(this._speedX)&&(f=d);Math.abs(e)<Math.abs(this._speedY)&&(l=e)}else this.moveType==c.MapMoveType.FACTOR&&(f=d*this._moveFactor,l=e*this._moveFactor,1>Math.abs(d)?f=d:(d=Math.abs(f),0<d&&1>d&&(f/=d)),1>Math.abs(e)?l=e:(e=Math.abs(l),0<e&&1>e&&(l/=e)));a+=f;b+=l;a==this._targetX&&1>Math.abs(l)&&(b=this._targetY);b==this._targetY&&1>Math.abs(f)&&
(a=this._targetX);this.setMapXY(a,b)};b.setMapContainerXY=function(a,b){a=this.limitValue(a,this._minMapX,0);this._mapContainer.x=a|0;b=this.limitValue(b,this._minMapY,0);this._mapContainer.y=b|0};b.checkRenderRect=function(a){void 0===a&&(a=!1);if(!a){var b=this.originalPoint,c=b.x,b=b.y,d=this.renderRect,e=d.x,f=d.y,h=d.width,d=d.height,k=c>this._renderDisX&&c<e+this._renderDisX;if(!k){var m=b>this._renderDisY&&b<f+this._renderDisY;if(!m){var p=c<this._unRenderW&&c+this._viewWidth>e+h-this._renderDisX;
if(!p){var r=b<this._unRenderH&&b+this._viewHeight>f+d-this._renderDisY;if(!r&&(c<=this._renderDisX&&0<e||b<=this._renderDisY&&0<f||c>=this._unRenderW&&e+h<this._mapWidth||b>=this._unRenderH&&f+d<this._mapHeight))var s=!0}}}}if(a||k||m||p||r||s)this.setUpdateData("renderRect"),this.drawRenderRect(),this.drawMapRect(),this.checkTiles(this.renderRect),this._renderChangeItem&&this._renderChangeItem.apply()};b.setRenderChangeHandler=function(a,b){void 0===b&&(b=null);this._renderChangeItem||(this._renderChangeItem=
new c.ScriptItem);var d=a?[this]:b=null;this._renderChangeItem.execute=a;this._renderChangeItem.target=b;this._renderChangeItem.params=d};b.checkDistance=function(){return this._mapContainer.x==this._targetX&&this._mapContainer.y==this._targetY};b.addEngine=function(a){a?this._isAdded||(this._isAdded=!0,this._mapContainer.addEventListener(c.Event.ENTER_FRAME,this.mapContainerEnterFrame,this)):this._isAdded&&(this._isAdded=!1,this._mapContainer.removeEventListener(c.Event.ENTER_FRAME,this.mapContainerEnterFrame,
this))};b.addMoveEngine=function(a){a?this._isAddedMove||(this._isAddedMove=!0,this.addEventListener(c.Event.ENTER_FRAME,this.moveEnterFrame,this)):this._isAddedMove&&(this._isAddedMove=!1,this.removeEventListener(c.Event.ENTER_FRAME,this.moveEnterFrame,this))};b.moveEnterFrame=function(a){this.moveMap()};b.mapContainerEnterFrame=function(a){};return d}(c.IsoMapRender);c.IsoMapDriver=f;f.prototype.__class__="egret.IsoMapDriver"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.layerType=0;this.needOpenBack=this.isOpen=!1}__extends(d,e);var b=d.prototype;b.onCreate=function(){e.prototype.onCreate.call(this);this.isOpen||this.openEnd()};b.openEnd=function(){this.isCreate&&(this.isOpen=!0,this.onOpen())};b.onOpen=function(){};b.onClose=function(){};b.open=function(){c.ApplicationManager.getInstance().openView(this);this.layerType!=d.LAYER_WINDOW_1&&this.layerType!=d.LAYER_WINDOW_2||c.MainControl.getInstance().openMask()};
b.close=function(){c.ApplicationManager.getInstance().closeView(this);this.layerType!=d.LAYER_WINDOW_1&&this.layerType!=d.LAYER_WINDOW_2||c.MainControl.getInstance().closeMask()};d.LAYER_UI=0;d.LAYER_MASK=1;d.LAYER_WINDOW_1=2;d.LAYER_WINDOW_2=3;d.LAYER_TIP=4;d.LAYER_GUIDE=5;return d}(c.BaseView);c.BasePanel=f;f.prototype.__class__="egret.BasePanel"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._upperNaviItem=this._currentNaviItem=this._navigatorItems=null;this._navigateIndex=-1;this._lastNaviPoint=null;this._elementRadius=1;this._mapId=0;this._lastNaviPoint=new c.Point;this._navigatorItems=[]}__extends(d,e);var b=d.prototype;b.loadData=function(a){this._mapId=a;var b=c.IsoMapData.getInstance().getData(a);if(b)this.initData(b);else{var b=c.PathData.PATH_MAP_DATA,d=a+c.ExtensionType.JSON,b=c.dataManager().pathData.getResourceUrl(b,
d);c.ResoureManager.getInstance().loadMapData(b,a,this.loadCompleteData,this)}};b.gotoXY=function(a,b){void 0===b&&(b=0);this._isoMap.gotoXY(a,b);c.RoleManager.getInstance().showPlayer(this,a,b)};b.loadCompleteData=function(){this.loadData(this._mapId)};b.initData=function(a){e.prototype.initData.call(this,a);c.RoleManager.getInstance().hidePlayer();this.setRole(c.RoleManager.getInstance().role);c.TimerManager.getInstance().addExecute(this.changeScene,this,1E3,null,1)};b.setRole=function(a){e.prototype.setRole.call(this,
a);this._role.scene=this;this._role.movingHandler=this.roleMoving;this._role.onStopMove=this.onStopMove};b.onStopMove=function(a){};b.nodeChanged=function(a){return!0};b.moveElement=function(a,b,c){void 0===c&&(c=0);if(a=this._elementsIdMap.get(a))a.speed=this.getElementSpeed(),a.moveTo(b,c)};b.navigateToElement=function(a){this._currentNaviItem||(this._currentNaviItem=new c.SceneNavigatorDataItem);this._currentNaviItem.elementId=a;a=this.getElementPoint(a+"");this.navigateTo(a.x,a.y)};b.navigateTo=
function(a,b){this.checkArriveNaviPoint()||(this._currentNaviItem||(this._currentNaviItem=new c.SceneNavigatorDataItem,this._currentNaviItem.x=a,this._currentNaviItem.y=b),this._lastNaviPoint.x=a,this._lastNaviPoint.y=b,c.RoleManager.getInstance().moveTo3(a,b),this._isoMap.setCurrentMapXY(a,b))};b.navigate=function(a,b,c,d){};b.navigateToItem=function(a){this.navigate(a.sceneId,a.elementId,a.x,a.y)};b.roleMoving=function(){this._isoMap.setMapXY(this._roleOffsetX-this._role.x,this._roleOffsetY-this._role.y)};
b.clearScene=function(){e.prototype.clearScene.call(this);this._currentNaviItem=null;c.RoleManager.getInstance().changeScene(this)};b.navigateByItems=function(a){a?(this._navigatorItems=a,this._navigateIndex=-1,this.navigateToNextItem()):c.LogManager.error(this,"\u5bfc\u822a\u6570\u636e\u9879\u76ee\u6570\u7ec4\u4e3a\u7a7a")};b.navigateToNextItem=function(){this._navigateIndex++;this._navigateIndex>=this._navigatorItems.length?(this._currentNaviItem=null,this._lastNaviPoint.x=0,this._lastNaviPoint.y=
0,0<this._navigatorItems.length&&c.RoleManager.getInstance().stopMove()):(this._currentNaviItem=this._navigatorItems[this._navigateIndex],-1!=this._currentNaviItem.elementId?this.navigateToElement(this._currentNaviItem.elementId):-1!=this._currentNaviItem.x&&-1!=this._currentNaviItem.y?this.navigateTo(this._currentNaviItem.x,this._currentNaviItem.y):c.LogManager.error(this,"\u5bfc\u822a\u6570\u636e\u6709\u8bef"))};b.addEvents=function(){e.prototype.addEvents.call(this);this._isoMap.getLayerContainer(c.SceneLayerType.BIOLOGY).addEventListener(c.TouchEvent.TOUCH_TAP,
this.biologyContainerClick,this);this._isoMap.addEventListener(c.IsoMapEvent.ISO_MAP_MOVING_START,this.isoMapTileMovingStart,this)};b.remove=function(){e.prototype.remove.call(this);this._isoMap.getLayerContainer(c.SceneLayerType.BIOLOGY).removeEventListener(c.TouchEvent.TOUCH_TAP,this.biologyContainerClick,this);this._isoMap.removeEventListener(c.IsoMapEvent.ISO_MAP_MOVING_START,this.isoMapTileMovingStart,this);this._role&&(this._role.movingHandler=null,this._role.nodeChangedHandler=null,this._role.onStopMove=
null)};b.updateElement=function(a){var b=a.vo;this._isoMap.renderRect.contains(b.x,b.y)&&((b=this.getElement(b.idString))?b.updateXY():this.renderElement(a))};b.addElement=function(a,b,d,f){void 0===d&&(d=NaN);void 0===f&&(f=NaN);a=e.prototype.addElement.call(this,a,b,d,f);a instanceof c.SceneElement&&(a.scene=this);a instanceof c.SceneElementMover&&(a.movingEndHandler=this.elementMovingEnd);return a};b.removeElement=function(a,b){void 0===b&&(b=!0);var d=e.prototype.removeElement.call(this,a,b);
d instanceof c.SceneElement&&(d.scene=null);d instanceof c.SceneElementMover&&(d.movingEndHandler=null,d.nodeChangedHandler=null);return d};b.clickElement=function(a){};b.elementMovingEnd=function(a){};b.getElementPoint=function(a){return null};b.biologyContainerClick=function(a){(a=a.target)&&this.clickElement(a)};b.isoMapTileMovingStart=function(a){};b.checkArriveNaviPoint=function(a){void 0===a&&(a=0);0!=a&&(this._currentNaviItem=new c.SceneNavigatorDataItem,this._currentNaviItem.elementId=a);
if(this._currentNaviItem)if(0!=this._currentNaviItem.elementId)var b=this.getElementPoint(this._currentNaviItem.elementId+"");else this._currentNaviItem&&-1!=this._currentNaviItem.x&&-1!=this._currentNaviItem.y&&(b=new c.Point(this._currentNaviItem.x,this._currentNaviItem.y));return this._role&&b&&c.Point.distance(b,new c.Point(this._role.x,this._role.y))<this._elementRadius?(a=this._currentNaviItem,this._currentNaviItem=null,this.arriveNaviPointHandler&&this.arriveNaviPointHandler(a),!0):!1};b.startMove=
function(){this._currentNaviItem=null;this._lastNaviPoint.x=0;this._lastNaviPoint.y=0;this._navigatorItems.length=0;this._upperNaviItem=null;this._role&&c.RoleManager.getInstance().moveTo3(this._isoMap.currentMapX,this._isoMap.currentMapY)};b.sceneElementPathChanged=function(a){e.prototype.sceneElementPathChanged.call(this,a)};b.changeScene=function(){};b.checkMousePoint=function(){};b.removePlayer=function(a){};return d}(c.SceneRender);c.SceneDriver=f;f.prototype.__class__="egret.SceneDriver"})(egret||
(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.playCount=1;this._master=null;this._offsetY=this._offsetX=0;this._hitHandlerTarget=this._hitHandler=null;this._frameIndexParam=0;this._frameIndex=-1;this._params=null;this.touchEnabled=this.touchChildren=!1;this._namePad.parent&&this._namePad.parent.removeChild(this._namePad);this._avatar.isGhost=!1;this.setIsCheckResource(!1)}__extends(d,e);var b=d.prototype;b.enterFrameHandler=function(){this._hitHandler&&(-1==this._frameIndex&&(this._frameIndex=
this.getFrameIndex()),this._avatar.frameIndex>=this._frameIndex&&(this._hitHandler.apply(this._hitHandlerTarget,this._params),this._hitHandlerTarget=this._hitHandler=null))};b.getFrameIndex=function(){var a=0;0>this._frameIndexParam&&-1<this._frameIndexParam||0<this._frameIndexParam&&1>this._frameIndexParam?a=this._avatar.totalFrames*this._frameIndexParam:0>this._frameIndexParam?a=this._avatar.totalFrames+this._frameIndexParam:0<this._frameIndexParam&&(a=this._frameIndexParam);0>a&&(a=0);a>=this._avatar.totalFrames&&
(a=this._avatar.totalFrames-1);return a};b.setHitHandler=function(a,b,c){void 0===c&&(c=-1);for(var d=[],e=3;e<arguments.length;e++)d[e-3]=arguments[e];this._hitHandler=a;this._hitHandlerTarget=b;this._params=d;this._frameIndexParam=c;this._frameIndex=-1};b.addToScene=function(){e.prototype.addToScene.call(this);this.play(0,c.ActionType.PREPARE,this._avatar.direction,this.playCount,this.playEnd,this);this._avatar.setFrameHandler(this.enterFrameHandler,this)};b.setMaster=function(a,b,d){void 0===b&&
(b=0);void 0===d&&(d=0);this._master=a;this._offsetX=b;this._offsetY=d;c.EnterFrameManager.getInstance().hasExecute(this._posId)||(this._posId=c.EnterFrameManager.getInstance().addExecute(this.ajustPosition,this,1))};b.setEffProperties=function(a,b,c){void 0===b&&(b=1);void 0===c&&(c=1);this._avatar.rotation=a;this._avatar.scaleX=b;this._avatar.scaleY=c};b.ajustPosition=function(){this._master&&(this.x=this._master.x+this._offsetX,this.y=this._master.y+this._offsetY)};b.playEnd=function(){this.scene&&
this.scene.removeElement(this);this.removeFromScene()};b.removeFromScene=function(){e.prototype.removeFromScene.call(this);this.setEffProperties(0);this.playCount=1;this._avatar.direction=c.ActionMovieClipDirectionType.UP;this._avatar.setFrameHandler(null);c.EnterFrameManager.getInstance().removeExecute(this._posId)};b.getPartUrl=function(a){var b=c.PathData.PATH_MOVIES_EFFECT;a=this._sceneAvatarVo[a];return c.dataManager().sceneElementData.getActionUrl(b,a,this._avatar.actionType)};return d}(c.SceneElementInteractive);
c.ElementEffect=f;f.prototype.__class__="egret.ElementEffect"})(egret||(egret={}));(function(c){var f=function(){return function(){this.id=0;this.name="";this.quality=0;this.desc=""}}();c.ItemConfig=f;f.prototype.__class__="egret.ItemConfig"})(egret||(egret={}));
(function(c){var f=function(c){function d(a,b,d,f,n){void 0===b&&(b=1);void 0===d&&(d=null);void 0===f&&(f=0);void 0===n&&(n=null);c.call(this,a,d,f,n);this._frameIndex=0;if(isNaN(b)||1>b)throw Error("frameIndex \u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e 1");this.frameIndex=b}__extends(d,c);var b=d.prototype;Object.defineProperty(b,"frameIndex",{get:function(){return this._frameIndex},set:function(a){this._frameIndex!=a&&(this._frameIndex=a,this._frameIndex=Math.max(this._frameIndex,1))},enumerable:!0,
configurable:!0});b.destroy=function(){this._frameIndex=0;c.prototype.destroy.call(this)};return d}(c.ScriptItem);c.ClipScriptItem=f;f.prototype.__class__="egret.ClipScriptItem"})(egret||(egret={}));
(function(c){var f=function(c){function d(a,b,d,f,n){void 0===b&&(b=1);void 0===d&&(d=null);void 0===f&&(f=0);void 0===n&&(n=null);c.call(this,a,d,f,n);this._frameInterval=1;this._frameAmount=0;if(isNaN(b)||1>b)throw Error("frameInterval \u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e 1");this.frameInterval=b}__extends(d,c);var b=d.prototype;Object.defineProperty(b,"frameInterval",{get:function(){return this._frameInterval},set:function(a){this._frameInterval!=a&&(this._frameInterval=a,this._frameInterval=Math.max(this._frameInterval,
1))},enumerable:!0,configurable:!0});b.apply=function(){null!=this.execute&&(this._frameAmount++,this._frameAmount>=this.frameInterval&&(this._currentCount++,this._frameAmount%=this.frameInterval,this.execute.apply(this.target,this.params)))};b.destroy=function(){this._frameAmount=this._frameInterval=0;c.prototype.destroy.call(this)};return d}(c.ScriptItem);c.FrameScriptItem=f;f.prototype.__class__="egret.FrameScriptItem"})(egret||(egret={}));
(function(c){var f=function(c){function d(a,b,d,f,n){void 0===b&&(b=20);void 0===d&&(d=null);void 0===f&&(f=0);void 0===n&&(n=null);c.call(this,a,d,f,n);this._delay=20;if(isNaN(b)||1>b)throw Error("delay \u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e 1");this.delay=b}__extends(d,c);var b=d.prototype;Object.defineProperty(b,"delay",{get:function(){return this._delay},set:function(a){this._delay!=a&&(this._delay=a,this._delay=Math.max(this._delay,20))},enumerable:!0,configurable:!0});b.destroy=function(){this._delay=
20;c.prototype.destroy.call(this)};return d}(c.ScriptItem);c.TimerScriptItem=f;f.prototype.__class__="egret.TimerScriptItem"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.getHtml=function(d,b,a,g,f,q,n,l){void 0===b&&(b=12);void 0===a&&(a=null);void 0===g&&(g=!1);void 0===f&&(f=!1);void 0===q&&(q=null);void 0===n&&(n=null);void 0===l&&(l=!1);g=[f,l,g];for(f=0;f<g.length;f++)g[f]&&(d=c.getTag(c._tags[f])+d+c.getTag(c._tags[f],!1));q&&(d=c.setAnchor(d,q,n));return c.setFont(d,b,a)};c.setAnchor=function(d,b,a,g){void 0===a&&(a="_blank");void 0===g&&(g=!0);return g?c.getTag(c.TAG_A,!0,[c.TAG_HREF,c.TAG_TARGET],[b,a])+d+c.getTag(c.TAG_A,
!1):c.clearTag(d,c.TAG_A)};c.setBold=function(d,b){void 0===b&&(b=!0);return b?c.getTag(c.TAG_B)+d+c.getTag(c.TAG_B,!1):c.clearTag(d,c.TAG_B)};c.setItalic=function(d,b){void 0===b&&(b=!0);return b?c.getTag(c.TAG_I)+d+c.getTag(c.TAG_I,!1):c.clearTag(d,c.TAG_I)};c.setUnderline=function(d,b){void 0===b&&(b=!0);return b?c.getTag(c.TAG_U)+d+c.getTag(c.TAG_U,!1):c.clearTag(d,c.TAG_U)};c.setFont=function(d,b,a,g){void 0===b&&(b=12);void 0===a&&(a=null);void 0===g&&(g=!0);return g?a?c.getTag(c.TAG_FONT,!0,
[c.TAG_SIZE,c.TAG_COLOR],[b,a])+d+c.getTag(c.TAG_FONT,!1):c.getTag(c.TAG_FONT,!0,[c.TAG_SIZE],[b])+d+c.getTag(c.TAG_FONT,!1):c.clearTag(d,c.TAG_FONT)};c.clearTag=function(c,b){var a=new RegExp("</"+b+">","gi");c=c.replace(new RegExp("<"+b+"[^<]*>","gis"),"");return c=c.replace(a,"")};c.getTag=function(c,b,a,g){void 0===b&&(b=!0);void 0===a&&(a=null);void 0===g&&(g=null);var e="",f="";if(b){if(a&&g)for(b=0;b<a.length;b++)f+=" "+a[b]+"='"+g[b]+"'"}else e="/";return"<"+e+c+f+">"};c._tags=["b","i","u"];
c.TAG_A="a";c.TAG_B="b";c.TAG_I="i";c.TAG_U="u";c.TAG_HREF="href";c.TAG_TARGET="target";c.TAG_FONT="font";c.TAG_SIZE="size";c.TAG_COLOR="color";return c}();c.HtmlUtil=f;f.prototype.__class__="egret.HtmlUtil"})(egret||(egret={}));
(function(c){var f=function(){function c(){throw Error("NumberUtil just is a static class.");}c.getMultipleValue=function(c,b){void 0===b&&(b=2);for(var a=c+"";a.length<b;)a="0"+a;return a};c.limitValue=function(c,b,a){void 0===b&&(b=NaN);void 0===a&&(a=NaN);!isNaN(b)&&c<b&&(c=b);!isNaN(a)&&c>a&&(c=a);return c};return c}();c.NumberUtil=f;f.prototype.__class__="egret.NumberUtil"})(egret||(egret={}));
(function(c){var f=function(){function e(){}var d=e.prototype;e.getInstance=function(){e._instance||(e._instance=new e);return e._instance};d.initCfg=function(){if(!this.itemCfgs){this.itemCfgs=[];for(var b=0;b<e.ITEM_CONFIG.length;b++){var a=e.ITEM_CONFIG[b].split(","),g=new c.ItemConfig;g.id=Number(a[0]);g.name=a[1];g.quality=Number(a[2]);g.desc=a[3];if(a=a[4]){a=a.split("|");g.attrs={};for(var d=0;d<a.length;d++){var f=a[d].split(":");g.attrs[f[0]]=Number(f[1])}}this.itemCfgs.push(g)}}};d.getCfg=
function(b){this.initCfg();for(var a=0;a<this.itemCfgs.length;a++){var c=this.itemCfgs[a];if(c.id==b)return c}return null};d.getQuaByType=function(b){return e.ITEM_QUALITY[b]};e.getNameByType=function(b){var a="";switch(b){case "atk":a="\u653b\u51fb";break;case "def":a="\u9632\u5fa1";break;case "hp":a="\u751f\u547d";break;case "str":a="\u529b\u91cf";break;case "agili":a="\u654f\u6377";break;case "luc":a="\u8fd0\u6c14";break;case "intel":a="\u667a\u529b"}return a};e.ITEM_QUALITY=" \u767d\u8272 \u6a59\u8272 \u7d2b\u8272 \u7ea2\u8272 \u5e7b\u5f69".split(" ");
e.ITEM_CONFIG="1,\u66b4\u96e8\u68a8\u82b1\u9488,1,\u5510\u95e8\u7279\u5236\u6697\u5668\u4e4b\u4e00\uff0c\u662f\u9547\u95e8\u81f3\u5b9d\uff0c\u53ea\u6709\u95e8\u4e2d\u9ad8\u4eba\u624d\u914d\u4f7f\u7528,atk:70|agili:20 2,\u8840\u5203,1,\u5203\u8fb9\u9634\u51b7\u65e0\u6bd4\uff0c\u4f1a\u5438\u6536\u654c\u4eba\u7684\u8840\u6db2\uff0c\u662f\u79cd\u5341\u5206\u9634\u90aa\u7684\u6b66\u5668,atk:50|agili:30 3,\u8840\u6ef4\u5b50,1,\u6740\u4eba\u5229\u5668\uff0c\u6740\u4eba\u4e8e\u65e0\u5f62\u4e4b\u4e2d\uff0c\u9020\u6210\u521b\u53e3\u9762\u79ef\u5c0f\uff0c\u4f46\u662f\u5a01\u529b\u5de8\u5927,atk:90 4,\u8896\u722a,1,\u9690\u85cf\u5728\u957f\u888d\u4e2d\uff0c\u53ef\u53d1\u52a8\u51fa\u5176\u4e0d\u610f\u7684\u8fdb\u653b\uff0c\u5e38\u7528\u4e8e\u523a\u6740,atk:100|str:40|agili:40 5,\u5b54\u660e\u6247,1,\u4e00\u6247\u751f\u6c34\u4e8c\u6247\u751f\u706b\uff0c\u5bf9\u654c\u4eba\u9020\u6210\u6bc1\u706d\u6027\u7684\u6253\u51fb,atk:30|intel:50 6,\u98ce\u8f6e,1,\u5176\u901f\u5982\u98ce\uff0c\u65e0\u53ef\u95ea\u907f\uff0c\u5916\u5708\u7684\u5200\u5203\u53ef\u8131\u79bb\u8f6e\u5fc3,atk:40|agili:40 7,\u5b50\u6bcd\u96f7,1,\u53cc\u96f7\u4e00\u8d77\u7206\uff0c\u6740\u4f24\u529b\u6781\u5927\uff0c\u975e\u4e00\u822c\u4eba\u6240\u80fd\u62b5\u5fa1,str:10|agili:10 8,\u960e\u738b\u8d34,1,\u4e2d\u8005\u96be\u6d3b\uff0c\u960e\u738b\u96be\u6551\uff0c\u4e16\u95f4\u7f55\u6709\u7684\u72ec\u95e8\u6b66\u5668\uff0c\u4e00\u7ecf\u53d1\u73b0\u5fc5\u4f1a\u5174\u8d77\u4e00\u573a\u8165\u98ce\u8840\u96e8,intel:10|agili:20 9,\u9f99\u987b\u9488,1,\u9488\u4f53\u7ec6\u5c0f\uff0c\u4f24\u5bb3\u5de8\u5927\uff0c\u8737\u7f29\u5728\u4eba\u4f53\u7b4b\u8089\u4e2d\uff0c\u975e\u7279\u5b9a\u624b\u6cd5\u4e0d\u53ef\u53d6\u51fa,atk:10|agili:20 10,\u660e\u73e0\u7ed3,1,\u4f69\u6234\u53ef\u8f85\u52a9\u4fee\u70bc\uff0c\u5b9a\u5fc3\u987a\u6c14\uff0c\u7531\u9884\u9632\u8d70\u706b\u5165\u9b54\u7684\u529f\u6548,hp:100|agili:20 11,\u79d8\u94f6\u80f8\u7532,1,\u4f69\u6234\u540e\u9632\u5fa1\u63d0\u5347\uff0c\u4ee5\u79d8\u94f6\u6253\u9020\uff0c\u662f\u519b\u58eb\u5e38\u7528\u7684\u9632\u5177,def:100|str:50 12,\u79d8\u94f6\u62a4\u624b,1,\u4ee5\u53e4\u6cd5\u5bf9\u79d8\u94f6\u8fdb\u884c\u8403\u53d6\uff0c\u63d0\u5347\u79d8\u94f6\u97e7\u6027\u7684\u62a4\u624b\uff0c\u4e5f\u5e38\u7528\u4f5c\u9970\u54c1,def:70|str:30 13,\u9540\u91d1\u62a4\u624b,2,\u5bcc\u4eba\u7528\u6765\u6ee1\u8db3\u865a\u8363\u5fc3\u800c\u9540\u7684\u771f\u91d1\u62a4\u624b\uff0c\u865a\u6709\u5176\u8868,def:120|str:50 14,\u7edb\u84dd\u62a4\u624b,3,\u88ab\u5f3a\u5927\u50e7\u4eba\u65bd\u52a0\u6cd5\u5492\u7684\u62a4\u624b\uff0c\u662f\u9632\u5177\u79cd\u5bf9\u653b\u6740\u52a0\u6210\u7684\u90e8\u4f4d,def:210|str:50 15,\u79d8\u94f6\u62a4\u817f,1,\u4f69\u6234\u540e\u51cf\u5c11\u817f\u90e8\u53d7\u5230\u7684\u4f24\u5bb3\uff0c\u4ee5\u79d8\u94f6\u6253\u9020\uff0c\u9644\u5e26\u81ea\u6211\u4fee\u590d\u80fd\u529b,def:70|str:50 16,\u9540\u91d1\u62a4\u817f,2,\u4f20\u8bf4\u4e2d\u6c38\u4e0d\u67d3\u8840\u7684\u62a4\u817f\uff0c\u4ea6\u53d7\u4f17\u591a\u5927\u5e08\u63a8\u5d07,def:120|str:50 17,\u7edb\u84dd\u62a4\u817f,3,\u88ab\u6cd5\u5492\u52a0\u6210\u7684\u62a4\u817f\uff0c\u5927\u5927\u63d0\u5347\u9632\u5fa1\u529b\uff0c\u6709\u4ef7\u65e0\u5e02,def:210|str:50 18,\u79d8\u94f6\u957f\u9774,1,\u4f69\u6234\u540e\u53ef\u63d0\u5347\u884c\u8fdb\u901f\u5ea6\uff0c\u4ee5\u79d8\u94f6\u6253\u9020\uff0c\u6613\u88ab\u91cd\u578b\u6b66\u5668\u7a7f\u900f,def:70|str:50 19,\u9540\u91d1\u957f\u9774,2,\u6bd4\u79d8\u94f6\u957f\u9774\u8010\u4e45\u66f4\u9ad8\u7684\u957f\u9774\uff0c\u662f\u91cd\u578b\u9a91\u5175\u5e38\u5907\u88c5\u5907,def:120|str:50 20,\u7edb\u84dd\u957f\u9774,3,\u7a7f\u6234\u540e\u884c\u8d70\u5982\u98ce\uff0c\u8eab\u59ff\u8f7b\u76c8\uff0c\u53ef\u65e5\u884c\u5343\u91cc,def:210|str:50 21,\u62a4\u5fc3\u6212,4,\u4e16\u5bb6\u4f9b\u5949\u7684\u6212\u6307\uff0c\u4e16\u95f4\u5c11\u6709\uff0c\u9632\u5fa1\u529b\u60ca\u4eba,atk:90|def:90|hp:180|intel:50 22,\u65e0\u754f\u6212,5,\u4f69\u6234\u540e\u63d0\u5347\u4f69\u6234\u8005\u52c7\u6c14\uff0c\u53ef\u9f13\u821e\u58eb\u6c14\uff0c\u4e0e\u4eba\u4ee5\u65e0\u6240\u754f\u60e7\u7684\u6c14\u52bf,atk:250|hp:800|str:200|intel:200|luc:200 23,\u4fee\u7f57\u5934\u76d4,4,\u4f20\u8bf4\u6218\u573a\u6218\u795e\u4f69\u6234\u7684\u5934\u76d4\uff0c\u715e\u6c14\u6d53\u539a\uff0c\u5e38\u6709\u4f69\u6234\u8005\u88ab\u6b64\u76d4\u541e\u566c\u7075\u9b42,str:100|agili:100|def:80|hp:150 24,\u7d2b\u6c34\u6676,3,\u6218\u6597\u65f6\u53ef\u9547\u5b9a\u4eba\u5fc3\u795e\uff0c\u5927\u5927\u63d0\u5347\u58eb\u6c14\uff0c\u957f\u671f\u4f7f\u7528\u4f1a\u4f7f\u4eba\u7cbe\u795e\u75b2\u60eb,str:100|agili:100|hp:100 25,\u84dd\u6c34\u6676,2,\u6218\u6597\u65f6\u53ef\u63d0\u5347\u4f7f\u7528\u8005\u9632\u5fa1\uff0c\u5e38\u9576\u5d4c\u5728\u76d4\u7532\u4e0a\uff0c\u5bf9\u76d4\u7532\u8fdb\u884c\u9632\u5fa1\u52a0\u6210,intel:30|hp:150 26,\u7d2b\u795e\u6838,3,\u795e\u754c\u9057\u843d\u7684\u6b8b\u9ab8\uff0c\u4fee\u590d\u540e\u53ef\u4f7f\u7528\uff0c\u4f7f\u7528\u540e\u63d0\u5347\u53cb\u519b\u653b\u51fb,atk:50|hp:300".split(" ");
return e}();c.ItemManager=f;f.prototype.__class__="egret.ItemManager"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.UNKNOWN=0;c.MALE=1;c.FEMALE=2;return c}();c.SexType=f;f.prototype.__class__="egret.SexType"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.NONE=0;c.WARRIOR=1;c.MAGE=2;c.BOWMAN=3;c.TYPES=[c.WARRIOR,c.MAGE,c.BOWMAN];return c}();c.VocationType=f;f.prototype.__class__="egret.VocationType"})(egret||(egret={}));
(function(c){var f=function(){function e(){}Object.defineProperty(e,"logDatas",{get:function(){return e._logDatas},enumerable:!0,configurable:!0});e.warn=function(c){for(var b=[],a=1;a<arguments.length;a++)b[a-1]=arguments[a];e.print(e.LEVEL_WARN,c,b)};e.info=function(c){for(var b=[],a=1;a<arguments.length;a++)b[a-1]=arguments[a];e.print(e.LEVEL_INFO,c,b)};e.debug=function(c){for(var b=[],a=1;a<arguments.length;a++)b[a-1]=arguments[a];e.print(e.LEVEL_DEBUG,c,b)};e.error=function(c){for(var b=[],a=
1;a<arguments.length;a++)b[a-1]=arguments[a];e.print(e.LEVEL_ERROR,c,b)};e.getAllMessageHtml=function(){for(var d="",b=e._logDatas.length,a=0;a<b;a++)d=e._logDatas[a].level==e.LEVEL_ERROR?d+c.HtmlUtil.getHtml(e._logDatas[a].message,12,"#ff0000"):e._logDatas[a].level==e.LEVEL_WARN?d+c.HtmlUtil.getHtml(e._logDatas[a].message,12,"#FF6600"):d+e._logDatas[a].message,d+="\n";return d};e.getErrorMessage=function(){for(var d="",b=e._errDatas.length,a=0;a<b;a++)d+=c.HtmlUtil.getHtml(e._errDatas[a],12,"#ff0000")+
"\n";return d};e.setLevel=function(c){void 0===c&&(c=0);e.init();e._level=c;for(c=0;c<e._logDatas.length;c++)e._logDatas[c].level<e._level&&(e._logDatas.splice(c,1),c--)};e.setMaxLength=function(c){void 0===c&&(c=0);for(e._length=c;e._logDatas.length>e._length;)e._logDatas.shift()};e.setTarget=function(c){e._target=c;for(var b=0;b<e._logDatas.length;b++)e._logDatas[b].target!=c&&(e._logDatas.splice(b,1),b--)};e.print=function(d,b,a){e.init();var g="";d>=e._level&&(null==e._target||b==e._target)&&
(a={level:d,target:b,message:e.getMessage(a)},b=c.getQualifiedClassName(b),g=new Date,g="\u3010"+e.LEVEL_LABELS[d]+"\u3011\u3010#"+e._index+" "+g.getFullYear()+"."+(g.getMonth()+1)+"."+g.getDate()+" "+g.getHours()+":"+g.getMinutes()+":"+g.getSeconds()+"\u3011[class "+b+"] "+a.message,a.message=g,e._logDatas.push(a),d==e.LEVEL_ERROR&&e._errDatas.push(g),e._logDatas.length>e._length&&e._logDatas.shift(),e._errDatas.length>e._length&&e._errDatas.shift(),e._index++,e._index>e._length&&(e._index=1),console.log(g));
return g};e.getMessage=function(c){for(var b="",a=c.length,g=0;g<a;g++)b+=c[g]+" ";return b};e.init=function(){null==e._logDatas&&(e._logDatas=[],e._errDatas=[],e.setLevel(e.LEVEL_ALL),e.setMaxLength(e.MAX_LENGTH))};e.LEVEL_ALL=0;e.LEVEL_INFO=1;e.LEVEL_DEBUG=2;e.LEVEL_WARN=3;e.LEVEL_ERROR=4;e.MAX_LENGTH=500;e.LEVEL_LABELS=["ALL","INFO","DEBUG","WARN","ERROR"];e._logDatas=null;e._errDatas=null;e._level=e.LEVEL_ALL;e._length=0;e._target=null;e._index=1;return e}();c.LogManager=f;f.prototype.__class__=
"egret.LogManager"})(egret||(egret={}));
(function(c){var f=function(){function e(){this._hashMap=null;this._hashMap=new c.HashMap}var d=e.prototype;e.getInstance=function(){return e._instance||(e._instance=new e)};d.getFrameScriptItem=function(b,a,g,d,f){void 0===a&&(a=1);void 0===g&&(g=null);void 0===d&&(d=0);void 0===f&&(f=null);var n=this.getItems(e.FRAME_SCRIPT_ITEM),l=null;0<n.length?(l=n.pop(),l.execute=b,l.frameInterval=a,l.params=g,l.priority=d,l.target=f):l=new c.FrameScriptItem(b,a,g,0,f);return l};d.getTimerScriptItem=function(b,
a,g,d,f){void 0===a&&(a=20);void 0===g&&(g=null);void 0===d&&(d=0);void 0===f&&(f=null);var n=this.getItems(e.TIMER_SCRIPT_ITEM),l=null;0<n.length?(l=n.pop(),l.execute=b,l.delay=a,l.params=g,l.priority=d,l.target=f):l=new c.TimerScriptItem(b,a,g,d,f);return l};d.getClipScriptItem=function(b,a,g,d,f){void 0===a&&(a=1);void 0===g&&(g=null);void 0===d&&(d=0);void 0===f&&(f=null);var n=this.getItems(e.CLIP_SCRIPT_ITEM),l=null;0<n.length?(l=n.pop(),l.execute=b,l.frameIndex=a,l.params=g,l.priority=d,l.target=
f):l=new c.ClipScriptItem(b,a,g,d,f);return l};d.recoverScriptItem=function(b){if(!b)return null;b.destroy();var a=null;b instanceof c.FrameScriptItem?a=e.FRAME_SCRIPT_ITEM:b instanceof c.TimerScriptItem?a=e.TIMER_SCRIPT_ITEM:b instanceof c.ClipScriptItem&&(a=e.CLIP_SCRIPT_ITEM);this.getItems(a).push(b);return b};d.getItems=function(b){var a=this._hashMap.get(b);a||(a=[],this._hashMap.put(b,a));return a};e.FRAME_SCRIPT_ITEM="FrameScriptItem";e.TIMER_SCRIPT_ITEM="TimerScriptItem";e.CLIP_SCRIPT_ITEM=
"ClipScriptItem";e._instance=null;return e}();c.ScriptItemManager=f;f.prototype.__class__="egret.ScriptItemManager"})(egret||(egret={}));
(function(c){var f=function(){function e(b){void 0===b&&(b=0);this._items=this._hashMap=null;this._priorityMax=this._sharedCount=this._itemsCount=0;this._sharedCount=b;if(0>=this._sharedCount)throw Error("sharedCount \u5fc5\u987b\u5927\u4e8e 0");this._hashMap=new c.HashMap;this._items=Array(c.ScriptItem.PRIORITY_MAX)}var d=e.prototype;Object.defineProperty(d,"priorityMax",{get:function(){return this._priorityMax},enumerable:!0,configurable:!0});Object.defineProperty(d,"itemsCount",{get:function(){return this._itemsCount},
enumerable:!0,configurable:!0});Object.defineProperty(d,"hashMap",{get:function(){return this._hashMap},enumerable:!0,configurable:!0});Object.defineProperty(d,"items",{get:function(){return this._items},enumerable:!0,configurable:!0});d.hasScriptItem=function(b){return this._hashMap.containsKey(b.id)};d.addScript=function(b){if(this._hashMap.containsKey(b.id))return b;var a=this._items[b.priority];a||(a=Array(this._sharedCount),this._items[b.priority]=a);a[this._itemsCount]=b;this._hashMap.put(b.id,
!0);this._itemsCount++;this._priorityMax=Math.max(this._priorityMax,b.priority);return b};d.removeScript=function(b,a){void 0===a&&(a=!1);if(!this._hashMap.containsKey(b.id))return b;var c=this._items[b.priority];if(c)for(var d=this._itemsCount,e=0,f=0;f<d;f++)if(c[f]==b){e=d-1;f<e&&(c[f]=c[e]);c[e]=null;this._itemsCount--;0>this._itemsCount&&(this._priorityMax=this._itemsCount=0);break}this._hashMap.remove(b.id);a&&b.destroy();return b};d.destroy=function(){for(var b=this._hashMap=null,a=null,c=
this._priorityMax,d=0;d<c;d++)for(var b=this._items[d],e=this._itemsCount,f=0;f<e;f++)(a=b[f])&&a.destroy();this._items=null;this._itemsCount=0};return e}();c.ScriptModel=f;f.prototype.__class__="egret.ScriptModel"})(egret||(egret={}));
(function(c){var f=function(){function e(){throw Error("TimeUtil just is a static class.");}e.getTimeObject=function(c){var b=c%e.VALUE_YEAR,a=b%e.VALUE_MONTH,g=a%e.VALUE_DATE,f=g%e.VALUE_HOUR,q=f%e.VALUE_MINUTE,n={};n.years=Math.floor(c/e.VALUE_YEAR);n.months=Math.floor(b/e.VALUE_MONTH);n.days=Math.floor(a/e.VALUE_DATE);n.hours=Math.floor(g/e.VALUE_HOUR);n.minutes=Math.floor(f/e.VALUE_MINUTE);n.seconds=Math.floor(q/e.VALUE_SECOND);n.milliseconds=Math.floor(q%e.VALUE_SECOND);return n};e.getTime=function(d){var b=
e.getTimeObject(d);d="";for(var b=[b.years,b.months,b.days,b.hours,b.minutes,b.seconds],a=e.SIGNS,g=0;g<b.length;g++)if(2<g||0!=b[g])d+=c.NumberUtil.getMultipleValue(b[g])+a[g];return d};e.getDate=function(c){return new Date(c+e.TIMEZONE_OFFSET)};e.VALUE_MILLISECOND=1;e.VALUE_SECOND=1E3;e.VALUE_MINUTE=60*e.VALUE_SECOND;e.VALUE_MINUTE_5=300*e.VALUE_SECOND;e.VALUE_MINUTE_10=600*e.VALUE_SECOND;e.VALUE_HOUR=3600*e.VALUE_SECOND;e.VALUE_DATE=24*e.VALUE_HOUR;e.VALUE_WEEK=7*e.VALUE_DATE;e.VALUE_MONTH=30*
e.VALUE_DATE;e.VALUE_YEAR=365*e.VALUE_DATE;e.TIMEZONE_OFFSET=(new Date).getTimezoneOffset()*e.VALUE_MINUTE;e.SIGNS="-;-;  ;:;:;".split(";");return e}();c.DateUtil=f;f.prototype.__class__="egret.DateUtil"})(egret||(egret={}));
(function(c){var f=function(){function c(d){void 0===d&&(d=0);this._id=0;this._id=d}c.prototype.getID=function(d){void 0===d&&(d=!0);var b=this._id;d?this._id>=c.MAX_VALUE?this._id=c.MIN_VALUE:this._id++:this._id<=c.MIN_VALUE?this._id=c.MAX_VALUE:this._id--;return b};c.MAX_VALUE=2147483647;c.MIN_VALUE=-2147483648;return c}();c.IDGenerator=f;f.prototype.__class__="egret.IDGenerator"})(egret||(egret={}));
(function(c){var f=function(){function c(){}var d=c.prototype;Object.defineProperty(d,"isDodge",{get:function(){return this._isDodge},set:function(b){if(this._isDodge=b)this.value=0},enumerable:!0,configurable:!0});d.clear=function(){this.value=0;this._isDodge=this.isCritical=!1};return c}();c.DamageDataItem=f;f.prototype.__class__="egret.DamageDataItem"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.WARRIOR_NORMAL=11;c.WARRIOR_CISHA=12;c.WARRIOR_ZHANHUN=13;c.WARRIOR_COLLIDE=14;c.WARRIOR_LIEHUO=15;c.MAGE_NORMAL=21;c.MAGE_THUNDER=22;c.MAGE_THUNDER_BACK=23;c.MAGE_JINGAN=24;c.MAGE_XUANBING=25;c.BOWMAN_NORMAL=31;c.BOWMAN_CALL=33;return c}();c.SkillType=f;f.prototype.__class__="egret.SkillType"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.layerType=c.BasePanel.LAYER_TIP;this.skinName="ui.item.ItemTipsSkin"}__extends(d,e);var b=d.prototype;b.onOpen=function(){e.prototype.onOpen.call(this);this.imgMask.addEventListener(c.TouchEvent.TOUCH_END,this.close,this);this.update()};b.setData=function(a){this._id=a;this.update()};b.update=function(){if(this.isCreate&&0!=this._id){var a=c.ItemManager.getInstance().getCfg(this._id);this.item.touchEnabled=!1;this.item.itemId=this._id;
this.txtName.text=a.name;this.txtQuality.text="\u54c1\u8d28\uff1a"+c.ItemManager.getInstance().getQuaByType(a.quality);this.txtDesc.text=a.desc;this.txtDesc.lineSpacing=15;if(a.attrs){this.lineAttr.visible=this.txtAttr.visible=!0;var b="",d=0,e;for(e in a.attrs)b+=c.ItemManager.getNameByType(e)+"+"+a.attrs[e]+"\n",d++;this.txtAttr.text=b;this.txtAttr.height=35*d;this.txtAttr.lineSpacing=15;this.imgBg.height=285+35*d}else this.imgBg.height=246,this.lineAttr.visible=this.txtAttr.visible=!1}};return d}(c.BasePanel);
c.ItemTips=f;f.prototype.__class__="egret.ItemTips"})(egret||(egret={}));(function(c){var f=function(c){function d(){c.call(this)}__extends(d,c);return d}(c.SceneElementLo);c.GoodsLo=f;f.prototype.__class__="egret.GoodsLo"})(egret||(egret={}));(function(c){var f=function(){return function(){this.mounts=this.wing=this.weapon=this.clothing=this.body=null}}();c.SceneAvatarVo=f;f.prototype.__class__="egret.SceneAvatarVo"})(egret||(egret={}));
(function(c){var f=function(c){function d(){c.call(this);this.sex=1;this.vocation=this.level=0;this.mountsState=this.mountsLevel=this.wingLevel=this.weaponLevel=this.bodyLevel=1}__extends(d,c);return d}(c.SceneDriverVo);c.ScenePlayerVo=f;f.prototype.__class__="egret.ScenePlayerVo"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.id=1111111111;this.pid=0;this.nickname=this.pic=this.userName="";this.sex=c.SexType.MALE;this.serverId=1;this.vocation=c.VocationType.WARRIOR;this.level=1;this.gold=11110;this.exp=this.rmb=0;this.income=1;this.ranking=this.kankeEndTime=this.kankeBeginTime=this.uavPower=this.incomeBuffEndTime=this.incomeFriend=this.incomeBuff=0;this.className="UserInfoVo"}__extends(d,e);return d}(c.BaseVo);c.UserInfoVo=f;f.prototype.__class__="egret.UserInfoVo"})(egret||
(egret={}));
(function(c){var f=function(){function e(){this.sharedCount=100;this._modelMap=this._completeArray=this._gcTimer=this._executeHashMap=this._hashMap=null;this._hashMap=new c.HashMap;this._executeHashMap=new c.HashMap;this._modelMap=new c.HashMap;this._completeArray=[];this._idGenerator=new c.IDGenerator}var d=e.prototype;e.getInstance=function(){return e._instance||(e._instance=new e)};d.hasExecute=function(b){return this._executeHashMap.containsKey(b)};d.getItem=function(b){return this._executeHashMap.get(b)};d.addExecute=
function(b,a,g,d,e,f){void 0===g&&(g=20);void 0===d&&(d=null);void 0===e&&(e=0);void 0===f&&(f=0);for(var l=this._idGenerator.getID();this._executeHashMap.containsKey(l);)l=this._idGenerator.getID();if(null==b)return c.LogManager.error(this,"execute\u4e0d\u80fd\u4e3a\u7a7a: execute = "+b),l;b=c.ScriptItemManager.getInstance().getTimerScriptItem(b,g,d,f,a);b.repeatCount=e;b.id=l;this.addScriptItem(b);return l};d.removeExecute=function(b){b=this._executeHashMap.remove(b);this.removeScriptItem(b);c.ScriptItemManager.getInstance().recoverScriptItem(b)};
d.addScriptItem=function(b){if(!b||isNaN(b.id))return null;null!=b.execute&&this._executeHashMap.put(b.id,b);var a=this._hashMap.get(b.delay);a||(a=[],this._hashMap.put(b.delay,a));for(var g=!1,d=null,e=a.length,f=0;f<e;f++){var l=a[f],d=l.model;if(0<this.sharedCount&&d.itemsCount>=this.sharedCount)g=!0;else{g=!1;break}}!l||g?(l={timer:this.addTimer(null,b.delay),model:new c.ScriptModel(this.sharedCount)},a.push(l),this._modelMap.put(l.timer.hashCode,l.model)):this.addTimer(l.timer);l.time=0;d=l.model;
d.addScript(b);return b};d.removeScriptItem=function(b,a){void 0===a&&(a=!1);if(!b)return null;for(var c=this._hashMap.get(b.delay),d=null,e=c.length,f=0;f<e;f++){var l=c[f],d=l.model;if(d.hasScriptItem(b)){this._executeHashMap.remove(b.id);var h=d.removeScript(b,a);0==d.itemsCount&&(l.time=0,this.removeTimer(l.timer),this.setTimer(!0));break}}return h};d.removeTimer=function(b){b&&(b.reset(),b.removeEventListener(c.TimerEvent.TIMER,this.timerHandler,this))};d.addTimer=function(b,a){void 0===a&&(a=
0);b||(b=new c.Timer(a));b.addEventListener(c.TimerEvent.TIMER,this.timerHandler,this);b.start();return b};d.timerHandler=function(b){var a=b.target,c=null;b=null;this._hashMap.get(a.delay);var d=null;b=0;d=this._modelMap.get(a.hashCode);for(a=b=d.priorityMax;0<=a;a--)for(var c=d.items[a],e=d.itemsCount,f=0;f<e;f++){b=c[f];if(!b)break;b.apply();b.isCompleted&&this._completeArray.push(b)}d=this._completeArray.length;for(c=0;c<d;c++)b=this._completeArray[c],this.removeScriptItem(b);this._completeArray.length=
0};d.setTimer=function(b){b?(this._gcTimer||(this._gcTimer=new c.Timer(c.DateUtil.VALUE_MINUTE)),this._gcTimer.running||(this._gcTimer.addEventListener(c.TimerEvent.TIMER,this.gcTimerHandler,this),this._gcTimer.start())):this._gcTimer&&(this._gcTimer.reset(),this._gcTimer.removeEventListener(c.TimerEvent.TIMER,this.gcTimerHandler,this))};d.gcTimerHandler=function(b){var a=null,g=null,d=0,a=null,e;for(e in this._hashMap.content){for(var f=this._hashMap.content[e],l=0;l<f.length;l++)a=f[l],a.time+=
b.target.delay,a.time>=c.DateUtil.VALUE_MINUTE_10&&(g=a.timer,g.running?a.time=0:(a=a.model,a.destroy(),this._modelMap.remove(g.hashCode),f.splice(l,1),l--));d+=f.length}0==d&&this.setTimer(!1)};e._instance=null;return e}();c.TimerManager=f;f.prototype.__class__="egret.TimerManager"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.NONE=-1;c.TOP_LEFT=0;c.TOP_CENTER=1;c.TOP_RIGHT=2;c.CENTER_LEFT=3;c.CENTER=4;c.CENTER_RIGHT=5;c.BOTTOM_LEFT=6;c.BOTTOM_CENTER=7;c.BOTTOM_RIGHT=8;return c}();c.AlignType=f;f.prototype.__class__="egret.AlignType"})(egret||(egret={}));function isClass(c){return"function"==typeof c}
(function(c){var f=function(){return function(){this.right=this.left=this.bottom=this.top=this.align=0}}();c.AlignItem=f;f.prototype.__class__="egret.AlignItem"})(egret||(egret={}));
(function(c){var f=function(c){function d(b,a,g,d){void 0===a&&(a=!1);void 0===g&&(g=!1);void 0===d&&(d=null);c.call(this,b,a,g);this.data=null;this.data=d}__extends(d,c);d.WINDOW_OPEN="windowOpen";d.WINDOW_CLOSE="windowClose";d.WINDOW_RECALL="windowRecall";return d}(c.Event);c.ApplicationEvent=f;f.prototype.__class__="egret.ApplicationEvent"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.LAYER_MOUSE_CONFIGS=[{touchEnabled:!1,touchChildren:!0,model:!1,alpha:0},{touchEnabled:!1,touchChildren:!0,model:!1,alpha:0},{touchEnabled:!0,touchChildren:!0,model:!0,alpha:1},{touchEnabled:!1,touchChildren:!0,model:!1,alpha:0},{touchEnabled:!1,touchChildren:!0,model:!1,alpha:0},{touchEnabled:!1,touchChildren:!0,model:!1,alpha:0},{touchEnabled:!0,touchChildren:!0,model:!0,alpha:1},{touchEnabled:!0,touchChildren:!0,model:!0,alpha:0.6},{touchEnabled:!0,
touchChildren:!0,model:!0,alpha:0.6},{touchEnabled:!1,touchChildren:!1,model:!1,alpha:0},{touchEnabled:!1,touchChildren:!1,model:!1,alpha:0},{touchEnabled:!1,touchChildren:!0,model:!1,alpha:0},{touchEnabled:!0,touchChildren:!1,model:!0,alpha:0},{touchEnabled:!1,touchChildren:!1,model:!1,alpha:0},{touchEnabled:!1,touchChildren:!1,model:!1,alpha:0}];c.MOUSE=14;c.TOOLTIP=13;c.LOADING=12;c.MENU=11;c.EFFECT=10;c.INTERACTIVE=9;c.POP_UP_TOP=8;c.POP_UP=7;c.FULL_SCREEN_TOP=6;c.WINDOW_TOP=5;c.UI_TOP=4;c.WINDOW=
3;c.FULL_SCREEN=2;c.UI=1;c.BOTTOM=0;return c}();c.ApplicationLayerType=f;f.prototype.__class__="egret.ApplicationLayerType"})(egret||(egret={}));
(function(c){var f=function(){function e(){}e.quickSort=function(c,b,a){void 0===a&&(a=0);var g=0,f=0,q=0;if(b<a){g=b;f=a;for(q=c[g];g<f;){for(;g<f&&c[f]>q;)f--;g<f&&(c[g]=c[f],g++);for(;g<f&&c[g]<q;)g++;g<f&&(c[f]=c[g],f--)}c[g]=q;e.quickSort(c,b,g-1);e.quickSort(c,g+1,a)}};e.quickSortOn=function(c,b,a,g){void 0===g&&(g=0);var f=0,q=0,n;if(a<g){f=a;q=g;for(n=c[f];f<q;){for(;f<q&&c[q][b]>n[b];)q--;f<q&&(c[f]=c[q],f++);for(;f<q&&c[f][b]<n[b];)f++;f<q&&(c[q]=c[f],q--)}c[f]=n;e.quickSortOn(c,b,a,f-1);
e.quickSortOn(c,b,f+1,g)}};e.quickSortOn2=function(c,b,a,g){void 0===g&&(g=0);var f=0,q=0,n;if(a<g){f=a;q=g;for(n=c[f];f<q;){for(;f<q&&c[q][b]<n[b];)q--;f<q&&(c[f]=c[q],f++);for(;f<q&&c[f][b]>n[b];)f++;f<q&&(c[q]=c[f],q--)}c[f]=n;e.quickSortOn2(c,b,a,f-1);e.quickSortOn2(c,b,f+1,g)}};e.sort=function(c){for(var b=0,a=c[0],g=c.length,e=0;e<g;e++){for(var b=e,a=c[e],f=e;f<g;f++)a<c[f]&&(a=c[f],b=f);a!=c[e]&&(c[b]=c[e],c[e]=a)}};e.reverse2DRC=function(d){for(var b=d.length,a=d[0].length,g=null,e=new c.HashMap,
f=null,n=null,l=0;l<b;l++)for(var h=0;h<a;h++)f=l+"_"+h,n=h+"_"+l,e.containsKey(f)||e.containsKey(n)||(g=d[l][h],d[l][h]=d[h][l],d[h][l]=g,e.put(f,!0),e.put(n,!0))};e.reverse2DRows=function(c){for(var b=c.length,a=0;a<b;a++)c[a].reverse()};e.numeric=function(c,b){return Number(c)>Number(b)?1:Number(c)==Number(b)?0:-1};e.descending=function(c,b){return Number(c)<Number(b)?1:Number(c)==Number(b)?0:-1};return e}();c.ArrayUtil=f;f.prototype.__class__="egret.ArrayUtil"})(egret||(egret={}));var ui;
(function(c){var f=function(c){function d(){c.call(this);this.__s=egret.gui.setProperties;this.__s(this,["height","width"],[960,640]);this.elementsContent=[this.__8_i()];this.states=[new egret.gui.State("normal",[]),new egret.gui.State("disabled",[])]}__extends(d,c);var b=d.prototype;Object.defineProperty(b,"skinParts",{get:function(){return d._skinParts},enumerable:!0,configurable:!0});b.__4_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["scale9Grid","source","width","x","y"],[egret.gui.getScale9Grid("55,14,4,87"),
"bg_14_png",566,31,815]);return a};b.__5_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["scale9Grid","source","width","x","y"],[egret.gui.getScale9Grid("76,9,99,57"),"bg_7_png",564,32,21]);return a};b.__6_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["bg_13_png",31,775]);return a};b.__7_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["img_backSide_png",137,807]);return a};b.__8_i=function(){var a=new egret.gui.Group;this.__s(a,["height","width",
"x"],[960,640,0]);a.elementsContent=[this.__3_i(),this.__4_i(),this.__5_i(),this.__6_i(),this.__7_i(),this.btnClose_i(),this.btnBack_i()];return a};b.btnBack_i=function(){var a=new egret.gui.UIAsset;this.btnBack=a;this.__s(a,["source","x","y"],["btnBack_png",68,827]);return a};b.btnClose_i=function(){var a=new egret.gui.UIAsset;this.btnClose=a;this.__s(a,["source","x","y"],["btn_close1_png",538,26]);return a};b.__3_i=function(){var a=new egret.gui.UIAsset;this.__s(a,"height scale9Grid source width x y".split(" "),
[756,egret.gui.getScale9Grid("9,3,12,24"),"bg_6_png",548,40,59]);return a};d._skinParts=["btnClose","btnBack"];return d}(egret.gui.Skin);c.WindowViewSkin=f;f.prototype.__class__="ui.WindowViewSkin"})(ui||(ui={}));
(function(c){(function(c){var e=function(c){function b(){c.call(this);this.__s=egret.gui.setProperties;this.__s(this,["height","width"],[74,72]);this.elementsContent=[this.imgBg_i(),this.imgIcon_i()];this.states=[new egret.gui.State("normal",[]),new egret.gui.State("disabled",[])]}__extends(b,c);var a=b.prototype;Object.defineProperty(a,"skinParts",{get:function(){return b._skinParts},enumerable:!0,configurable:!0});a.imgIcon_i=function(){var a=new egret.gui.UIAsset;this.imgIcon=a;this.__s(a,["x",
"y"],[3,2]);return a};a.imgBg_i=function(){var a=new egret.gui.UIAsset;this.imgBg=a;a.source="img_block_png";return a};b._skinParts=["imgBg","imgIcon"];return b}(egret.gui.Skin);c.BagItemSkin=e;e.prototype.__class__="ui.bag.BagItemSkin"})(c.bag||(c.bag={}))})(ui||(ui={}));
(function(c){var f=function(){function e(){this._damageCache=[];this._damageItemCache=[]}var d=e.prototype;d.recoverDamage=function(b){for(var a in b)this._damageItemCache.push(b[a]);this._damageCache.push(b)};d.getDamageCache=function(){var b=this._damageCache.pop();b?b.length=0:b=[];return b};d.getDamageItemCache=function(){var b=this._damageItemCache.pop();b?b.clear():b=new c.DamageDataItem;return b};d.damage=function(b,a,c){b=this.getDamageBySkillType(b,a,c);this.addHp(c,b);return b};d.getDamageBySkillType=
function(b,a,g){b=this.getDamageCache();switch(a){case c.SkillType.WARRIOR_NORMAL:case c.SkillType.MAGE_NORMAL:case c.SkillType.BOWMAN_NORMAL:for(var d in g)a=this.getDamageItemCache(),a.value=-200,a.isCritical=0.5<Math.random(),a.isCritical&&(a.value*=2),a.isDodge=0.9<Math.random(),b.push(a);break;case c.SkillType.WARRIOR_CISHA:for(d in g)a=this.getDamageItemCache(),a.value=-300,a.isCritical=0.5<Math.random(),a.isCritical&&(a.value*=1.38),a.value=Math.floor(a.value),a.isDodge=0.9<Math.random(),b.push(a);
break;case c.SkillType.WARRIOR_ZHANHUN:for(d in g)a=this.getDamageItemCache(),a.value=-300,a.isCritical=0.5<Math.random(),a.isCritical&&(a.value*=0.77),a.value=Math.floor(a.value),a.isDodge=0.9<Math.random(),b.push(a);break;case c.SkillType.WARRIOR_COLLIDE:for(d in g)a=this.getDamageItemCache(),a.value=-300,a.isCritical=0.5<Math.random(),a.isCritical&&(a.value*=3.8),a.value=Math.floor(a.value),a.isDodge=0.9<Math.random(),b.push(a);break;case c.SkillType.WARRIOR_LIEHUO:for(d in g)a=this.getDamageItemCache(),
a.value=-300,a.isCritical=0.5<Math.random(),a.isCritical&&(a.value*=5.84),a.value=Math.floor(a.value),a.isDodge=0.9<Math.random(),b.push(a);break;case c.SkillType.MAGE_THUNDER:for(d in g)a=this.getDamageItemCache(),a.value=-300,a.isCritical=0.5<Math.random(),a.isCritical&&(a.value*=1.38),a.value=Math.floor(a.value),a.isDodge=0.9<Math.random(),b.push(a);case c.SkillType.MAGE_THUNDER_BACK:for(d in g)a=this.getDamageItemCache(),a.value=-300,a.isCritical=0.5<Math.random(),a.isCritical&&(a.value*=0.7),
a.value=Math.floor(a.value),a.isDodge=0.9<Math.random(),b.push(a);case c.SkillType.MAGE_XUANBING:for(d in g)a=this.getDamageItemCache(),a.value=-300,a.isCritical=0.5<Math.random(),a.isCritical&&(a.value*=0.8),a.value=Math.floor(a.value),a.isDodge=0.9<Math.random(),b.push(a);break;default:for(d in g)a=this.getDamageItemCache(),a.value=-100,a.isCritical=0.5<Math.random(),a.isCritical&&(a.value*=2),a.isDodge=0.9<Math.random(),b.push(a)}return b};d.addHp=function(b,a){for(var c in b){var d=b[c].vo;d&&
(d.hp+=a[c].value,0>d.hp&&(a[c].value-=d.hp,d.hp=0))}};d.getSkillIntervalTime=function(b){switch(b){case c.SkillType.WARRIOR_CISHA:return 2E3;case c.SkillType.WARRIOR_ZHANHUN:return 4E3;case c.SkillType.WARRIOR_COLLIDE:return 6E3;case c.SkillType.WARRIOR_LIEHUO:return 8E3;case c.SkillType.MAGE_THUNDER:return 2E3;case c.SkillType.MAGE_THUNDER_BACK:return 8E3;case c.SkillType.MAGE_JINGAN:return 6E3;case c.SkillType.MAGE_XUANBING:return 8E3;case c.SkillType.BOWMAN_CALL:return 8E3}return 1};return e}();
c.FightData=f;f.prototype.__class__="egret.FightData"})(egret||(egret={}));
(function(c){var f=function(){function c(){this.rootPath=""}var d=c.prototype;c.getInstance=function(){return c._instance||(c._instance=new c)};d.getResourceUrl=function(b,a){void 0===a&&(a=null);var g=this.rootPath+c.PATH_RESOURCE+b;a&&(g+=a);return g};d.getPathComponent=function(){for(var b=[],a=0;a<arguments.length;a++)b[a-0]=arguments[a];for(var a="",c=b.length,d=0;d<c;d++){var e=b[d],a=a+e;-1==e.indexOf("/")&&(a+="/")}return a};c._instance=null;c.PATH_RESOURCE="resource/";c.PATH_RESOURCE_MODULE=
"modules/";c.PATH_MOVIES="movies/";c.PATH_RESOURCE_COMMON=c.PATH_RESOURCE_MODULE+"common/";c.PATH_IMAGES="images/";c.PATH_SOUND="sound/";c.PATH_IMAGES_COMMON=c.PATH_IMAGES+"common/";c.PATH_IMAGES_ROLD_HEAD=c.PATH_IMAGES+"roleHead/";c.PATH_IMAGES_PET=c.PATH_IMAGES+"pet/";c.PATH_IMAGES_PROP=c.PATH_IMAGES+"prop/";c.PATH_IMAGES_SCENE=c.PATH_IMAGES+"scene/";c.PATH_RESOURCE_IMAGES="images/";c.PATH_XML_PRE_LANGUAGE="preLanguage/";c.PATH_MOVIES_PET=c.PATH_MOVIES+"pet/";c.PATH_MOVIES_MONSTER=c.PATH_MOVIES+
"monster/";c.PATH_MOVIES_EFFECT=c.PATH_MOVIES+"effect/";c.PATH_MOVIES_SKILL=c.PATH_MOVIES+"skill/";c.PATH_MOVIES_PLAYER=c.PATH_MOVIES+"player/";c.PATH_MOVIES_WEAPON=c.PATH_MOVIES+"weapon/";c.PATH_MOVIES_WING=c.PATH_MOVIES+"wing/";c.PATH_MOVIES_MOUNTS=c.PATH_MOVIES+"mounts/";c.PATH_XML_RESOURCE_MARK="resourceMark/";c.PATH_MOVIES_COMMON=c.PATH_MOVIES+"common/";c.PATH_MAP_DATA="mapData/";c.PATH_MAP="map/";return c}();c.PathData=f;f.prototype.__class__="egret.PathData"})(egret||(egret={}));
(function(c){var f=function(){function e(){}var d=e.prototype;e.getInstance=function(){e._instance||(e._instance=new e);return e._instance};d.openTips=function(b){this.tips||(this.tips=new c.ItemTips);this.tips.setData(b);this.tips.open()};return e}();c.ItemTipsControl=f;f.prototype.__class__="egret.ItemTipsControl"})(egret||(egret={}));
(function(c){var f=function(){function e(){this._roleList=[]}var d=e.prototype;d.resetRoleData=function(){for(var b in this._roleList)this._roleList[b].vo.hp=this._roleList[b].vo.hpTotal=2E4};d.addRole=function(b){void 0===b&&(b=1);var a=new c.SceneElementDataItem;if(1==b){var g=new c.ScenePlayerVo;g.id=c.SceneElementData.getInstance().getAutoElementId();g.idString=g.id+"";g.name="\u5fb7\u739b\u897f\u4e9a";g.sex=c.SexType.MALE;g.vocation=c.VocationType.WARRIOR}else 2==b?(g=new c.ScenePlayerVo,g.id=
c.SceneElementData.getInstance().getAutoElementId(),g.idString=g.id+"",g.name="\u5c0f\u6cd5\u5e08",g.sex=c.SexType.MALE,g.vocation=c.VocationType.MAGE):3==b&&(g=new c.ScenePlayerVo,g.id=c.SceneElementData.getInstance().getAutoElementId(),g.idString=g.id+"",g.name="\u6697\u5f71\u5c04\u624b",g.sex=c.SexType.MALE,g.vocation=c.VocationType.BOWMAN);g&&(a.vo=g,this._roleList.push(a));return a};d.removeRole=function(b){for(var a in this._roleList)if(this._roleList[a].vo.id==b){this._roleList.splice(a,1);
break}};d.addAnimal=function(b){void 0===b&&(b=1);b=c.dataManager().sceneData.addAnimal(b);this._roleList.push(b);return b};d.getRoleList=function(){return this._roleList};return e}();c.RoleSceneData=f;f.prototype.__class__="egret.RoleSceneData"})(egret||(egret={}));
(function(c){var f=function(){function e(){this.cityId=this.sceneId=this.sceneType=0;this.isChanged=!1;this._sceneElementManager=null;this._winCount=0;this._bornPoint=new c.Point;this._monsterPoint=new c.Point;this._normalMonsterList=[];this._bossMonsterList=[];this._arenaMonsterList=[];this.initMapData()}var d=e.prototype;d.initMapData=function(){for(var b=1001;1003>b;b++){var a=new c.SceneEditLo;a.id=b;a.width=960;a.height=1140;a.pieceWidth=300;a.pieceHeight=300;c.IsoMapData.getInstance().setData(b,
a)}};d.addWinCount=function(){this._winCount++;0==this._winCount%2?c.globalUpdateWindows([c.UpdateType.CHANGE_COPY]):c.globalUpdateWindows([c.UpdateType.COPY_MONSTER_BORN])};d.getNextSceneId=function(){var b=this.sceneId;b++;1002<b&&(b=1001);return b};d.checkArmy=function(){var b=this.getArmies(!1),a;for(a in b)if(b[a]&&b[a].vo&&0<b[a].vo.hp)return!0;return!1};d.getArmies=function(b){void 0===b&&(b=!0);var a;switch(this.sceneType){case c.SceneType.NORMAL_COPY:a=this.getNormalMonsterList(b);break;
case c.SceneType.BOSS_COPY:a=this.getBossMonsterList(b);break;case c.SceneType.ARENA:a=this.getArenaMonsterList(b)}return a};d.getNormalMonsterList=function(b){void 0===b&&(b=!0);if(b){b=this.getBornPoint();for(var a=this._normalMonsterList.length=0;3>a;a++){var g=this.getMonsterPoint(b),d=new c.SceneElementDataItem,e=new c.SceneMonsterVo;e.id=c.SceneElementData.getInstance().getAutoElementId();e.idString=e.id+"";e.name="\u602a\u7269"+a;e.x=g.x;e.y=g.y;e.hp=1E4;e.hpTotal=1E4;d.vo=e;d.lo=new c.MonsterLo;
d.lo.movieName="monster_001";this._normalMonsterList[a]=d}}return this._normalMonsterList};d.getBossMonsterList=function(b){void 0===b&&(b=!0);if(b){b=this.getBornPoint();for(var a=this._bossMonsterList.length=0;1>a;a++){var g=this.getMonsterPoint(b),d=new c.SceneElementDataItem,e=new c.SceneMonsterVo;e.id=c.SceneElementData.getInstance().getAutoElementId();e.idString=e.id+"";e.name="BOSS";e.x=g.x;e.y=g.y;e.hp=2E4;e.hpTotal=2E4;d.vo=e;d.lo=new c.MonsterLo;d.lo.movieName="boss_001";this._bossMonsterList[a]=
d}}return this._bossMonsterList};d.getBornPoint=function(){c.IsoMapData.getInstance().getData(this.sceneId);this._bornPoint.x=200+50*Math.random();this._bornPoint.y=500+200*Math.random();return this._bornPoint};d.getMonsterPoint=function(b,a,g){void 0===a&&(a=160);void 0===g&&(g=160);var d=c.IsoMapData.getInstance().getData(this.sceneId);this._monsterPoint.x=b.x+Math.random()*a-a/2;this._monsterPoint.y=b.y+Math.random()*g-g/2;this._monsterPoint.x=this.limitValue(0,d.width,this._monsterPoint.x);this._monsterPoint.y=
this.limitValue(0,d.height,this._monsterPoint.y);return this._monsterPoint};d.limitValue=function(b,a,c){c<b&&(c=b);c>a&&(c=a);return c};d.getArenaMonsterList=function(b){void 0===b&&(b=!0);if(b){this._arenaMonsterList.length=0;b=this.getBornPoint();var a=c.dataManager().roleSceneData.getRoleList().length;3<a&&(a=3);for(var g=0;g<a;g++){var d=this.getMonsterPoint(b),e=new c.SceneElementDataItem,f=new c.ScenePlayerVo;f.id=c.SceneElementData.getInstance().getAutoElementId();f.idString=f.id+"";0==g?
(f.name="\u5251\u5723",f.sex=c.SexType.MALE,f.vocation=c.VocationType.WARRIOR):1==g?(f.name="\u90aa\u6076\u6cd5\u5e08",f.sex=c.SexType.MALE,f.vocation=c.VocationType.MAGE):2==g&&(f.name="\u5bd2\u51b0\u5c04\u624b",f.sex=c.SexType.MALE,f.vocation=c.VocationType.BOWMAN);f.x=d.x;f.y=d.y;f.hp=5E3;f.hpTotal=5E3;e.vo=f;this._arenaMonsterList[g]=e}}return this._arenaMonsterList};d.addAnimal=function(b){b=new c.SceneElementDataItem;b.vo=new c.SceneMonsterVo;b.vo.id=c.SceneElementData.getInstance().getAutoElementId();
b.vo.idString=b.vo.id+"";b.vo.name="\u963f\u65af\u5170";b.vo.hp=500;b.vo.hpTotal=500;b.lo=new c.MonsterLo;b.lo.movieName="animal_001";return b};d.getGoodsList=function(b,a){for(var g=c.IsoMapData.getInstance().getData(this.sceneId),d=[],e=200,f=0,l=0;6>l;l++){var h=new c.SceneElementDataItem,k=new c.SceneElementVo;k.id=c.SceneElementData.getInstance().getAutoElementId();k.idString=k.id+"";for(k.x=b+l%4*100-e;100>k.x;)e-=100,k.x+=100;for(;0==l&&k.x>g.width-400;)e+=100,k.x-=100;for(k.y=a-100*Math.floor(l/
4)+f;0==l&&400>k.y;)f+=100,k.y+=100;k.name="\u91d1\u5e01";h.vo=k;k=new c.GoodsLo;k.iconId="27";h.lo=k;d.push(h)}return d};d.updateSceneElementVo=function(b,a,c){if(b.vo)for(var d in a)b.vo[a[d]]=c[d]};return e}();c.SceneData=f;f.prototype.__class__="egret.SceneData"})(egret||(egret={}));
(function(c){var f=function(){function e(){this._idGenerator=new c.IDGenerator(-1)}var d=e.prototype;e.getInstance=function(){return e._instance||(e._instance=new e)};d.getAutoElementId=function(){return this._idGenerator.getID(!1)};d.getElementSpeed=function(){return 6};d.getActionUrl=function(b,a,g){void 0===g&&(g=1);a=a+"/"+a+"_"+g+c.ExtensionType.JSON;return c.dataManager().pathData.getResourceUrl(b,a)};d.hasActionType=function(b,a){void 0===a&&(a=0);return-1!=b.indexOf(a.toString())};d.setSceneAvatarVoPlayer=
function(b,a,c,d,e,f,l,h){void 0===h&&(h=0);b.body="player_"+a+"_"+c+"_"+e+"_"+d;b.weapon="weapon_"+a+"_"+c+"_"+f+"_"+d;b.wing="wing_"+a+"_"+c+"_"+l+"_"+d;b.mounts="mounts_"+a+"_"+c+"_"+h+"_"+d;return b};d.setSceneAvatarVoPlayer2=function(b,a,c,d,e,f){b.body="player_"+a+"_"+c+"_"+d;b.weapon="weapon_"+a+"_"+c+"_"+e;b.wing="wing_"+a+"_"+c+"_"+f;return b};d.setSceneAvatarVo=function(b,a){a&&(b.body=a.movieName);return b};d.getSkillMovieName=function(b,a,c){void 0===c&&(c=0);return 0<c?"skill_"+b+"_"+
a+"_"+c:"skill_"+b+"_"+a};e.ARRIVE_ELEMENT_RADIUS=40;e.ENTRY_POINT_RADIUS=20;e._instance=null;return e}();c.SceneElementData=f;f.prototype.__class__="egret.SceneElementData"})(egret||(egret={}));var SkillCfg=function(){return function(){}}();SkillCfg.prototype.__class__="SkillCfg";(function(c){var f=function(){return function(){this.userInfoVo=new c.UserInfoVo}}();c.UserData=f;f.prototype.__class__="egret.UserData"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._alignHashMap=this._timeHashMap=this._winHashMap=this._layerHashMap=this.layer_guide=this.layer_tip=this.layer_window_2=this.layer_window_1=this.layer_mask=this.layer_ui=this.gameCon=this.stage=this.application=null;this._layerHashMap=new c.HashMap;this._winHashMap=new c.HashMap;this._timeHashMap=new c.HashMap;this._alignHashMap=new c.HashMap}__extends(d,e);var b=d.prototype;d.getInstance=function(){return d._instance||(d._instance=new d)};
Object.defineProperty(b,"isFullScreen",{get:function(){for(var a=[c.ApplicationLayerType.FULL_SCREEN,c.ApplicationLayerType.FULL_SCREEN_TOP],b=a.length,d=0;d<b;d++){var e=this._layerHashMap.get(a[d]);if(e&&0<e.numChildren)return!0}return!1},enumerable:!0,configurable:!0});b.init=function(a){this.application&&this.application.destroy();this.application=a;this.stage||(this.stage=a.stage,this.stage.addEventListener(c.Event.RESIZE,this.resizeHandler,this),this.onResize());this.stage.focus=null;this._winHashMap.size();
for(var b in this._winHashMap.content){a=this._winHashMap.content[b];for(var d=a.length,e=0;e<d;e++){var f=a[e];"remove"in f&&f.remove();"destroy"in f&&f.destroy()}}this._layerHashMap.clear();this._winHashMap.clear();this._timeHashMap.clear();this._alignHashMap.clear();this.removeTimer()};b.resizeHandler=function(a){this.onResize()};b.onResize=function(){var a=d.CONTENT_W,b=d.CONTENT_H,c=document.documentElement.clientWidth,e=document.documentElement.clientHeight,f;this.globalScale=f=e/c>=b/a?c/a:
e/b;this.application.scaleX=this.application.scaleY=f;this.application.x=(c-a*f)/2;this.application.y=(e-b*f)/2};b.getApplicationLayer=function(a){void 0===a&&(a=0);var b=this._layerHashMap.get(a);if(!b){var d=c.ApplicationLayerType.LAYER_MOUSE_CONFIGS[a],b=new c.Sprite;b.name="applicationLayer"+a;b.touchChildren=d.touchChildren;b.touchEnabled=d.touchEnabled;this.application.addChild(b);this._layerHashMap.put(a,b);a=this._layerHashMap.keys();a.sort(c.ArrayUtil.numeric);for(var d=a.length,e=0;e<d;e++)this.application.setChildIndex(this._layerHashMap.get(a[e]),
e)}return b};b.initLayer=function(){this.gameCon||(this.gameCon=new c.Sprite,this.layer_ui=new c.Sprite,this.gameCon.addChild(this.layer_ui),this.layer_mask=new c.Sprite,this.gameCon.addChild(this.layer_mask),this.layer_window_1=new c.Sprite,this.gameCon.addChild(this.layer_window_1),this.layer_window_2=new c.Sprite,this.gameCon.addChild(this.layer_window_2),this.layer_tip=new c.Sprite,this.gameCon.addChild(this.layer_tip),this.layer_guide=new c.Sprite,this.gameCon.addChild(this.layer_guide));this.application.addChild(this.gameCon)};
b.open=function(a,b,d,e,f){void 0===b&&(b=-1);void 0===d&&(d=-1);void 0===e&&(e=null);void 0===f&&(f=!1);if(!a)return c.LogManager.error(this,"targetClass\u4e0d\u80fd\u4e3a\u7a7a."),null;var l=c.getQualifiedClassName(a),h=null,k=null,m=null,p=null,k=this._winHashMap.get(l);if(f)h=new a,h.name=e?e:h.name,"initWindow"in h&&(p=h.initWindow),k||(k=[],this._winHashMap.put(l,k)),k.push(h);else{if(e&&k)for(f=k.length,l=0;l<f;l++){if(k[l].name==e){h=k[l];break}}else k&&0<k.length&&(h=k[0]);if(h)"recall"in
h&&(m=h.recall);else return this.open(a,b,d,e,!0)}-1==b&&(b="layerType"in h?h.layerType:0);-1==d&&(d="align"in h?h.align:0);"applicationManager"in h&&(h.applicationManager=this);this.show(h,b,d);null!=p&&h.initWindow();null!=m&&h.recall();this.hasEventListener(c.ApplicationEvent.WINDOW_OPEN)&&this.dispatchEvent(new c.ApplicationEvent(c.ApplicationEvent.WINDOW_OPEN,!1,!1,h));return h};b.close=function(a){if(a)if(isClass(a)){if(a=c.getQualifiedClassName(a))if(a=this._winHashMap.get(a))for(var b=a.length,
d=0;d<b;d++){var e=a[d];this.hide(e);this.hasEventListener(c.ApplicationEvent.WINDOW_CLOSE)&&this.dispatchEvent(new c.ApplicationEvent(c.ApplicationEvent.WINDOW_CLOSE,!1,!1,e))}}else this.hide(a),this.hasEventListener(c.ApplicationEvent.WINDOW_CLOSE)&&this.dispatchEvent(new c.ApplicationEvent(c.ApplicationEvent.WINDOW_CLOSE,!1,!1,a))};b.getTargetInstance=function(a,b,d){void 0===b&&(b=!1);void 0===d&&(d=null);a=c.getQualifiedClassName(a);a=this._winHashMap.get(a);for(var e=null,f=a.length,l=0;l<f;l++){var h=
a[l];if(b&&d){if(h.stage&&h.name==d){e=h;break}}else if(b&&!d){if(h.stage){e=h;break}}else if(!b&&d){if(!h.stage&&h.name==d){e=h;break}}else if(!b&&!d&&!h.stage){e=h;break}}return e};b.hasInstance=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];for(var b=a.length,d=0;d<b;d++){var e=c.getQualifiedClassName(a[d]);if((e=this._winHashMap.get(e))&&0<e.length)return!0}return!1};b.globalUpdate=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];for(var c=null,d=
this._winHashMap.values(),e=d.length,f=0;f<e;f++)for(var h=d[f],k=h.length,m=0;m<k;m++){var p=h[m];if(p.stage)for(var r=a.length,s=0;s<r;s++){var t=a[s];p.hasUpdateType(t)&&(c=[],c.push(t),c=c.concat(b),p.globalUpdate.apply(p,c))}}};b.update=function(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];for(var e=null,f=e=null,d=a.length,l=0;l<d;l++)for(var e=c.getQualifiedClassName(a[l]),e=this._winHashMap.get(e),h=e.length,k=0;k<h;k++){var m=e[k];m.stage&&(f=b.concat(),m.update.apply(m,
f))}};b.setAlign=function(a,b,d,e,f,l){void 0===d&&(d=0);void 0===e&&(e=0);void 0===f&&(f=0);void 0===l&&(l=0);if(a)if(b==c.AlignType.NONE)this._alignHashMap.remove(a.hashCode);else{var h=this._alignHashMap.get(a.hashCode);h||(h=new c.AlignItem);h.align=b;h.top=0==d&&"top"in a?a.top:d;h.bottom=0==e&&"bottom"in a?a.bottom:e;h.left=0==f&&"left"in a?a.left:f;h.right=0==l&&"right"in a?a.right:l;this._alignHashMap.put(a.hashCode,h);this.layout(a)}else c.LogManager.error(this,"\u663e\u793a\u5bf9\u8c61\u4e0d\u80fd\u4e3a:"+
a)};b.layout=function(a){if(a&&a.stage){var b=this._alignHashMap.get(a.hashCode),d=0,e=0,f=this.stage.stageWidth,l=this.stage.stageHeight,h=b.top,k=b.bottom,m=b.left,p=b.right;switch(b.align){case c.AlignType.TOP_LEFT:d+=m;e+=h;break;case c.AlignType.TOP_CENTER:d=(f-a.width)/2;e+=h;break;case c.AlignType.TOP_RIGHT:d=f-a.width;d-=p;e+=h;break;case c.AlignType.CENTER_LEFT:e=(l-a.height)/2;d+=m;break;case c.AlignType.CENTER:d=(f-a.width)/2;e=(l-a.height)/2;break;case c.AlignType.CENTER_RIGHT:d=f-a.width;
e=(l-a.height)/2;d-=p;break;case c.AlignType.BOTTOM_LEFT:e=l-a.height;d+=m;e-=k;break;case c.AlignType.BOTTOM_CENTER:d=(f-a.width)/2;e=l-a.height;e-=k;break;case c.AlignType.BOTTOM_RIGHT:d=f-a.width,e=l-a.height,d-=p,e-=k}a.x=d;a.y=e}};b.show=function(a,b,c,d,e,f,h){void 0===c&&(c=-1);void 0===d&&(d=0);void 0===e&&(e=0);void 0===f&&(f=0);void 0===h&&(h=0);var k=this.getApplicationLayer(b);if(a.parent!=k){var m=a.parent;k.addChild(a);this.checkModel(m)}this.setAlign(a,c,d,e,f,h);this.setModel(k,b)};
b.hide=function(a){if(a){var b=a.parent;a.parent&&a.parent.removeChild(a);this.checkModel(b);"remove"in a&&a.remove();b=c.getQualifiedClassName(a);this._winHashMap.containsKey(b)?b&&(this._timeHashMap.put(b,0),c.TimerManager.getInstance().hasExecute(this._timerId)||(this._timerId=c.TimerManager.getInstance().addExecute(this.timerHandler,this,c.DateUtil.VALUE_MINUTE,null))):this._alignHashMap.remove(a.hashCode)}};b.setWindowLayer=function(a,b,d){void 0===d&&(d=!0);if(a instanceof c.Window)var e=a;
else isClass(a)&&(e=this.getTargetInstance(a,d));e&&this.show(e,b,e.align)};Object.defineProperty(b,"centerPoint",{get:function(){return new c.Point(this.stage.stageWidth/2,this.stage.stageHeight/2)},enumerable:!0,configurable:!0});b.timerHandler=function(){this._timeHashMap.eachKey(this.checkDestroy,this);for(var a=!1,b=this._winHashMap.values(),c=b.length,d=0;d<c;d++)for(var e=b[d],f=e.length,h=0;h<f;h++)if(!e[h].stage){a=!0;break}if(!a){this.removeTimer();for(var k in this._timeHashMap.content)this._timeHashMap.content[k]=
0}};b.checkDestroy=function(a){var b=this._timeHashMap.get(a),b=b+c.DateUtil.VALUE_MINUTE,d=!1;if(b>=c.DateUtil.VALUE_MINUTE){for(var b=this._winHashMap.get(a),e=null,f=0;f<b.length;f++)e=b[f],e.stage||("destroy"in e?e.destroy():e.parent&&e.parent.removeChild(e),this._alignHashMap.remove(e.hashCode),b.splice(f,1),f--);if(0==b.length){d=0;b=this._winHashMap.values();e=b.length;for(f=0;f<e&&!(d+=b[f].length,0<d);f++);0==d&&this.removeTimer();this._winHashMap.remove(a);this._timeHashMap.remove(a);d=
!0}b=0}d||this._timeHashMap.put(a,b)};b.removeTimer=function(){c.TimerManager.getInstance().removeExecute(this._timerId)};b.setModel=function(a,b){void 0===b&&(b=0);var d=c.ApplicationLayerType.LAYER_MOUSE_CONFIGS[b];a.graphics.clear();d.model&&0<a.numChildren&&(a.graphics.beginFill(0,d.alpha),a.graphics.drawRect(0,0,this.stage.stageWidth,this.stage.stageHeight),a.graphics.endFill())};b.checkModel=function(a){if(a)for(var b in this._layerHashMap.content)if(this._layerHashMap.get(b)==a){this.setModel(a,
b);break}};b.dispatchRecall=function(a){this.hasEventListener(c.ApplicationEvent.WINDOW_RECALL)&&this.dispatchEvent(new c.ApplicationEvent(c.ApplicationEvent.WINDOW_RECALL,!1,!1,a))};b.openView=function(a){var b=null;switch(a.layerType){case c.BasePanel.LAYER_UI:b=this.layer_ui;break;case c.BasePanel.LAYER_MASK:b=this.layer_mask;break;case c.BasePanel.LAYER_WINDOW_1:b=this.layer_window_1;break;case c.BasePanel.LAYER_WINDOW_2:b=this.layer_window_2;break;case c.BasePanel.LAYER_TIP:b=this.layer_tip;
break;case c.BasePanel.LAYER_GUIDE:b=this.layer_guide}b.addChild(a);a.openEnd()};b.closeView=function(a){var b=null;switch(a.layerType){case c.BasePanel.LAYER_UI:b=this.layer_ui;break;case c.BasePanel.LAYER_MASK:b=this.layer_mask;break;case c.BasePanel.LAYER_WINDOW_1:b=this.layer_window_1;break;case c.BasePanel.LAYER_WINDOW_2:b=this.layer_window_2;break;case c.BasePanel.LAYER_TIP:b=this.layer_tip;break;case c.BasePanel.LAYER_GUIDE:b=this.layer_guide}b.contains(a)&&b.removeChild(a);a.isOpen=!1;a.onClose()};
d.CONTENT_W=640;d.CONTENT_H=960;d._instance=null;return d}(c.EventDispatcher);c.ApplicationManager=f;f.prototype.__class__="egret.ApplicationManager"})(egret||(egret={}));
(function(c){(function(c){var e=function(c){function b(){c.call(this);this.__s=egret.gui.setProperties;this.__s(this,["height","width"],[80,500]);this.elementsContent=[this.__6_i(),this.__10_i(),this.__14_i(),this.__18_i(),this.__22_i()];this.states=[new egret.gui.State("normal",[]),new egret.gui.State("disabled",[])]}__extends(b,c);var a=b.prototype;a.__10_i=function(){var a=new egret.gui.Group;this.__s(a,["x","y"],[96,-1]);a.elementsContent=[this.__7_i(),this.__8_i(),this.__9_i()];return a};a.__11_i=
function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["frame_head_2_bg_png",7,8]);return a};a.__12_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["icon_lock_4_png",17,15]);return a};a.__13_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["frame_head_0_png",0,0]);return a};a.__14_i=function(){var a=new egret.gui.Group;this.__s(a,["x","y"],[196,-1]);a.elementsContent=[this.__11_i(),this.__12_i(),this.__13_i()];return a};a.__15_i=function(){var a=
new egret.gui.UIAsset;this.__s(a,["source","x","y"],["frame_head_2_bg_png",17,8]);return a};a.__16_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["icon_lock_4_png",27,15]);return a};a.__17_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["frame_head_0_png",10,0]);return a};a.__18_i=function(){var a=new egret.gui.Group;this.__s(a,["x","y"],[286,-1]);a.elementsContent=[this.__15_i(),this.__16_i(),this.__17_i()];return a};a.__19_i=function(){var a=new egret.gui.UIAsset;
this.__s(a,["source","x","y"],["frame_head_2_bg_png",17,8]);return a};a.__20_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["icon_lock_4_png",27,15]);return a};a.__21_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["frame_head_0_png",10,0]);return a};a.__22_i=function(){var a=new egret.gui.Group;this.__s(a,["x","y"],[386,-1]);a.elementsContent=[this.__19_i(),this.__20_i(),this.__21_i()];return a};a.__3_i=function(){var a=new egret.gui.UIAsset;this.__s(a,
["source","x","y"],["frame_head_2_bg_png",7,8]);return a};a.__4_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["height","source","width","x","y"],[64,"icon_wuhun_12_png",64,7,10]);return a};a.__5_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["frame_head_0_png",0,0]);return a};a.__6_i=function(){var a=new egret.gui.Group;this.__s(a,["x","y"],[-1,-1]);a.elementsContent=[this.__3_i(),this.__4_i(),this.__5_i()];return a};a.__7_i=function(){var a=new egret.gui.UIAsset;this.__s(a,
["source","x","y"],["frame_head_2_bg_png",7,8]);return a};a.__8_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["icon_lock_4_png",17,15]);return a};a.__9_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["frame_head_0_png",0,0]);return a};return b}(egret.gui.Skin);c.HeadListSkin=e;e.prototype.__class__="ui.main.HeadListSkin"})(c.main||(c.main={}))})(ui||(ui={}));
(function(c){(function(c){var e=function(c){function b(){c.call(this);this.__s=egret.gui.setProperties;this.__s(this,["height","width"],[84,84]);this.elementsContent=[this.__3_i(),this.__4_i(),this.imgIcon_i(),this.__5_i()];this.states=[new egret.gui.State("normal",[]),new egret.gui.State("disabled",[])]}__extends(b,c);var a=b.prototype;Object.defineProperty(a,"skinParts",{get:function(){return b._skinParts},enumerable:!0,configurable:!0});a.__4_i=function(){var a=new egret.gui.UIAsset;this.__s(a,
["source","x","y"],["btn_plus_green_png",18,18]);return a};a.__5_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["bg_quan_png",0,-1]);return a};a.imgIcon_i=function(){var a=new egret.gui.UIAsset;this.imgIcon=a;this.__s(a,["height","width","x","y"],[61,61,11,11]);return a};a.__3_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["bg_itembg_png",8,8]);return a};b._skinParts=["imgIcon"];return b}(egret.gui.Skin);c.WuhunItemSkin=e;e.prototype.__class__="ui.wuhun.WuhunItemSkin"})(c.wuhun||
(c.wuhun={}))})(ui||(ui={}));(function(c){var f=function(){function e(){this.pathData=c.PathData.getInstance();this.sceneElementData=c.SceneElementData.getInstance();this.userData=new c.UserData;this.sceneData=new c.SceneData;this.fightData=new c.FightData;this.roleSceneData=new c.RoleSceneData}var d=e.prototype;e.getInstance=function(){return e._instance||(e._instance=new c.DataManager)};d.init=function(){};return e}();c.DataManager=f;f.prototype.__class__="egret.DataManager"})(egret||(egret={}));
(function(c){var f=function(c){function d(){c.call(this);this.skinName="ui.WindowViewSkin"}__extends(d,c);return d}(c.BaseView);c.WindowView=f;f.prototype.__class__="egret.WindowView"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.skinName="ui.bag.BagItemSkin";this.addEventListener(c.TouchEvent.TOUCH_END,this.onTouchHandler,this)}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"itemId",{set:function(a){this.info=c.ItemManager.getInstance().getCfg(a)},enumerable:!0,configurable:!0});Object.defineProperty(b,"info",{get:function(){return this._info},set:function(a){this._info=a;this.isCreate&&this.update()},enumerable:!0,configurable:!0});b.onCreate=function(){e.prototype.onCreate.call(this);
this.update()};b.update=function(){null==this.info||0==this.info.id?this.imgIcon.visible=!1:(this.imgIcon.visible=!0,this.imgIcon.source="resource/item/"+this.info.id+".png",this.imgBg.source="resource/unpack/frame_item_"+this.info.quality+".png")};b.onTouchHandler=function(a){c.ItemTipsControl.getInstance().openTips(this.info.id)};return d}(c.BaseView);c.BagItem=f;f.prototype.__class__="egret.BagItem"})(egret||(egret={}));
(function(c){var f=function(){function c(){}var d=c.prototype;c.getInstance=function(){c._instance||(c._instance=new c);return c._instance};d.initCfg=function(){if(!this.skillCfgs){this.skillCfgs=[];for(var b=0;b<c.SKILL_CONFIG.length;b++){var a=c.SKILL_CONFIG[b].split(","),d=new SkillCfg;d.id=Number(a[0]);d.name=a[1];d.desc=a[2];this.skillCfgs.push(d)}}};d.getCfg=function(b){this.initCfg();for(var a=0;a<this.skillCfgs.length;a++){var c=this.skillCfgs[a];if(c.id==b)return c}return null};c.SKILL_CONFIG=
"1,\u70c8\u7130,\u707c\u70e7\u654c\u4eba\uff0c\u9020\u6210320\u70b9\u706b\u7130\u4f24\u5bb3 2,\u66b4\u63cd,\u63d0\u9ad8\u8fd1\u6218\u89d2\u8272\u7684\u666e\u653b\u4f24\u5bb3\uff0c\u5e76\u6709\u6982\u7387\u9677\u5165\u66b4\u8d70\u72b6\u6001 3,\u96f7\u795e\u9524,\u53ec\u5524\u96f7\u795e\u9524\u964d\u4e16\uff0c\u6a2a\u626b\u654c\u519b\uff0c\u5e76\u9644\u52a0240\u70b9\u96f7\u5c5e\u6027\u4f24\u5bb3 4,\u66b4\u8d70,\u4f7f\u5df1\u65b9\u53ec\u5524\u7269\u9677\u5165\u66b4\u8d70\u72b6\u6001\uff0c\u63d0\u5347\u53ec\u5524\u7269\u4f24\u5bb3 5,\u94c1\u722a,\u5bf9\u654c\u4eba\u9020\u6210300\u70b9\u6495\u88c2\u4f24\u5bb3\uff0c\u5e76\u6709\u6982\u7387\u9020\u6210\u6d41\u8840\u6548\u679c 6,\u81ea\u711a,\u63d0\u5347\u654c\u6211\u53cc\u65b9\u53d7\u5230\u7684\u4f24\u5bb3\uff0c\u5e76\u9644\u52a0\u71c3\u70e7\u6548\u679c 7,\u77ac\u79fb,\u63d0\u5347\u81ea\u8eab\u79fb\u901f\uff0c\u4f7f\u81ea\u8eab\u80fd\u5728\u573a\u4e2d\u9ad8\u901f\u79fb\u52a8 8,\u81f4\u76f2,\u964d\u4f4e\u654c\u65b9\u547d\u4e2d\uff0c\u4f7f\u88ab\u653b\u51fb\u5230\u7684\u654c\u4eba\u89c6\u91ce\u7f29\u5c0f 9,\u706b\u7403,\u77ac\u53d1\u4e00\u4e2a\u706b\u7403\u8ffd\u51fb\u654c\u4eba\uff0c\u91ca\u653e\u8ddd\u79bb\u8d8a\u8fdc,\u4f24\u5bb3\u8d8a\u9ad8 10,\u6cb8\u817e,\u63d0\u5347\u81ea\u8eab\u653b\u51fb\u4f24\u5bb3\uff0c\u5e76\u7531\u6982\u7387\u9020\u6210\u591a\u500d\u4f24\u5bb3 11,\u590d\u751f,\u4e3a\u81ea\u8eab\u6dfb\u52a0\u590d\u6d3b\u72b6\u6001\uff0c\u5728\u77ed\u65f6\u95f4\u5185\u53d7\u5230\u81f4\u547d\u4f24\u5bb3\u53ef\u514d\u75ab\u6b7b\u4ea1 12,\u72c2\u6012,\u63d0\u5347\u81ea\u8eab\u653b\u901f\u548c\u653b\u51fb\u529b\uff0c\u5e76\u63d0\u5347\u5bf9\u540c\u4e00\u4e2a\u654c\u4eba\u9020\u6210\u7684\u4f24\u5bb3 13,\u7075\u7fbd,\u91ca\u653e\u4e09\u6839\u5c3e\u7fbd\u8ffd\u51fb\u654c\u4eba\uff0c\u540c\u65f6\u88ab\u4e09\u6839\u5c3e\u7fbd\u547d\u4e2d\u7684\u654c\u4eba\u53d7\u5230\u989d\u5916\u4f24\u5bb3 14,\u5f3a\u5316,\u63d0\u5347\u81ea\u8eab\u653b\u9632\u5c5e\u6027\uff0c\u6301\u7eed\u4e00\u5b9a\u65f6\u95f4\uff0c\u7ed3\u675f\u540e\u9677\u5165\u865a\u5f31\u72b6\u6001 15,\u96f7\u795e\u964d\u4e34,\u653b\u51fb\u654c\u65b9\u65f6\u9644\u5e26\u96f7\u5c5e\u6027\u4f24\u5bb3\uff0c\u5e76\u7531\u6982\u7387\u9ebb\u75f9\u654c\u65b9 16,\u53ec\u5524\u5f3a\u5316,\u63d0\u5347\u53ec\u5524\u7269\u751f\u547d\uff0c\u653b\u51fb\uff0c\u9632\u5fa1\u7b49\u57fa\u7840\u5c5e\u6027 17,\u56fa\u5b88,\u77ed\u65f6\u95f4\u5185\u5927\u5e45\u63d0\u5347\u53ec\u5524\u7269\u548c\u81ea\u8eab\u7684\u9632\u5fa1 18,\u7075\u9b42\u9644\u4f53,\u77ed\u65f6\u95f4\u5185\u63d0\u5347\u81ea\u8eab\u4f24\u5bb3\u52a0\u6210\u5c5e\u6027\uff0c\u5e76\u6709\u51e0\u7387\u5077\u53d6\u654c\u65b9\u653b\u51fb 19,\u514d\u75ab,\u77ed\u65f6\u95f4\u5185\u5904\u4e8e\u65e0\u654c\u72b6\u6001\uff0c\u5e76\u514d\u75ab\u63a7\u5236\u6548\u679c 20,\u4e09\u53c9\u621f,\u653b\u51fb\u654c\u65b9\u65f6\u9644\u5e26\u6c34\u5c5e\u6027\u4f24\u5bb3\uff0c\u5e76\u9644\u52a0\u6301\u7eed\u6027\u7684\u6c34\u5c5e\u6027\u4f24\u5bb3 21,\u6218\u65e0\u4e0d\u80dc,\u514d\u75ab\u6b7b\u4ea1\u6548\u679c\uff0c\u63d0\u5347\u8f93\u51fa,\u51fb\u6740\u654c\u65b9\u540e\u56de\u590d\u8840\u91cf 22,\u6f5c\u884c,\u80cc\u51fb\u654c\u4eba\u65f6\u989d\u5916\u9644\u52a0\u4f24\u5bb3\uff0c\u5e76\u6709\u6982\u7387\u9020\u6210\u7729\u6655 23,\u5b9d\u5178,\u63d0\u5347\u81ea\u8eab\u6cd5\u672f\u4f24\u5bb3\uff0c\u5e76\u63d0\u5347\u6cd5\u672f\u66b4\u51fb\u51e0\u7387 24,\u6c72\u53d6,\u5077\u53d6\u654c\u65b9\u5c5e\u6027\u8865\u7ed9\u81ea\u8eab\uff0c\u4f46\u53ea\u6709\u90e8\u5206\u5c5e\u6027\u4f1a\u8f6c\u79fb\u7ed9\u81ea\u8eab 25,\u73b2\u73d1\u706b,\u5bf9\u654c\u4eba\u9020\u6210\u706b\u5c5e\u6027\u4f24\u5bb3\uff0c\u5c5e\u4e8e\u6301\u7eed\u578b\u6280\u80fd 26,\u5f3a\u51fb,\u63d0\u5347\u7834\u7532\u4f24\u5bb3\u548c\u7834\u7532\u51e0\u7387\uff0c\u5e76\u4f7f\u88ab\u547d\u4e2d\u65b9\u9677\u5165\u53d7\u635f\u72b6\u6001 27,\u8fd4\u7956,\u547c\u5524\u4e0a\u7956\u9644\u4f53\uff0c\u63d0\u5347\u81ea\u8eab\u9632\u5fa1\u548c\u653b\u51fb\uff0c\u53d7\u63a7\u5236\u65f6\u95f4\u5ef6\u957f 28,\u6d9f\u6f2a,\u51cf\u5c11\u81ea\u5df1\u53d7\u5230\u7684\u6c34\u5c5e\u6027\u4f24\u5bb3\uff0c\u5e76\u6709\u51e0\u7387\u53cd\u5f39\u90e8\u5206\u4f24\u5bb3\u7ed9\u653b\u51fb\u65b9 29,\u653b\u51fb\u5f3a\u5316,\u6709\u51e0\u7387\u63d0\u5347\u81ea\u8eab2-8\u500d\u653b\u51fb\uff0c\u63d0\u5347\u8f93\u51fa\u80fd\u529b 30,\u751f\u547d\u5f3a\u5316,\u77ed\u65f6\u95f4\u5185\u63d0\u5347\u81ea\u8eab\u751f\u547d\uff0c\u5e76\u9644\u52a0\u6301\u7eed\u56de\u8840\u6548\u679c 31,\u9632\u5fa1\u5f3a\u5316,\u964d\u4f4e\u81ea\u8eab\u8f93\u51fa\uff0c\u5927\u5e45\u63d0\u5347\u81ea\u8eab\u9632\u5fa1\u529b\uff0c\u5e76\u6709\u6982\u7387\u514d\u75ab\u90e8\u5206\u4f24\u5bb3 32,\u8089\u76fe,\u964d\u4f4e\u6240\u6709\u53d7\u5230\u7684\u4f24\u5bb350%\uff0c\u514d\u75ab\u63a7\u5236\u5e76\u5632\u8bbd\u654c\u65b9".split(" ");
return c}();c.SkillManager=f;f.prototype.__class__="egret.SkillManager"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._skillId=0;this.skinName="ui.wuhun.WuhunItemSkin";this.addEventListener(c.TouchEvent.TOUCH_END,this.onTouchHandler,this)}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"skillId",{set:function(a){this._skillId=a;this.update()},enumerable:!0,configurable:!0});b.onCreate=function(){e.prototype.onCreate.call(this);this.update()};b.update=function(){this.isCreate&&0!=this._skillId&&(this.imgIcon.source="resource/skill/"+this._skillId+
".png")};b.onTouchHandler=function(a){0!=this._skillId&&c.SkillControl.getInstance().openskillTip(this._skillId)};return d}(c.BaseView);c.WuhunItem=f;f.prototype.__class__="egret.WuhunItem"})(egret||(egret={}));(function(c){c.globalUpdateWindows=function(f){for(var e=[],d=1;d<arguments.length;d++)e[d-1]=arguments[d];e.unshift(f);c.ApplicationManager.getInstance().globalUpdate.apply(c.ApplicationManager.getInstance(),e)}})(egret||(egret={}));
(function(c){var f=function(){function c(d,b,a){void 0===d&&(d=0);void 0===b&&(b=0);void 0===a&&(a=0);this.x=d;this.y=b;this.z=a}c.prototype.toString=function(){return"[Point3D(x = "+this.x+", y = "+this.y+", z = "+this.z+")]"};return c}();c.Point3D=f;f.prototype.__class__="egret.Point3D"})(egret||(egret={}));
(function(c){(function(f){var e=function(d){function b(){d.call(this);this.__s=egret.gui.setProperties;this.__s(this,["height","width"],[960,640]);this.elementsContent=[this.window_i(),this.__3_i(),this.itemCon_i(),this.__4_i()];this.states=[new egret.gui.State("normal",[]),new egret.gui.State("disabled",[])]}__extends(b,d);var a=b.prototype;Object.defineProperty(a,"skinParts",{get:function(){return b._skinParts},enumerable:!0,configurable:!0});a.__4_i=function(){var a=new egret.gui.UIAsset;this.__s(a,
["source","x","y"],["title_bag_png",280,29]);return a};a.itemCon_i=function(){var a=new egret.gui.Group;this.itemCon=a;this.__s(a,["height","width","x","y"],[653,488,70,102]);return a};a.__3_i=function(){var a=new egret.gui.UIAsset;this.__s(a,"height scale9Grid source width x y".split(" "),[675,egret.gui.getScale9Grid("3,3,24,24"),"bg_21_png",500,64,94]);return a};a.window_i=function(){var a=new egret.WindowView;this.window=a;this.__s(a,["height","skinName","width"],[200,c.WindowViewSkin,200]);return a};
b._skinParts=["window","itemCon"];return b}(egret.gui.Skin);f.BagViewSkin=e;e.prototype.__class__="ui.bag.BagViewSkin"})(c.bag||(c.bag={}))})(ui||(ui={}));
(function(c){(function(f){var e=function(d){function b(){d.call(this);this.__s=egret.gui.setProperties;this.__s(this,["height","width"],[960,640]);this.elementsContent=[this.window_i(),this.__3_i(),this.__4_i(),this.boxCon_i(),this.item_1_i(),this.item_2_i(),this.item_3_i(),this.item_4_i(),this.item_5_i(),this.item_6_i(),this.item_7_i(),this.item_8_i(),this.item_9_i(),this.item_10_i(),this.item_11_i(),this.item_12_i(),this.__5_i(),this.__6_i(),this.__7_i(),this.__8_i(),this.__9_i(),this.__10_i(),
this.__11_i(),this.__12_i(),this.__13_i(),this.__14_i(),this.txtName_i(),this.txtScore_i(),this.txtAttack_i(),this.txtSpeed_i(),this.txtLife_i(),this.txtDef_i(),this.__15_i(),this.__16_i()];this.states=[new egret.gui.State("normal",[]),new egret.gui.State("disabled",[])]}__extends(b,d);var a=b.prototype;Object.defineProperty(a,"skinParts",{get:function(){return b._skinParts},enumerable:!0,configurable:!0});a.__11_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["attackSpeedIcon_png",
329,695]);return a};a.__12_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["scale9Grid","source","width","x","y"],[egret.gui.getScale9Grid("4,4,24,24"),"bg_20_png",177,369,695]);return a};a.__13_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["defenceIcon_png",329,735]);return a};a.__14_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["scale9Grid","source","width","x","y"],[egret.gui.getScale9Grid("4,4,24,24"),"bg_20_png",177,369,735]);return a};a.__15_i=function(){var a=
new egret.gui.UIAsset;this.__s(a,["source","x","y"],["level9_png",272,126]);return a};a.__16_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["title_equip_png",280,29]);return a};a.__3_i=function(){var a=new egret.gui.UIAsset;this.__s(a,"height scale9Grid source width x y".split(" "),[600,egret.gui.getScale9Grid("3,3,24,24"),"bg_21_png",515,57,83]);return a};a.__4_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["role_bg_jpg",63,152]);return a};a.__5_i=
function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["bg__20_png",194,91]);return a};a.__6_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["word_zhanli_png",195,629]);return a};a.__7_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["attackIcon_png",69,695]);return a};a.__8_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["scale9Grid","source","width","x","y"],[egret.gui.getScale9Grid("4,4,24,24"),"bg_20_png",177,109,695]);return a};
a.__9_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["lifeIcon_png",69,735]);return a};a.boxCon_i=function(){var a=new egret.gui.Group;this.boxCon=a;this.__s(a,["height","width","x","y"],[400,240,193,209]);return a};a.item_10_i=function(){var a=new egret.BagItem;this.item_10=a;this.__s(a,["height","skinName","width","x","y"],[80,c.bag.BagItemSkin,80,488,400]);return a};a.item_11_i=function(){var a=new egret.BagItem;this.item_11=a;this.__s(a,["height","skinName","width","x",
"y"],[80,c.bag.BagItemSkin,80,488,490]);return a};a.item_12_i=function(){var a=new egret.BagItem;this.item_12=a;this.__s(a,["height","skinName","width","x","y"],[80,c.bag.BagItemSkin,80,488,580]);return a};a.item_1_i=function(){var a=new egret.BagItem;this.item_1=a;this.__s(a,["height","skinName","width","x","y"],[80,c.bag.BagItemSkin,80,72,130]);return a};a.item_2_i=function(){var a=new egret.BagItem;this.item_2=a;this.__s(a,["height","skinName","width","x","y"],[80,c.bag.BagItemSkin,80,72,220]);
return a};a.item_3_i=function(){var a=new egret.BagItem;this.item_3=a;this.__s(a,["height","skinName","width","x","y"],[80,c.bag.BagItemSkin,80,72,310]);return a};a.item_4_i=function(){var a=new egret.BagItem;this.item_4=a;this.__s(a,["height","skinName","width","x","y"],[80,c.bag.BagItemSkin,80,72,400]);return a};a.item_5_i=function(){var a=new egret.BagItem;this.item_5=a;this.__s(a,["height","skinName","width","x","y"],[80,c.bag.BagItemSkin,80,72,490]);return a};a.item_6_i=function(){var a=new egret.BagItem;
this.item_6=a;this.__s(a,["height","skinName","width","x","y"],[80,c.bag.BagItemSkin,80,72,580]);return a};a.item_7_i=function(){var a=new egret.BagItem;this.item_7=a;this.__s(a,["height","skinName","width","x","y"],[80,c.bag.BagItemSkin,80,488,130]);return a};a.item_8_i=function(){var a=new egret.BagItem;this.item_8=a;this.__s(a,["height","skinName","width","x","y"],[80,c.bag.BagItemSkin,80,488,220]);return a};a.item_9_i=function(){var a=new egret.BagItem;this.item_9=a;this.__s(a,["height","skinName",
"width","x","y"],[80,c.bag.BagItemSkin,80,488,310]);return a};a.__10_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["scale9Grid","source","width","x","y"],[egret.gui.getScale9Grid("4,4,24,24"),"bg_20_png",177,109,735]);return a};a.txtAttack_i=function(){var a=new egret.gui.Label;this.txtAttack=a;this.__s(a,"fontFamily size text textAlign width x y".split(" "),["Arial",24,"13100","center",151,121,700]);return a};a.txtDef_i=function(){var a=new egret.gui.Label;this.txtDef=a;this.__s(a,"fontFamily size text textAlign width x y".split(" "),
["Arial",24,"490","center",151,381,740]);return a};a.txtLife_i=function(){var a=new egret.gui.Label;this.txtLife=a;this.__s(a,"fontFamily size text textAlign width x y".split(" "),["Arial",24,"1530","center",151,121,740]);return a};a.txtName_i=function(){var a=new egret.gui.Label;this.txtName=a;this.__s(a,"fontFamily size text textAlign width x y".split(" "),["Arial",24,"\u4e60\u6d69\u7136","center",151,236,98]);return a};a.txtScore_i=function(){var a=new egret.gui.Label;this.txtScore=a;this.__s(a,
"fontFamily height size text textAlign textColor width x y".split(" "),["Arial",31,30,"31417","center",16589603,138,268,637]);return a};a.txtSpeed_i=function(){var a=new egret.gui.Label;this.txtSpeed=a;this.__s(a,"fontFamily size text textAlign width x y".split(" "),["Arial",24,"4300","center",151,381,700]);return a};a.window_i=function(){var a=new egret.WindowView;this.window=a;this.__s(a,["height","skinName","width"],[200,c.WindowViewSkin,200]);return a};b._skinParts="window boxCon item_1 item_2 item_3 item_4 item_5 item_6 item_7 item_8 item_9 item_10 item_11 item_12 txtName txtScore txtAttack txtSpeed txtLife txtDef".split(" ");
return b}(egret.gui.Skin);f.EquipViewSkin=e;e.prototype.__class__="ui.equip.EquipViewSkin"})(c.equip||(c.equip={}))})(ui||(ui={}));
(function(c){(function(f){var e=function(d){function b(){d.call(this);this.__s=egret.gui.setProperties;this.__s(this,["height","width"],[960,640]);this.elementsContent=[this.imgMask_i(),this.imgBg_i(),this.txtName_i(),this.__3_i(),this.txtDesc_i(),this.item_i()];this.states=[new egret.gui.State("normal",[]),new egret.gui.State("disabled",[])]}__extends(b,d);var a=b.prototype;Object.defineProperty(a,"skinParts",{get:function(){return b._skinParts},enumerable:!0,configurable:!0});a.imgBg_i=function(){var a=
new egret.gui.UIAsset;this.imgBg=a;this.__s(a,"height scale9Grid source width x y".split(" "),[246,egret.gui.getScale9Grid("30,20,14,29"),"bg_tips_png",400,112,220]);return a};a.imgMask_i=function(){var a=new egret.gui.UIAsset;this.imgMask=a;this.__s(a,"height scale9Grid source width x y".split(" "),[960,egret.gui.getScale9Grid("4,4,24,24"),"bg_19_png",640,0,0]);return a};a.item_i=function(){var a=new egret.WuhunItem;this.item=a;this.__s(a,["height","skinName","width","x","y"],[80,c.wuhun.WuhunItemSkin,
80,139,234]);return a};a.__3_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["scale9Grid","source","width","x","y"],[egret.gui.getScale9Grid("57,0,100,5"),"img_line1_png",350,134,327]);return a};a.txtDesc_i=function(){var a=new egret.gui.Label;this.txtDesc=a;this.__s(a,"height size text textAlign width x y".split(" "),[83,24,"\u6280\u80fd\u63cf\u8ff0","left",340,143,354]);return a};a.txtName_i=function(){var a=new egret.gui.Label;this.txtName=a;this.__s(a,"size text textAlign width x y".split(" "),
[24,"\u6280\u80fd\u540d","left",205,227,262]);return a};b._skinParts=["imgMask","imgBg","txtName","txtDesc","item"];return b}(egret.gui.Skin);f.SkillTipSkin=e;e.prototype.__class__="ui.skill.SkillTipSkin"})(c.skill||(c.skill={}))})(ui||(ui={}));
(function(c){(function(f){var e=function(d){function b(){d.call(this);this.__s=egret.gui.setProperties;this.__s(this,["height","width"],[960,640]);this.elementsContent=[this.window_i(),this.__3_i(),this.__4_i(),this.__5_i(),this.itemCon_i()];this.states=[new egret.gui.State("normal",[]),new egret.gui.State("disabled",[])]}__extends(b,d);var a=b.prototype;Object.defineProperty(a,"skinParts",{get:function(){return b._skinParts},enumerable:!0,configurable:!0});a.__4_i=function(){var a=new egret.BaseView;
this.__s(a,["height","skinName","width","x","y"],[80,c.main.HeadListSkin,479,78,83]);return a};a.__5_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["bgSkill_jpg",60,171]);return a};a.itemCon_i=function(){var a=new egret.gui.Group;this.itemCon=a;this.__s(a,["height","width","x","y"],[574,494,65,176]);return a};a.__3_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["title_skill_png",283,31]);return a};a.window_i=function(){var a=new egret.BaseView;this.window=
a;this.__s(a,["height","skinName","width"],[200,c.WindowViewSkin,200]);return a};b._skinParts=["window","itemCon"];return b}(egret.gui.Skin);f.SkillViewSkin=e;e.prototype.__class__="ui.skill.SkillViewSkin"})(c.skill||(c.skill={}))})(ui||(ui={}));
(function(c){(function(c){var e=function(c){function b(){c.call(this);this.__s=egret.gui.setProperties;this.__s(this,["height","width"],[960,640]);this.elementsContent=[this.__3_i(),this.__4_i(),this.__5_i(),this.__6_i(),this.__7_i(),this.__8_i(),this.__9_i(),this.__10_i(),this.img_1_i(),this.img_2_i(),this.img_3_i(),this.img_4_i(),this.img_5_i(),this.btnClose_i()];this.states=[new egret.gui.State("normal",[]),new egret.gui.State("disabled",[])]}__extends(b,c);var a=b.prototype;Object.defineProperty(a,
"skinParts",{get:function(){return b._skinParts},enumerable:!0,configurable:!0});a.__3_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["height","source","width","x","y"],[862,"soulRoadBg_nomal_png",666,-26,14]);return a};a.__4_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["tab_diff_0_png",473,848]);return a};a.__5_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["tab_normal_1_png",363,847]);return a};a.__6_i=function(){var a=new egret.gui.UIAsset;
this.__s(a,"height scale9Grid source width x y".split(" "),[253,egret.gui.getScale9Grid("3,3,2,2"),"frame_bg_png",275,71,563]);return a};a.__7_i=function(){var a=new egret.gui.UIAsset;this.__s(a,"height scale9Grid source width x y".split(" "),[227,egret.gui.getScale9Grid("3,3,2,2"),"frame_bg_png",318,246,106]);return a};a.__8_i=function(){var a=new egret.gui.UIAsset;this.__s(a,"height scale9Grid source width x y".split(" "),[203,egret.gui.getScale9Grid("3,3,2,2"),"frame_bg_png",492,75,343]);return a};
a.__9_i=function(){var a=new egret.gui.UIAsset;this.__s(a,"height scale9Grid source width x y".split(" "),[227,egret.gui.getScale9Grid("3,3,2,2"),"frame_bg_png",163,76,106]);return a};a.btnClose_i=function(){var a=new egret.gui.UIAsset;this.btnClose=a;this.__s(a,["source","x","y"],["btn_close1_png",554,38]);return a};a.img_1_i=function(){var a=new egret.gui.UIAsset;this.img_1=a;this.__s(a,["source","x","y"],["1_1_png",78,107]);return a};a.img_2_i=function(){var a=new egret.gui.UIAsset;this.img_2=
a;this.__s(a,["source","x","y"],["1_2_png",248,108]);return a};a.img_3_i=function(){var a=new egret.gui.UIAsset;this.img_3=a;this.__s(a,["source","x","y"],["1_3_png",77,345]);return a};a.img_4_i=function(){var a=new egret.gui.UIAsset;this.img_4=a;this.__s(a,["source","x","y"],["1_4_png",74,565]);return a};a.img_5_i=function(){var a=new egret.gui.UIAsset;this.img_5=a;this.__s(a,["source","x","y"],["1_5_png",355,564]);return a};a.__10_i=function(){var a=new egret.gui.UIAsset;this.__s(a,"height scale9Grid source width x y".split(" "),
[254,egret.gui.getScale9Grid("3,3,2,2"),"frame_bg_png",214,353,562]);return a};b._skinParts="img_1 img_2 img_3 img_4 img_5 btnClose".split(" ");return b}(egret.gui.Skin);c.SoulRoadViewSkin=e;e.prototype.__class__="ui.soulRoad.SoulRoadViewSkin"})(c.soulRoad||(c.soulRoad={}))})(ui||(ui={}));
(function(c){(function(f){var e=function(d){function b(){d.call(this);this.__s=egret.gui.setProperties;this.__s(this,["height","width"],[960,640]);this.elementsContent=[this.window_i(),this.__3_i(),this.__4_i(),this.__5_i(),this.__6_i(),this.boxCon_i(),this.__7_i(),this.__8_i(),this.__9_i(),this.__10_i(),this.__11_i(),this.item1_i(),this.item2_i(),this.item3_i(),this.item4_i(),this.item5_i()];this.states=[new egret.gui.State("normal",[]),new egret.gui.State("disabled",[])]}__extends(b,d);var a=b.prototype;
Object.defineProperty(a,"skinParts",{get:function(){return b._skinParts},enumerable:!0,configurable:!0});a.__11_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["btn_tipicon_png",135,710]);return a};a.__3_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["title_wuhun_png",280,29]);return a};a.__4_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["wuhun_bg_jpg",64,174]);return a};a.__5_i=function(){var a=new egret.gui.UIAsset;this.__s(a,
["source","x","y"],["title_bg_png",121,173]);return a};a.__6_i=function(){var a=new egret.BaseView;this.__s(a,["height","skinName","width","x","y"],[80,c.main.HeadListSkin,479,77,83]);return a};a.__7_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["baihu_png",284,182]);return a};a.__8_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["hunhuanstar_png",397,601]);return a};a.__9_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["hunhuanmaster_png",
478,601]);return a};a.boxCon_i=function(){var a=new egret.gui.Group;this.boxCon=a;this.__s(a,["height","width","x","y"],[209,253,62,175]);return a};a.item1_i=function(){var a=new egret.WuhunItem;this.item1=a;this.__s(a,["height","skinName","width","x","y"],[84,c.wuhun.WuhunItemSkin,84,66,438]);return a};a.item2_i=function(){var a=new egret.WuhunItem;this.item2=a;this.__s(a,"height scaleX scaleY skinName width x y".split(" "),[84,1.1,1.1,c.wuhun.WuhunItemSkin,84,156,466]);return a};a.item3_i=function(){var a=
new egret.WuhunItem;this.item3=a;this.__s(a,"height scaleX scaleY skinName width x y".split(" "),[84,1.2,1.2,c.wuhun.WuhunItemSkin,84,259,476]);return a};a.item4_i=function(){var a=new egret.WuhunItem;this.item4=a;this.__s(a,"height scaleX scaleY skinName width x y".split(" "),[84,1.1,1.1,c.wuhun.WuhunItemSkin,84,376,466]);return a};a.item5_i=function(){var a=new egret.WuhunItem;this.item5=a;this.__s(a,["height","skinName","width","x","y"],[84,c.wuhun.WuhunItemSkin,84,476,438]);return a};a.__10_i=
function(){var a=new egret.gui.Label;this.__s(a,"fontFamily size text textColor x y".split(" "),["\u5fae\u8f6f\u96c5\u9ed1",24,"\u767d\u864e\uff0c\u653b\u5b88\u517c\u5907\u7684\u4e0a\u7ea7\u6b66\u9b42",3881530,179,716]);return a};a.window_i=function(){var a=new egret.WindowView;this.window=a;this.__s(a,["height","skinName","width"],[200,c.WindowViewSkin,200]);return a};b._skinParts="window boxCon item1 item2 item3 item4 item5".split(" ");return b}(egret.gui.Skin);f.WuhunViewSkin=e;e.prototype.__class__=
"ui.wuhun.WuhunViewSkin"})(c.wuhun||(c.wuhun={}))})(ui||(ui={}));
(function(c){var f=function(e){function d(){e.call(this)}__extends(d,e);var b=d.prototype;b.loadUrl=function(a,b){void 0===b&&(b=!1);var d=RES.getRes(a+"_json"),e=RES.getRes(a+"_png"),d=new c.MovieClipDataFactory(d,e);this.anime=new c.MovieClip(d.generateMovieClipData(a));this.addChild(this.anime);!0==b&&this.anime.addEventListener(c.Event.COMPLETE,this.onLoop,this);this.anime.gotoAndPlay(1)};b.onLoop=function(a){this.anime.gotoAndPlay(1)};return d}(c.gui.UIComponent);c.AnimeClip=f;f.prototype.__class__=
"egret.AnimeClip"})(egret||(egret={}));(function(c){c.dataManager=function(){return c.DataManager.getInstance()}})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.LEVEL_UP=101;c.USER_INFO=102;c.INCOME=103;c.UAV_POWER=104;c.KANKE=105;c.SHOW_FRIEND=106;c.NAVIGATE_LINK=107;c.GUIDE=108;c.EXP_ADD=201;c.ADD_PET=301;c.PET_STRIKE=302;c.PET_INFO=301;c.PET_WORK=304;c.PROP_CHANGE=401;c.MALL_UPDATE=501;c.RANKING=601;c.PLAYER_EXIT_SCENE=701;c.PLAYER_ENTER_SCENE=702;c.PLAYER_VO_CHANGED=703;c.COPY_MONSTER_BORN=704;c.DAMAGE_HP_CHANGE=705;c.CHANGE_SOULROAD=706;c.CHANGE_COPY=707;c.NEXT_TURN=708;c.ADD_ROLE=709;c.ADD_MONSTER=710;return c}();
c.UpdateType=f;f.prototype.__class__="egret.UpdateType"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.NORMAL_COPY=1;c.BOSS_COPY=2;c.ARENA=3;return c}();c.SceneType=f;f.prototype.__class__="egret.SceneType"})(egret||(egret={}));
(function(c){var f=function(){function e(){}var d=e.prototype;Object.defineProperty(d,"id",{get:function(){return this._id},set:function(b){this._id=b},enumerable:!0,configurable:!0});Object.defineProperty(d,"name",{get:function(){return this.cfg?this.cfg.name:""},enumerable:!0,configurable:!0});Object.defineProperty(d,"desc",{get:function(){return this.cfg?this.cfg.desc:""},enumerable:!0,configurable:!0});Object.defineProperty(d,"cfg",{get:function(){return c.SkillManager.getInstance().getCfg(this._id)},
enumerable:!0,configurable:!0});return e}();c.SkillVo=f;f.prototype.__class__="egret.SkillVo"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.skinName="ui.skill.SkillItemSkin"}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"data",{set:function(a){this._vo=a;this.isCreate&&this.update()},enumerable:!0,configurable:!0});b.onCreate=function(){e.prototype.onCreate.call(this);this.update()};b.update=function(){this.item.skillId=this._vo.id;this.txtName.text=this._vo.name+" Lv.1";this.txtDesc.text=this._vo.desc;this.txtDesc.lineSpacing=10};b.onTouchHandler=function(a){0!=
this._vo.id&&c.SkillControl.getInstance().openskillTip(this._vo.id)};return d}(c.BaseView);c.SkillItem=f;f.prototype.__class__="egret.SkillItem"})(egret||(egret={}));
(function(c){var f=function(){function c(){this.y=this.x=0;this.bytes=this.bitmapData=null}c.prototype.destroy=function(){this.bitmapData&&this.bitmapData.dispose();this.bytes&&this.bytes.clear();this.bytes=this.bitmapData=null};return c}();c.BaseMovieClipDataItem=f;f.prototype.__class__="egret.BaseMovieClipDataItem"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.MAX=c.ATTACK_GROUP;c.PREPARE=1;c.WALK=2;c.ATTACK=3;c.HIT=4;c.DEAD=5;c.ATTACK_SINGLE=6;c.ATTACK_GROUP=7;return c}();c.ActionType=f;f.prototype.__class__="egret.ActionType"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.distance3D=function(c,b){var a=c.x-b.x,g=c.y-b.y,e=c.z-b.z;return Math.sqrt(a*a+g*g+e*e)};c.distance=function(c,b){var a=c.x-b.x,g=c.y-b.y;return Math.sqrt(a*a+g*g)};c.distance2=function(c,b,a,g){c-=a;b-=g;return Math.sqrt(c*c+b*b)};return c}();c.DimensionUtil=f;f.prototype.__class__="egret.DimensionUtil"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.layerType=c.BasePanel.LAYER_WINDOW_1;this.skinName="ui.bag.BagViewSkin"}__extends(d,e);var b=d.prototype;b.onOpen=function(){e.prototype.onOpen.call(this);this.window.btnClose.addEventListener(c.TouchEvent.TOUCH_END,this.close,this);this.window.btnBack.addEventListener(c.TouchEvent.TOUCH_END,this.close,this);this.update()};b.update=function(){this.itemCon.removeAllElements();for(var a=0;25>a;a++){var b=new c.BagItem;b.itemId=1+a;b.x=5+
a%6*81;b.y=5+80*Math.floor(a/6);this.itemCon.addElement(b)}};return d}(c.BasePanel);c.BagView=f;f.prototype.__class__="egret.BagView"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.layerType=c.BasePanel.LAYER_WINDOW_1;this.skinName="ui.equip.EquipViewSkin"}__extends(d,e);d.prototype.onOpen=function(){e.prototype.onOpen.call(this);this.window.btnClose.addEventListener(c.TouchEvent.TOUCH_END,this.close,this);this.window.btnBack.addEventListener(c.TouchEvent.TOUCH_END,this.close,this);this.item_1.itemId=23;this.item_2.itemId=12;this.item_3.itemId=11;this.item_4.itemId=17;this.item_5.itemId=20;this.item_6.itemId=9;this.item_7.itemId=
7;this.item_8.itemId=8;this.item_9.itemId=1;this.item_10.itemId=21;this.item_11.itemId=22;this.item_12.itemId=10;this.clip||(this.clip=new c.AnimeClip,this.clip.loadUrl("role",!0),this.boxCon.addElement(this.clip))};return d}(c.BasePanel);c.EquipView=f;f.prototype.__class__="egret.EquipView"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._id=0;this.layerType=c.BasePanel.LAYER_TIP;this.skinName="ui.skill.SkillTipSkin"}__extends(d,e);var b=d.prototype;b.onOpen=function(){e.prototype.onOpen.call(this);this.imgMask.addEventListener(c.TouchEvent.TOUCH_END,this.close,this);this.update()};b.setData=function(a){this._id=a;this.update()};b.update=function(){if(this.isCreate&&0!=this._id){var a=c.SkillManager.getInstance().getCfg(this._id);this.item.touchEnabled=!1;this.item.skillId=
this._id;this.txtName.text=a.name;this.txtDesc.text=a.desc;this.txtDesc.lineSpacing=15}};return d}(c.BasePanel);c.SkillTips=f;f.prototype.__class__="egret.SkillTips"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.layerType=c.BasePanel.LAYER_WINDOW_1;this.skinName="ui.skill.SkillViewSkin"}__extends(d,e);var b=d.prototype;b.onOpen=function(){e.prototype.onOpen.call(this);this.window.btnClose.addEventListener(c.TouchEvent.TOUCH_END,this.close,this);this.window.btnBack.addEventListener(c.TouchEvent.TOUCH_END,this.close,this);this.update()};b.update=function(){this.itemCon.removeAllElements();for(var a=[1,2,3,4,5],b=0;b<a.length;b++){var d=new c.SkillVo;
d.id=b+1;var e=new c.SkillItem;e.y=120*b;e.data=d;this.itemCon.addElement(e)}};return d}(c.BasePanel);c.SkillView=f;f.prototype.__class__="egret.SkillView"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.layerType=c.BasePanel.LAYER_WINDOW_1;this.skinName="ui.soulRoad.SoulRoadViewSkin"}__extends(d,e);var b=d.prototype;b.onOpen=function(){e.prototype.onOpen.call(this);this.btnClose.addEventListener(c.TouchEvent.TOUCH_END,this.close,this);this.img_1.addEventListener(c.TouchEvent.TOUCH_END,this.openFight,this);this.img_2.addEventListener(c.TouchEvent.TOUCH_END,this.openFight,this);this.img_3.addEventListener(c.TouchEvent.TOUCH_END,this.openFight,
this);this.img_4.addEventListener(c.TouchEvent.TOUCH_END,this.openFight,this);this.img_5.addEventListener(c.TouchEvent.TOUCH_END,this.openFight,this)};b.openFight=function(a){switch(a.currentTarget){case this.img_1:case this.img_2:case this.img_3:case this.img_4:case this.img_5:c.dataManager().sceneData.sceneType=c.SceneType.BOSS_COPY,c.globalUpdateWindows([c.UpdateType.CHANGE_SOULROAD])}this.close()};return d}(c.BasePanel);c.SoulRoadView=f;f.prototype.__class__="egret.SoulRoadView"})(egret||(egret=
{}));
(function(c){var f=function(e){function d(){e.call(this);this.layerType=c.BasePanel.LAYER_WINDOW_1;this.skinName="ui.wuhun.WuhunViewSkin"}__extends(d,e);d.prototype.onOpen=function(){e.prototype.onOpen.call(this);this.window.btnClose.addEventListener(c.TouchEvent.TOUCH_END,this.close,this);this.window.btnBack.addEventListener(c.TouchEvent.TOUCH_END,this.close,this);this.item1.skillId=1;this.item2.skillId=2;this.item3.skillId=3;this.clip||(this.clip=new c.AnimeClip,this.clip.loadUrl("tiger",!0),this.boxCon.addElement(this.clip))};
return d}(c.BasePanel);c.WuhunView=f;f.prototype.__class__="egret.WuhunView"})(egret||(egret={}));(function(c){var f=function(){function e(){this.dataItems=[];this.topLineY=this.frameRate=0;this.centerPoint=new c.Point;this.shadowHeight=this.shadowWidth=0}e.prototype.destroy=function(){for(var c=this.dataItems.length,b=0;b<c;b++)this.dataItems[b].destroy();this.centerPoint=this.dataItems=null};return e}();c.BaseMovieClipVo=f;f.prototype.__class__="egret.BaseMovieClipVo"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.MAX=c.UP_LEFT;c.UP=1;c.UP_RIGHT=2;c.RIGHT=3;c.DOWN_RIGHT=4;c.DOWN=5;c.DOWN_LEFT=6;c.LEFT=7;c.UP_LEFT=8;return c}();c.ActionMovieClipDirectionType=f;f.prototype.__class__="egret.ActionMovieClipDirectionType"})(egret||(egret={}));
(function(c){var f=function(c){function d(){c.call(this);this.__s=egret.gui.setProperties;this.__s(this,["height","width"],[960,640]);this.elementsContent=[this.imgMask_i()];this.states=[new egret.gui.State("normal",[]),new egret.gui.State("disabled",[])]}__extends(d,c);var b=d.prototype;Object.defineProperty(b,"skinParts",{get:function(){return d._skinParts},enumerable:!0,configurable:!0});b.imgMask_i=function(){var a=new egret.gui.UIAsset;this.imgMask=a;this.__s(a,["height","scale9Grid","source",
"width"],[960,egret.gui.getScale9Grid("4,4,24,24"),"bg_19_png",640]);return a};d._skinParts=["imgMask"];return d}(egret.gui.Skin);c.MaskViewSkin=f;f.prototype.__class__="ui.MaskViewSkin"})(ui||(ui={}));
(function(c){(function(c){var e=function(c){function b(){c.call(this);this.__s=egret.gui.setProperties;this.__s(this,["height","width"],[960,640]);this.elementsContent=[this.imgBg_i(),this.imgRole_i(),this.imgGuide_i()];this.states=[new egret.gui.State("normal",[]),new egret.gui.State("disabled",[])]}__extends(b,c);var a=b.prototype;Object.defineProperty(a,"skinParts",{get:function(){return b._skinParts},enumerable:!0,configurable:!0});a.imgGuide_i=function(){var a=new egret.gui.UIAsset;this.imgGuide=
a;this.__s(a,["height","source","width","x","y"],[125,"guideArrow_png",89,15,820]);return a};a.imgRole_i=function(){var a=new egret.gui.UIAsset;this.imgRole=a;this.__s(a,["source","x","y"],["img_guideRole_png",68,65]);return a};a.imgBg_i=function(){var a=new egret.gui.UIAsset;this.imgBg=a;this.__s(a,"height scale9Grid source width x y".split(" "),[960,egret.gui.getScale9Grid("4,4,24,24"),"bg_19_png",640,0,0]);return a};b._skinParts=["imgBg","imgRole","imgGuide"];return b}(egret.gui.Skin);c.GuideViewSkin=
e;e.prototype.__class__="ui.main.GuideViewSkin"})(c.main||(c.main={}))})(ui||(ui={}));
(function(c){(function(c){var e=function(c){function b(){c.call(this);this.__s=egret.gui.setProperties;this.__s(this,["height","width"],[960,640]);this.elementsContent=[this.boxCon_i()];this.states=[new egret.gui.State("normal",[]),new egret.gui.State("disabled",[])]}__extends(b,c);var a=b.prototype;Object.defineProperty(a,"skinParts",{get:function(){return b._skinParts},enumerable:!0,configurable:!0});a.__4_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["fx_loading_png",
141,251]);return a};a.boxCon_i=function(){var a=new egret.gui.Group;this.boxCon=a;this.__s(a,["height","width"],[200,200]);a.elementsContent=[this.__3_i(),this.__4_i(),this.txtTitle_i()];return a};a.__3_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["bgLoading_jpg",-64,-220]);return a};a.txtTitle_i=function(){var a=new egret.gui.Label;this.txtTitle=a;this.__s(a,"height size text textAlign textColor width x y".split(" "),[23,20,"\u6807\u7b7e","center",0,115,260,419]);return a};
b._skinParts=["txtTitle","boxCon"];return b}(egret.gui.Skin);c.LoadingViewSkin=e;e.prototype.__class__="ui.main.LoadingViewSkin"})(c.main||(c.main={}))})(ui||(ui={}));(function(c){var f=function(){function e(){}var d=e.prototype;e.getInstance=function(){e._instance||(e._instance=new e);return e._instance};d.openBagView=function(){this.bagView||(this.bagView=new c.BagView);this.bagView.open()};return e}();c.BagControl=f;f.prototype.__class__="egret.BagControl"})(egret||(egret={}));
(function(c){var f=function(){function e(){}var d=e.prototype;e.getInstance=function(){e._instance||(e._instance=new e);return e._instance};d.openEquipView=function(){this.equipView||(this.equipView=new c.EquipView);this.equipView.open()};return e}();c.EquipControl=f;f.prototype.__class__="egret.EquipControl"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.LAYER_MOUSE_CONFIGS=[{touchEnabled:!1,touchChildren:!1},{touchEnabled:!1,touchChildren:!0},{touchEnabled:!1,touchChildren:!1},{touchEnabled:!1,touchChildren:!0},{touchEnabled:!1,touchChildren:!0},{touchEnabled:!1,touchChildren:!1},{touchEnabled:!1,touchChildren:!1},{touchEnabled:!1,touchChildren:!1}];c.TIP_EFFECT=7;c.FRONT_VIEW=6;c.BATTLE_EFFECT=5;c.BIOLOGY=4;c.GOODS=3;c.BACKGROUND_EFFECT=2;c.NEARBY_VIEW=1;c.DISTANT_VIEW=0;return c}();c.SceneLayerType=
f;f.prototype.__class__="egret.SceneLayerType"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._tweenChangeParam={};this._tweenToParam={}}__extends(d,e);var b=d.prototype;b.addToScene=function(){e.prototype.addToScene.call(this);this.play(0,c.ActionType.PREPARE,this._avatar.direction,this.playCount,this.playEnd,this)};b.removeFromScene=function(){e.prototype.removeFromScene.call(this);this.playCount=0};b.attackTo=function(a,b,d,e,f,l,h,k){void 0===k&&(k=600);d?(this._attackTarget=d,this._offsetAttackX=e,this._offsetAttackY=f,this.x=
a,this.y=b,d=this._attackTarget.vo.x+this._offsetAttackX,e=this._attackTarget.vo.y+this._offsetAttackY,f=Math.atan2(e-b,d-a),d=Math.cos(f)*h+a,e=Math.sin(f)*h+b,f=f/Math.PI*180,this.rotation=f+l,this._isEnd=!1,this._tweenChangeParam.onChange=this.onChange,this._tweenChangeParam.onChangeObj=this,this._tweenToParam.x=d,this._tweenToParam.y=e,c.Tween.get(this,this._tweenChangeParam).to(this._tweenToParam,k).call(this.moveComplete,this)):this.moveComplete()};b.onChange=function(){if(this._isEnd)this.moveComplete();
else{var a=c.DimensionUtil.distance2(this._x,this._y,this._attackTarget.vo.x+this._offsetAttackX,this._attackTarget.vo.y+this._offsetAttackY);10>Math.abs(a)&&(this._isEnd=!0)}};b.moveComplete=function(){c.Tween.removeTweens(this);this.playEnd()};b.getPartUrl=function(a){var b=c.PathData.PATH_MOVIES_SKILL;a=this._sceneAvatarVo[a];return c.dataManager().sceneElementData.getActionUrl(b,a,this._avatar.actionType)};return d}(c.ElementEffect);c.ElementMageNormalSkill=f;f.prototype.__class__="egret.ElementMageNormalSkill"})(egret||
(egret={}));(function(c){var f=function(){function e(){}var d=e.prototype;e.getInstance=function(){e._instance||(e._instance=new e);return e._instance};d.openskillView=function(){this.skillView||(this.skillView=new c.SkillView);this.skillView.open()};d.openskillTip=function(b){this.skillTipView||(this.skillTipView=new c.SkillTips);this.skillTipView.setData(b);this.skillTipView.open()};return e}();c.SkillControl=f;f.prototype.__class__="egret.SkillControl"})(egret||(egret={}));
(function(c){var f=function(){function e(){}var d=e.prototype;e.getInstance=function(){e._instance||(e._instance=new e);return e._instance};d.openSoulRoad=function(){this.soulRoad||(this.soulRoad=new c.SoulRoadView);this.soulRoad.open()};return e}();c.SoulRoadControl=f;f.prototype.__class__="egret.SoulRoadControl"})(egret||(egret={}));
(function(c){var f=function(){function e(){}var d=e.prototype;e.getInstance=function(){e._instance||(e._instance=new e);return e._instance};d.openwuhunView=function(){this.wuhunView||(this.wuhunView=new c.WuhunView);this.wuhunView.open()};return e}();c.WuhunControl=f;f.prototype.__class__="egret.WuhunControl"})(egret||(egret={}));
(function(c){var f=function(){function e(){this.sharedCount=100;this._modelMap=this._completeArray=this._driverDatas=this._executeHashMap=this._frameSprite=null;this._gcId=NaN;this._executeHashMap=new c.HashMap;this._modelMap=new c.HashMap;this._driverDatas=[];this._completeArray=[];this._idGenerator=new c.IDGenerator}var d=e.prototype;e.getInstance=function(){return e._instance||(e._instance=new e)};d.hasExecute=function(b){return this._executeHashMap.containsKey(b)};d.getItem=function(b){return this._executeHashMap.get(b)};
d.addExecute=function(b,a,d,e,f,n){void 0===d&&(d=1);void 0===e&&(e=null);void 0===f&&(f=0);void 0===n&&(n=0);for(var l=this._idGenerator.getID();this._executeHashMap.containsKey(l);)l=this._idGenerator.getID();if(null==b)return c.LogManager.error(this,"execute\u4e0d\u80fd\u4e3a\u7a7a: execute = "+b),l;b=c.ScriptItemManager.getInstance().getFrameScriptItem(b,d,e,n,a);b.repeatCount=f;b.id=l;this.addScriptItem(b);return l};d.removeExecute=function(b){b=this._executeHashMap.remove(b);this.removeScriptItem(b);
c.ScriptItemManager.getInstance().recoverScriptItem(b)};d.addScriptItem=function(b){if(!b||isNaN(b.id))return null;null!=b.execute&&this._executeHashMap.put(b.id,b);for(var a=!1,d=null,e=this._driverDatas.length,f=0;f<e;f++){var n=this._driverDatas[f],d=n.model;if(0<this.sharedCount&&d.itemsCount>=this.sharedCount)a=!0;else{a=!1;break}}!n||a?(n={driver:this.addDriver(null),model:new c.ScriptModel(this.sharedCount)},this._driverDatas.push(n),this._modelMap.put(n.driver.hashCode,n.model)):this.addDriver(n.driver);
n.time=0;d=n.model;d.addScript(b);return b};d.removeScriptItem=function(b,a){void 0===a&&(a=!1);if(!b)return null;for(var c=null,d=this._driverDatas.length,e=0;e<d;e++){var f=this._driverDatas[e],c=f.model;if(c.hasScriptItem(b)){this._executeHashMap.remove(b.id);var l=c.removeScript(b,a);0==c.itemsCount&&(f.time=0,this.removeDriver(f.driver),this.setTimer(!0));break}}return l};d.stop=function(){this._frameSprite&&this._frameSprite.removeEventListener(c.Event.ENTER_FRAME,this.enterFrameHandler,this)};
d.destroy=function(){this.stop();this._frameSprite=null};d.start=function(){this._frameSprite||(this._frameSprite=new c.DisplayObjectContainer);this._frameSprite.hasEventListener(c.Event.ENTER_FRAME)||this._frameSprite.addEventListener(c.Event.ENTER_FRAME,this.enterFrameHandler,this)};d.removeDriver=function(b){b&&b.removeEventListener(c.Event.ENTER_FRAME,this.enterFrameHandler,this)};d.addDriver=function(b){b||(b=new c.DisplayObjectContainer);b.addEventListener(c.Event.ENTER_FRAME,this.enterFrameHandler,
this);return b};d.setTimer=function(b){b?(isNaN(this._gcId)||c.TimerManager.getInstance().removeExecute(this._gcId),this._gcId=c.TimerManager.getInstance().addExecute(this.gcTimerHandler,this,c.DateUtil.VALUE_MINUTE)):c.TimerManager.getInstance().removeExecute(this._gcId)};d.enterFrameHandler=function(b){var a=null,c=null,d=null,c=0,d=this._modelMap.get(b.target.hashCode);for(b=c=d.priorityMax;0<=b;b--)for(var a=d.items[b],e=d.itemsCount,f=0;f<e;f++){c=a[f];if(!c)break;c.apply();c.isCompleted&&this._completeArray.push(c)}d=
this._completeArray.length;for(a=0;a<d;a++)c=this._completeArray[a],this.removeScriptItem(c);this._completeArray.length=0};d.gcTimerHandler=function(){for(var b=null,a=0,a=b=null,d=0;d<this._driverDatas.length;d++)b=this._driverDatas[d],b.time+=c.DateUtil.VALUE_MINUTE,b.time>=c.DateUtil.VALUE_MINUTE_10&&(a=b.driver,a.hasEventListener(c.Event.ENTER_FRAME)?b.time=0:(b=b.model,b.destroy(),this._modelMap.remove(a.hashCode),this._driverDatas.splice(d,1),d--));a=this._driverDatas.length;0==a&&this.setTimer(!1)};
e._instance=null;return e}();c.EnterFrameManager=f;f.prototype.__class__="egret.EnterFrameManager"})(egret||(egret={}));
(function(c){var f=function(){function e(){this.baseMovieClipVos=[];this.defaultActionType=c.ActionType.PREPARE;this.defautlDirectionType=c.ActionMovieClipDirectionType.DOWN;this._actionType=-1}var d=e.prototype;Object.defineProperty(d,"actionType",{get:function(){if(-1==this._actionType)for(var b=1;b<this.baseMovieClipVos.length;b++)if(this.baseMovieClipVos[b]){this._actionType=b;break}return this._actionType},enumerable:!0,configurable:!0});d.hasActionType=function(b){void 0===b&&(b=0);return this.baseMovieClipVos[b]};
d.destroy=function(){for(var b=this.baseMovieClipVos.length,a=0;a<b;a++)for(var c=this.baseMovieClipVos[a],d=c.length,e=0;e<d;e++)c[e].destroy();this.baseMovieClipVos=null};return e}();c.ActionMovieClipVo=f;f.prototype.__class__="egret.ActionMovieClipVo"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.BODY="body";c.WEAPON="weapon";c.WING="wing";c.MOUNTS="mounts";c.TYPES=[c.BODY,c.WEAPON,c.WING,c.MOUNTS];c.TYPES_NORMAL=[c.BODY,c.WEAPON,c.WING];c.TYPES_BODY_ONLY=[c.BODY];c.DIRECTION_UP=[c.WING,c.WEAPON,c.BODY,c.MOUNTS];c.DIRECTION_UP_RIGHT=[c.WING,c.WEAPON,c.BODY,c.MOUNTS];c.DIRECTION_RIGHT=[c.WING,c.WEAPON,c.BODY,c.MOUNTS];c.DIRECTION_DOWN_RIGHT=[c.WEAPON,c.BODY,c.WING,c.MOUNTS];c.DIRECTION_DOWN=[c.WEAPON,c.BODY,c.WING,c.MOUNTS];return c}();c.ActionPartType=
f;f.prototype.__class__="egret.ActionPartType"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.layerType=c.BasePanel.LAYER_MASK;this.skinName="ui.MaskViewSkin"}__extends(d,e);var b=d.prototype;b.onOpen=function(){c.ApplicationManager.getInstance().stage.addEventListener(c.Event.RESIZE,this.resizeHandler,this);this.onResize()};b.resizeHandler=function(a){this.onResize()};b.onResize=function(){var a=c.ApplicationManager.CONTENT_W,b=c.ApplicationManager.CONTENT_H,d=document.documentElement.clientWidth,e=document.documentElement.clientHeight,
f=c.ApplicationManager.getInstance().globalScale;this.imgMask.y=-(e-b*f)/(2*f);this.imgMask.x=-(d-a*f)/(2*f);this.imgMask.scaleX=d/a/f;this.imgMask.scaleY=e/b/f};return d}(c.BasePanel);c.MaskView=f;f.prototype.__class__="egret.MaskView"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.layerType=c.BasePanel.LAYER_GUIDE;this.skinName="ui.main.GuideViewSkin"}__extends(d,e);var b=d.prototype;b.onOpen=function(){this.imgGuide.visible=!1;this.imgRole.addEventListener(c.TouchEvent.TOUCH_END,this.guideNext,this);c.ApplicationManager.getInstance().stage.addEventListener(c.Event.RESIZE,this.resizeHandler,this);this.onResize()};b.guideNext=function(){this.imgRole.visible=!1;this.imgGuide.visible=!0;this.imgBg.alpha=0.5;this.imgBg.addEventListener(c.TouchEvent.TOUCH_END,
this.openSoulRoad,this);this.showTween()};b.showTween=function(){var a=document.documentElement.clientHeight,b=c.ApplicationManager.getInstance().globalScale,a=a/b;c.Tween.get(this.imgGuide).to({y:a-500},1E3).call(this.reSet,this)};b.reSet=function(){var a=document.documentElement.clientHeight,b=c.ApplicationManager.getInstance().globalScale,a=a/b;c.Tween.get(this.imgGuide).to({y:a-450},1E3).call(this.showTween,this)};b.openSoulRoad=function(){this.close();c.Tween.removeTweens(this.imgGuide);c.SoulRoadControl.getInstance().openSoulRoad()};
b.resizeHandler=function(a){this.onResize()};b.onResize=function(){var a=c.ApplicationManager.CONTENT_W,b=c.ApplicationManager.CONTENT_H,d=document.documentElement.clientWidth,e=document.documentElement.clientHeight,f=c.ApplicationManager.getInstance().globalScale;this.imgBg.y=-(e-b*f)/(2*f);this.imgBg.x=-(d-a*f)/(2*f);this.imgBg.scaleX=d/a/f;this.imgBg.scaleY=e/b/f};return d}(c.BasePanel);c.GuideView=f;f.prototype.__class__="egret.GuideView"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.layerType=c.BasePanel.LAYER_TIP;this.skinName="ui.main.LoadingViewSkin"}__extends(d,e);d.prototype.onOpen=function(){this.boxCon.alpha=0;this.txtTitle.text=this.title;c.TimerManager.getInstance().addExecute(this.close,this,3E3,[],1);c.Tween.get(this.boxCon).to({alpha:1},500)};return d}(c.BasePanel);c.LoadingView=f;f.prototype.__class__="egret.LoadingView"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.layerType=c.BasePanel.LAYER_GUIDE;this.skinName="ui.main.LoginViewSkin"}__extends(d,e);var b=d.prototype;b.onOpen=function(){this.btnStart.addEventListener(c.TouchEvent.TOUCH_END,this.onStart,this)};b.onStart=function(){this.close();c.SceneManager.getInstance().enterScene(c.SceneType.NORMAL_COPY,1001);c.SceneManager.getInstance().scene.nextTurn();var a=c.SceneElementManager.getInstance().getElement(c.ElementEffect);a.setIsCheckResource(!1);
a.x=200;a.y=200;a.setMovieName(c.MovieName.EFFECT_01);a.addToScene();c.MainControl.getInstance().openMainView();c.MainControl.getInstance().openGuideView()};return d}(c.BasePanel);c.LoginView=f;f.prototype.__class__="egret.LoginView"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.layerType=c.BasePanel.LAYER_UI;this.skinName="ui.main.MainViewSkin"}__extends(d,e);var b=d.prototype;b.onOpen=function(){e.prototype.onOpen.call(this);this.btnSoulRoad.addEventListener(c.TouchEvent.TOUCH_END,this.openSoulRoad,this);this.btnWuhun.addEventListener(c.TouchEvent.TOUCH_END,this.openWuhun,this);this.btnBag.addEventListener(c.TouchEvent.TOUCH_END,this.openBag,this);this.btnEquip.addEventListener(c.TouchEvent.TOUCH_END,this.openEquip,
this);this.btnSkill.addEventListener(c.TouchEvent.TOUCH_END,this.openSkill,this);c.ApplicationManager.getInstance().stage.addEventListener(c.Event.RESIZE,this.resizeHandler,this);this.onResize();this.update()};b.update=function(){this.isCreate&&(this.txtExp.text=c.MainControl.getInstance().totalExp.toFixed(2)+"%",this.txtCoin.text=c.MainControl.getInstance().coin+"",this.clip1||(this.clip1=new c.AnimeClip,this.clip1.loadUrl("expLight",!0),this.boxCon.addElement(this.clip1)),this.clip2||(this.clip2=
new c.AnimeClip,this.clip2.loadUrl("expBubble",!0),this.clip2.x=20,this.clip2.y=50,this.boxCon.addElement(this.clip2)))};b.resizeHandler=function(a){this.onResize()};b.onResize=function(){var a=c.ApplicationManager.CONTENT_H,b=document.documentElement.clientHeight,d=c.ApplicationManager.getInstance().globalScale;this.boxTop.y=-(b-a*d)/(2*d);this.boxBottom.y=(b+a*d)/(2*d)};b.openSoulRoad=function(){c.SoulRoadControl.getInstance().openSoulRoad()};b.openWuhun=function(){c.WuhunControl.getInstance().openwuhunView()};
b.openBag=function(){c.BagControl.getInstance().openBagView()};b.openEquip=function(){c.EquipControl.getInstance().openEquipView()};b.openSkill=function(){c.SkillControl.getInstance().openskillView()};return d}(c.BasePanel);c.MainView=f;f.prototype.__class__="egret.MainView"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this)}__extends(d,e);var b=d.prototype;b.setData=function(a,b){this.imgState||(this.imgState=new c.gui.UIAsset,this.addChild(this.imgState));this.boxCon||(this.boxCon=new c.gui.Group,this.addChild(this.boxCon));this.boxCon.removeAllElements();if(0<=a.indexOf("\u95ea\u907f"))this.imgState.visible=!0,this.imgState.source="resource/main/dodge.png";else{if(0<=a.indexOf("\u66b4")){this.imgState.visible=!0;this.imgState.source="resource/main/critical.png";
var d=32;this.getImage("mark_minus",this.boxCon,d,0);a=a.slice(2);var e=0}else this.imgState.visible=!1,d=0,this.getImage("mark_minus",this.boxCon,d,0),a=a.slice(1),e=0;for(;e<a.length;e++)this.getImage("damage_"+a[e],this.boxCon,d+19*(e+1),0)}};b.getImage=function(a,b,d,e){void 0===d&&(d=0);void 0===e&&(e=0);var f=new c.gui.UIAsset;f.source="resource/main/"+a+".png";f.x=d;f.y=e;b.addElement(f);return f};return d}(c.gui.UIComponent);c.DamageItem=f;f.prototype.__class__="egret.DamageItem"})(egret||
(egret={}));
(function(c){var f=function(e){function d(){e.call(this)}__extends(d,e);var b=d.prototype;b.getAttackRange=function(a){return 300};b.attack=function(){if(!this._isLocked&&!this.isSkillStatus&&this._attackTarget)if(0>=this._attackTarget.vo.hp)this.chaseArmies(this.armies);else{this.stopMove();var a=c.ActionMovieClipData.getInstance().calculateDirection(this.x,this.y,this._attackTarget.vo.x,this._attackTarget.vo.y);this.getSkillTime(c.SkillType.BOWMAN_CALL)>c.dataManager().fightData.getSkillIntervalTime(c.SkillType.BOWMAN_CALL)&&(c.RoleManager.getInstance().isRoleInstance(this)?
c.RoleManager.getInstance().hasAnimal||(this.setUseSkill(c.SkillType.BOWMAN_CALL),c.RoleManager.getInstance().addAnimal(this)):this.hasAnimal||(this.setUseSkill(c.SkillType.BOWMAN_CALL),this.addAnimal(this)));this._avatar.actionType==c.ActionType.ATTACK?this.direction=a:(this.play(0,c.ActionType.ATTACK,a),this._avatar.setFrameHandler(this.playSkill,this))}};b.addAnimal=function(a){var b=c.dataManager().sceneData.addAnimal();this._animal=c.SceneElementManager.getInstance().getElement(c.PlayerAnimal);
this._animal.setData(b);this._animal.setHPStyle(c.dataManager().pathData.getResourceUrl(c.PathData.PATH_IMAGES_SCENE,"hp_red_bg.png"),c.dataManager().pathData.getResourceUrl(c.PathData.PATH_IMAGES_SCENE,"hp_red.png"),49,8);this._animal.master=this;var d=this.getAttackRange(),e=2*Math.PI*Math.random(),f=Math.cos(e)*d+a.x,d=Math.sin(e)*d+a.y;this.scene&&this.scene.addElement(this._animal,c.SceneLayerType.BIOLOGY,f,d);this._animal.chaseArmies(a.armies);c.globalUpdateWindows([c.UpdateType.ADD_MONSTER],
b)};b.removeAnimal=function(){this._animal=null};Object.defineProperty(b,"hasAnimal",{get:function(){return this._animal&&0<this._animal.data.vo.hp},enumerable:!0,configurable:!0});b.playSkill=function(){if(this.scene){var a=this.data.vo;if(2==this._avatar.frameIndex){var b=c.SceneElementManager.getInstance().getElement(c.ElementMageNormalSkill);b.setMovieName(c.SceneElementData.getInstance().getSkillMovieName(a.vocation,1));this.scene.addElement(b,c.SceneLayerType.BATTLE_EFFECT);b.attackTo(this.x,
this.y-50,this._attackTarget,0,-50,90,this.getAttackRange());this.damage(c.SkillType.BOWMAN_NORMAL)}else this._avatar.frameIndex==this._avatar.frameIndexMax&&this.chaseArmies(this.armies)}};return d}(c.ElementPlayer);c.PlayerBowman=f;f.prototype.__class__="egret.PlayerBowman"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this)}__extends(d,e);var b=d.prototype;b.getAttackRange=function(a){return 300};b.checkAutoAttack=function(){this.checkJinGan()};b.checkJinGan=function(){if(this.getSkillTime(c.SkillType.MAGE_JINGAN)>c.dataManager().fightData.getSkillIntervalTime(c.SkillType.MAGE_JINGAN)){this.setSkillTime(c.SkillType.MAGE_JINGAN);var a=this.data.vo;this._jinGan||(this._jinGan=new c.ElementSkill,this._jinGan.setMovieName(c.SceneElementData.getInstance().getSkillMovieName(a.vocation,
4)));this._jinGan.playCount=0;this._jinGan.addToScene();this.show(this._jinGan,c.SceneElementLayerType.BUFF_BODY,0,-20);this._jinGanTime=0;c.TimerManager.getInstance().hasExecute(this._jinGanTimerId)||(this._jinGanTimerId=c.TimerManager.getInstance().addExecute(this.removeJinGan,this,1E3))}};b.removeJinGan=function(){this._jinGanTime++;4<this._jinGanTime&&(c.TimerManager.getInstance().removeExecute(this._jinGanTimerId),this.setSkillTime(c.SkillType.MAGE_JINGAN),this.hide(this._jinGan),this._jinGan.removeFromScene())};
b.attack=function(){if(!this._isLocked&&!this.isSkillStatus&&this._attackTarget)if(0>=this._attackTarget.vo.hp)this.chaseArmies(this.armies);else{this.stopMove();var a=c.ActionMovieClipData.getInstance().calculateDirection(this.x,this.y,this._attackTarget.vo.x,this._attackTarget.vo.y);this.getSkillTime(c.SkillType.MAGE_XUANBING)>c.dataManager().fightData.getSkillIntervalTime(c.SkillType.MAGE_XUANBING)?this.setUseSkill(c.SkillType.MAGE_XUANBING):this.getSkillTime(c.SkillType.MAGE_THUNDER_BACK)>c.dataManager().fightData.getSkillIntervalTime(c.SkillType.MAGE_THUNDER_BACK)?
this.setUseSkill(c.SkillType.MAGE_THUNDER_BACK):this.getSkillTime(c.SkillType.MAGE_THUNDER)>c.dataManager().fightData.getSkillIntervalTime(c.SkillType.MAGE_THUNDER)?this.setUseSkill(c.SkillType.MAGE_THUNDER):this.setUseSkill(c.SkillType.MAGE_NORMAL);this._avatar.actionType==c.ActionType.ATTACK?this.direction=a:(this.play(0,c.ActionType.ATTACK,a),this._avatar.setFrameHandler(this.playSkill,this))}};b.playSkill=function(){if(this.scene){var a=this.data.vo;if(5==this._avatar.frameIndex){var b=this.skillType;
if(b==c.SkillType.MAGE_XUANBING){var d=c.SceneElementManager.getInstance().getElement(c.ElementSkill);d.setMovieName(c.SceneElementData.getInstance().getSkillMovieName(a.vocation,5));this.scene.addElement(d,c.SceneLayerType.BACKGROUND_EFFECT,this._attackTarget.vo.x,this._attackTarget.vo.y);var e=this.getDamageTargets(c.SkillType.MAGE_XUANBING,this._attackTarget.vo.x,this._attackTarget.vo.y)}else if(b==c.SkillType.MAGE_THUNDER_BACK){d=c.SceneElementManager.getInstance().getElement(c.ElementSkill);
d.setMovieName(c.SceneElementData.getInstance().getSkillMovieName(a.vocation,3));this.scene.addElement(d,c.SceneLayerType.BATTLE_EFFECT,this._attackTarget.vo.x,this._attackTarget.vo.y);var e=this.getDamageTargets(c.SkillType.MAGE_THUNDER_BACK,this._attackTarget.vo.x,this._attackTarget.vo.y),a=this.getAttackRange()/2,f;for(f in e)if(d=this.scene.getElement(e[f].vo.idString)){if(e[f]==this._attackTarget)var l=this._x,h=this._y;else l=this._attackTarget.vo.x,h=this._attackTarget.vo.y;var k=c.DimensionUtil.distance2(this._attackTarget.vo.x,
this._attackTarget.vo.y,l,h);d.stepBack(l,h,a+k)}}else b==c.SkillType.MAGE_THUNDER?(d=c.SceneElementManager.getInstance().getElement(c.ElementSkill),d.setMovieName(c.SceneElementData.getInstance().getSkillMovieName(a.vocation,2)),this.scene.addElement(d,c.SceneLayerType.BATTLE_EFFECT,this._attackTarget.vo.x,this._attackTarget.vo.y)):(f=c.SceneElementManager.getInstance().getElement(c.ElementMageNormalSkill),f.setMovieName(c.SceneElementData.getInstance().getSkillMovieName(a.vocation,1)),this.scene.addElement(f,
c.SceneLayerType.BATTLE_EFFECT),f.attackTo(this.x,this.y-50,this._attackTarget,0,-50,90,this.getAttackRange()));this.damage(b,e)}else this._avatar.frameIndex==this._avatar.frameIndexMax&&(this.skillType==c.SkillType.MAGE_THUNDER_BACK?this.chaseArmies(this.armies):this.checkAutoAttack2())}};b.getDamageTargets=function(a,b,d){void 0===a&&(a=0);void 0===b&&(b=0);void 0===d&&(d=0);this._damageTargets.length=0;switch(a){case c.SkillType.MAGE_NORMAL:case c.SkillType.MAGE_THUNDER:this._damageTargets.push(this._attackTarget);
break;case c.SkillType.MAGE_THUNDER_BACK:case c.SkillType.MAGE_XUANBING:return this.getDamageTargetsByRange(this.getAttackRange(a),b,d)}return this._damageTargets};return d}(c.ElementPlayer);c.PlayerMage=f;f.prototype.__class__="egret.PlayerMage"})(egret||(egret={}));
(function(c){var f=function(c){function d(){c.call(this,!0)}__extends(d,c);d.prototype.initWindow=function(){c.prototype.initWindow.call(this)};return d}(c.Application);c.ApplicationMain=f;f.prototype.__class__="egret.ApplicationMain"})(egret||(egret={}));
(function(c){var f=function(e){function d(a,b,c,d,f,l,h,k){void 0===a&&(a=null);void 0===b&&(b=0);void 0===c&&(c=0);void 0===d&&(d=!0);void 0===f&&(f=null);void 0===l&&(l=null);void 0===h&&(h=null);void 0===k&&(k=null);e.call(this);this.autoFixed=!0;this.loadError=this.loadProgress=this.loadComplete=null;this._isShowLoading=!0;this._url=null;this._height=this._width=0;this._loadingStyle=this._content=null;this._isCompleted=!0;this.touchChildren=this.touchEnabled=!1;this._thisObj=f;this._width=b;this._height=
c;this._isShowLoading=d;this.loadComplete=l;this.loadProgress=h;this.loadError=k;this.url=a}__extends(d,e);var b=d.prototype;d.getTexture=function(a){return d._contentMap.get(a)};d.destroyResource=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];for(var b=null,c=a.length,e=0;e<c;e++)(b=d._contentMap.remove(a[e]))&&b.dispose()};Object.defineProperty(b,"isShowLoading",{get:function(){return this._isShowLoading},set:function(a){this._isShowLoading!=a&&(this._isShowLoading=a,this._isCompleted?
this.showLoadingStyle(!1):this.showLoadingStyle(this._isShowLoading))},enumerable:!0,configurable:!0});Object.defineProperty(b,"content",{get:function(){return this._content},set:function(a){this.showLoadingStyle(!1);a!=this._content&&this._content&&this._content.parent&&this._content.parent.removeChild(this._content);(this._content=a)?(this._content.parent!=this&&this.addChild(this._content),this._content.x=0,this._content.y=0,0==this._width||0==this._height?(this._width=this._content.width,this._height=
this._content.height):this.autoFixed&&(this._content.width=this._width,this._content.height=this._height)):this._url=null},enumerable:!0,configurable:!0});Object.defineProperty(b,"url",{get:function(){return this._url},set:function(a){this._url!=a&&(this.content=null,(this._url=a)?(a=d._contentMap.get(this.url))?this.createBitmap(a):(RES.getResByUrl(this._url,this.loadActionComplete,this),this.showLoadingStyle(this._isShowLoading)):(this.showLoadingStyle(!1),this._isCompleted=!0))},enumerable:!0,
configurable:!0});b.createBitmap=function(a){var b=this._content;b?b.texture=a:b=new c.Bitmap(a);this.content=b};b.loadActionComplete=function(a,b){a&&d._contentMap.put(b,a);b==this._url&&(this._isCompleted=!0,this.createBitmap(a),null!=this.loadComplete&&this.loadComplete.apply(this._thisObj,[this]))};b.setWH=function(a,b){if(this._width!=a||this._height!=b)this._width=a,this._content&&this.autoFixed&&(this._content.width=a),this._height=b,this._content&&this.autoFixed&&(this._content.height=b),
this.updateLayout()};Object.defineProperty(b,"height",{get:function(){return this._height},set:function(a){this._height!=a&&(this._height=a,this._content&&this.autoFixed&&(this._content.height=a),this.updateLayout())},enumerable:!0,configurable:!0});Object.defineProperty(b,"width",{get:function(){return this._width},set:function(a){this._width!=a&&(this._width=a,this._content&&this.autoFixed&&(this._content.width=a),this.updateLayout())},enumerable:!0,configurable:!0});b.setLoadingStyle=function(a){this._loadingStyle!=
a&&(this.showLoadingStyle(!1),this._loadingStyle=a,this._loadingStyle.touchEnabled=!1,"touchChildren"in this._loadingStyle&&(this._loadingStyle.touchChildren=!1),this.showLoadingStyle(this._isShowLoading))};b.destroy=function(){this._isDestroy||(this.loadError=this.loadProgress=this.loadComplete=null,e.prototype.destroy.call(this))};b.showLoadingStyle=function(a){a?(this._loadingStyle||(d.defaultLoadingStyle?(this._loadingStyle=new d.defaultLoadingStyle,"touchChildren"in this._loadingStyle&&(this._loadingStyle.touchChildren=
!1)):(this._loadingStyle=new c.TextField,0<this._width?(this._loadingStyle.width=this._width,this._loadingStyle.height=this._height):(this._loadingStyle.width=50,this._loadingStyle.height=50),this._loadingStyle.size=20,this._loadingStyle.textAlign=c.HorizontalAlign.CENTER,this._loadingStyle.verticalAlign=c.VerticalAlign.MIDDLE,this._loadingStyle.text="Loading.."),this._loadingStyle.touchEnabled=!1),this._loadingStyle&&(this._loadingStyle.parent!=this&&this.addChild(this._loadingStyle),this._loadingStyle instanceof
c.MovieClip&&this._loadingStyle.gotoAndPlay(2),this.updateLayout())):this._loadingStyle&&(this._loadingStyle.parent&&this._loadingStyle.parent.removeChild(this._loadingStyle),this._loadingStyle instanceof c.MovieClip&&this._loadingStyle.gotoAndStop(1))};b.updateLayout=function(){this._loadingStyle&&this._loadingStyle.parent&&(this._loadingStyle.x=(this._width-this._loadingStyle.width)/2,this._loadingStyle.y=(this._height-this._loadingStyle.height)/2)};d.defaultLoadingStyle=null;d._contentMap=new c.HashMap;
return d}(c.CoreContainer);c.Image=f;f.prototype.__class__="egret.Image"})(egret||(egret={}));
(function(c){var f=function(){function e(){this._actionVoMap=this._dirMap=null;this._dirMap=new c.HashMap;this._dirMap.put(c.ActionMovieClipDirectionType.DOWN_LEFT,c.ActionMovieClipDirectionType.DOWN_RIGHT);this._dirMap.put(c.ActionMovieClipDirectionType.LEFT,c.ActionMovieClipDirectionType.RIGHT);this._dirMap.put(c.ActionMovieClipDirectionType.UP_LEFT,c.ActionMovieClipDirectionType.UP_RIGHT);this._dirMap.put(c.ActionMovieClipDirectionType.DOWN_RIGHT,c.ActionMovieClipDirectionType.DOWN_LEFT);this._dirMap.put(c.ActionMovieClipDirectionType.RIGHT,
c.ActionMovieClipDirectionType.LEFT);this._dirMap.put(c.ActionMovieClipDirectionType.UP_RIGHT,c.ActionMovieClipDirectionType.UP_LEFT);this._actionVoMap=new c.HashMap;this._actionDataMap=new c.HashMap;this._sheetMap=new c.HashMap;this._sheetUrlMap=new c.HashMap}var d=e.prototype;e.getInstance=function(){return e._instance||(e._instance=new e)};d.getJsonUrl=function(b){return b=b.replace(e.SHEET_PREFIX,"")};d.getJsonUrl2=function(b){b=b.replace(e.SHEET_PREFIX,"");b=b.split("_");b.pop();return b=b.join("_")+
".json"};d.getSheetUrl=function(b){var a=b.split("/"),a=a[a.length-1].split(".")[0];return b=b.replace(a,e.SHEET_PREFIX+a)};d.getSheetUrl2=function(b,a){var c=b.split("/"),c=c[c.length-1].split(".")[0];return b=b.replace(c,e.SHEET_PREFIX+c+"_"+a)};d.setActionData=function(b,a){this._actionDataMap.containsKey(b)?c.LogManager.error(this,"\u91cd\u590d\u6dfb\u52a0\u5f71\u7247\u6570\u636e: url = "+b):this._actionDataMap.put(b,a)};d.getActionData=function(b){return this._actionDataMap.get(b)};d.setSheet=
function(b,a){this._sheetMap.put(b,a);this._sheetUrlMap.put(a.hashCode,b)};d.getSheet=function(b){return this._sheetMap.get(b)};d.getUrlBySheet=function(b){return this._sheetUrlMap.get(b.hashCode)};d.setActionMoveClipVo=function(b,a){this._actionVoMap.containsKey(b)?c.LogManager.error(this,"\u91cd\u590d\u6dfb\u52a0ActionMovieClipVo\u6570\u636e: url = "+b):this._actionVoMap.put(b,a)};d.getActionMovieClipVo=function(b){return this._actionVoMap.get(b)};d.combinneActionMovieClipVo=function(b,a){if(!a)return c.LogManager.error(this,
"\u5408\u6210\u5230\u539f\u59cbvo\u7684\u65b0\u6570\u636e\u4e0d\u80fd\u4e3a\u7a7a: avo = "+a),null;if(b)for(var d in a.baseMovieClipVos)a.baseMovieClipVos[d]&&(b.baseMovieClipVos[d]=a.baseMovieClipVos[d]);else return a;return b};d.getValidateActionData=function(b,a){void 0===a&&(a=-1);if(!b)return null;var d=c.ActionMovieClipDirectionType.UP;-1==a&&(a=c.ActionType.PREPARE);for(;!e.getInstance().hasDirectionType(b,a,d);){d++;if(a>=c.ActionType.MAX&&d>=c.ActionMovieClipDirectionType.MAX)return null;
d>c.ActionMovieClipDirectionType.MAX&&(d=c.ActionMovieClipDirectionType.UP,a++,a>c.ActionType.MAX&&(a=c.ActionType.PREPARE))}return{actionType:a,direction:d}};d.getBaseMovieClipVo=function(b,a,c,d){void 0===d&&(d=!0);if(b)var e=b.baseMovieClipVos[a];if(e){var f=e[c];!f&&d&&(b=this.getReverseDir(c),f=e[b])}return f};d.getBaseMovieClipVo2=function(b,a,c){void 0===c&&(c=0);if(b=b.baseMovieClipVos[a]){var d=b[c];d||(c=this.getReverseDir(c),d=b[c])}return d};d.hasActionType=function(b,a){void 0===a&&(a=
0);return null!=b.baseMovieClipVos[a]};d.hasDirectionType=function(b,a,c,d){void 0===d&&(d=!0);return null!=this.getBaseMovieClipVo(b,a,c,d)};d.hasDirectionTypeTexture=function(b,a,c){return(b=this.getBaseMovieClipVo(b,a,c,!0))&&b.hasFrameTexture};d.setFrameRate=function(b,a,d,e){void 0===e&&(e=0);(b=this.getBaseMovieClipVo(b,a,d))?b.frameRate=Math.max(1,e):c.LogManager.error(this,"setFrameRate()\u6ca1\u6709\u64ad\u653e\u6570\u636e:actionType = "+a+",direction = "+d)};d.setShadow=function(b,a,d,e,
f){void 0===f&&(f=0);(b=this.getBaseMovieClipVo(b,a,d))?(b.shadowWidth=e,b.shadowHeight=f):c.LogManager.error(this,"setShadow()\u6ca1\u6709\u64ad\u653e\u6570\u636e:actionType = "+a+",direction = "+d)};d.setCenterPoint=function(b,a,d,e,f){void 0===f&&(f=0);(b=this.getBaseMovieClipVo(b,a,d))?(b.centerPoint.x=e,b.centerPoint.y=f):c.LogManager.error(this,"setCenterPoint()\u6ca1\u6709\u64ad\u653e\u6570\u636e:actionType = "+a+",direction = "+d)};d.setOriginalPoint=function(b,a,d,e,f){void 0===f&&(f=0);
if(b=this.getBaseMovieClipVo(b,a,d))for(a=b.dataItems.length,d=0;d<a;d++){var n=b.dataItems[d];n.x+=e;n.y+=f}else c.LogManager.error(this,"setCenterPoint()\u6ca1\u6709\u64ad\u653e\u6570\u636e:actionType = "+a+",direction = "+d)};d.setTopLineY=function(b,a,d,e){void 0===e&&(e=0);(b=this.getBaseMovieClipVo(b,a,d))?b.topLineY=e:c.LogManager.error(this,"setTopLineY()\u6ca1\u6709\u64ad\u653e\u6570\u636e:actionType = "+a+",direction = "+d)};d.calculateDirection=function(b,a,d,f,q){void 0===q&&(q=!1);b=
Math.atan2(f-a,d-b);var n=f=a=0;f=e.RADIANS_MAP.length;for(d=0;d<f;d++)if(b>=e.RADIANS_MAP[d]){a=d+1;q&&(a=d+4);if(b<=e.RADIANS_MAP[a])return f=b-e.RADIANS_MAP[d],n=e.RADIANS_MAP[a]-b,f<=n?e.DIRECTION_MAP[d]:e.DIRECTION_MAP[a];q&&(d+=3)}c.LogManager.error(this,"\u627e\u4e0d\u5230\u65b9\u5411\u6570\u636e");return c.ActionMovieClipDirectionType.UP};d.getReverseDir=function(b){return this._dirMap.get(b)};e._instance=null;e.SHEET_PREFIX="sheet_";e.RADIANS_MAP=[-Math.PI,3*-Math.PI/4,-Math.PI/2,-Math.PI/
4,0,Math.PI/4,Math.PI/2,3*Math.PI/4,Math.PI];e.DIRECTION_MAP=[c.ActionMovieClipDirectionType.LEFT,c.ActionMovieClipDirectionType.UP_LEFT,c.ActionMovieClipDirectionType.UP,c.ActionMovieClipDirectionType.UP_RIGHT,c.ActionMovieClipDirectionType.RIGHT,c.ActionMovieClipDirectionType.DOWN_RIGHT,c.ActionMovieClipDirectionType.DOWN,c.ActionMovieClipDirectionType.DOWN_LEFT,c.ActionMovieClipDirectionType.LEFT];return e}();c.ActionMovieClipData=f;f.prototype.__class__="egret.ActionMovieClipData"})(egret||(egret=
{}));(function(c){var f=function(c){function d(){c.call(this);this.type=0;this.isWalkable=!0}__extends(d,c);d.prototype.toString=function(){return"[MapNode(row = "+this.row+",column = "+this.column+",depth = "+this.depth+",type = "+this.type+")]"};return d}(c.IsoNode);c.MapNode=f;f.prototype.__class__="egret.MapNode"})(egret||(egret={}));
(function(c){var f=function(c){function d(a,b,d,f,n,l){void 0===b&&(b=6710886);void 0===d&&(d=1);void 0===f&&(f=0);void 0===n&&(n=1);void 0===l&&(l=!0);c.call(this,a);this._isoHeight=0;this._color=6710886;this._alpha=1;this._fill=!0;this._thickness=1;this._color=b;this._isoHeight=f;this._alpha=d;this._fill=l;this._thickness=n;this.draw()}__extends(d,c);var b=d.prototype;b.draw=function(){this.graphics.clear();this._fill&&this.graphics.beginFill(this._color,this._alpha);this.graphics.lineStyle(this._thickness,
this._color,this._alpha);this.graphics.moveTo(-this._size,0);this.graphics.lineTo(0,-this._size/2);this.graphics.lineTo(this._size,0);this.graphics.lineTo(0,this._size/2);this.graphics.lineTo(-this._size,0);this._fill&&this.graphics.endFill()};Object.defineProperty(b,"isoHeight",{get:function(){return this._isoHeight},set:function(a){this._isoHeight!=a&&(this._isoHeight=a,this.draw())},enumerable:!0,configurable:!0});Object.defineProperty(b,"color",{get:function(){return this._color},set:function(a){this._color!=
a&&(this._color=a,this.draw())},enumerable:!0,configurable:!0});return d}(c.IsoBase);c.IsoTile=f;f.prototype.__class__="egret.IsoTile"})(egret||(egret={}));
(function(c){var f=function(){function e(){this._count=0;this._textFields=[];this._damageFields=[];this._params=[];this._objects=[];this._cacheData={}}var d=e.prototype;e.getInstance=function(){return this._instance||(this._instance=new e)};d.tween=function(b,a,d,e,f,n,l,h){void 0===l&&(l=16776960);void 0===h&&(h=20);this._count++;var k=this._count%10+1,m=this._params.pop();m||(m=[]);m.length=0;for(var p in arguments)m[p]=arguments[p];m[m.length]=this._count;this._cacheData[this._count]=m;c.EnterFrameManager.getInstance().addExecute(this.tweenExecute,
this,k,m,1)};d.tweenExecute=function(b,a,d,e,f,n,l,h,k){void 0===l&&(l=16776960);void 0===h&&(h=20);void 0===k&&(k=0);this._count++;n=this.getDamageItem(a,d,n,l,h);b.addChild(n);b=Math.cos(e)*f+(a-n.width/2);d=Math.sin(e)*f+d;(e=this._params.pop())||(e=[]);e.length=0;e[0]=n;e[1]=k;e[2]=this._count;this._cacheData[this._count]=e;(k=this._objects.pop())||(k={});k.x=b;k.y=d;e[3]=k;c.Tween.get(n).to(k,1E3,c.Ease.circInOut).call(this.randomDirComplete,this,e)};d.randomDirComplete=function(b,a,c,d){b.parent&&
b.parent.removeChild(b);this._damageFields.push(b);this._objects.push(d);0<a&&(this._params.push(this._cacheData[a]),delete this._cacheData[a]);0<c&&(this._params.push(this._cacheData[c]),delete this._cacheData[c])};d.tweenLine=function(b,a,d,e,f,n,l){void 0===n&&(n=16776960);void 0===l&&(l=20);this._count++;f=this.getDamageItem(a,d,f,n,l);b.addChild(f);b=a-f.width/2;d=e+d;(e=this._params.pop())||(e=[]);e.length=0;e[0]=f;e[1]=this._count;e[2]=0;this._cacheData[this._count]=e;(a=this._objects.pop())||
(a={});a.x=b;a.y=d;e[3]=a;c.Tween.get(f).to(a,1E3).call(this.randomDirComplete,this,e)};d.getTextField=function(b,a,d,e,f){void 0===e&&(e=16776960);void 0===f&&(f=20);var n=this._textFields.pop();n||(n=new c.TextField);n.text=d;n.height=f;n.width=200;n.textAlign=c.HorizontalAlign.CENTER;n.textColor=e;n.x=b-n.width/2;n.y=a;return n};d.getDamageItem=function(b,a,d,e,f){void 0===e&&(e=16776960);void 0===f&&(f=20);var n=this._damageFields.pop();n||(n=new c.DamageItem);n.setData(d,e);n.height=f;n.width=
200;n.x=b-n.width/2;n.y=a;return n};return e}();c.HPTweenManager=f;f.prototype.__class__="egret.HPTweenManager"})(egret||(egret={}));
(function(c){var f=function(){function c(){this.loadList=null;this.loadIndex=0}var d=c.prototype;c.getInstance=function(){return c._instance||(c._instance=new c)};d.loadResList=function(b,a){this.loadList=b;this.loadIndex=0;this._handler=a;RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this);RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this);RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this);RES.loadGroup(this.loadList[0])};
d.onResourceLoadComplete=function(b){this.loadIndex<this.loadList.length-1?(this.loadIndex++,RES.loadGroup(this.loadList[this.loadIndex])):(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this._handler())};d.onResourceLoadError=function(b){console.warn("Group:"+b.groupName+" \u4e2d\u6709\u52a0\u8f7d\u5931\u8d25\u7684\u9879\u76ee");
this.onResourceLoadComplete(b)};d.onResourceProgress=function(b){console.info("--------------onResourceProgress***********321----------------------")};c._instance=null;return c}();c.LoadManager=f;f.prototype.__class__="egret.LoadManager"})(egret||(egret={}));
(function(c){var f=function(){function e(){this.totalExp=1.7;this.coin=10311}var d=e.prototype;e.getInstance=function(){e._instance||(e._instance=new e);return e._instance};d.openLogin=function(){this.loginView||(this.loginView=new c.LoginView);this.loginView.open()};d.openMainView=function(){this.mainView||(this.mainView=new c.MainView);this.mainView.open()};d.updateMainView=function(){this.mainView&&this.mainView.isOpen&&this.mainView.update()};d.openGuideView=function(){this.guideView||(this.guideView=
new c.GuideView);this.guideView.open()};d.openMask=function(){this.maskView||(this.maskView=new c.MaskView);this.maskView.open()};d.closeMask=function(){this.maskView&&this.maskView.isOpen&&this.maskView.close()};d.openLoading=function(b){void 0===b&&(b="");0.5<Math.random()&&(this.totalExp+=0.01,3.7<this.totalExp&&(this.totalExp=3.7),this.updateMainView());this.loadingView||(this.loadingView=new c.LoadingView,this.loadingView.title=b);this.loadingView.open()};return e}();c.MainControl=f;f.prototype.__class__=
"egret.MainControl"})(egret||(egret={}));
(function(c){var f=function(){function e(){this._roles=[];this._scene=null;this._rolePoints=[];this.addRole(1);this.addRole(2);this.addRole(3)}var d=e.prototype;e.getInstance=function(){return this._instance||(this._instance=new c.RoleManager)};Object.defineProperty(d,"roles",{get:function(){return this._roles},enumerable:!0,configurable:!0});Object.defineProperty(d,"role",{get:function(){return this._roles[0]},enumerable:!0,configurable:!0});Object.defineProperty(d,"isDead",{get:function(){return 0>=
this.role.data.vo.hp},enumerable:!0,configurable:!0});Object.defineProperty(d,"hasAnimal",{get:function(){return this._animal&&this._animal.data&&0<this._animal.data.vo.hp},enumerable:!0,configurable:!0});d.addRole=function(b){void 0===b&&(b=1);var a=c.dataManager().roleSceneData.addRole(b),d;b==c.VocationType.WARRIOR?d=c.SceneElementManager.getInstance().getElement(c.PlayerWarrior):b==c.VocationType.MAGE?d=c.SceneElementManager.getInstance().getElement(c.PlayerMage):b==c.VocationType.BOWMAN&&(d=
c.SceneElementManager.getInstance().getElement(c.PlayerBowman));d.setData(a);d.setHPStyle(c.dataManager().pathData.getResourceUrl(c.PathData.PATH_IMAGES_SCENE,"hp_green_bg.png"),c.dataManager().pathData.getResourceUrl(c.PathData.PATH_IMAGES_SCENE,"hp_green.png"),49,8);this._roles.push(d);1<this._roles.length&&(this._scene&&(a=2*Math.PI*Math.random(),b=150*Math.cos(a)+this.role.x,a=150*Math.sin(a)+this.role.y,this._scene.addElement(d,c.SceneLayerType.BIOLOGY,b,a)),d.chaseArmies(this.role.armies),c.globalUpdateWindows([c.UpdateType.ADD_ROLE]))};
d.removeRole=function(b){if(b==this.role.data.vo.id)this._scene&&this._scene.removeElement(this.role,!1);else{c.dataManager().roleSceneData.removeRole(b);for(var a in this._roles)if(this._roles[a].data.vo.id==b){b=this._roles.splice(a,1);this._scene&&this._scene.removeElement(b[0]);this._roles[a]instanceof c.PlayerAnimal&&(this._animal=null);break}}};d.addAnimal=function(b){var a=c.dataManager().roleSceneData.addAnimal();this._animal=c.SceneElementManager.getInstance().getElement(c.PlayerAnimal);
this._animal.setData(a);this._animal.setHPStyle(c.dataManager().pathData.getResourceUrl(c.PathData.PATH_IMAGES_SCENE,"hp_green_bg.png"),c.dataManager().pathData.getResourceUrl(c.PathData.PATH_IMAGES_SCENE,"hp_green.png"),49,8);this._roles.push(this._animal);var d=2*Math.PI*Math.random(),a=150*Math.cos(d)+b.x,d=150*Math.sin(d)+b.y;this._scene&&this._scene.addElement(this._animal,c.SceneLayerType.BIOLOGY,a,d);this._animal.chaseArmies(b.armies);c.globalUpdateWindows([c.UpdateType.ADD_ROLE])};d.revive=
function(){c.dataManager().roleSceneData.resetRoleData();e.getInstance().updateHp();this._scene&&this._scene.addElement(this.role,c.SceneLayerType.BIOLOGY,this.role.x,this.role.y)};d.setElementPlayerXY=function(b,a){void 0===a&&(a=0);var c=this.getElementPlayersPoints(b,a),d;for(d in this._roles)this._roles[d].data.vo.x=c[d].x,this._roles[d].data.vo.y=c[d].y,this._roles[d].updateXY()};d.getElementPlayersPoints=function(b,a){for(var d=0,e=0;e<this._roles.length;e++){var f=this._rolePoints[e];f||(f=
new c.Point,this._rolePoints[e]=f);if(0==e)n=b,l=a;else var n=b+150*Math.cos(d),l=a+150*Math.sin(d),d=d+Math.PI/2;f.x=n;f.y=l}return this._rolePoints};d.moveTo=function(b,a,c){void 0===c&&(c=!0);if(this._scene){b=this.getElementPlayersPoints(b,a);for(var d in this._roles)this._roles[d].moveTo(b[d].x,b[d].y,c)}};d.moveTo2=function(b,a){if(this._scene){var c=this.getElementPlayersPoints(b,a),d;for(d in this._roles)this._roles[d].moveTo2(c[d].x,c[d].y)}};d.moveTo3=function(b,a){if(this._scene){var c=
this.getElementPlayersPoints(b,a),d;for(d in this._roles)this._roles[d].moveTo3(c[d].x,c[d].y)}};d.stopMove=function(){for(var b in this._roles)this._roles[b].stopMove()};d.stopAll=function(){for(var b in this._roles)this._roles[b].stopAll()};d.play=function(b,a,c,d,e,f,l,h){void 0===b&&(b=-1);void 0===a&&(a=-1);void 0===c&&(c=-1);void 0===d&&(d=0);void 0===e&&(e=null);void 0===f&&(f=null);void 0===l&&(l=null);void 0===h&&(h=null);for(var k in this._roles)this._roles[k].play.apply(this._roles[k],
arguments)};d.showPlayer=function(b,a,d){if(b&&this._scene!=b){this._scene=b;for(var e in this._roles)this._scene.addElement(this._roles[e],c.SceneLayerType.BIOLOGY)}this.setElementPlayerXY(a,d);this.stopMove();this.play(-1,c.ActionType.PREPARE,c.ActionMovieClipDirectionType.DOWN)};d.hidePlayer=function(){if(this._scene){this.stopMove();for(var b in this._roles)this._scene.removeElement(this._roles[b],!1);this._scene=null}};d.changeScene=function(b){if(b==this._scene)for(var a in this._roles)this._roles[a].clearFollowPoints(),
this._roles[a].stopMove()};d.updateHp=function(){for(var b in this._roles)this._roles[b].updateHp()};d.updateAvatar=function(b){for(var a in this._roles)if(this._roles[a].data.vo.id==b){this._roles[a].updateAvatar(this._roles[a].data);break}};d.chaseArmies=function(b){for(var a in this._roles)this._roles[a].chaseArmies(b)};d.isRoleInstance=function(b){return-1<this._roles.indexOf(b)};d.changeSceneEffect=function(){for(var b in this._roles)this._roles[b].changeSceneEffect()};d.enterSceneEffect=function(){for(var b in this._roles)this._roles[b].enterSceneEffect()};
return e}();c.RoleManager=f;f.prototype.__class__="egret.RoleManager"})(egret||(egret={}));(function(c){var f=function(){return function(){this.y=this.x=-1;this.elementId=0;this.sceneId=-1}}();c.SceneNavigatorDataItem=f;f.prototype.__class__="egret.SceneNavigatorDataItem"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.OBSTACLE=-1;c.WALKABLE=0;c.TRANSPARENT=1;return c}();c.PathType=f;f.prototype.__class__="egret.PathType"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.NPC=0;c.ENTRY_POINT=1;c.SCENERY=2;c.ROLE_BORN_POINT=3;c.MONSTER_BORN_POINT=4;c.COLLECT_GOODS=5;c.EVENT_POINT=6;c.PATROL_PATH=7;c.MONSTER=8;c.PLAYER_WARRIOR=9;c.PLAYER_MAGE=10;c.PLAYER_BOWMAN=11;c.GOODS=12;return c}();c.SceneElementType=f;f.prototype.__class__="egret.SceneElementType"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._image=new c.gui.UIAsset;this._image.x=-32;this._image.y=-32;this.addChild(this._image);this._namePad.y=this._image.y-10}__extends(d,e);d.prototype.addToScene=function(){e.prototype.addToScene.call(this);this._image.source="resource/item/"+this._data.lo.iconId+".png"};return d}(c.SceneElement);c.ElementGoods=f;f.prototype.__class__="egret.ElementGoods"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.setIsCheckResource(!1)}__extends(d,e);var b=d.prototype;b.getPartUrl=function(a){var b=c.PathData.PATH_MOVIES_MONSTER;a=this._sceneAvatarVo[a];return c.dataManager().sceneElementData.getActionUrl(b,a,this._avatar.actionType)};b.playSkill=function(){1==this._avatar.frameIndex&&this.damage()};return d}(c.SceneElementDriver);c.ElementMonster=f;f.prototype.__class__="egret.ElementMonster"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this)}__extends(d,e);var b=d.prototype;b.setData=function(a){e.prototype.setData.call(this,a);c.SceneElementData.getInstance().setSceneAvatarVo(this._sceneAvatarVo,a.lo)};b.play=function(a,b,d,e,f,l,h,k){void 0===a&&(a=-1);void 0===b&&(b=-1);void 0===d&&(d=-1);void 0===e&&(e=0);void 0===f&&(f=null);void 0===l&&(l=null);void 0===h&&(h=null);void 0===k&&(k=null);if(!this._isDestroy&&this._sceneAvatarVo.body){if(f&&!l)throw Error("\u672a\u6307\u5b9a\u56de\u8c03\u51fd\u6570\u5bf9\u8c61");
this._partTypes=c.ActionPartType.TYPES_BODY_ONLY;this._avatar.play(a,b,d,e,f,l,h,k);this._avatar.setPartTypes(this._partTypes,this.getPartUrl,this,this.loadActionComplete,this);this._namePad.y=this._avatar.topLineY;this.clearAttack()}};b.getPriorityTarget=function(){return null};b.getPartUrl=function(a){var b=c.PathData.PATH_MOVIES_MONSTER;a=this._sceneAvatarVo[a];return c.dataManager().sceneElementData.getActionUrl(b,a,this._avatar.actionType)};b.playSkill=function(){1==this._avatar.frameIndex?this.damage():
this._avatar.frameIndex==this._avatar.frameIndexMax&&this.chaseArmies(this.armies)};return d}(c.ElementPlayer);c.PlayerAnimal=f;f.prototype.__class__="egret.PlayerAnimal"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this)}__extends(d,e);var b=d.prototype;b.removeFromScene=function(){this._collideTarget&&(this._collideTarget.unlock(),this._collideTarget=null);e.prototype.removeFromScene.call(this)};b.getAttackRange=function(a){return 150};b.attack=function(){if(!this._isLocked&&!this.isSkillStatus&&this._attackTarget)if(0>=this._attackTarget.vo.hp)this.chaseArmies(this.armies);else{this.stopMove();var a=c.ActionMovieClipData.getInstance().calculateDirection(this.x,
this.y,this._attackTarget.vo.x,this._attackTarget.vo.y),b;if(this.getSkillTime(c.SkillType.WARRIOR_LIEHUO)>c.dataManager().fightData.getSkillIntervalTime(c.SkillType.WARRIOR_LIEHUO))b=c.SkillType.WARRIOR_LIEHUO;else{if(this.getSkillTime(c.SkillType.WARRIOR_COLLIDE)>c.dataManager().fightData.getSkillIntervalTime(c.SkillType.WARRIOR_COLLIDE)){b=this.scene.getElement(this._attackTarget.vo.idString);if(!b)return;this._collideTarget=b;this.setUseSkill(c.SkillType.WARRIOR_COLLIDE);this.isSkillStatus=!0;
var d=Math.atan2(this._attackTarget.vo.y-this._y,this._attackTarget.vo.x-this._x),e=300,f=500;b.lock();b.onCollide(this,b,d,e,f);this.play(0,c.ActionType.WALK,a);e-=this.getAttackRange();this.onCollide(this,b,d,e,f+100);this.damage(c.SkillType.WARRIOR_COLLIDE);return}b=this.getSkillTime(c.SkillType.WARRIOR_ZHANHUN)>c.dataManager().fightData.getSkillIntervalTime(c.SkillType.WARRIOR_ZHANHUN)?c.SkillType.WARRIOR_ZHANHUN:this.getSkillTime(c.SkillType.WARRIOR_CISHA)>c.dataManager().fightData.getSkillIntervalTime(c.SkillType.WARRIOR_CISHA)?
c.SkillType.WARRIOR_CISHA:c.SkillType.WARRIOR_NORMAL}this.setUseSkill(b);this._avatar.actionType==c.ActionType.ATTACK?this.direction=a:(this.play(0,c.ActionType.ATTACK,a),this._avatar.setFrameHandler(this.playSkill,this))}};b.onChangeCollide=function(){this.scene&&(this.setXY(this._x,this._y),c.RoleManager.getInstance().role==this&&this.scene.isoMap.gotoXY2(this._x,this._y))};b.collideComplete=function(a,b,d,e){this.setXY(d,e);a==this&&(b.unlock(),this._collideTarget=null,this.setUseSkill(c.SkillType.WARRIOR_COLLIDE),
this.isSkillStatus=!1,this._attackTarget&&0>=this._attackTarget.vo.hp?this.checkAutoAttack2():this.attack())};b.checkAutoAttack2=function(){this._isLocked||(this._attackTarget&&0>=this._attackTarget.vo.hp?this.chaseArmies(this.armies):this.attack())};b.playSkill=function(){if(this.scene){var a=this.data.vo;if(1==this._avatar.frameIndex){var b=this.skillType,d,e=0,f=0,l=c.SceneLayerType.BATTLE_EFFECT,h=this._x,k=this._y,m=0,p,r;b==c.SkillType.WARRIOR_LIEHUO?(d=5,l=c.SceneLayerType.BACKGROUND_EFFECT,
m=this.getAttackRange(b)):b==c.SkillType.WARRIOR_ZHANHUN?(d=3,k-=50,m=this.getAttackRange(b),p=this):b==c.SkillType.WARRIOR_CISHA?(d=2,k-=50,r=Math.atan2(this._attackTarget.vo.y-50-k,this._attackTarget.vo.x-h)/Math.PI*180+90):(e=d=1,f=this.direction,k-=50);var s=c.SceneElementManager.getInstance().getElement(c.ElementSkill);s.setMovieName(c.SceneElementData.getInstance().getSkillMovieName(a.vocation,d,e));0<f&&(s.direction=f);p&&s.setMaster(p,0,-50);null!=r&&s.setEffProperties(r);this.scene.addElement(s,
l,h,k);this.damage(b,null,m)}else this._avatar.frameIndex==this._avatar.frameIndexMax&&this.chaseArmies(this.armies)}};b.getDamageTargets=function(a,b,d){void 0===a&&(a=0);void 0===b&&(b=0);void 0===d&&(d=0);this._damageTargets.length=0;switch(a){case c.SkillType.WARRIOR_NORMAL:case c.SkillType.WARRIOR_COLLIDE:case c.SkillType.WARRIOR_CISHA:this._damageTargets.push(this._attackTarget);break;case c.SkillType.WARRIOR_ZHANHUN:case c.SkillType.WARRIOR_LIEHUO:return this.getDamageTargetsByRange(this.getAttackRange(a),
b,d)}return this._damageTargets};return d}(c.ElementPlayer);c.PlayerWarrior=f;f.prototype.__class__="egret.PlayerWarrior"})(egret||(egret={}));(function(c){var f=function(e){function d(){e.call(this)}__extends(d,e);d.prototype.getPartUrl=function(b){var a=c.PathData.PATH_MOVIES_SKILL;b=this._sceneAvatarVo[b];return c.dataManager().sceneElementData.getActionUrl(a,b,this._avatar.actionType)};return d}(c.ElementEffect);c.ElementSkill=f;f.prototype.__class__="egret.ElementSkill"})(egret||(egret={}));
var AssetAdapter=function(){function c(){}c.prototype.getAsset=function(c,e,d,b){function a(a){e.call(d,a,c)}b=c;c.prototype&&(b=new c);b instanceof egret.DisplayObject||b instanceof egret.Texture?e.call(d,b,c):"string"==typeof c?RES.hasRes(c)?RES.getResAsync(c,a,this):RES.getResByUrl(c,a,this,RES.ResourceItem.TYPE_IMAGE):e.call(d,b,c)};return c}();AssetAdapter.prototype.__class__="AssetAdapter";
(function(c){var f=function(){return function(e,d){var b=new c.ApplicationMain;e.addChildAt(b,0);new d}}();c.ApplicationConfig=f;f.prototype.__class__="egret.ApplicationConfig"})(egret||(egret={}));
(function(c){var f=function(){function e(){this._relativeMap=this._timeDict=null;this._timeDict={};this._relativeMap=new c.HashMap}var d=e.prototype;e.getInstance=function(){return e._instance||(e._instance=new e)};d.recordTime=function(b,a,d){void 0===a&&(a=!0);void 0===d&&(d="");var e=0,f=c.getTimer();this._timeDict[b]&&(e=f-this._timeDict[b],a&&console.log("[id="+b+"]:"+d+" \u8ddd\u79bb\u4e0a\u6b21\u8bb0\u5f55\u7528\u65f6:"+e));this._timeDict[b]=f;return e};d.resetRelativeTime=function(b){this._relativeMap.put(b,
(new Date).getTime())};d.getRelativeTime=function(b){return this._relativeMap.containsKey(b)?(b=this._relativeMap.get(b),(new Date).getTime()-b):-1};e._instance=null;return e}();c.TimeRecordManager=f;f.prototype.__class__="egret.TimeRecordManager"})(egret||(egret={}));
(function(c){var f=function(){function e(){throw Error("DisplayObjectUtil just is a static class.");}e.remove=function(){for(var c=[],b=0;b<arguments.length;b++)c[b-0]=arguments[b];for(var b=c.length,a=0;a<b;a++){var e=c[a];e&&e.parent&&e.parent.removeChild(e)}};e.addChild=function(c,b,a,e){void 0===e&&(e=null);var f=a.x;a=a.y;e&&(f+=e.x,a+=e.y);c.x=f;c.y=a;b.addChild(c)};e.swap=function(c,b,a){void 0===a&&(a=!0);for(var e=c.length,f=0,q=null,n=0;n<e;n++)a&&"parent"in c[n]&&(q=c[n].parent)&&(b[n].x=
c[n].x,b[n].y=c[n].y,f=q.getChildIndex(c[n]),q.removeChild(c[n]),q.addChildAt(b[n],f))};e.swap2=function(c,b,a){void 0===a&&(a=!0);for(var e=c.length,f=0,q=null,n=0;n<e;n++)a&&"parent"in c[n]&&(q=c[n].parent)&&(b[n].x=c[n].x,b[n].y=c[n].y,f=q.getChildIndex(c[n]),q.removeElement(c[n]),q.addElementAt(b[n],f))};e.destroyChildren=function(d,b){void 0===b&&(b=!0);if(d){d instanceof c.Stage&&c.LogManager.warn(e,"\u3010\u8b66\u544a\u3011\u9500\u6bc1\u7684\u5bf9\u8c61\u4e3a stage");for(var a=null,g=null,
f=0;d.numChildren>f;)try{a=d.getChildAt(f);if(!a)break;a.cacheAsBitmap&&(a.cacheAsBitmap=!1);g=a;"destroy"in a&&a.destroy();a.parent&&a.parent.removeChild(a);b&&g&&e.destroyChildren(g,b)}catch(q){f++,c.LogManager.error(e,q)}}};e.destroyTargets=function(){for(var d=[],b=0;b<arguments.length;b++)d[b-0]=arguments[b];for(var b=d.length,a=0;a<b;a++){var g=d[a];g instanceof c.DisplayObjectContainer&&e.destroyChildren(g);g&&("destroy"in g&&g.destroy(),g.parent&&g.parent.removeChild(g))}};e.drawRect=function(c,
b,a,g,f,q,n,l,h){void 0===g&&(g=0);void 0===f&&(f=1);void 0===q&&(q=!1);void 0===n&&(n=0);void 0===l&&(l=1);void 0===h&&(h=0);c.graphics.clear();0!=b&&0!=a&&(q&&e.drawRectBorder(c,b,a,n,l,h),c.graphics.beginFill(g,f),c.graphics.drawRect(0,0,b,a),c.graphics.endFill())};e.drawRectByRect=function(c,b,a,g,f,q,n,l){void 0===a&&(a=0);void 0===g&&(g=1);void 0===f&&(f=!1);void 0===q&&(q=0);void 0===n&&(n=1);void 0===l&&(l=0);c.graphics.clear();b&&0!=b.width&&0!=b.height&&(f&&e.drawBorderByRect(c,b,q,n,l),
c.graphics.beginFill(a,g),c.graphics.drawRect(b.x,b.y,b.width,b.height),c.graphics.endFill())};e.drawBorderByRect=function(c,b,a,e,f){void 0===a&&(a=0);void 0===e&&(e=1);void 0===f&&(f=0);c.graphics.clear();b&&0!=b.width&&0!=b.height&&(c.graphics.lineStyle(f,a,e,!0),c.graphics.drawRect(b.x,b.y,b.width,b.height))};e.drawRectBorder=function(c,b,a,e,f,q){void 0===e&&(e=0);void 0===f&&(f=1);void 0===q&&(q=0);c.graphics.clear();0!=b&&0!=a&&(c.graphics.lineStyle(q,e,f,!0),c.graphics.drawRect(0,0,b,a))};
e.drawRoundRect=function(c,b,a,g,f,q,n,l,h,k,m){void 0===g&&(g=0);void 0===f&&(f=0);void 0===q&&(q=!1);void 0===n&&(n=0);void 0===l&&(l=0);void 0===h&&(h=0);void 0===k&&(k=0);void 0===m&&(m=0);c.graphics.clear();0!=b&&0!=a&&(q&&e.drawRoundRectBorder(c,b,a,n,l,h,k,m),c.graphics.beginFill(g,f),c.graphics.drawRoundRect(0,0,b,a,k,m),c.graphics.endFill())};e.drawRoundRectBorder=function(c,b,a,e,f,q,n,l){void 0===e&&(e=0);void 0===f&&(f=0);void 0===q&&(q=0);void 0===n&&(n=0);void 0===l&&(l=0);c.graphics.clear();
0!=b&&0!=a&&(0!=n&&0==l&&(l=n),0!=l&&0==n&&(n=l),c.graphics.lineStyle(q,e,f,!0),c.graphics.drawRoundRect(0,0,b,a,n,l))};e.drawCircle=function(c,b,a,g,f,q,n,l,h,k){void 0===a&&(a=0);void 0===g&&(g=0);void 0===f&&(f=0);void 0===q&&(q=1);void 0===n&&(n=!1);void 0===h&&(h=0);void 0===k&&(k=1);c.graphics.clear();n&&e.drawCircleBorder(c,b,a,g,f,h,k);c.graphics.beginFill(f,q);c.graphics.drawCircle(a,g,b);c.graphics.endFill()};e.drawCircleBorder=function(c,b,a,e,f,q,n){void 0===a&&(a=0);void 0===e&&(e=0);
void 0===f&&(f=0);void 0===q&&(q=0);void 0===n&&(n=1);c.graphics.clear();c.graphics.lineStyle(q,f,n,!1,"none");c.graphics.drawCircle(a,e,b)};e.drawCircleBorderDotted=function(c,b,a,e,f,q,n,l){void 0===a&&(a=0);void 0===e&&(e=0);void 0===f&&(f=0);void 0===q&&(q=0);void 0===n&&(n=1);void 0===l&&(l=5);c.graphics.clear();c.graphics.lineStyle(q,f,n,!1,"none");q=f=0;n=Math.PI;for(var h=0;360>h;h+=l)f=Math.cos(h/180*n)*b+a,q=Math.sin(h/180*n)*b+e,c.graphics.moveTo(f,q),h+=l,f=Math.cos(h/180*n)*b+a,q=Math.sin(h/
180*n)*b+e,c.graphics.lineTo(f,q)};e.drawSector=function(c,b,a,e,f,q,n,l){void 0===b&&(b=200);void 0===a&&(a=200);void 0===e&&(e=100);void 0===f&&(f=27);void 0===q&&(q=270);void 0===n&&(n=16711680);void 0===l&&(l=1);c.graphics.clear();c.graphics.beginFill(n,l);c.graphics.lineStyle(0,n,l);c.graphics.moveTo(b,a);f=360<Math.abs(f)?360:f;n=Math.ceil(Math.abs(f)/45);l=f/n*Math.PI/180;q=q*Math.PI/180;c.graphics.lineTo(b+e*Math.cos(q),a+e*Math.sin(q));for(var h=1;h<=n;h++){q+=l;var k=q-l/2,m=b+e/Math.cos(l/
2)*Math.cos(k),k=a+e/Math.cos(l/2)*Math.sin(k),p=b+e*Math.cos(q),r=a+e*Math.sin(q);c.graphics.curveTo(m,k,p,r)}360!=f&&c.graphics.lineTo(b,a);c.graphics.endFill()};e.setChildrenCache=function(c,b){void 0===b&&(b=!0);for(var a=c.numChildren,e=null,f=0;f<a;f++)e=c.getChildAt(f),e.cacheAsBitmap=b};e.getInstance=function(c,b,a,g,f,q){void 0===b&&(b=null);void 0===a&&(a=NaN);void 0===g&&(g=NaN);void 0===f&&(f=NaN);void 0===q&&(q=NaN);c=new c;e.addInstance(c,b,a,g,f,q);return c};e.addInstance=function(c,
b,a,e,f,q){void 0===b&&(b=null);void 0===a&&(a=NaN);void 0===e&&(e=NaN);void 0===f&&(f=NaN);void 0===q&&(q=NaN);isNaN(a)||(c.x=a);isNaN(e)||(c.y=e);isNaN(f)||(c.width=f);isNaN(q)||(c.height=q);b&&b.addChild(c)};e.drawDashed=function(c,b,a,e,f,q,n,l){void 0===l&&(l=0);if(c&&!(0>=q||0>=n)){e-=b;f-=a;var h=Math.atan2(f,e);e=Math.sqrt(e*e+f*f);f=0;for(var k,m=Math.cos(h),p=Math.sin(h),r=0;f<=e;){h=b+m*f;k=a+p*f;c.moveTo(h,k);f+=q;f>e&&(f=e);h=b+m*f;k=a+p*f;c.lineTo(h,k);r++;if(0<l&&r>l)break;f+=n}}};
return e}();c.DisplayObjectUtil=f;f.prototype.__class__="egret.DisplayObjectUtil"})(egret||(egret={}));
(function(c){var f=function(){function c(){throw Error("ClassUtil just is a static class.");}c.deleteObjectKey=function(){for(var c=[],b=0;b<arguments.length;b++)c[b-0]=arguments[b];for(var b=[],a=0,e=c.length,f=0;f<e;f++){var q=c[f];if(q){for(var n in q)b.push(n);for(a=b.length;0<a;)delete q[b.pop()],a--}}};c.isBaseType=function(d){for(var b=c.BASE_TYPES.length,a=0;a<b;a++){var g=c.BASE_TYPES[a];if(typeof d==g)return!0}b=c.BASE_TYPES2.length;for(a=0;a<b;a++)if(g=c.BASE_TYPES2[a],d==g)return!0;return!1};
c.hasKey=function(c){for(var b in c)return!0;return!1};c.copyProperties=function(c,b){if(c&&b)for(var a in c)try{b[a]=c[a]}catch(e){}};c.clone=function(d){var b={};c.copyProperties(d,b);return b};c.BASE_TYPES=["number","string","boolean"];c.BASE_TYPES2=[null,void 0];return c}();c.ObjectUtil=f;f.prototype.__class__="egret.ObjectUtil"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.flipY=!1;this._direction=c.ActionMovieClipDirectionType.UP;this._actionType=c.ActionType.PREPARE;this._actionMovieClipVo=null;this.touchChildren=!1}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"actionType",{get:function(){return this._actionType},set:function(a){this._actionType!=a&&(this._actionType=a,this.setBaseMovieClipVo(this._actionType))},enumerable:!0,configurable:!0});Object.defineProperty(b,"actionMovieClipVo",{get:function(){return this._actionMovieClipVo},
set:function(a){this._actionMovieClipVo=a;this.setBaseMovieClipVo(this._actionType,this._direction)},enumerable:!0,configurable:!0});Object.defineProperty(b,"direction",{get:function(){return this._direction},set:function(a){this._direction!=a&&(this._direction=a,this.setBaseMovieClipVo(-1,this._direction))},enumerable:!0,configurable:!0});b.getBaseMovieClipVo=function(a,b){void 0===b&&(b=0);return c.ActionMovieClipData.getInstance().getBaseMovieClipVo(this._actionMovieClipVo,a,b)};b.hasActionType=
function(a){void 0===a&&(a=0);return c.ActionMovieClipData.getInstance().hasActionType(this._actionMovieClipVo,a)};b.hasDirectionType=function(a,b,d){void 0===d&&(d=!0);return c.ActionMovieClipData.getInstance().hasDirectionType(this._actionMovieClipVo,a,b,d)};b.destroy=function(){this._isDestroy||e.prototype.destroy.call(this)};b.setBaseMovieClipVo=function(a,b){void 0===a&&(a=-1);void 0===b&&(b=-1);if(-1!=a||-1!=b){-1!=a&&(this._actionType=a);-1!=b&&(this._direction=b);var d=this._direction;if(this._actionMovieClipVo){var e=
this._actionMovieClipVo.baseMovieClipVos[this._actionType];if(e)var f=e[this._direction];f?(this.scaleX=1,this.flipY&&(this.scaleY=1)):e&&(d=c.ActionMovieClipData.getInstance().getReverseDir(this._direction),f=e[d])&&(this.scaleX=-1,this.flipY&&(this.scaleY=-1))}this.baseMovieClipVo=f}};b.setActionMovieClipVo=function(a,b,c){void 0===b&&(b=-1);void 0===c&&(c=-1);this._actionMovieClipVo=a;this.setBaseMovieClipVo(b,c)};b.clear=function(){e.prototype.clear.call(this);this._actionMovieClipVo=null};return d}(c.BaseMovieClip2);
c.ActionMovieClip2=f;f.prototype.__class__="egret.ActionMovieClip2"})(egret||(egret={}));
(function(c){var f=function(){function e(b,a,d,e,f,n){void 0===b&&(b=2);void 0===a&&(a=null);void 0===d&&(d=null);void 0===e&&(e=null);void 0===f&&(f=null);void 0===n&&(n=null);this.loadCount=6;this._urls=this.loadAbort=this.loadProgress=this.loadError=this.loadComplete=null;this._loadIndex=0;this._contents=null;this._currentCount=0;this._isCompleted=this._isLoading=!1;this._urlHashMap=this._indexHashMap=null;this.loadCount=Math.max(1,b);this.loadComplete=d;this.loadError=e;this.loadProgress=f;this.loadAbort=
n;this._callbackObj=a;this._urls=[];this._contents=[];this._indexHashMap=new c.HashMap;this._urlHashMap=new c.HashMap}var d=e.prototype;Object.defineProperty(d,"isLoading",{get:function(){return this._isLoading},enumerable:!0,configurable:!0});Object.defineProperty(d,"isCompleted",{get:function(){return this._isCompleted},enumerable:!0,configurable:!0});Object.defineProperty(d,"loadIndex",{get:function(){return this._loadIndex},enumerable:!0,configurable:!0});Object.defineProperty(d,"urls",{get:function(){return this._urls},
set:function(b){b?(this._urls=b,this.initLoading()):c.LogManager.error(this,"\u53c2\u6570\u4e0d\u80fd\u4e3a\u7a7a: urls = "+b)},enumerable:!0,configurable:!0});d.addUrls=function(b,a){void 0===a&&(a=!0);this._isLoading?(a?(this._urls=b.concat(this._urls),b=[this._loadIndex+1,0].concat(b),this._urls.splice.apply(this._urls,b)):this._urls=this._urls.concat(b),this._isLoading||(this.urls=b)):this.urls=b.concat()};d.stopAll=function(){this._loadIndex=Number.POSITIVE_INFINITY;this._indexHashMap.clear();
this._urlHashMap.clear();this._isLoading&&(this._isCompleted=!0);this._isLoading=!1};d.clear=function(){this.stopAll();this._urls.length=0;this._contents.length=0};d.destroy=function(){this.stopAll();this.loadAbort=this.loadProgress=this.loadError=this.loadComplete=null};d.initLoading=function(){this._urls&&0!=this._urls.length&&(this._currentCount=this._loadIndex=0,this.loading())};d.loading=function(){if(this._loadIndex>=this._urls.length)this._isLoading=!1,this._isCompleted=!0;else if(this._currentCount<
this.loadCount){this._isLoading=!0;this._isCompleted=!1;var b=this._urls[this._loadIndex];RES.getResByUrl(b,this.completeHandler,this);this._indexHashMap.put(b,this._loadIndex);this._currentCount++;this._loadIndex++;this.loading()}};d.completeHandler=function(b,a){var d=this._indexHashMap.get(a);this._contents[d]=new c.Bitmap(b);this.loadComplete&&this.loadComplete.apply(this._callbackObj,[a,d,this._contents[d]]);this._currentCount--;c.EnterFrameManager.getInstance().addExecute(this.loading,this,
20,null,1)};return e}();c.QueueLoader=f;f.prototype.__class__="egret.QueueLoader"})(egret||(egret={}));
(function(c){var f=function(){function e(){this._directionMap2=this._callBackTargetMap2=this._callBackMap2=this._loadUrlMap2=this._callBackTargetMap=this._callBackMap=this._loadUrlMap=null;this._loadCount=0;this._loadUrlMap=new c.HashMap;this._callBackMap=new c.HashMap;this._callBackTargetMap=new c.HashMap;this._loadUrlMap2=new c.HashMap;this._callBackMap2=new c.HashMap;this._callBackTargetMap2=new c.HashMap;this._directionMap2=new c.HashMap;this._actionMovieClipData=c.ActionMovieClipData.getInstance()}
var d=e.prototype;e.getInstance=function(){return e._instance||(e._instance=new e)};d.loadActionMovieClipVo=function(b,a,d){void 0===a&&(a=null);void 0===d&&(d=null);var e=this._callBackMap.get(b);e||(e=new c.HashMap,this._callBackMap.put(b,e));e.containsKey(d.hashCode)||(this._callBackTargetMap.put(d.hashCode,d),e.put(d.hashCode,a));this._loadUrlMap.containsKey(b)||this._actionMovieClipData.getActionMovieClipVo(b)||(this._loadUrlMap.put(b,!0),this._loadCount++,c.EnterFrameManager.getInstance().addExecute(RES.getResByUrl,
null,this._loadCount%10+2,[b,this.loadActionComplete,this],1))};d.loadActionComplete=function(b,a){if(b instanceof c.SpriteSheet&&a){if(b){var d=this._actionMovieClipData.getJsonUrl(a),e=this._actionMovieClipData.getActionData(d);(e=c.ActionMovieClipUtil.getActionMovieClipVo(e,b))?this._actionMovieClipData.setActionMoveClipVo(d,e):c.LogManager.error(this,"\u65e0\u6548\u7684ActionMovieClipVo\u6570\u636e:"+a)}else c.LogManager.error(this,"\u52a0\u8f7d\u5230\u65e0\u6548\u7684\u52a8\u4f5c\u6570\u636e: url = "+
a);this._loadUrlMap.remove(d);if(e=this._callBackMap.remove(d))for(var f in e.content){var n=e.get(f);if(null!=n){var l=this._callBackTargetMap.get(f);n.apply(l,[d])}}}else b instanceof Object?(this._actionMovieClipData.setActionData(a,b),a=this._actionMovieClipData.getSheetUrl(a),c.EnterFrameManager.getInstance().addExecute(RES.getResByUrl,null,2,[a,this.loadActionComplete,this,RES.ResourceItem.TYPE_SHEET],1)):c.LogManager.error(this,"\u52a0\u8f7d\u5230\u65e0\u6548\u7684\u52a8\u4f5c\u6570\u636e: url = "+
a)};d.loadActionMovieClipVo2=function(b,a,d,e,f){void 0===e&&(e=-1);void 0===f&&(f=-1);-1==e&&(e=d.actionType);-1==f&&(f=d.direction);var n=this._callBackMap2.get(b);n||(n=new c.HashMap,this._callBackMap2.put(b,n));a&&!n.containsKey(d.hashCode)&&(this._callBackTargetMap2.put(d.hashCode,d),n.put(d.hashCode,a));a=this._directionMap2.get(b);a||(a=[],this._directionMap2.put(b,a));-1==a.indexOf(f)&&a.push(f);this._loadUrlMap2.containsKey(b)||((a=this._actionMovieClipData.getActionMovieClipVo(b))&&!this._actionMovieClipData.hasDirectionTypeTexture(a,
e,f)?this.loadActionComplete2(a,b):(this._loadUrlMap2.put(b,!0),this._loadCount++,c.EnterFrameManager.getInstance().addExecute(RES.getResByUrl,null,this._loadCount%10+2,[b,this.loadActionComplete2,this],1)))};d.loadActionComplete2=function(b,a){if(b instanceof c.SpriteSheet){a?this._actionMovieClipData.setSheet(a,b):a=this._actionMovieClipData.getUrlBySheet(b);var d=this._actionMovieClipData.getJsonUrl2(a),e=this._actionMovieClipData.getActionMovieClipVo(d);e?c.ActionMovieClipUtil.getActionMovieClipVo2(e,
b):(e=this._actionMovieClipData.getActionData(d),(e=c.ActionMovieClipUtil.getActionMovieClipVo(e,b))?this._actionMovieClipData.setActionMoveClipVo(d,e):c.LogManager.error(this,"\u65e0\u6548\u7684ActionMovieClipVo\u6570\u636e:"+a));this._loadUrlMap2.remove(d);if(e=this._callBackMap2.remove(d))for(var f in e.content){var n=e.get(f);if(null!=n){var l=this._callBackTargetMap2.get(f);n.apply(l,[d])}}}else if(b instanceof Object)for(b instanceof c.ActionMovieClipVo||(a?this._actionMovieClipData.setActionData(a,
b):c.LogManager.error(this,"url \u4e3a\u7a7a data = "+b)),d=this._directionMap2.get(a),f=0;0<d.length;)e=d.pop(),e>c.ActionMovieClipDirectionType.DOWN&&(e=this._actionMovieClipData.getReverseDir(e)),e=this._actionMovieClipData.getSheetUrl2(a,e),(n=this._actionMovieClipData.getSheet(e))?this.loadActionComplete2(n,e):(c.EnterFrameManager.getInstance().addExecute(RES.getResByUrl,null,2+Number(f),[e,this.loadActionComplete2,this,RES.ResourceItem.TYPE_SHEET],1),f++);else c.LogManager.error(this,"\u52a0\u8f7d\u5230\u65e0\u6548\u7684\u52a8\u4f5c\u6570\u636e: url = "+
a)};e._instance=null;return e}();c.ActionMovieClipManager=f;f.prototype.__class__="egret.ActionMovieClipManager"})(egret||(egret={}));(function(c){c.closeWindow=function(f){f&&c.ApplicationManager.getInstance().close(f)}})(egret||(egret={}));(function(c){c.getRes=function(c){return RES.getRes(c)}})(egret||(egret={}));
(function(c){c.openWindow=function(f,e,d,b,a,g){void 0===d&&(d=-1);void 0===b&&(b=-1);void 0===a&&(a=null);void 0===g&&(g=!1);return c.ApplicationManager.getInstance().open(f,d,b,a,g)}})(egret||(egret={}));
(function(c){var f=function(){function e(){this._hashMap=null;this._hashMap=new c.HashMap}var d=e.prototype;e.getInstance=function(){return e._instance||(e._instance=new e)};d.setData=function(b,a){this._hashMap.containsKey(b)?c.LogManager.error(this,"\u91cd\u590d\u8bbe\u7f6e\u5730\u56fe\u6570\u636e id = "+b):this._hashMap.put(b,a)};d.getData=function(b){return this._hashMap.get(b)};e._instance=null;return e}();c.IsoMapData=f;f.prototype.__class__="egret.IsoMapData"})(egret||(egret={}));
(function(c){var f=function(c){function d(b,a,d){void 0===a&&(a=!1);void 0===d&&(d=!1);c.call(this,b,a,d)}__extends(d,c);d.ISO_MAP_MOVING_START="isoMapMovingStart";d.ISO_MAP_RENDER_CHANGED="isoMapRenderChanged";d.ISO_MAP_PROPERTY_CHANGED="isoMapPropertyChanged";d.ISO_MAP_TILE_CLICK="isoMapTileClick";return d}(c.Event);c.IsoMapEvent=f;f.prototype.__class__="egret.IsoMapEvent"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.ALL="all";c.VIEW="view";c.RENDER="render";return c}();c.PathPolicyType=f;f.prototype.__class__="egret.PathPolicyType"})(egret||(egret={}));
(function(c){var f=function(){function e(){}e.getPoint2D=function(d){var b=d.x,a=d.z;return new c.Point(b-a,d.y*e.Y_CORRECT+(b+a)/2)};e.getPoint3D=function(d,b){void 0===b&&(b=null);var a=d.x/2,e=d.y,f=e+a,a=e-a;b||(b=new c.Point3D);b.x=f;b.y=0;b.z=a;return b};e.getDepth=function(c){return 0.866*(c.x+c.z)-0.707*c.y};e.drawTiles=function(d,b,a,g,f,q,n,l){void 0===f&&(f=6710886);void 0===q&&(q=0.5);void 0===n&&(n=1);void 0===l&&(l=!0);var h=[],k=g/2,m=2*g,p=Math.ceil(a/g),r=Math.ceil(b/m);0==b%m&&r++;
0==a%g&&p++;b=0;a=null;for(var s=0,t=0,v=0,x=0;x<p;x++){h[b]=[];h[b+1]=[];for(var w=0;w<r;w++)s=w*m,t=x*g,a=e.getTile(g,b,w,new c.Point(s,t),f,q,n,l),d.addChild(a),h[b][w]=a,s+=g,t+=k,v=b+1,a=e.getTile(g,v,w,new c.Point(s,t),f,q,n,l),d.addChild(a),h[v][w]=a;b+=2}return h};e.getTile=function(d,b,a,e,f,q,n,l){void 0===f&&(f=6710886);void 0===q&&(q=0.5);void 0===n&&(n=1);void 0===l&&(l=!0);d=new c.IsoTile(d,f,q,0,n,l);d.line=b;d.column=a;d.point=e;return d};e.get8Nodes=function(d,b,a,g,f,q,n){void 0===
q&&(q=!1);void 0===n&&(n=!1);e._vectorNodes8.length=0;var l=d.row,h=d.column,k=l-1,m=l+1,p=h-1,r=h+1;e._vector8[0]=l;e._vector8[1]=p;e._vector8[2]=k;e._vector8[4]=l-2;e._vector8[5]=h;e._vector8[6]=k;e._vector8[8]=l;e._vector8[9]=r;e._vector8[10]=m;e._vector8[12]=l+2;e._vector8[13]=h;e._vector8[14]=m;0==l%2?(e._vector8[3]=p,e._vector8[7]=h,e._vector8[11]=h,e._vector8[15]=p):(e._vector8[3]=h,e._vector8[7]=r,e._vector8[11]=r,e._vector8[15]=h);var s=null,l=a.length,h=a[0].length,t=0,k=d.point3D;b=b.point3D;
for(var v=null,m=d.size,p=d.g,r=t=s=0;16>r;r+=2)s=e._vector8[r+1],t=e._vector8[r],0<=t&&t<l&&0<=s&&s<h&&(s=a[t][s])&&!s.flag&&void 0!=g[s.type]&&(v=s.point3D,t=q?m:c.DimensionUtil.distance3D(v,k),s.preNode=d,s.g=p+t,s.h=c.DimensionUtil.distance3D(v,b),n&&(s.h/=2),f&&0<s.factor&&(s.g*=s.factor),s.f=s.g+s.h,e._vectorNodes8.push(s),e.setFlag(s));return e._vectorNodes8};e.get8Nodes3=function(d,b,a,g){var f=d.row,q=d.column,n=f-1,l=f+1,h=q-1,k=q+1;e._vector8[0]=f;e._vector8[1]=h;e._vector8[2]=n;e._vector8[4]=
f-2;e._vector8[5]=q;e._vector8[6]=n;e._vector8[8]=f;e._vector8[9]=k;e._vector8[10]=l;e._vector8[12]=f+2;e._vector8[13]=q;e._vector8[14]=l;0==f%2?(e._vector8[3]=h,e._vector8[7]=q,e._vector8[11]=q,e._vector8[15]=h):(e._vector8[3]=q,e._vector8[7]=k,e._vector8[11]=k,e._vector8[15]=q);var m=null,f=a.length,q=a[0].length,p=0,n=d.point3D;b=b.point3D;for(var r=null,l=d.g,k=h=p=m=0;16>k;k+=2)m=e._vector8[k+1],p=e._vector8[k],0<=p&&p<f&&0<=m&&m<q&&(m=a[p][m])&&!m.flag&&void 0!=g[m.type]&&(r=m.point3D,p=c.DimensionUtil.distance3D(r,
n),m.preNode=d,m.g=l+p,m.h=c.DimensionUtil.distance3D(r,b),m.f=m.g+m.h,e._vectorNodes8[h]=m,h++,e.setFlag(m),e.setUncheckedNode(m));e._vectorNodes8.length=h;return e._vectorNodes8};e.getNeerNodeByType=function(d,b,a,g,f,q){void 0===f&&(f=!0);void 0===q&&(q=!1);if(!(a&&a.length&&a[0]&&a[0].length))return c.LogManager.error(e,"\u5730\u56fe\u8282\u70b9\u6570\u636e\u4e3a\u7a7a\u6216\u7a7a\u6570\u7ec4:nodes = "+a),null;for(var n=null,l=new c.HashMap,h=[],k=a.length*a[0].length,m=0,p=g.length,r=new c.HashMap,
s=[],t=0;t<p;t++)r.put(g[t],!0),s[g[t]]=!0;for(var t=Number.POSITIVE_INFINITY,v=null,x=0,w=0,n=0,x=null;!r.containsKey(d.type);){m++;if(m>k){c.LogManager.error(e,"\u5730\u56fe\u8282\u70b9\u6570\u7ec4\u6570\u636e\u6709\u8bef\uff0c\u5df2\u8fbe\u5230\u6700\u5927\u67e5\u627e\u6b21\u6570\uff0c\u65e0\u6cd5\u67e5\u627e\u6700\u8fd1\u7684\u8282\u70b9: types = "+g);break}l.put(d,!0);n=e.get8Nodes(d,b,a,s,f,q);w=h.length;p=n.length;c.ArrayUtil.quickSortOn2(n,"f",0,p-1);for(var z=0;z<p;z++)d=n[z],x=d.f,r.containsKey(d.type)&&
x<t&&(v=d,t=x),h.push(n[z]);if(v)break;p=h.length;for(z=w;z<p;z++)if(n=z-1,d=h[z],-1<n)for(;h[n].f<d.f&&!(x=h[n],h[n]=d,h[n+1]=x,n--,0>n););d=h.pop();if(!d)break}return v};e.getNeerNodeByType2=function(d,b,a,g,f,q){void 0===f&&(f=!0);void 0===q&&(q=!1);if(!(a&&a.length&&a[0]&&a[0].length))return c.LogManager.error(e,"\u5730\u56fe\u8282\u70b9\u6570\u636e\u4e3a\u7a7a\u6216\u7a7a\u6570\u7ec4:nodes = "+a),null;for(var n=null,l=d,h=a.length*a[0].length,k=0,m=g.length,p=[],r=0;r<m;r++)p[g[r]]=!0;p[d.type]=
!0;d=[];for(r=0;r<g.length;r++)d[g[r]]=!0;for(var r=Number.POSITIVE_INFINITY,s=null,t=0,m=0,n=null;void 0==d[l.type];){k++;if(k>h){c.LogManager.error(e,"\u5730\u56fe\u8282\u70b9\u6570\u7ec4\u6570\u636e\u6709\u8bef\uff0c\u5df2\u8fbe\u5230\u6700\u5927\u67e5\u627e\u6b21\u6570\uff0c\u65e0\u6cd5\u67e5\u627e\u6700\u8fd1\u7684\u8282\u70b9: types = "+g);break}e.setFlag(l);n=e.get8Nodes(l,b,a,p,f,q);m=n.length;c.ArrayUtil.quickSortOn2(n,"f",0,m-1);for(var v=0;v<m;v++)l=n[v],t=l.f,void 0!=d[l.type]&&t<r&&(s=
l,r=t),e.setUncheckedNode(n[v]);if(s)break;for(v=e._uncheckedLength;v<e._uncheckedIndex;v++)if(m=v-1,l=e._uncheckedMap[v],-1<m)for(;e._uncheckedMap[m].f<l.f&&!(n=e._uncheckedMap[m],e._uncheckedMap[m]=l,e._uncheckedMap[m+1]=n,m--,0>m););l=e.getUncheckedNode();if(!l)break}e._typeMap.clear();e.resetFlag();e.resetUnchecked();return s};e.optimizePath=function(c,b,a,g){void 0===g&&(g=0);if(3>g)return c;var f=e._optimizeNodes1,q=0,n=q=null,l=0,h=null;f.push(c[0]);g--;for(var k=1;k<g;k++)h=c[l],q=c[k],n=
c[k+1],e.isLineNode(h,q,n)||(f.push(q),l=k);f.push(c[g]);q=f.length;if(2<q){var m=e._optimizeNodes2;g=q-1;l=0;m.push(f[0]);var p=q-2,r=!1;a:for(;l<p;){r=!1;for(k=g;k>l;k--)if(h=f[l],n=f[k],e.isCrossNode(h,n,b,a)){r=!0;for(n=k;n<=g;n++)m.push(f[n]);f=m;q=f.length;if(3>=q)break a;else{g=l+1;g>=q&&(g=q-1);m=m!=e._optimizeNodesA?e._optimizeNodesA:e._optimizeNodesB;for(n=m.length=0;n<=g;n++)m.push(f[n]);g=q-1;p=q-2;k=0}}l++;!r&&l<q&&m.push(f[l])}}g=c.length;for(k=0;k<g;k++)c[k]=null;l=0;b=f.length;for(a=
0;a<b;a++)c[l]=f[a],l++;e._optimizeNodes1.length=0;e._optimizeNodes2.length=0;return c};e.isLineNode=function(c,b,a){var e=a.row;if(b.row==e&&c.row==e)return!0;b=b.point2D;var f=a.point2D,q=c.point2D,e=b.x;c=f.x;a=q.x;if(e==c&&a==c)return!0;f=f.y;q=q.y;b=Math.atan2(f-b.y,c-e);c=Math.atan2(f-q,c-a);return b==c?!0:!1};e.isCrossNode=function(c,b,a,g){var f=c.row,q=c.column,n=b.row,l=b.column,h=0;f>n&&(h=f,f=n,n=h);q>l&&(h=q,q=l,l=h);var h=c.point2D,k=h.x,m=h.y,h=b.point2D;b=h.x-k;var h=h.y-m,p=Math.atan2(h,
b),r=null,s=null,t=null,v=Math.tan(p);b=k;h=m;m=k=0;p=Math.abs(p)==Math.PI/2;c=c.size;for(var x=c/2,m=null;f<=n;f++)for(var w=q;w<=l;w++)if(t=a[f][w],m=t.point2D,r=e.getHLineObject(m,c),s=e.getVLineObject(m,x),k=0==v?m.x:(r.y-h)/v+b,m=p?m.y:(s.x-b)*v+h,(k>=r.x1&&k<=r.x2||m>=s.y1&&m<=s.y2)&&-1==g.indexOf(t.type))return!1;return!0};e.getHLineObject=function(c,b){void 0===b&&(b=0);var a=c.x,g=c.y;e._hLineObj.x1=a-b;e._hLineObj.x2=a+b;e._hLineObj.y=g;return e._hLineObj};e.getVLineObject=function(c,b){void 0===
b&&(b=0);var a=c.y;e._vLineObj.x=c.x;e._vLineObj.y1=a-b;e._vLineObj.y2=a+b;return e._vLineObj};e.setFlag=function(c){c.flag||(e._flagMap[e._flagIndex]=c,e._flagIndex++,c.flag=!0,null!=e.callBack&&e.callBack(c,e._flagIndex))};e.resetFlag=function(){for(var c=null,b=0;b<e._flagIndex;b++)c=e._flagMap[b],c.flag=!1,e._flagMap[b]=null;e._flagIndex=0};e.setUncheckedNode=function(c){e._uncheckedMap[e._uncheckedIndex]=c;e._uncheckedIndex++};e.getUncheckedNode=function(){e._uncheckedIndex--;0>e._uncheckedIndex&&
(e._uncheckedIndex=0);e._uncheckedLength=e._uncheckedIndex;var c=e._uncheckedMap[e._uncheckedIndex];e._uncheckedMap[e._uncheckedIndex]=null;return c};e.resetUnchecked=function(){for(var c=0;c<e._uncheckedIndex;c++)e._uncheckedMap[c]=null;e._uncheckedIndex=0;e._uncheckedLength=0};e.callBack=null;e.callBackPath=null;e.callBackPathOptimize=null;e._hLineObj={};e._vLineObj={};e._vector8=Array(16);e._vectorNodes8=[];e._optimizeNodes1=[];e._optimizeNodes2=[];e._optimizeNodesA=[];e._optimizeNodesB=[];e._uncheckedMap=
[];e._uncheckedIndex=0;e._uncheckedLength=0;e._flagMap=[];e._flagIndex=0;e._typeMap=new c.HashMap;e.Y_CORRECT=Math.cos(-Math.PI/6)*Math.SQRT2;return e}();c.IsoUtil=f;f.prototype.__class__="egret.IsoUtil"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.loadRes()}__extends(d,e);var b=d.prototype;b.loadRes=function(){c.LoadManager.getInstance().loadResList("main equip wuhun clip soulRoad skill".split(" "),this.startGame)};b.startGame=function(){c.ApplicationManager.getInstance().initLayer();c.MainControl.getInstance().openLogin()};return d}(c.ApplicationRunner);c.GameRunner=f;f.prototype.__class__="egret.GameRunner"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.LEVEL="Level";c.RULE="Rule";c.BUBBLE_RATE="BubbleRate";c.PET="Pet";c.PET_LEVEL="PetLevel";c.PROP="Prop";c.MONSTER="Monster";c.DIALOG="Dialog";c.ENTER_POINT="EnterPoint";c.NPC="Npc";c.NPC_ARMY="NpcArmy";c.NPC_MONSTER="NpcMonster";c.NPC_ROLE="NpcRole";c.SCENE="Scene";c.ROLE_BORN_POINT="RoleBornPoint";return c}();c.LocalDataFileName=f;f.prototype.__class__="egret.LocalDataFileName"})(egret||(egret={}));
(function(c){var f=function(){function e(){this.COUNT_ELEMENT_CACHE={ElementMonster:6,ElementSkill:5,ElementEffect:5,ElementGoods:8,ElementMageNormalSkill:3,PlayerAnimal:2,PlayerWarrior:2,PlayerMage:2,PlayerBowman:2};this._sceneData=this._elementFlagMap=this._elementCache=null;this._elementCache=new c.HashMap;this._elementFlagMap=new c.HashMap;this._sceneData=c.dataManager().sceneData}var d=e.prototype;e.getInstance=function(){e._instance||(e._instance=new e);return e._instance};d.getElement=function(b){var a=
this.getElementCacheArray(this.getElementType(b)),c=null;0<a.length?(c=a.pop(),this._elementFlagMap.remove(c.hashCode)):c=new b;return c};d.recoverElement=function(b){if(!b)c.LogManager.error(this,"\u56de\u6536\u573a\u666f\u5143\u7d20element\u4e3a\u7a7a");else if(this._elementFlagMap.containsKey(b.hashCode))c.LogManager.error(this,"\u91cd\u590d\u56de\u6536\u573a\u666f\u5143\u7d20:element = "+b+",id = "+b.id);else if(!c.RoleManager.getInstance().isRoleInstance(b)){var a=this.getElementType(b),d=this.getElementCacheArray(a);
if(!this.COUNT_ELEMENT_CACHE[a])throw c.LogManager.error(this,"\u672a\u914d\u7f6e\u573a\u666f\u5143\u7d20\u7f13\u5b58\u6570\u91cf type = "+a),Error("\u672a\u914d\u7f6e\u573a\u666f\u5143\u7d20\u7f13\u5b58\u6570\u91cf type = "+a);d.length<this.COUNT_ELEMENT_CACHE[a]?(d.push(b),this._elementFlagMap.put(b.hashCode,!0)):(a=d.indexOf(b),-1!=a&&d.splice(a,1),this._elementFlagMap.remove(b.hashCode),b.destroy())}};d.getElementCacheArray=function(b){var a=this._elementCache.get(b);a||(a=[],this._elementCache.put(b,
a));return a};d.getElementType=function(b){var a=null;if(b==c.PlayerAnimal||b instanceof c.PlayerAnimal)a=e.ELEMENT_PLAYER_ANIMAL;else if(b==c.PlayerWarrior||b instanceof c.PlayerWarrior)a=e.ELEMENT_PLAYER_WARRIOR;else if(b==c.PlayerMage||b instanceof c.PlayerMage)a=e.ELEMENT_PLAYER_MAGE;else if(b==c.PlayerBowman||b instanceof c.PlayerBowman)a=e.ELEMENT_PLAYER_BOWMAN;else if(b==c.ElementMonster||b instanceof c.ElementMonster)a=e.ELEMENT_MONSTER;else if(b==c.ElementSkill||b instanceof c.ElementSkill)a=
e.ELEMENT_SKILL;else if(b==c.ElementMageNormalSkill||b instanceof c.ElementMageNormalSkill)a=e.ELEMENT_MAGE_NORMAL_SKILL;else if(b==c.ElementEffect||b instanceof c.ElementEffect)a=e.ELEMENT_EFFECT;else if(b==c.ElementGoods||b instanceof c.ElementGoods)a=e.ELEMENT_GOODS;return a};e._instance=null;e.ELEMENT_PLAYER="ElementPlayer";e.ELEMENT_MONSTER="ElementMonster";e.ELEMENT_EFFECT="ElementEffect";e.ELEMENT_SKILL="ElementSkill";e.ELEMENT_GOODS="ElementGoods";e.ELEMENT_MAGE_NORMAL_SKILL="ElementMageNormalSkill";
e.ELEMENT_PLAYER_ANIMAL="PlayerAnimal";e.ELEMENT_PLAYER_WARRIOR="PlayerWarrior";e.ELEMENT_PLAYER_MAGE="PlayerMage";e.ELEMENT_PLAYER_BOWMAN="PlayerBowman";e.ELEMENT_COLLECT_GOODS="ElementCollectGoods";return e}();c.SceneElementManager=f;f.prototype.__class__="egret.SceneElementManager"})(egret||(egret={}));(function(c){var f=function(c){function d(){c.call(this)}__extends(d,c);return d}(c.SceneElementLo);c.MonsterLo=f;f.prototype.__class__="egret.MonsterLo"})(egret||(egret={}));
(function(c){var f=function(c){function d(){c.call(this)}__extends(d,c);return d}(c.SceneElementLo);c.RoleBornPointLo=f;f.prototype.__class__="egret.RoleBornPointLo"})(egret||(egret={}));(function(c){var f=function(){return function(){this.rows=this.columns=this.height=this.width=this.gridSize=this.pieceHeight=this.pieceWidth=this.id=0;this.elements=this.nodeTypes=null}}();c.SceneEditLo=f;f.prototype.__class__="egret.SceneEditLo"})(egret||(egret={}));
(function(c){var f=function(){function e(){this.mapId=this.id=0;this.name="";this.bornPoint=0;this.coorPoint=null;this.visible=this.enabled=this.type=this.area=0;this._idString=this._point=null}var d=e.prototype;Object.defineProperty(d,"point",{get:function(){if(!this._point){var b=this.coorPoint.split(",");this._point=new c.Point(b[0],b[1])}return this._point},enumerable:!0,configurable:!0});Object.defineProperty(d,"idString",{get:function(){this._idString||(this._idString=this.id+"");return this._idString},
enumerable:!0,configurable:!0});return e}();c.SceneLo=f;f.prototype.__class__="egret.SceneLo"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.JSON=".json";c.XML=".xml";c.TXT=".txt";c.JPG=".jpg";c.PNG=".png";c.SWF=".swf";c.EDF=".edf";c.MVDF=".mvdf";return c}();c.ExtensionType=f;f.prototype.__class__="egret.ExtensionType"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._sceneElementManager=this._sceneElementData=this._sceneData=null;this._monsters=[];this._otherElements=[];this._goodsList=[];this._goodsDataList=[];this._sceneData=c.dataManager().sceneData;this._sceneElementData=c.dataManager().sceneElementData;this._sceneElementManager=c.SceneElementManager.getInstance();this._elementRadius=c.SceneElementData.ARRIVE_ELEMENT_RADIUS}__extends(d,e);var b=d.prototype;b.initWindow=function(){e.prototype.initWindow.call(this);
this.addUpdateType(c.UpdateType.PLAYER_EXIT_SCENE,c.UpdateType.PLAYER_ENTER_SCENE,c.UpdateType.PLAYER_VO_CHANGED,c.UpdateType.COPY_MONSTER_BORN,c.UpdateType.DAMAGE_HP_CHANGE,c.UpdateType.CHANGE_SOULROAD,c.UpdateType.CHANGE_COPY,c.UpdateType.ADD_MONSTER)};b.initData=function(a){e.prototype.initData.call(this,a);this._sceneData.isChanged?(this._sceneData.isChanged=!1,a=c.LocalData.getInstance().getSceneLo(this._sceneData.cityId).bornPoint,(a=c.LocalData.getInstance().getRoleBornPointLo(a))&&this.gotoXY(a.point.x,
a.point.y)):(a=c.IsoMapData.getInstance().getData(this._sceneData.sceneId),this.gotoXY(a.width/4,3*a.height/4))};b.changeCopy=function(a){this.clearCopy();c.RoleManager.getInstance().changeSceneEffect();c.TimerManager.getInstance().addExecute(this.nextCopy,this,3E3,null,1);c.MainControl.getInstance().openLoading(a)};b.nextCopy=function(){c.SceneManager.getInstance().enterScene(this._sceneData.sceneType,this._sceneData.getNextSceneId());c.RoleManager.getInstance().enterSceneEffect();this.nextTurn()};
b.nextTurn=function(){c.TimerManager.getInstance().addExecute(function(){c.globalUpdateWindows([c.UpdateType.COPY_MONSTER_BORN])},null,3E3,null,1)};b.addEvents=function(){e.prototype.addEvents.call(this);this.arriveNaviPointHandler=this.sceneArriveNiviPoint};b.remove=function(){e.prototype.remove.call(this);this.arriveNaviPointHandler=null};b.globalUpdate=function(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];switch(a){case c.UpdateType.PLAYER_EXIT_SCENE:this.removePlayer(b[0]);break;
case c.UpdateType.PLAYER_ENTER_SCENE:this.renderElement(b[0]);break;case c.UpdateType.COPY_MONSTER_BORN:c.dataManager().roleSceneData.resetRoleData();c.RoleManager.getInstance().updateHp();var e=c.dataManager().roleSceneData.getRoleList();this._monsters.length=0;var d=this._sceneData.getArmies(),f;for(f in d)(b=this.renderMonster(d[f]))&&(this._monsters[f]=b),b.chaseArmies(e);c.RoleManager.getInstance().chaseArmies(d);break;case c.UpdateType.DAMAGE_HP_CHANGE:var d=b[0],e=b[1],b=b[2],l=this._isoMap.getLayerContainer(c.SceneLayerType.TIP_EFFECT);
for(f in d){var h=d[f].vo,k=this.getElement(h.idString);if(k){k.updateHp();e[f]||c.LogManager.debug(this,"damageValues[i]\u4e3a\u7a7a i = "+f);var m=65280;if(e[f].isDodge){var p=20,r="\u95ea\u907f";c.HPTweenManager.getInstance().tweenLine(l,h.x,h.y-50,-100,r,m,p)}else e[f].isCritical?(m=16711680,p=20,r="\u66b4"+e[f].value):(m=16776960,p=16,r=e[f].value+""),c.HPTweenManager.getInstance().tween(l,h.x,h.y-50,b[f],200,r,m,p);0>=h.hp&&(c.RoleManager.getInstance().isRoleInstance(k)?(c.RoleManager.getInstance().removeRole(h.id),
c.RoleManager.getInstance().isDead&&(this._sceneData.sceneType=c.SceneType.NORMAL_COPY)):(this.removeElement(k),k instanceof c.PlayerAnimal&&k.master.removeAnimal()),this._sceneData.checkArmy()||(this.showGoods(h.x,h.y),this._sceneData.sceneType=c.SceneType.NORMAL_COPY))}c.dataManager().fightData.recoverDamage(e)}break;case c.UpdateType.CHANGE_SOULROAD:this.changeCopy("\u6597\u7f57\u4e4b\u8def");break;case c.UpdateType.CHANGE_COPY:this.changeCopy("\u5386\u7ec3\u526f\u672c");break;case c.UpdateType.ADD_ROLE:for(f in this._monsters)this._monsters[f].chaseArmies(c.dataManager().roleSceneData.getRoleList());
break;case c.UpdateType.ADD_MONSTER:d=this._sceneData.getArmies(!1),d.push(b[0]),c.RoleManager.getInstance().chaseArmies(d)}};b.showGoods=function(a,b){this._hasGoods||(c.RoleManager.getInstance().stopAll(),this._hasGoods=!0,this._goodsIndex=this._goodsList.length=0,this._goodsDataList=this._sceneData.getGoodsList(a,b),c.EnterFrameManager.getInstance().hasExecute(this._showGoodsId)||(this._showGoodsId=c.EnterFrameManager.getInstance().addExecute(this.showNextGoods,this,2)))};b.showNextGoods=function(){var a=
this.renderElementInternal(c.SceneElementType.GOODS,this._goodsDataList[this._goodsIndex],c.SceneLayerType.GOODS);a&&this._goodsList.push(a);this._goodsIndex++;c.MainControl.getInstance().coin+=Math.floor(3*Math.random())+1;c.MainControl.getInstance().updateMainView();this._goodsList.length==this._goodsDataList.length&&(c.EnterFrameManager.getInstance().removeExecute(this._showGoodsId),0<this._goodsList.length&&(this._goodsIndex=0,c.EnterFrameManager.getInstance().hasExecute(this._goodsLoopId)||(this._goodsLoopId=
c.EnterFrameManager.getInstance().addExecute(this.checkTakeGoods,this,6))))};b.checkTakeGoods=function(){return c.RoleManager.getInstance().role.isSkillStatus||c.RoleManager.getInstance().role.isMoving?!1:(c.EnterFrameManager.getInstance().removeExecute(this._goodsLoopId),this.navigateToElement(this._goodsList[this._goodsIndex].data.vo.id),!0)};b.clearTargets=function(a){if(a){for(var b in a)this.removeElement(a[b]);a.length=0}a==this._goodsList&&(this._hasGoods=!1)};b.clearCopy=function(){this.clearTargets(this._goodsList);
this.clearTargets(this._monsters)};b.removePlayer=function(a){this.removeElementById(a)};b.clearScene=function(){e.prototype.clearScene.call(this);this.clearCopy();c.EnterFrameManager.getInstance().removeExecute(this._goodsLoopId);c.EnterFrameManager.getInstance().removeExecute(this._showGoodsId)};b.sceneArriveNiviPoint=function(a){a&&0!=a.elementId&&(this.removeElementById(a.elementId+""),this._goodsIndex++,this._goodsList[this._goodsIndex]?this.navigateToElement(this._goodsList[this._goodsIndex].data.vo.id):
(this._hasGoods=!1,this._sceneData.addWinCount()))};b.getElementSpeed=function(){return this._sceneElementData.getElementSpeed()};b.recoverElement=function(a){this._sceneElementManager.recoverElement(a)};b.elementMovingEnd=function(a){a==this._role&&this._currentNaviItem&&this.checkArriveNaviPoint()};b.renderDynamicElements=function(a){};b.renderElement=function(a){this._elementsIdMap.containsKey(a.vo.idString)||this.renderElementInternal(c.SceneElementType.PLAYER_WARRIOR,a,c.SceneLayerType.BIOLOGY)};
b.renderMonster=function(a){var b=this.getElement(a.id);if(b)b.setData(a);else{var d;if(a.vo instanceof c.ScenePlayerVo)switch(a.vo.vocation){case c.VocationType.WARRIOR:d=c.SceneElementType.PLAYER_WARRIOR;break;case c.VocationType.MAGE:d=c.SceneElementType.PLAYER_MAGE;break;case c.VocationType.BOWMAN:d=c.SceneElementType.PLAYER_BOWMAN}else d=c.SceneElementType.MONSTER;b=this.renderElementInternal(d,a,c.SceneLayerType.BIOLOGY);b.setHPStyle(c.dataManager().pathData.getResourceUrl(c.PathData.PATH_IMAGES_SCENE,
"hp_red_bg.png"),c.dataManager().pathData.getResourceUrl(c.PathData.PATH_IMAGES_SCENE,"hp_red.png"),49,8);b.play(0,c.ActionType.PREPARE,c.ActionMovieClipDirectionType.DOWN)}return b};b.renderElementInternal=function(a,b,d){if(this._elementsIdMap.containsKey(b.id))return null;var e=null;switch(a){case c.SceneElementType.MONSTER:e=this._sceneElementManager.getElement(c.ElementMonster);break;case c.SceneElementType.GOODS:e=this._sceneElementManager.getElement(c.ElementGoods);break;case c.SceneElementType.PLAYER_WARRIOR:e=
this._sceneElementManager.getElement(c.PlayerWarrior);break;case c.SceneElementType.PLAYER_MAGE:e=this._sceneElementManager.getElement(c.PlayerMage);break;case c.SceneElementType.PLAYER_BOWMAN:e=this._sceneElementManager.getElement(c.PlayerBowman)}e&&(e.setData(b),this.addElement(e,d));return e};b.roleMoving=function(){e.prototype.roleMoving.call(this)};b.startMove=function(){e.prototype.startMove.call(this)};b.navigateToElement=function(a){this._currentNaviItem||(this._currentNaviItem=new c.SceneNavigatorDataItem);
this._currentNaviItem.elementId=a;(a=this.getElement(a+""))&&this.navigateTo(a.x,a.y)};b.navigateTo=function(a,b){this.checkArriveNaviPoint()||e.prototype.navigateTo.call(this,a,b)};b.getElementPoint=function(a){return(a=this.getElement(a))?new c.Point(a.x,a.y):new c.Point};b.nodeChanged=function(a){var b=a.currentNode;a=a.lastNode;b&&this._isoMap.setMapNodeType(b.row,b.column,c.PathType.OBSTACLE);a&&this._isoMap.setMapNodeType(a.row,a.column,c.PathType.WALKABLE);return!0};return d}(c.SceneDriver);
c.SceneWindow=f;f.prototype.__class__="egret.SceneWindow"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._barHeight=this._barWidth=this._percent=0;this._bg=new c.Image(null,0,0,!1);this.addChild(this._bg);this._bar=new c.Image(null,0,0,!1);this.addChild(this._bar)}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"width",{get:function(){return this._barWidth},enumerable:!0,configurable:!0});Object.defineProperty(b,"height",{get:function(){return this._barHeight},enumerable:!0,configurable:!0});Object.defineProperty(b,"percent",{get:function(){return this._percent},
set:function(a){this._percent!=a&&(1<a&&(a=1),0>a&&(a=0),this._percent=a,this.updateDisplayList())},enumerable:!0,configurable:!0});b.setStyle=function(a,b){this._bg.url=a;this._bar.url=b;this.setProperties(this._barWidth,this._barHeight)};b.setProperties=function(a,b){this._barWidth=a;this._barHeight=b;this._bg.width=a;this.updateDisplayList()};b.updateDisplayList=function(){this._bar.width=this._percent*this._barWidth};return d}(c.DisplayObjectContainer);c.HPProgressBar=f;f.prototype.__class__=
"egret.HPProgressBar"})(egret||(egret={}));
var Main=function(c){function f(){c.call(this);this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(f,c);var e=f.prototype;e.onAddToStage=function(c){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this);egret.Injector.mapClass("egret.gui.IAssetAdapter",AssetAdapter);RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);RES.loadConfig("resource/resource.json","resource/")};e.onConfigComplete=function(c){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,
this.onConfigComplete,this);new egret.ApplicationConfig(this,egret.GameRunner)};return f}(egret.DisplayObjectContainer);Main.prototype.__class__="Main";
(function(c){var f=function(){function e(){}e.init=function(d,b,a,g,f,q){void 0===b&&(b=null);void 0===a&&(a=5);void 0===g&&(g=5);void 0===f&&(f=15);void 0===q&&(q=15);d?(e._stage=d,e._tipContainer=b?b:e._stage,e._gapX=a,e._gapY=g,e._offsetX=f,e._offsetY=q,e._stage.addEventListener(c.TouchEvent.TOUCH_BEGIN,e.stageMouseDown,e)):c.LogManager.error(e,"\u821e\u53f0\u4e0d\u80fd\u4e3a\u7a7a:stage = "+d)};e.stageMouseDown=function(c){c=e._showHashMap.keys();for(var b=c.length,a=0;a<b;a++)e.hideTooltip(c[a])};
e.setTooltip=function(d,b){e._stage?d?b?"string"==typeof b||b instanceof c.DisplayObject?(e._hashMap.containsKey(d)&&e.removeTooltip(d),e._hashMap.put(d,b),d.addEventListener(c.TouchEvent.TOUCH_OVER,e.targetMouseOver,e)):c.LogManager.error(e,"\u65e0\u6548\u7684tooltip\u5bf9\u8c61:tooltip = "+b):e.removeTooltip(d):c.LogManager.error(e,"target\u4e0d\u80fd\u4e3a\u7a7a: target = "+d):c.LogManager.error(e,"\u672a\u521d\u59cb\u5316\u6570\u636e\uff0c\u8bf7\u8c03\u7528init()\u65b9\u6cd5\u521d\u59cb\u5316\u6570\u636e")};
e.removeTooltip=function(d){if(d){e._innerHashMap.remove(d);var b=e._hashMap.remove(d);e.hideTooltip(b);d.removeEventListener(c.TouchEvent.TOUCH_OVER,e.targetMouseOver,e)}else c.LogManager.error(e,"target\u4e0d\u80fd\u4e3a\u7a7a: target = "+d)};e.showTooltip=function(d,b,a){void 0===b&&(b=0);void 0===a&&(a=0);var g=null,f=null,g=null;e._showHashMap.containsKey(d)&&e.hideTooltip(d);if("string"==typeof d){g=e._textField;if(!g||g&&g.stage)g=new c.TextField,g.multiline=!0,g.size=16,e._textField||(e._textField=
g);g.text!=d&&(g.text=d)}else if(d instanceof c.DisplayObject)g=d;else{c.LogManager.error(e,"\u65e0\u6548\u7684tooltip\u5bf9\u8c61:tooltip = "+d);return}if("string"==typeof d){f=e._container;if(!f||f&&f.stage)f=new c.CoreSprite,f.touchChildren=!1,f.touchEnabled=!1,e._container||(e._container=f);g.parent!=f&&f.addChild(g);g.x=e._gapX;g.y=e._gapY;f.width=Math.floor(g.width+2*e._gapX);f.height=Math.floor(g.height+2*e._gapY);e._style?f.graphics.clear():(e.drawRect(f,f.width,f.height,0,0.6,!1),e.drawRectBorder(f,
f.width-1,f.height-1,3355443,1));g=f}e._showHashMap.put(d,g);g.parent!=e._tipContainer&&e._tipContainer.addChild(g);e.updatePosition(g,b,a)};e.hideTooltip=function(d){var b=e._showHashMap.remove(d);b&&(c.DisplayObjectUtil.remove(b),"string"==typeof d&&b!=e._container&&"destroy"in b&&b.destroy())};e.getTooltip=function(c){var b=e._hashMap.get(c);c==b&&"tooltip"in c&&(b=c.tooltip);b&&!e._innerHashMap.containsKey(b)&&e._innerHashMap.put(c,b);return b};e.getCurrentTooltip=function(c){return e._innerHashMap.get(c)};
e.setStyle=function(d){if(d){e._style=d;for(var b in e._showHashMap);}else c.LogManager.error(e,"style\u4e0d\u80fd\u4e3a\u7a7a: style = "+d)};e.targetMouseOver=function(d){if(!d.touchDown){d.stopPropagation();d=d.currentTarget;var b=e.getTooltip(d);b&&(e.showTooltip(b,e._stage.anchorX+e._offsetX,e._stage.anchorY+e._offsetY),d.addEventListener(c.TouchEvent.TOUCH_MOVE,e.targetMouseMove,e),d.addEventListener(c.TouchEvent.TOUCH_OUT,e.targetMouseOut,e),d.addEventListener(c.Event.REMOVED_FROM_STAGE,e.targetRemoveFromeStage,
e))}};e.targetMouseOut=function(c){e.targetRemoveFromeStage(c)};e.targetRemoveFromeStage=function(d){if(d=d.currentTarget){d.removeEventListener(c.TouchEvent.TOUCH_MOVE,e.targetMouseMove,e);d.removeEventListener(c.TouchEvent.TOUCH_OUT,e.targetMouseOut,e);d.removeEventListener(c.Event.REMOVED_FROM_STAGE,e.targetRemoveFromeStage,e);var b=e._hashMap.get(d);d==b&&"tooltip"in d&&(b=e._innerHashMap.remove(d));e.hideTooltip(b)}};e.targetMouseMove=function(c){c=c.currentTarget;var b=e._hashMap.get(c);c==
b&&(b=e._innerHashMap.get(c));if(b)var a=e._showHashMap.get(b);a&&e.updatePosition(a,e._stage.anchorX+e._offsetX,e._stage.anchorY+e._offsetY)};e.updatePosition=function(c,b,a){void 0===a&&(a=0);c.width+b>e._stage.stageWidth&&(b-=2*e._offsetX+c.width);c.height+a>e._stage.stageHeight&&(a-=2*e._offsetY+c.height);b=Math.max(b,0);a=Math.max(a,0);c.x=b;c.y=a};e.drawRect=function(c,b,a,g,f,q){void 0===g&&(g=0);void 0===f&&(f=0);void 0===q&&(q=!1);c.graphics.clear();0!=b&&0!=a&&(q&&e.drawRectBorder(c,b,a,
g,f),c.graphics.beginFill(g,f),c.graphics.drawRect(0,0,b,a),c.graphics.endFill())};e.drawRectBorder=function(c,b,a,e,f,q){void 0===e&&(e=0);void 0===f&&(f=0);void 0===q&&(q=0);0!=b&&0!=a&&(c.graphics.lineStyle(q,e,f),c.graphics.drawRect(0,0,b,a))};e._hashMap=new c.HashMap;e._showHashMap=new c.HashMap;e._innerHashMap=new c.HashMap;e._textField=null;e._container=null;e._stage=null;e._style=null;e._tipContainer=null;e._gapX=5;e._gapY=5;e._offsetX=15;e._offsetY=15;return e}();c.TooltipManager=f;f.prototype.__class__=
"egret.TooltipManager"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.isCheckResource=this.directionSplit=this.isGhost=!0;this.flipY=this.autoLoadMultiParts=!1;this._actionMap=null;this._direction=c.ActionMovieClipDirectionType.UP;this._actionType=c.ActionType.PREPARE;this._shadow=null;this._isPlayed=!1;this._lastFrameIndex=this._frameIndexMaxManual=this._frameIndexMax=this._frameIndex=this._loop=this._loopCount=0;this._isStart=this._isEnd=!1;this._delay=100;this._shadowHeight=this._shadowWidth=this._frameRate=
0;this._ghostTarget=null;this._totalFrames=1;this._actionPartMap=this._callbackTargetMap=this._callbackMap=this._actionMovieClipData=null;this._hasActionVo=!1;this._totalFramesManual=this._topLineY=0;this._partTypes=this._partsCache=null;this._isClear=!1;this._playCallBack=null;this._actionMap=new c.HashMap;this._callbackMap=new c.HashMap;this._callbackTargetMap=new c.HashMap;this._actionPartMap=new c.HashMap;this._partsCache=[];this._actionMovieClipData=c.ActionMovieClipData.getInstance();this._partItem=
new c.ScriptItem;this.touchEnabled=this.touchChildren=!1}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"totalFramesManual",{get:function(){return this._totalFramesManual},set:function(a){if(this._totalFramesManual!=a){this._totalFramesManual=a;this._frameIndexMaxManual=this._totalFramesManual-1;for(var b in this._actionMap.content)this._actionMap.content[b].totalFramesManual=this._totalFramesManual}},enumerable:!0,configurable:!0});Object.defineProperty(b,"topLineY",{get:function(){var a=
this._actionMap.get(c.ActionPartType.BODY);return this._topLineY=a&&a.baseMovieClipVo?a.baseMovieClipVo.topLineY:-this.height},enumerable:!0,configurable:!0});Object.defineProperty(b,"direction",{get:function(){return this._direction},set:function(a){this._direction!=a&&-1!=a&&(this._direction=a,this.setBaseMovieClipVo(-1,this._direction),this.setLayer())},enumerable:!0,configurable:!0});Object.defineProperty(b,"actionType",{get:function(){return this._actionType},set:function(a){this._actionType!=
a&&(this._actionType=a,this.setBaseMovieClipVo(this._actionType))},enumerable:!0,configurable:!0});Object.defineProperty(b,"totalFrames",{get:function(){return this._totalFrames},enumerable:!0,configurable:!0});Object.defineProperty(b,"delay",{get:function(){return this._delay},enumerable:!0,configurable:!0});Object.defineProperty(b,"frameRate",{get:function(){return this._frameRate},set:function(a){this._frameRate!=a&&(this._frameRate=a,1>this._frameRate&&(this._frameRate=1),this._delay=Math.floor(1E3/
this._frameRate),this._isPlayed&&(this.stopMovie(),this.playMovie(this._frameIndex,this._loopCount)))},enumerable:!0,configurable:!0});Object.defineProperty(b,"isPlayed",{get:function(){return this._isPlayed},enumerable:!0,configurable:!0});Object.defineProperty(b,"frameIndex",{get:function(){return this._frameIndex},set:function(a){this._frameIndex!=a&&(this._frameIndex=a,this._frameIndex>this._frameIndexMax&&(this._frameIndex=this._frameIndexMax),0>this._frameIndex&&(this._frameIndex=0),this.updateFrame())},
enumerable:!0,configurable:!0});Object.defineProperty(b,"frameIndexMax",{get:function(){return this._frameIndexMax},enumerable:!0,configurable:!0});b.play=function(a,b,d,e,f,l,h,k){void 0===a&&(a=-1);void 0===b&&(b=-1);void 0===d&&(d=-1);void 0===e&&(e=0);void 0===f&&(f=null);void 0===l&&(l=null);void 0===h&&(h=null);void 0===k&&(k=null);this._playCallBack=f;this._playCallBackTarget=l;this._startPlayItem||(this._startPlayItem=new c.ScriptItem);this._startPlayItem.execute=h;this._startPlayItem.target=
k;this.setBaseMovieClipVo(b,d);this.playMovie(a,e)};b.stop=function(a,b,c){void 0===a&&(a=-1);void 0===b&&(b=-1);void 0===c&&(c=-1);this._isPlayed&&(this.stopMovie(),this.setBaseMovieClipVo(b,c),-1!=a&&(this.frameIndex=a))};b.setFrameHandler=function(a,b,d){void 0===b&&(b=null);void 0===d&&(d=null);a?this._frameItem||(this._frameItem=new c.ScriptItem):d=b=null;this._frameItem&&(this._frameItem.execute=a,this._frameItem.target=b,this._frameItem.params=d)};b.setPartTypes=function(a,b,d,e,f){void 0===
d&&(d=null);void 0===e&&(e=null);void 0===f&&(f=null);this._partItem.execute=b;this._partItem.target=d;if(this._partTypes!=a){this._partTypes=a;for(var l in this._actionMap.content){var h=this._actionMap.content[l];h.parent&&h.parent.removeChild(h);this._partsCache.push(h)}this._actionMap.clear();l=a.length;for(var k=0;k<l;k++){var m=a[k];(h=this._partsCache.pop())||(h=new c.ActionMovieClip2);h.totalFramesManual=this._totalFramesManual;this.addChild(h);this._actionMap.put(m,h)}this.setLayer()}a=null;
h=!0;l=this._partTypes.length;for(k=0;k<l;k++){m=this._partTypes[k];a=b.apply(d,[m]);var p=c.ActionMovieClipData.getInstance().getActionMovieClipVo(a),r=null!=p;this.directionSplit&&(r=r&&c.ActionMovieClipData.getInstance().hasDirectionTypeTexture(p,this._actionType,this._direction));if(r)this.setActionPart(m,p),h=!1;else if(this.setActionUrl(m,a,e,f),!this.autoLoadMultiParts&&this.isCheckResource)break}this.showGhost(h);this.isCheckResource&&!c.TimerManager.getInstance().hasExecute(this._partTimerId)&&
(this._partTimerId=c.TimerManager.getInstance().addExecute(this.checkPartResource,this,500))};b.checkPartResource=function(a){void 0===a&&(a=-1);-1==a&&(a=this._actionType);var b=null,d=!0;if(this.directionSplit){var e=this._partTypes.length,f=0;a:for(;f<e;f++)for(var b=this._partItem.execute.apply(this._partItem.target,[this._partTypes[f]]),l=this._actionMovieClipData.getActionMovieClipVo(b),h=null!=l,k=c.ActionMovieClipDirectionType.UP;k<=c.ActionMovieClipDirectionType.DOWN;k++)if(a!=this._actionType||
k!=this._direction)if(h=h&&this._actionMovieClipData.hasDirectionTypeTexture(l,a,k),!h){d=!1;c.ActionMovieClipManager.getInstance().loadActionMovieClipVo2(b,null,this,a,k);break a}}d&&(a<c.ActionType.ATTACK?(a++,this.checkPartResource(a)):c.TimerManager.getInstance().removeExecute(this._partTimerId))};b.setActionPart=function(a,b,d){d=this._actionMap.get(a);d||(d=new c.ActionMovieClip2,d.totalFramesManual=this._totalFramesManual,this.addChild(d),this._actionMap.put(a,d),this.setLayer());d.setActionMovieClipVo(b,
this._actionType,this._direction);d.setFrameIndex(this._frameIndex);if(b){this._hasActionVo=!0;var e=b=a=0,f=0,e=d.frameRate,f=d.totalFrames;0<e&&(a=e);0<f&&(b=f);0<a&&(this.frameRate=a);0<b&&(this._totalFrames=b,this._frameIndexMax=this._totalFrames-1,this._frameIndex>this._frameIndexMax&&(this._frameIndex=0));this.showGhost(!1)}else this._hasActionVo=this.checkActionVo(),this._hasActionVo||(this._totalFrames=d.totalFrames,this._frameIndexMax=this._totalFrames-1,this._delay=0,this.showGhost(!0));
this._frameIndex>this._frameIndexMax&&(this._frameIndex=this._frameIndexMax);this._isPlayed||this.play(this._frameIndex,this._actionType,this._direction,this._loopCount,this._playCallBack,this._playCallBackTarget);this.updateShadow()};b.checkActionVo=function(){for(var a in this._actionMap.content)if(this._actionMap.content[a].actionMovieClipVo)return!0;return!1};b.setActionUrl=function(a,b,d,e){void 0===d&&(d=null);void 0===e&&(e=null);this._isClear=!1;null!=d&&(this._callbackMap.put(b,d),this._callbackTargetMap.put(b,
e));this._actionPartMap.put(b,a);a=this._actionMovieClipData.getActionMovieClipVo(b);this.directionSplit?a&&this._actionMovieClipData.hasDirectionTypeTexture(a,this._actionType,this._direction)?this.loadComplete(b):c.ActionMovieClipManager.getInstance().loadActionMovieClipVo2(b,this.loadComplete,this):a?this.loadComplete(b):c.ActionMovieClipManager.getInstance().loadActionMovieClipVo(b,this.loadComplete,this)};b.loadComplete=function(a){var b=this._actionPartMap.remove(a);if(!this._isClear){var c=
this._actionMovieClipData.getActionMovieClipVo(a);(c&&c.actionType==this._actionType||!this._hasActionVo)&&this.setActionPart(b,c);this._isPlayed||this.play(this._frameIndex,this._actionType,this._direction,this._loopCount,this._playCallBack,this._playCallBackTarget);b=this._callbackMap.remove(a);a=this._callbackTargetMap.remove(a);null!=b&&b.apply(a)}};b.clear=function(a){void 0===a&&(a=!0);this._isClear=!0;this._callbackMap.clear();this._callbackTargetMap.clear();a&&this.stopMovie();for(var b in this._actionMap.content)this._actionMap.content[b].clear()};
b.getActionPart=function(a){return this._actionMap.get(a)};b.getActionVo=function(a){return(a=this._actionMap.get(a))?a.actionMovieClipVo:null};b.playMovie=function(a,b){void 0===a&&(a=-1);void 0===b&&(b=0);this._loopCount=b;this._loop=0;this._isEnd=!1;this._isPlayed?-1!=a&&(this._frameIndex!=a&&(this._frameIndex=a),this._frameIndex>this._frameIndexMax&&(this._frameIndex=0),this.updateFrame()):(this._isStart=!0,-1==a&&(a=this._frameIndex,a>this._frameIndexMax&&(a=0)),this._frameIndex=-1,this.frameIndex=
a,this._isStart=!0,this._hasActionVo&&(c.TimerManager.getInstance().hasExecute(this._playId)||(this._playId=c.TimerManager.getInstance().addExecute(this.frameExecute,this,this._delay)),this._isPlayed=!0))};b.stopMovie=function(){c.TimerManager.getInstance().removeExecute(this._playId);this._isPlayed=!1};b.updateShadow=function(){};b.frameExecute=function(){this._frameItem&&this._frameItem.execute&&this._frameItem.apply();this._lastFrameIndex=this._frameIndex;if(this._isEnd&&(this._isEnd=!1,this._loop++,
this._frameIndex=-1,0<this._loopCount&&this._loop>=this._loopCount)){this._frameIndex=this._lastFrameIndex;this.stopMovie();this.updateFrame();null!=this._playCallBack&&(this._playCallBack.apply(this._playCallBackTarget),this._playCallBack=null);return}0==this._frameIndex&&this._startPlayItem&&this._startPlayItem.execute&&this._startPlayItem.apply();this._frameIndex++;this.updateFrame();this._isStart=!1;var a=this._frameIndexMax;0<this._frameIndexMaxManual&&(a=this._frameIndexMaxManual);this._frameIndex>=
a&&(this._isEnd=!0)};b.destroy=function(){this._isDestroy||(this.stopMovie(),e.prototype.destroy.call(this))};b.updateFrame=function(a){for(var b in this._actionMap.content)this._actionMap.content[b].setFrameIndex(this._frameIndex)};b.showGhost=function(a){this.isGhost?(this._ghostTarget||(this._ghostTarget=new c.Bitmap,this._ghostTarget.cacheAsBitmap=!0,this.addChild(this._ghostTarget),this._ghostTarget.texture=d.ghostBmd,this._ghostTarget.y=-this._ghostTarget.height,this._ghostTarget.x=-this._ghostTarget.width/
2),this._ghostTarget.visible!=a&&(this._ghostTarget.visible=a)):this._ghostTarget&&(this._ghostTarget.parent&&this._ghostTarget.parent.removeChild(this._ghostTarget),this._ghostTarget.texture&&this._ghostTarget.texture.dispose(),this._ghostTarget=null)};b.setBaseMovieClipVo=function(a,b){void 0===a&&(a=-1);void 0===b&&(b=-1);if(-1!=a||-1!=b){-1!=a&&(this._actionType=a);-1!=b&&(this._direction=b,this.setLayer());var c=0,d=0,e=0,f=0,h;for(h in this._actionMap.content){var k=this._actionMap.content[h];
k.flipY=this.flipY;k.setBaseMovieClipVo(a,b);k.setFrameIndex(this._frameIndex);e=k.frameRate;f=k.totalFrames;0<e&&(c=e);0<f&&(d=f)}k&&(0<c&&(this.frameRate=c),0<d&&(this._totalFrames=d,this._frameIndexMax=this._totalFrames-1,this._frameIndex>this._frameIndexMax&&(this._frameIndex=0)),this.updateShadow())}};b.setLayer=function(){if(this._partTypes&&!(2>this._partTypes.length)){var a=null;this._direction==c.ActionMovieClipDirectionType.UP?a=c.ActionPartType.DIRECTION_UP:this._direction==c.ActionMovieClipDirectionType.UP_RIGHT||
this._direction==this._actionMovieClipData.getReverseDir(c.ActionMovieClipDirectionType.UP_RIGHT)?a=c.ActionPartType.DIRECTION_UP_RIGHT:this._direction==c.ActionMovieClipDirectionType.RIGHT||this._direction==this._actionMovieClipData.getReverseDir(c.ActionMovieClipDirectionType.RIGHT)?a=c.ActionPartType.DIRECTION_RIGHT:this._direction==c.ActionMovieClipDirectionType.DOWN_RIGHT||this._direction==this._actionMovieClipData.getReverseDir(c.ActionMovieClipDirectionType.DOWN_RIGHT)?a=c.ActionPartType.DIRECTION_DOWN_RIGHT:
this._direction==c.ActionMovieClipDirectionType.DOWN&&(a=c.ActionPartType.DIRECTION_DOWN);a||c.LogManager.debug(this,this._direction);for(var b=a.length,d=this.numChildren-1,e=null,f=0;f<b;f++)if(e=this._actionMap.get(a[f]))this.getChildIndex(e)!=d&&this.setChildIndex(e,d),d--}};d.ghostStyle=null;d.ghostBmd=null;d.SHADOW_SHAPE=null;return d}(c.CoreContainer);c.Avatar=f;f.prototype.__class__="egret.Avatar"})(egret||(egret={}));
(function(c){var f=function(){function e(){}e.getActionMovieClipVo=function(d,b){if(!d||!b)return c.LogManager.error(e,"getActionMovieClipVo()\u53c2\u6570\u4e0d\u80fd\u4e3a\u7a7a"),null;var a=new c.ActionMovieClipVo;a.defaultActionType=d.defaultActionType;a.defautlDirectionType=d.defautlDirectionType;for(var g in d.baseMovieClipVos)if(d.baseMovieClipVos[g]){a.baseMovieClipVos[g]=[];for(var f in d.baseMovieClipVos[g]){var q=d.baseMovieClipVos[g][f];if(q){var n=new c.BaseMovieClipVo;a.baseMovieClipVos[g][f]=
n;n.frameRate=q.frameRate;n.topLineY=q.topLineY;n.centerPoint.x=q.centerPoint.x;n.centerPoint.y=q.centerPoint.y;n.shadowWidth=q.shadowWidth;n.shadowHeight=q.shadowHeight;n.dataItems=[];for(var l in q.dataItems){var h=q.dataItems[l],k=new c.BaseMovieClipDataItem;k.x=h.x;k.y=h.y;if(h=b.getTexture(g+"_"+f+"_"+l))k.bitmapData=h;n.dataItems.push(k)}k.bitmapData&&(n.hasFrameTexture=!0)}else a.baseMovieClipVos[g][f]=null}}else a.baseMovieClipVos[g]=null;return a};e.getActionMovieClipVo2=function(d,b){if(!d||
!b)return c.LogManager.error(e,"getActionMovieClipVo()\u53c2\u6570\u4e0d\u80fd\u4e3a\u7a7a"),null;for(var a in d.baseMovieClipVos)for(var g in d.baseMovieClipVos[a]){var f=d.baseMovieClipVos[a][g];if(f){for(var q in f.dataItems){var n=f.dataItems[q];if(n){var l=b.getTexture(a+"_"+g+"_"+q);l&&(n.bitmapData=l)}}n.bitmapData&&(f.hasFrameTexture=!0)}}return d};return e}();c.ActionMovieClipUtil=f;f.prototype.__class__="egret.ActionMovieClipUtil"})(egret||(egret={}));
(function(c){var f=function(){function c(){this.y=this.x=0;this.ty=this.tx=NaN}c.prototype.toString=function(){return"[PassingPoint(x = "+this.x+", y = "+this.y+", tx = "+this.tx+", ty = "+this.ty+")]"};return c}();c.PassingPoint=f;f.prototype.__class__="egret.PassingPoint"})(egret||(egret={}));
(function(c){var f=function(e){function d(a,b,d,f,n,l,h){void 0===a&&(a=1E3);void 0===b&&(b=1E3);void 0===d&&(d=20);void 0===f&&(f=200);void 0===n&&(n=160);void 0===l&&(l=0);void 0===h&&(h=0);e.call(this,a,b,d,f,n,l,h);this.pathTypes=null;this.isMulitiClick=!0;this._colorHashMap=this._viewNodes=this._pathNodes=this._mapNodes=null;this._mapNodes=[];this._pathNodes=[];this._viewNodes=[];this.pathTypes=[];this._clickPoint=new c.Point}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"pathNodes",
{get:function(){return this._pathNodes},set:function(a){this._pathNodes=a},enumerable:!0,configurable:!0});Object.defineProperty(b,"mapNodes",{get:function(){return this._mapNodes},enumerable:!0,configurable:!0});b.setMapNodes=function(a){if(a&&a[0]){for(var b=a.length,d=a[0].length,e=null,f=null,l=null;this._mapNodes.length<b;)this._mapNodes.push([]);for(var h=0;h<b;h++){for(f=this._mapNodes[h];f.length<d;)f.push(new c.MapNode);for(var k=0;k<d;k++)e=f[k],e.point2D||(l=this.getIsoPoint(h,k),e.row=
h,e.column=k,e.point2D=l,e.point3D=c.IsoUtil.getPoint3D(e.point2D),e.depth=c.IsoUtil.getDepth(e.point3D)),e.type=a[h][k],e.size=this._isoSize,this.setTile(e)}this.initMap()}};b.setMapNodes2=function(a,b,d){var e=this._isoSize,f=e/2,l=2*e,e=Math.ceil(b/f),h=Math.ceil(a/l);0==a%l&&h++;0==b%f&&e++;for(f=b=a=null;this._mapNodes.length<e;)this._mapNodes.push([]);for(l=0;l<e;l++){for(b=this._mapNodes[l];b.length<h;)b.push(new c.MapNode);for(var k=0;k<h;k++)a=b[k],a.point2D||(f=this.getIsoPoint(l,k),a.row=
l,a.column=k,a.point2D=f,a.point3D=c.IsoUtil.getPoint3D(a.point2D),a.depth=c.IsoUtil.getDepth(a.point3D)),a.type=d,a.size=this._isoSize,this.setTile(a)}this.initMap()};b.setMapNodeType=function(a,b,c){this._mapNodes&&this._mapNodes[a]&&(a=this._mapNodes[a][b],a.type=c,this.setTile(a))};b.setTileTypeColor=function(a,b){void 0===b&&(b=0);this._colorHashMap||(this._colorHashMap=new c.HashMap);this._colorHashMap.put(a,b)};b.getMapNode=function(a,b){return-1<a&&a<this._mapNodes.length&&-1<b&&b<this._mapNodes[a].length?
this._mapNodes[a][b]:null};b.getNeerNode=function(a,b,d){if(0==this._mapNodes.length)return e.prototype.getNeerNode.call(this,a,b,d);var f=Number.POSITIVE_INFINITY,n=0,l=n=0,h=b.length,k=d.length,m=0,p=0,r=NaN,s=NaN,l=n=NaN,n=a.x/2,l=a.y;this._targetPoint3D.x=l+n;this._targetPoint3D.z=l-n;for(a=0;a<h;a++)if(m=b[a],!(0>m))for(var t=0;t<k;t++)if(p=d[t],!(0>p)&&(n=m%2,l=p%2,0==n&&0==l||1==n&&1==l))this._nodePoint.x=p*this._isoSize,this._nodePoint.y=m*this._halfSize,n=this._nodePoint.x/2,l=this._nodePoint.y,
this._neerPoint3D.x=l+n,this._neerPoint3D.z=l-n,n=c.DimensionUtil.distance3D(this._targetPoint3D,this._neerPoint3D),n<f&&(f=n,r=this._nodePoint.x,s=this._nodePoint.y);b=Math.round(s/this._halfSize);return this._mapNodes[b][r/this._isoSize2|0]};b.canCross=function(a,b){var c=this.getMapNode(a,b);return-1!=this.pathTypes.indexOf(c.type)};b.initMap=function(){e.prototype.initMap.call(this)};b.destroy=function(){this._isDestroy||e.prototype.destroy.call(this)};b.setTile=function(a){this._colorHashMap&&
this.setTileColor(a.row,a.column,this._colorHashMap.get(a.type))};b.addListeners=function(){e.prototype.addListeners.call(this);this._mapTileContainer.addEventListener(c.TouchEvent.TOUCH_TAP,this.mapTileContainerClick,this)};b.mapTileContainerClick=function(a){void 0===a&&(a=null);this._clickPoint.x=a.stageX;this._clickPoint.y=a.stageY;this.checkStartMove();this.dispatchEvent(new c.IsoMapEvent(c.IsoMapEvent.ISO_MAP_TILE_CLICK,!1,!1))};b.checkStartMove=function(a){void 0===a&&(a=!1);if(!this._isMapMoved){this._mapTileContainer.globalToLocal(this._clickPoint.x,
this._clickPoint.y,this._clickPoint);var b=this._clickPoint.x,d=this._clickPoint.y;if(a&&0<this._mapNodes.length&&(a=this.getIsoNode(b,d),a=this.getMapNode(a.row,a.column),!a||-1==this.pathTypes.indexOf(a.type)))return;this._currentMapX=b;this._currentMapY=d;this.dispatchEvent(new c.IsoMapEvent(c.IsoMapEvent.ISO_MAP_MOVING_START,!1,!1))}};b.mapContainerEnterFrame=function(a){e.prototype.mapContainerEnterFrame.call(this,a);this.isMulitiClick&&!this._isMapMoved&&300<c.TimeRecordManager.getInstance().getRelativeTime("checkStartMove")&&
(c.TimeRecordManager.getInstance().resetRelativeTime("checkStartMove"),this.checkStartMove(!0))};b.drawCurrentPath=function(){if(this._isShowPath){var a=null;this._pathPolicy==c.PathPolicyType.VIEW?a=this.viewRect:this._pathPolicy==c.PathPolicyType.RENDER&&(a=this.renderRect);a=this.getViewNodes(0,this._pathNodes,a);this.drawPath(a)}else this._pathShape.graphics.clear()};b.getViewNodes=function(a,b,c){this._viewNodes.length=0;for(var d=b.length,e=null;a<d&&(e=b[a],this._viewNodes.push(e),!c||c.containsPoint(e.point2D));a++);
return this._viewNodes};return d}(c.IsoMapDriver);c.IsoMap=f;f.prototype.__class__="egret.IsoMap"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.CONSTANT_VELOCITY="constantVelocity";c.FACTOR="factor";return c}();c.MapMoveType=f;f.prototype.__class__="egret.MapMoveType"})(egret||(egret={}));
(function(c){(function(f){var e=function(d){function b(){d.call(this);this.__s=egret.gui.setProperties;this.__s(this,["height","width"],[960,640]);this.elementsContent=[this.imgMask_i(),this.imgBg_i(),this.__3_i(),this.item_i(),this.txtName_i(),this.txtQuality_i(),this.txtDesc_i(),this.txtAttr_i(),this.__4_i(),this.lineAttr_i()];this.states=[new egret.gui.State("normal",[]),new egret.gui.State("disabled",[])]}__extends(b,d);var a=b.prototype;Object.defineProperty(a,"skinParts",{get:function(){return b._skinParts},
enumerable:!0,configurable:!0});a.__4_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["scale9Grid","source","width","x","y"],[egret.gui.getScale9Grid("57,0,100,5"),"img_line1_png",350,134,349]);return a};a.imgBg_i=function(){var a=new egret.gui.UIAsset;this.imgBg=a;this.__s(a,"height scale9Grid source width x y".split(" "),[246,egret.gui.getScale9Grid("30,20,14,29"),"bg_tips_png",400,112,220]);return a};a.imgMask_i=function(){var a=new egret.gui.UIAsset;this.imgMask=a;this.__s(a,["height","scale9Grid",
"source","width"],[960,egret.gui.getScale9Grid("4,4,24,24"),"bg_19_png",640]);return a};a.item_i=function(){var a=new egret.BagItem;this.item=a;this.__s(a,["height","skinName","width","x","y"],[73,c.bag.BagItemSkin,73,143,255]);return a};a.lineAttr_i=function(){var a=new egret.gui.UIAsset;this.lineAttr=a;this.__s(a,["scale9Grid","source","width","x","y"],[egret.gui.getScale9Grid("57,0,100,5"),"img_line1_png",350,134,449]);return a};a.__3_i=function(){var a=new egret.gui.UIAsset;this.__s(a,"height scale9Grid source width x y".split(" "),
[100,egret.gui.getScale9Grid("4,4,4,4"),"bg_20_png",360,131,241]);return a};a.txtAttr_i=function(){var a=new egret.gui.Label;this.txtAttr=a;this.__s(a,"height size text textAlign textColor width x y".split(" "),[165,24,"\u9053\u5177\u5c5e\u6027","left",4112203,354,140,472]);return a};a.txtDesc_i=function(){var a=new egret.gui.Label;this.txtDesc=a;this.__s(a,"height size text textAlign width x y".split(" "),[83,24,"\u9053\u5177\u63cf\u8ff0","left",354,135,370]);return a};a.txtName_i=function(){var a=
new egret.gui.Label;this.txtName=a;this.__s(a,"size text textAlign width x y".split(" "),[24,"\u5ce8\u7709\u523a","left",205,227,261]);return a};a.txtQuality_i=function(){var a=new egret.gui.Label;this.txtQuality=a;this.__s(a,"size text textAlign width x y".split(" "),[24,"\u54c1\u8d28\uff1a\u767d\u8272","left",163,227,296]);return a};b._skinParts="imgMask imgBg item txtName txtQuality txtDesc txtAttr lineAttr".split(" ");return b}(egret.gui.Skin);f.ItemTipsSkin=e;e.prototype.__class__="ui.item.ItemTipsSkin"})(c.item||
(c.item={}))})(ui||(ui={}));
(function(c){(function(c){var e=function(c){function b(){c.call(this);this.__s=egret.gui.setProperties;this.__s(this,["height","width"],[960,640]);this.elementsContent=[this.imgBg_i(),this.btnStart_i()];this.states=[new egret.gui.State("normal",[]),new egret.gui.State("disabled",[])]}__extends(b,c);var a=b.prototype;Object.defineProperty(a,"skinParts",{get:function(){return b._skinParts},enumerable:!0,configurable:!0});a.imgBg_i=function(){var a=new egret.gui.UIAsset;this.imgBg=a;this.__s(a,["height",
"source","width","x","y"],[1400,"bgLogin_jpg",800,-80,-213]);return a};a.btnStart_i=function(){var a=new egret.gui.UIAsset;this.btnStart=a;this.__s(a,["source","x","y"],["btnStart_png",181,811]);return a};b._skinParts=["imgBg","btnStart"];return b}(egret.gui.Skin);c.LoginViewSkin=e;e.prototype.__class__="ui.main.LoginViewSkin"})(c.main||(c.main={}))})(ui||(ui={}));
(function(c){(function(c){var e=function(c){function b(){c.call(this);this.__s=egret.gui.setProperties;this.__s(this,["height","width"],[960,640]);this.elementsContent=[this.boxTop_i(),this.boxBottom_i()];this.states=[new egret.gui.State("normal",[]),new egret.gui.State("disabled",[])]}__extends(b,c);var a=b.prototype;Object.defineProperty(a,"skinParts",{get:function(){return b._skinParts},enumerable:!0,configurable:!0});a.__11_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],
["icon_coin_png",507,6]);return a};a.__12_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["scale9Grid","source","width","x","y"],[egret.gui.getScale9Grid("9,2,3,18"),"bg_18_png",102,392,9]);return a};a.__13_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["icon_achi_png",377,6]);return a};a.__14_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","width","x","y"],["bg_mainbottom_png",531,55,-83]);return a};a.__15_i=function(){var a=new egret.gui.UIAsset;this.__s(a,
["scale9Grid","source","width","x","y"],[egret.gui.getScale9Grid("11,1,68,7"),"main_bottomBar_png",499,67,-9]);return a};a.__16_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["lock_exppool_png",527,-143]);return a};a.__17_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["bg_5_png",537,-116]);return a};a.__18_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["label_exppool_png",526,-32]);return a};a.__3_i=function(){var a=new egret.gui.UIAsset;
this.__s(a,["scale9Grid","source","width","x","y"],[egret.gui.getScale9Grid("237,5,32,32"),"bg_top_4_png",640,1,0]);return a};a.__4_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["namebg_png",1,1]);return a};a.__5_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["frame_head_2_bg_png",6,10]);return a};a.__6_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["head_1_png",8,12]);return a};a.__7_i=function(){var a=new egret.gui.UIAsset;
this.__s(a,["source","x","y"],["frame_head_0_png",0,2]);return a};a.__8_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["level9_png",0,104]);return a};a.__9_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["source","x","y"],["word_zhandouli_png",84,5]);return a};a.boxBottom_i=function(){var a=new egret.gui.Group;this.boxBottom=a;this.__s(a,["x","y"],[0,960]);a.elementsContent=[this.__14_i(),this.__15_i(),this.__16_i(),this.btnSoulRoad_i(),this.btnWuhun_i(),this.btnBag_i(),
this.btnEquip_i(),this.btnSkill_i(),this.__17_i(),this.__18_i(),this.boxCon_i(),this.txtExp_i()];return a};a.boxCon_i=function(){var a=new egret.gui.Group;this.boxCon=a;this.__s(a,["height","width","x","y"],[200,200,507,-149]);return a};a.boxTop_i=function(){var a=new egret.gui.Group;this.boxTop=a;this.__s(a,["x","y"],[-1,0]);a.elementsContent=[this.__3_i(),this.__4_i(),this.__5_i(),this.__6_i(),this.__7_i(),this.txtName_i(),this.txtScore_i(),this.__8_i(),this.__9_i(),this.__10_i(),this.__11_i(),
this.__12_i(),this.__13_i(),this.txtCoin_i(),this.txtAchi_i()];return a};a.btnBag_i=function(){var a=new egret.gui.UIAsset;this.btnBag=a;this.__s(a,["source","x","y"],["btn_beibao_png",247,-85]);return a};a.btnEquip_i=function(){var a=new egret.gui.UIAsset;this.btnEquip=a;this.__s(a,["source","x","y"],["btn_renwu_png",338,-82]);return a};a.btnSkill_i=function(){var a=new egret.gui.UIAsset;this.btnSkill=a;this.__s(a,["source","x","y"],["btn_skill_png",427,-81]);return a};a.btnSoulRoad_i=function(){var a=
new egret.gui.UIAsset;this.btnSoulRoad=a;this.__s(a,["source","x","y"],["soulRoad_gray_png",0,-140]);return a};a.btnWuhun_i=function(){var a=new egret.gui.UIAsset;this.btnWuhun=a;this.__s(a,["source","x","y"],["btn_jineng_png",145,-84]);return a};a.__10_i=function(){var a=new egret.gui.UIAsset;this.__s(a,["scale9Grid","source","width","x","y"],[egret.gui.getScale9Grid("9,2,3,18"),"bg_18_png",102,522,9]);return a};a.txtAchi_i=function(){var a=new egret.gui.Label;this.txtAchi=a;this.__s(a,"fontFamily size text width x y".split(" "),
["Arial",15,"410",82,406,13]);return a};a.txtCoin_i=function(){var a=new egret.gui.Label;this.txtCoin=a;this.__s(a,"fontFamily size text width x y".split(" "),["Arial",15,"10311",82,537,13]);return a};a.txtExp_i=function(){var a=new egret.gui.Label;this.txtExp=a;this.__s(a,"fontFamily text textAlign width x y".split(" "),["\u5b8b\u4f53","3%","center",87,541,-85]);return a};a.txtName_i=function(){var a=new egret.gui.Label;this.txtName=a;this.__s(a,"size text textAlign width x y".split(" "),[20,"\u4e60\u6d69\u7136",
"center",70,4,79]);return a};a.txtScore_i=function(){var a=new egret.gui.Label;this.txtScore=a;this.__s(a,"fontFamily italic size text textAlign textColor width x y".split(" "),["Arial",!0,24,"31417","left",16771452,161,139,10]);return a};b._skinParts="txtName txtScore txtCoin txtAchi boxTop btnSoulRoad btnWuhun btnBag btnEquip btnSkill boxCon txtExp boxBottom".split(" ");return b}(egret.gui.Skin);c.MainViewSkin=e;e.prototype.__class__="ui.main.MainViewSkin"})(c.main||(c.main={}))})(ui||(ui={}));
(function(c){(function(f){var e=function(d){function b(){d.call(this);this.__s=egret.gui.setProperties;this.__s(this,["height","width"],[118,495]);this.elementsContent=[this.__3_i(),this.__4_i(),this.txtName_i(),this.txtDesc_i(),this.item_i()];this.states=[new egret.gui.State("normal",[]),new egret.gui.State("disabled",[])]}__extends(b,d);var a=b.prototype;Object.defineProperty(a,"skinParts",{get:function(){return b._skinParts},enumerable:!0,configurable:!0});a.__4_i=function(){var a=new egret.gui.UIAsset;
this.__s(a,["source","x","y"],["genius_bg_png",8,2]);return a};a.item_i=function(){var a=new egret.WuhunItem;this.item=a;this.__s(a,["height","skinName","width","x","y"],[80,c.wuhun.WuhunItemSkin,80,20,18]);return a};a.__3_i=function(){var a=new egret.gui.UIAsset;this.__s(a,"height scale9Grid source width x y".split(" "),[118,egret.gui.getScale9Grid("3,3,24,24"),"bg_21_png",495,0,0]);return a};a.txtDesc_i=function(){var a=new egret.gui.Label;this.txtDesc=a;this.__s(a,"fontFamily height size text textColor width x y".split(" "),
["\u7b49\u7ebf",57,22,"\u6280\u80fd\u63cf\u8ff0",526345,347,125,53]);return a};a.txtName_i=function(){var a=new egret.gui.Label;this.txtName=a;this.__s(a,"bold fontFamily text textColor x y".split(" "),[!0,"\u7b49\u7ebf","\u4e03\u4f24\u62f3 Lv.3",4144959,121,16]);return a};b._skinParts=["txtName","txtDesc","item"];return b}(egret.gui.Skin);f.SkillItemSkin=e;e.prototype.__class__="ui.skill.SkillItemSkin"})(c.skill||(c.skill={}))})(ui||(ui={}));
(function(c){var f=function(){function e(){}var d=e.prototype;e.getInstance=function(){return e._instance||(e._instance=new e)};d.loadMapData=function(b,a,d,e){void 0===d&&(d=null);void 0===e&&(e=null);RES.getResByUrl(b,function(b,f){var l=new c.SceneEditLo;c.ObjectUtil.copyProperties(b,l);c.IsoMapData.getInstance().setData(a,l);d&&d.apply(e)},null)};e._instance=null;return e}();c.ResoureManager=f;f.prototype.__class__="egret.ResoureManager"})(egret||(egret={}));
(function(c){var f=function(){function e(){this._loMap=this._hashMap=null;this._parseCompleted=!1;this._loMap=new c.HashMap;this._hashMap=new c.HashMap;this._loMap.put(c.LocalDataFileName.MONSTER,c.MonsterLo)}var d=e.prototype;Object.defineProperty(d,"parseCompleted",{get:function(){return this._parseCompleted},enumerable:!0,configurable:!0});e.getInstance=function(){return e._instance||(e._instance=new e)};d.parseData=function(){function b(){m++;if(m>=f.length)this._parseCompleted=!0;else{d=new c.HashMap;
k=f[m];this._hashMap.put(k,d);if(h=this._loMap.get(k)){e=this.getDataVector(c.getRes(k),h);RES.destroyRes(k);n=e.length;for(var p=0;p<n;p++)l=e[p],"id"in l?d.containsKey(l.id)?c.LogManager.error(this,"\u57fa\u7840\u6570\u636e\u6709\u8bef\uff0cid\u5b57\u6bb5\u91cd\u590d,fileName = "+k+",id = "+l.id):d.put(l.id,l):c.LogManager.error(this,"\u57fa\u7840\u6570\u636e\u6709\u8bef\uff0c\u627e\u4e0d\u5230id\u5b57\u6bb5 fileName = "+k)}else c.LogManager.error(this,"\u6587\u4ef6\u540d fileName = "+k+" \u672a\u6ce8\u518cLo\u7c7b");
c.EnterFrameManager.getInstance().removeExecute(a);a=c.EnterFrameManager.getInstance().addExecute(b,this,1)}}var a=c.EnterFrameManager.getInstance().addExecute(b,this,1),d=null,e=null,f=[],n=0,l=null,h=null,k;for(k in this._loMap.content)f.push(k);var m=-1};d.getDataVector=function(b,a){if(b){for(var d=[],e=b.length,f=null,n=0;n<e;n++){f=new a;d.push(f);for(var l in b[n])f[l]=b[n][l]}0==d.length&&c.LogManager.error(this,"\u672c\u5730\u6570\u636e\u6587\u4ef6\u6ca1\u6709\u6570\u636e\u9879"+a);return d}c.LogManager.error(this,
"\u627e\u4e0d\u5230\u672c\u5730\u6570\u636e\u6587\u4ef6"+a);return null};d.getLoById=function(b,a){void 0===a&&(a=0);var d=this.getHashMap(b);if(!d||!d.containsKey(a)){c.LogManager.error(this,"\u627e\u4e0d\u5230\u57fa\u7840\u6570\u636e: fileName = "+b+",id = "+a);var e=this._loMap.get(b);if(e)return new e}return d.get(a)};d.getHashMap=function(b){var a=this._hashMap.get(b);a||(c.LogManager.error(this,"\u627e\u4e0d\u5230\u57fa\u7840\u6570\u636e\u8868: fileName = "+b),a=new c.HashMap);return a};d.getMonsterLo=
function(b){return this.getLoById(c.LocalDataFileName.MONSTER,b)};d.getRoleBornPointLo=function(b){return this.getLoById(c.LocalDataFileName.ROLE_BORN_POINT,b)};d.getSceneLo=function(b){return this.getLoById(c.LocalDataFileName.SCENE,b)};e._instance=null;return e}();c.LocalData=f;f.prototype.__class__="egret.LocalData"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.EFFECT_01="effect_01";c.LEVEL_UP="levelUp";return c}();c.MovieName=f;f.prototype.__class__="egret.MovieName"})(egret||(egret={}));
(function(c){var f=function(){function e(){this._sceneData=this.scene=null;this._sceneData=c.dataManager().sceneData}var d=e.prototype;e.getInstance=function(){return e._instance||(e._instance=new e)};d.enterScene=function(b,a){void 0===a&&(a=-1);if(this._sceneData.sceneType==b&&this._sceneData.sceneId==a)throw Error("\u91cd\u590d\u8fdb\u5165\u5f53\u524d\u573a\u666f, type = "+b+", id = "+a);var d=null;switch(b){default:d=c.SceneWindow,this._sceneData.cityId=a}this.exitScene(!0);this._sceneData.sceneType=
b;this._sceneData.sceneId=a;this.scene||(this.scene=c.openWindow(d,!1),this.scene.scaleX=this.scene.scaleY=1.2,this.scene.y=-200);this.scene.loadData(a)};d.exitScene=function(b){void 0===b&&(b=!0);this.clearScene(b);c.closeWindow(this.scene);this.scene=null};d.clearScene=function(b){this.scene&&this.scene.clearScene()};d.moveElement=function(b,a,c){void 0===c&&(c=0);this.scene&&this.scene.moveElement(b+"",a,c)};d.gotoXY=function(b,a){void 0===a&&(a=0);this.scene&&this.scene.gotoXY(b,a)};e._instance=
null;return e}();c.SceneManager=f;f.prototype.__class__="egret.SceneManager"})(egret||(egret={}));(function(c){var f=function(c){function d(){c.apply(this,arguments);this.baseId=0}__extends(d,c);return d}(c.SceneDriverVo);c.SceneMonsterVo=f;f.prototype.__class__="egret.SceneMonsterVo"})(egret||(egret={}));
(function(c){var f=function(c){function d(b,a,d){void 0===a&&(a=!1);void 0===d&&(d=!1);c.call(this,b,a,d)}__extends(d,c);d.SCENE_ELEMENT_MOVING="sceneElementMoving";d.SCENE_ELEMENT_MOVING_END="sceneElementMovingEnd";d.SCENE_ELEMENT_PATH_CHANGED="sceneElementPathChanged";return d}(c.Event);c.SceneElementEvent=f;f.prototype.__class__="egret.SceneElementEvent"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.NONE=1;c.MOUNTED=2;c.FLYED=3;return c}();c.MountedType=f;f.prototype.__class__="egret.MountedType"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.LAYER_MOUSE_CONFIGS=[{touchEanbled:!1,touchChildren:!1},{touchEanbled:!1,touchChildren:!1},{touchEanbled:!1,touchChildren:!1},{touchEanbled:!1,touchChildren:!1},{touchEanbled:!1,touchChildren:!1}];c.BUFF_ABOVE=4;c.BUFF_BODY=3;c.ACTION=2;c.BUFF_BACKGROUND=1;c.BOTTOM=0;return c}();c.SceneElementLayerType=f;f.prototype.__class__="egret.SceneElementLayerType"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.extension=c.ExtensionType.JPG;this.rootPath="";this.MINI_MAP_NAME="miniMap";this._subPath=null;this._pieceHeight=this._pieceWidth=this._mapHeight=this._mapWidth=0;this._pieceRect=this._viewRectPoint=this._viewRect=this._renderRect=null;this._endColumn=this._endRow=this._startColumn=this._startRow=this._totalColumns=this._totalRows=0;this._miniImage=this._rcHashMap=this._queueLoader=this._pieceUrls=this._piecesAdded=this._pieces=null;this._pieceCountTotal=
this._pieceCount=0;this._miniPoint=null;this._miniScaleY=this._miniScaleX=1;this._miniRect=null;this.touchChildren=this.touchEnabled=!1;this._miniImage=new c.Image(null,0,0,!1,this,this.loadMiniComplete);this._container=new c.DisplayObjectContainer;this.addChild(this._container);this._renderRect=new c.Rectangle;this._pieceRect=new c.Rectangle;this._miniRect=new c.Rectangle;this._viewRectPoint=new c.Point;this._pieces=[];this._piecesAdded=[];this._pieceUrls=[];this._mapIds=[];this._rcHashMap=new c.HashMap;
this._mapCache=new c.HashMap;this._miniPoint=new c.Point;this._queueLoader=new c.QueueLoader(1,this,this.loadComplete,this.loadError,this.loadProgress,this.loadAbort)}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"mapHeight",{get:function(){return this._mapHeight},enumerable:!0,configurable:!0});Object.defineProperty(b,"mapWidth",{get:function(){return this._mapWidth},enumerable:!0,configurable:!0});Object.defineProperty(b,"renderRect",{get:function(){return this._renderRect},set:function(a){if(!a)this._renderRect.setEmpty(),
this.updateRender();else if(this._renderRect.x!=a.x||this._renderRect.y!=a.y||this._renderRect.width!=a.width||this._renderRect.height!=a.height)this._renderRect.x=a.x,this._renderRect.y=a.y,this._renderRect.width=a.width,this._renderRect.height=a.height,this.updateRender()},enumerable:!0,configurable:!0});b.setProperty=function(a,b,d,e){void 0===a&&(a=0);void 0===b&&(b=0);void 0===d&&(d=0);void 0===e&&(e=0);var f=["_mapWidth","_mapHeight","_pieceWidth","_pieceHeight"],l;for(l in arguments)0<arguments[l]&&
(this[f[l]]=arguments[l]);for(l in f)if(0>=this[f[l]]){c.LogManager.error(this,"\u53c2\u6570\u5e94\u5927\u4e8e0:"+f[l]+" = "+this[f[l]]);return}this._totalRows=Math.ceil(this._mapHeight/this._pieceHeight);this._totalColumns=Math.ceil(this._mapWidth/this._pieceWidth);this._pieceCountTotal=this._totalRows*this._totalColumns;f={resources:[]};for(l=0;l<this._totalRows;l++){this._pieces[l]?this._pieces[l].length=0:this._pieces[l]=[];this._pieceUrls[l]?this._pieceUrls[l].length=0:this._pieceUrls[l]=[];
for(var h=0;h<this._totalColumns;h++)this._pieceUrls[l][h]=this.rootPath+this._subPath+"/"+l+"_"+h+this.extension,f.resources.push({name:this._pieceUrls[l][h],type:RES.ResourceItem.TYPE_IMAGE,url:this._pieceUrls[l][h]})}RES.parseConfig(f)};b.initData=function(a){this._pieceCount=0;this._subPath=a.id+"";this.setProperty(a.width,a.height,a.pieceWidth,a.pieceHeight);this._miniImage.width=a.width;this._miniImage.height=a.height;this._miniImage.url=this.rootPath+this._subPath+"/"+a.id+this.extension;this.addChildAt(this._miniImage,
0)};b.renderMap=function(a,b){this._viewRect=a;this.renderRect=b};b.clearMap=function(){this._queueLoader.clear();this._rcHashMap.clear();this._piecesAdded.length=0;for(var a=null,b=this._pieces.length,c=0,d=0;d<b;d++)for(var c=this._pieces[d].length,e=0;e<c;e++)(a=this._pieces[d][e])&&a.parent&&a.parent.removeChild(a),this._pieces[d][e]=null;for(;0<this._container.numChildren;)this._container.removeChildAt(0);3<this._mapCache.size()&&this.removeCache(this._mapIds.shift());this._miniImage.content&&
(this._miniImage.content=null);this.renderRect=null};b.destroy=function(){this._isDestroy||e.prototype.destroy.call(this)};b.updateRender=function(){var a=this._renderRect.x,b=this._renderRect.y,c=b+this._renderRect.height,d=a+this._renderRect.width;this._startRow=b/this._pieceHeight|0;this._startColumn=a/this._pieceWidth|0;this._endRow=Math.ceil(c/this._pieceHeight);this._endColumn=Math.ceil(d/this._pieceWidth);this.addPieces(this._startRow,this._endRow,this._startColumn,this._endColumn);a=null;
b=this._piecesAdded.length;for(c=0;c<b;c++)a=this._piecesAdded[c],this._pieceRect.x=a.x,this._pieceRect.y=a.y,this._pieceRect.width=a.width,this._pieceRect.height=a.height,this._renderRect.intersects(this._pieceRect)||(a.parent&&a.parent.removeChild(a),this._piecesAdded.splice(c,1),b=this._piecesAdded.length,c--);this.drawBlurryArea()};b.addPieces=function(a,b,c,d){void 0===d&&(d=0);0>a&&(a=0);0>c&&(c=0);b>this._totalRows&&(b=this._totalRows);d>this._totalColumns&&(d=this._totalColumns);for(var e=
[],f=null,f=null;a<b;a++)for(var h=c;h<d;h++)(f=this._pieces[a][h])||(f=this.getCache(this._subPath,this._pieceUrls[a][h])),f?(this._pieces[a][h]=f,f.parent!=this._container&&(this._container.addChild(f),this._piecesAdded.push(f))):(f=this._pieceUrls[a][h],this._rcHashMap.containsKey(f)||(this._rcHashMap.put(f,[a,h]),e.push({url:f,i:a,j:h})));b=e.length;if(0<b){this._viewRect&&(this._viewRectPoint.x=this._viewRect.x+this._viewRect.width/2,this._viewRectPoint.y=this._viewRect.y+this._viewRect.height/
2,e.sort.apply(this,[this.sortPiece]));c=[];for(a=0;a<b;a++)c.push(e[a].url);this._queueLoader.addUrls(c)}};b.sortPiece=function(a,b){var d=new c.Point((a.j+0.5)*this._pieceWidth,(a.i+0.5)*this._pieceHeight),e=new c.Point((b.j+0.5)*this._pieceWidth,(b.i+0.5)*this._pieceHeight),d=c.Point.distance(d,this._viewRectPoint),e=c.Point.distance(e,this._viewRectPoint);return d<=e?-1:1};Object.defineProperty(b,"isLoadAll",{get:function(){return this._pieceCount>=this._pieceCountTotal},enumerable:!0,configurable:!0});
b.drawBlurryArea=function(){this.isLoadAll&&this._miniImage&&this._miniImage.parent&&this._miniImage.parent.removeChild(this._miniImage)};b.loadComplete=function(a,b,c){var d=this._rcHashMap.get(a);d&&(b=d[0],d=d[1],this._pieces[b][d]=c,c.x=d*this._pieceWidth,c.y=b*this._pieceHeight,this._container.addChild(c),this._piecesAdded.push(c),this._pieceCount++,this.addCache(this._subPath,a,c))};b.loadError=function(a){};b.loadProgress=function(a){};b.loadAbort=function(a,b){this._rcHashMap.remove(a)};b.loadMiniComplete=
function(a){};b.addCache=function(a,b,d){var e=this._mapCache.get(a);e||(e=new c.HashMap,this._mapCache.put(a,e),this._mapIds.push(a));e.put(b,d)};b.getCache=function(a,b){var c=this._mapCache.get(a);return c?c.get(b):null};b.removeCache=function(a){var b=this._mapCache.remove(a);if(b){a=this._mapIds.indexOf(a);-1<a&&this._mapIds.splice(a,1);for(var c in b.content)RES.destroyRes(b.get(c))}};return d}(c.CoreContainer);c.PieceMap2=f;f.prototype.__class__="egret.PieceMap2"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._layerHashMap=this._nameText=null;this._gapY=this._gapX=5;this._nameValue=null;this._defaultColor=16777215;this._defaultSize=20;this.touchEnabled=this.touchChildren=!1;this._layerHashMap=new c.HashMap;this._nameText=new c.TextField;this.show(this._nameText,this.layersCount);this.setName("Name");this.setNameTextFormat(this._defaultSize,this._defaultColor)}__extends(d,e);var b=d.prototype;Object.defineProperty(b,"nameText",{get:function(){return this._nameText},
enumerable:!0,configurable:!0});b.getLayerContainer=function(a){void 0===a&&(a=0);var b=this._layerHashMap.get(a);if(!b){b=new c.DisplayObjectContainer;this.addChild(b);this._layerHashMap.put(a,b);a=this._layerHashMap.keys();a.sort(c.ArrayUtil.numeric);for(var d=a.length,e=0;e<d;e++)this.setChildIndex(this._layerHashMap.get(a[e]),e);this.updateLayout()}return b};b.setName=function(a){a!=this._nameValue&&(this._nameValue=a,this._nameText.text=this._nameValue,this.updateLayout())};b.setNameTextFormat=
function(a,b){void 0===a&&(a=20);void 0===b&&(b=16777215);this._nameText.text=this._nameValue;this._nameText.size=a;this._nameText.textColor=b;this.updateLayout()};Object.defineProperty(b,"layersCount",{get:function(){return this.numChildren},enumerable:!0,configurable:!0});b.show=function(a,b,c,d,e){void 0===c&&(c=-1);void 0===d&&(d=NaN);void 0===e&&(e=NaN);b=this.getLayerContainer(b);isNaN(d)||(a.x=d);isNaN(e)||(a.y=e);-1==c&&(c=b.numChildren-1,0>c&&(c=0));a.parent!=b&&b.addChildAt(a,c);this.updateLayout()};
b.hide=function(a){a&&a.parent&&(a.parent.removeChild(a),this.updateLayout())};b.updateLayout=function(){for(var a=this.numChildren,b=0,c=0,d=null,e=null,f=0,h=0;h<a;h++){c=0;d=this.getChildAt(h);0==h?b-=d.height/2:(b-=d.height,b-=this._gapY);for(var f=d.numChildren,k=0;k<f;k++)e=d.getChildAt(k),e.x=c,e.y=-e.height/2,c+=e.width+this._gapX;d.y=b;d.x=-d.width/2}};return d}(c.CoreContainer);c.SceneElementNamePad=f;f.prototype.__class__="egret.SceneElementNamePad"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._hpText=new c.TextField;this._hpText.width=100;this._hpText.height=16;this._hpText.size=16;this._hpText.textAlign=c.HorizontalAlign.CENTER;this.addChild(this._hpText);this._progressBar=new c.HPProgressBar;this._progressBar.y=this._hpText.height;this._progressBar.setStyle(c.dataManager().pathData.getResourceUrl(c.PathData.PATH_IMAGES_SCENE,"hp_green_bg.png"),c.dataManager().pathData.getResourceUrl(c.PathData.PATH_IMAGES_SCENE,"hp_green.png"));
this.addChild(this._progressBar)}__extends(d,e);var b=d.prototype;b.setStyle=function(a,b,c,d){this._progressBar.setStyle(a,b);this._progressBar.setProperties(c,d);this._progressBar.x=(this._hpText.width-this._progressBar.width)/2};b.setProperty=function(a,b){a?(this._hpText.parent||this.addChild(this._hpText),this._hpText.text=a):this._hpText.parent&&this._hpText.parent.removeChild(this._hpText);this._progressBar.percent=b};return d}(c.CoreContainer);c.HPBar=f;f.prototype.__class__="egret.HPBar"})(egret||
(egret={}));
