var egret;
(function(c){c.egret_string_code={};c.egret_string_code[-1]="\u4e0d\u5b58\u5728\u7684stringId:{0}";c.egret_string_code[1E3]="Browser.isMobile\u63a5\u53e3\u53c2\u6570\u5df2\u7ecf\u53d8\u66f4\uff0c\u8bf7\u5c3d\u5feb\u8c03\u6574\u7528\u6cd5\u4e3a egret.MainContext.deviceType == egret.MainContext.DEVICE_MOBILE";c.egret_string_code[1001]="\u8be5\u65b9\u6cd5\u76ee\u524d\u4e0d\u5e94\u4f20\u5165 resolutionPolicy \u53c2\u6570\uff0c\u8bf7\u5728 docs/1.0_Final_ReleaseNote\u4e2d\u67e5\u770b\u5982\u4f55\u5347\u7ea7";c.egret_string_code[1002]=
"egret.Ticker\u662f\u6846\u67b6\u5185\u90e8\u4f7f\u7528\u7684\u5355\u4f8b\uff0c\u4e0d\u5141\u8bb8\u5728\u5916\u90e8\u5b9e\u4f8b\u5316\uff0c\u8ba1\u65f6\u5668\u8bf7\u4f7f\u7528egret.Timer\u7c7b\uff01";c.egret_string_code[1003]="Ticker#setTimeout\u65b9\u6cd5\u5373\u5c06\u5e9f\u5f03,\u8bf7\u4f7f\u7528egret.setTimeout";c.egret_string_code[1004]="ExternalInterface\u8c03\u7528\u4e86js\u6ca1\u6709\u6ce8\u518c\u7684\u65b9\u6cd5: {0}";c.egret_string_code[1005]="\u8bbe\u7f6e\u4e86\u5df2\u7ecf\u5b58\u5728\u7684blendMode: {0}";
c.egret_string_code[1006]="child\u4e0d\u5728\u5f53\u524d\u5bb9\u5668\u5185";c.egret_string_code[1007]="\u63d0\u4f9b\u7684\u7d22\u5f15\u8d85\u51fa\u8303\u56f4";c.egret_string_code[1008]="child\u672a\u88abaddChild\u5230\u8be5parent";c.egret_string_code[1009]="\u8bbe\u7f6e\u4e86\u5df2\u7ecf\u5b58\u5728\u7684\u9002\u914d\u6a21\u5f0f:{0}";c.egret_string_code[1010]="addEventListener\u4fa6\u542c\u51fd\u6570\u4e0d\u80fd\u4e3a\u7a7a";c.egret_string_code[1011]='BitmapText\u627e\u4e0d\u5230\u6587\u5b57\u6240\u5bf9\u5e94\u7684\u7eb9\u7406:"{0}"';
c.egret_string_code[1012]="egret.BitmapTextSpriteSheet\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528egret.BitmapFont\u4ee3\u66ff\u3002";c.egret_string_code[1013]="TextField.setFocus \u6ca1\u6709\u5b9e\u73b0";c.egret_string_code[1014]="Ease\u4e0d\u80fd\u88ab\u5b9e\u4f8b\u5316";c.egret_string_code[1015]="xml not found!";c.egret_string_code[1016]="{0}\u5df2\u7ecf\u5e9f\u5f03";c.egret_string_code[1017]="JSON\u6587\u4ef6\u683c\u5f0f\u4e0d\u6b63\u786e: {0}\ndata: {1}";c.egret_string_code[1018]="egret_html5_localStorage.setItem\u4fdd\u5b58\u5931\u8d25,key={0}&value={1}";
c.egret_string_code[1019]="\u7f51\u7edc\u5f02\u5e38:{0}";c.egret_string_code[1020]="\u65e0\u6cd5\u521d\u59cb\u5316\u7740\u8272\u5668";c.egret_string_code[1021]="\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301webgl";c.egret_string_code[1022]="{0} ArgumentError";c.egret_string_code[1023]="\u6b64\u65b9\u6cd5\u5728ScrollView\u5185\u4e0d\u53ef\u7528!";c.egret_string_code[1024]="\u4f7f\u7528\u4e86\u5c1a\u672a\u5b9e\u73b0\u7684ScaleMode";c.egret_string_code[1025]="\u9047\u5230\u6587\u4ef6\u5c3e";c.egret_string_code[1026]=
"EncodingError! The code point {0} could not be encoded.";c.egret_string_code[1027]="DecodingError";c.egret_string_code[1028]="\u8c03\u7528\u4e86\u672a\u914d\u7f6e\u7684\u6ce8\u5165\u89c4\u5219:{0}\u3002 \u8bf7\u5148\u5728\u9879\u76ee\u521d\u59cb\u5316\u91cc\u914d\u7f6e\u6307\u5b9a\u7684\u6ce8\u5165\u89c4\u5219\uff0c\u518d\u8c03\u7528\u5bf9\u5e94\u5355\u4f8b\u3002";c.egret_string_code[1029]="Function.prototype.bind - what is trying to be bound is not callable";c.egret_string_code[1030]="\u8be5API\u5df2\u5e9f\u5f03";
c.egret_string_code[1031]="setVolume\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528this.volume = value\u4ee3\u66ff";c.egret_string_code[1032]="getVolume\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528this.volume\u4ee3\u66ff";c.egret_string_code[2E3]="RES.createGroup()\u4f20\u5165\u4e86\u914d\u7f6e\u4e2d\u4e0d\u5b58\u5728\u7684\u952e\u503c: {0}";c.egret_string_code[2001]='RES\u52a0\u8f7d\u4e86\u4e0d\u5b58\u5728\u6216\u7a7a\u7684\u8d44\u6e90\u7ec4:"{0}"';c.egret_string_code[3E3]="\u4e3b\u9898\u914d\u7f6e\u6587\u4ef6\u52a0\u8f7d\u5931\u8d25: {0}";
c.egret_string_code[3001]="\u627e\u4e0d\u5230\u4e3b\u9898\u4e2d\u6240\u914d\u7f6e\u7684\u76ae\u80a4\u7c7b\u540d: {0}";c.egret_string_code[3002]='\u7d22\u5f15:"{0}"\u8d85\u51fa\u96c6\u5408\u5143\u7d20\u7d22\u5f15\u8303\u56f4';c.egret_string_code[3003]="\u5728\u6b64\u7ec4\u4ef6\u4e2d\u4e0d\u53ef\u7528\uff0c\u82e5\u6b64\u7ec4\u4ef6\u4e3a\u5bb9\u5668\u7c7b\uff0c\u8bf7\u4f7f\u7528";c.egret_string_code[3004]="addChild(){0}addElement()\u4ee3\u66ff";c.egret_string_code[3005]="addChildAt(){0}addElementAt()\u4ee3\u66ff";
c.egret_string_code[3006]="removeChild(){0}removeElement()\u4ee3\u66ff";c.egret_string_code[3007]="removeChildAt(){0}removeElementAt()\u4ee3\u66ff";c.egret_string_code[3008]="setChildIndex(){0}setElementIndex()\u4ee3\u66ff";c.egret_string_code[3009]="swapChildren(){0}swapElements()\u4ee3\u66ff";c.egret_string_code[3010]="swapChildrenAt(){0}swapElementsAt()\u4ee3\u66ff";c.egret_string_code[3011]='\u7d22\u5f15:"{0}"\u8d85\u51fa\u53ef\u89c6\u5143\u7d20\u7d22\u5f15\u8303\u56f4';c.egret_string_code[3012]=
"\u6b64\u65b9\u6cd5\u5728Scroller\u7ec4\u4ef6\u5185\u4e0d\u53ef\u7528!";c.egret_string_code[3013]="UIStage\u662fGUI\u6839\u5bb9\u5668\uff0c\u53ea\u80fd\u6709\u4e00\u4e2a\u6b64\u5b9e\u4f8b\u5728\u663e\u793a\u5217\u8868\u4e2d\uff01";c.egret_string_code[3014]="propNotPropOrStyle";c.egret_string_code[4E3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)";c.egret_string_code[4001]="Abstract class can not be instantiated!";c.egret_string_code[4002]="Unnamed data!";
c.egret_string_code[4003]="Nonsupport version!";c.egret_string_code[4004]="Abstract method needs to be implemented in subclass!";c.egret_string_code[3100]="\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301WebSocket";c.egret_string_code[3101]="\u8bf7\u5148\u8fde\u63a5WebSocket";c.egret_string_code[3102]="\u8bf7\u5148\u8bbe\u7f6etype\u4e3a\u4e8c\u8fdb\u5236\u7c7b\u578b"})(egret||(egret={}));
(function(c){c.egret_string_code={};c.egret_string_code[-1]="\u4e0d\u5b58\u5728\u7684stringId:{0}";c.egret_string_code[1E3]="Browser.isMobile\u63a5\u53e3\u53c2\u6570\u5df2\u7ecf\u53d8\u66f4\uff0c\u8bf7\u5c3d\u5feb\u8c03\u6574\u7528\u6cd5\u4e3a egret.MainContext.deviceType == egret.MainContext.DEVICE_MOBILE";c.egret_string_code[1001]="\u8be5\u65b9\u6cd5\u76ee\u524d\u4e0d\u5e94\u4f20\u5165 resolutionPolicy \u53c2\u6570\uff0c\u8bf7\u5728 docs/1.0_Final_ReleaseNote\u4e2d\u67e5\u770b\u5982\u4f55\u5347\u7ea7";
c.egret_string_code[1002]="egret.Ticker\u662f\u6846\u67b6\u5185\u90e8\u4f7f\u7528\u7684\u5355\u4f8b\uff0c\u4e0d\u5141\u8bb8\u5728\u5916\u90e8\u5b9e\u4f8b\u5316\uff0c\u8ba1\u65f6\u5668\u8bf7\u4f7f\u7528egret.Timer\u7c7b\uff01";c.egret_string_code[1003]="Ticker#setTimeout\u65b9\u6cd5\u5373\u5c06\u5e9f\u5f03,\u8bf7\u4f7f\u7528egret.setTimeout";c.egret_string_code[1004]="ExternalInterface\u8c03\u7528\u4e86js\u6ca1\u6709\u6ce8\u518c\u7684\u65b9\u6cd5: {0}";c.egret_string_code[1005]="\u8bbe\u7f6e\u4e86\u5df2\u7ecf\u5b58\u5728\u7684blendMode: {0}";
c.egret_string_code[1006]="child\u4e0d\u5728\u5f53\u524d\u5bb9\u5668\u5185";c.egret_string_code[1007]="\u63d0\u4f9b\u7684\u7d22\u5f15\u8d85\u51fa\u8303\u56f4";c.egret_string_code[1008]="child\u672a\u88abaddChild\u5230\u8be5parent";c.egret_string_code[1009]="\u8bbe\u7f6e\u4e86\u5df2\u7ecf\u5b58\u5728\u7684\u9002\u914d\u6a21\u5f0f:{0}";c.egret_string_code[1010]="addEventListener\u4fa6\u542c\u51fd\u6570\u4e0d\u80fd\u4e3a\u7a7a";c.egret_string_code[1011]='BitmapText\u627e\u4e0d\u5230\u6587\u5b57\u6240\u5bf9\u5e94\u7684\u7eb9\u7406:"{0}"';
c.egret_string_code[1012]="egret.BitmapTextSpriteSheet\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528egret.BitmapFont\u4ee3\u66ff\u3002";c.egret_string_code[1013]="TextField.setFocus \u6ca1\u6709\u5b9e\u73b0";c.egret_string_code[1014]="Ease\u4e0d\u80fd\u88ab\u5b9e\u4f8b\u5316";c.egret_string_code[1015]="xml not found!";c.egret_string_code[1016]="{0}\u5df2\u7ecf\u5e9f\u5f03";c.egret_string_code[1017]="JSON\u6587\u4ef6\u683c\u5f0f\u4e0d\u6b63\u786e: {0}\ndata: {1}";c.egret_string_code[1018]="egret_html5_localStorage.setItem\u4fdd\u5b58\u5931\u8d25,key={0}&value={1}";
c.egret_string_code[1019]="\u7f51\u7edc\u5f02\u5e38:{0}";c.egret_string_code[1020]="\u65e0\u6cd5\u521d\u59cb\u5316\u7740\u8272\u5668";c.egret_string_code[1021]="\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301webgl";c.egret_string_code[1022]="{0} ArgumentError";c.egret_string_code[1023]="\u6b64\u65b9\u6cd5\u5728ScrollView\u5185\u4e0d\u53ef\u7528!";c.egret_string_code[1024]="\u4f7f\u7528\u4e86\u5c1a\u672a\u5b9e\u73b0\u7684ScaleMode";c.egret_string_code[1025]="\u9047\u5230\u6587\u4ef6\u5c3e";c.egret_string_code[1026]=
"EncodingError! The code point {0} could not be encoded.";c.egret_string_code[1027]="DecodingError";c.egret_string_code[1028]="\u8c03\u7528\u4e86\u672a\u914d\u7f6e\u7684\u6ce8\u5165\u89c4\u5219:{0}\u3002 \u8bf7\u5148\u5728\u9879\u76ee\u521d\u59cb\u5316\u91cc\u914d\u7f6e\u6307\u5b9a\u7684\u6ce8\u5165\u89c4\u5219\uff0c\u518d\u8c03\u7528\u5bf9\u5e94\u5355\u4f8b\u3002";c.egret_string_code[1029]="Function.prototype.bind - what is trying to be bound is not callable";c.egret_string_code[1030]="\u8be5API\u5df2\u5e9f\u5f03";
c.egret_string_code[1031]="setVolume\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528this.volume = value\u4ee3\u66ff";c.egret_string_code[1032]="getVolume\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528this.volume\u4ee3\u66ff";c.egret_string_code[2E3]="RES.createGroup()\u4f20\u5165\u4e86\u914d\u7f6e\u4e2d\u4e0d\u5b58\u5728\u7684\u952e\u503c: {0}";c.egret_string_code[2001]='RES\u52a0\u8f7d\u4e86\u4e0d\u5b58\u5728\u6216\u7a7a\u7684\u8d44\u6e90\u7ec4:"{0}"';c.egret_string_code[3E3]="\u4e3b\u9898\u914d\u7f6e\u6587\u4ef6\u52a0\u8f7d\u5931\u8d25: {0}";
c.egret_string_code[3001]="\u627e\u4e0d\u5230\u4e3b\u9898\u4e2d\u6240\u914d\u7f6e\u7684\u76ae\u80a4\u7c7b\u540d: {0}";c.egret_string_code[3002]='\u7d22\u5f15:"{0}"\u8d85\u51fa\u96c6\u5408\u5143\u7d20\u7d22\u5f15\u8303\u56f4';c.egret_string_code[3003]="\u5728\u6b64\u7ec4\u4ef6\u4e2d\u4e0d\u53ef\u7528\uff0c\u82e5\u6b64\u7ec4\u4ef6\u4e3a\u5bb9\u5668\u7c7b\uff0c\u8bf7\u4f7f\u7528";c.egret_string_code[3004]="addChild(){0}addElement()\u4ee3\u66ff";c.egret_string_code[3005]="addChildAt(){0}addElementAt()\u4ee3\u66ff";
c.egret_string_code[3006]="removeChild(){0}removeElement()\u4ee3\u66ff";c.egret_string_code[3007]="removeChildAt(){0}removeElementAt()\u4ee3\u66ff";c.egret_string_code[3008]="setChildIndex(){0}setElementIndex()\u4ee3\u66ff";c.egret_string_code[3009]="swapChildren(){0}swapElements()\u4ee3\u66ff";c.egret_string_code[3010]="swapChildrenAt(){0}swapElementsAt()\u4ee3\u66ff";c.egret_string_code[3011]='\u7d22\u5f15:"{0}"\u8d85\u51fa\u53ef\u89c6\u5143\u7d20\u7d22\u5f15\u8303\u56f4';c.egret_string_code[3012]=
"\u6b64\u65b9\u6cd5\u5728Scroller\u7ec4\u4ef6\u5185\u4e0d\u53ef\u7528!";c.egret_string_code[3013]="UIStage\u662fGUI\u6839\u5bb9\u5668\uff0c\u53ea\u80fd\u6709\u4e00\u4e2a\u6b64\u5b9e\u4f8b\u5728\u663e\u793a\u5217\u8868\u4e2d\uff01";c.egret_string_code[3014]="propNotPropOrStyle";c.egret_string_code[4E3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)";c.egret_string_code[4001]="Abstract class can not be instantiated!";c.egret_string_code[4002]="Unnamed data!";
c.egret_string_code[4003]="Nonsupport version!";c.egret_string_code[4004]="Abstract method needs to be implemented in subclass!";c.egret_string_code[3100]="\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301WebSocket";c.egret_string_code[3101]="\u8bf7\u5148\u8fde\u63a5WebSocket";c.egret_string_code[3102]="\u8bf7\u5148\u8bbe\u7f6etype\u4e3a\u4e8c\u8fdb\u5236\u7c7b\u578b"})(egret||(egret={}));
var __extends=this.__extends||function(c,f){function e(){this.constructor=c}for(var d in f)f.hasOwnProperty(d)&&(c[d]=f[d]);e.prototype=f.prototype;c.prototype=new e};
(function(c){function f(d){for(var a=[],b=1;b<arguments.length;b++)a[b-1]=arguments[b];if(b=c.egret_string_code[d])for(var g=a.length,s=0;s<g;s++)b=b.replace("{"+s+"}",a[s]);return b}var e=function(){function d(){}d.openLogByType=function(a){null==d.logFuncs&&(d.logFuncs={error:console.error,debug:console.debug,warn:console.warn,info:console.info,log:console.log});switch(a){case d.OFF:console.error=function(){};case d.ERROR:console.warn=function(){};case d.WARN:console.info=function(){},console.log=
function(){};case d.INFO:console.debug=function(){}}switch(a){case d.ALL:console.debug=d.logFuncs.debug;case d.INFO:console.log=d.logFuncs.log,console.info=d.logFuncs.info;case d.WARN:console.warn=d.logFuncs.warn;case d.ERROR:console.error=d.logFuncs.error}};d.fatal=function(a,b){void 0===b&&(b=null);throw Error(c.Logger.getTraceCode("Fatal",a,b));};d.info=function(a,b){void 0===b&&(b=null);c.Logger.traceToConsole("Info",a,b)};d.warning=function(a,b){void 0===b&&(b=null);c.Logger.traceToConsole("Warning",
a,b)};d.traceToConsole=function(a,b,g){console.log(c.Logger.getTraceCode(a,b,g))};d.getTraceCode=function(a,b,g){return"["+a+"]"+b+(null==g?"":":"+g)};d.ALL="all";d.DEBUG="debug";d.INFO="info";d.WARN="warn";d.ERROR="error";d.OFF="off";return d}();c.Logger=e;e.prototype.__class__="egret.Logger";c.getString=f;c.$error=function(c){for(var a=[],b=1;b<arguments.length;b++)a[b-1]=arguments[b];a.unshift(c);(a=f.apply(null,a))?e.fatal(a):e.fatal(f(-1,c))};c.$warn=function(c){for(var a=[],b=1;b<arguments.length;b++)a[b-
1]=arguments[b];a.unshift(c);(a=f.apply(null,a))?e.warning(a):e.warning(f(-1,c))}})(egret||(egret={}));(function(c){var f=function(){function c(){this._hashCode=c.hashCount++}Object.defineProperty(c.prototype,"hashCode",{get:function(){return this._hashCode},enumerable:!0,configurable:!0});c.hashCount=1;return c}();c.HashObject=f;f.prototype.__class__="egret.HashObject"})(egret||(egret={}));
(function(c){var f=function(c){function d(b){void 0===b&&(b=300);c.call(this);this.objectPool=[];this._length=0;1>b&&(b=1);this.autoDisposeTime=b;this.frameCount=0}__extends(d,c);var a=d.prototype;a._checkFrame=function(){this.frameCount--;0>=this.frameCount&&this.dispose()};Object.defineProperty(a,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});a.push=function(b){var g=this.objectPool;-1==g.indexOf(b)&&(g.push(b),b.__recycle&&b.__recycle(),this._length++,0==this.frameCount&&
(this.frameCount=this.autoDisposeTime,d._callBackList.push(this)))};a.pop=function(){if(0==this._length)return null;this._length--;return this.objectPool.pop()};a.dispose=function(){0<this._length&&(this.objectPool=[],this._length=0);this.frameCount=0;var b=d._callBackList,g=b.indexOf(this);-1!=g&&b.splice(g,1)};d._callBackList=[];return d}(c.HashObject);c.Recycler=f;f.prototype.__class__="egret.Recycler"})(egret||(egret={}));
(function(c){c.__START_TIME;c.getTimer=function(){return Date.now()-c.__START_TIME}})(egret||(egret={}));
(function(c){c.__callLaterFunctionList=[];c.__callLaterThisList=[];c.__callLaterArgsList=[];c.callLater=function(f,e){for(var d=[],a=2;a<arguments.length;a++)d[a-2]=arguments[a];c.__callLaterFunctionList.push(f);c.__callLaterThisList.push(e);c.__callLaterArgsList.push(d)};c.__callAsyncFunctionList=[];c.__callAsyncThisList=[];c.__callAsyncArgsList=[];c.__callAsync=function(f,e){for(var d=[],a=2;a<arguments.length;a++)d[a-2]=arguments[a];c.__callAsyncFunctionList.push(f);c.__callAsyncThisList.push(e);
c.__callAsyncArgsList.push(d)}})(egret||(egret={}));
(function(c){var f=function(){function e(){}var d=e.prototype;d.call=function(a){this.callback&&this.callback.call(this.thisObject,a)};d.dispose=function(){this.thisObject=this.callback=null;e.__freeList.push(this)};e.push=function(a,b){var g;g=e.__freeList.length?e.__freeList.pop():new c.RenderCommand;g.callback=a;g.thisObject=b;c.MainContext.__DRAW_COMMAND_LIST.push(g)};e.__freeList=[];return e}();c.RenderCommand=f;f.prototype.__class__="egret.RenderCommand"})(egret||(egret={}));
(function(c){var f=function(e){function d(b,g,a){void 0===g&&(g=!1);void 0===a&&(a=!1);e.call(this);this.data=null;this._type="";this._cancelable=this._bubbles=!1;this._eventPhase=2;this._target=this._currentTarget=null;this._isPropagationImmediateStopped=this._isPropagationStopped=this._isDefaultPrevented=!1;this.isNew=!0;this._type=b;this._bubbles=g;this._cancelable=a}__extends(d,e);var a=d.prototype;Object.defineProperty(a,"type",{get:function(){return this._type},enumerable:!0,configurable:!0});
Object.defineProperty(a,"bubbles",{get:function(){return this._bubbles},enumerable:!0,configurable:!0});Object.defineProperty(a,"cancelable",{get:function(){return this._cancelable},enumerable:!0,configurable:!0});Object.defineProperty(a,"eventPhase",{get:function(){return this._eventPhase},enumerable:!0,configurable:!0});Object.defineProperty(a,"currentTarget",{get:function(){return this._currentTarget},enumerable:!0,configurable:!0});Object.defineProperty(a,"target",{get:function(){return this._target},
enumerable:!0,configurable:!0});a.isDefaultPrevented=function(){return this._isDefaultPrevented};a.preventDefault=function(){this._cancelable&&(this._isDefaultPrevented=!0)};a.stopPropagation=function(){this._bubbles&&(this._isPropagationStopped=!0)};a.stopImmediatePropagation=function(){this._bubbles&&(this._isPropagationImmediateStopped=!0)};a._reset=function(){this.isNew?this.isNew=!1:(this._isPropagationImmediateStopped=this._isPropagationStopped=this._isDefaultPrevented=!1,this._currentTarget=
this._target=null,this._eventPhase=2)};a.__recycle=function(){this.data=this._target=this._currentTarget=null};d._dispatchByTarget=function(b,g,a,d,e,h){void 0===e&&(e=!1);void 0===h&&(h=!1);var f=b.eventRecycler;f||(f=b.eventRecycler=new c.Recycler);var m=f.pop();m?m._type=a:m=new b(a);m._bubbles=e;m._cancelable=h;if(d)for(var n in d)m[n]=d[n],null!==m[n]&&(d[n]=null);b=g.dispatchEvent(m);f.push(m);return b};d._getPropertyData=function(b){var g=b._props;g||(g=b._props={});return g};d.dispatchEvent=
function(b,g,a,c){void 0===a&&(a=!1);var e=d._getPropertyData(d);void 0!=c&&(e.data=c);d._dispatchByTarget(d,b,g,e,a)};d.ADDED_TO_STAGE="addedToStage";d.REMOVED_FROM_STAGE="removedFromStage";d.ADDED="added";d.REMOVED="removed";d.COMPLETE="complete";d.LOOP_COMPLETE="loopcomplete";d.ENTER_FRAME="enterFrame";d.RENDER="render";d.FINISH_RENDER="finishRender";d.FINISH_UPDATE_TRANSFORM="finishUpdateTransform";d.LEAVE_STAGE="leaveStage";d.RESIZE="resize";d.CHANGE="change";d.ACTIVATE="activate";d.DEACTIVATE=
"deactivate";d.CLOSE="close";d.CONNECT="connect";return d}(c.HashObject);c.Event=f;f.prototype.__class__="egret.Event"})(egret||(egret={}));
(function(c){var f=function(c){function d(a,b,g){void 0===b&&(b=!1);void 0===g&&(g=!1);c.call(this,a,b,g);this._status=0}__extends(d,c);Object.defineProperty(d.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0});d.dispatchHTTPStatusEvent=function(a,b){null==d.httpStatusEvent&&(d.httpStatusEvent=new d(d.HTTP_STATUS));d.httpStatusEvent._status=b;a.dispatchEvent(d.httpStatusEvent)};d.HTTP_STATUS="httpStatus";d.httpStatusEvent=null;return d}(c.Event);c.HTTPStatusEvent=
f;f.prototype.__class__="egret.HTTPStatusEvent"})(egret||(egret={}));(function(c){var f=function(c){function d(a,b,g){void 0===b&&(b=!1);void 0===g&&(g=!1);c.call(this,a,b,g)}__extends(d,c);d.SOUND_COMPLETE="soundComplete";return d}(c.Event);c.SoundEvent=f;f.prototype.__class__="egret.SoundEvent"})(egret||(egret={}));
(function(c){var f=function(c){function d(a,b,g){void 0===b&&(b=!1);void 0===g&&(g=!1);c.call(this,a,b,g)}__extends(d,c);d.FOCUS_IN="focusIn";d.FOCUS_OUT="focusOut";return d}(c.Event);c.FocusEvent=f;f.prototype.__class__="egret.FocusEvent"})(egret||(egret={}));
(function(c){var f=function(e){function d(a,b,g){void 0===b&&(b=!1);void 0===g&&(g=!1);e.call(this,a,b,g)}__extends(d,e);d.dispatchIOErrorEvent=function(a){c.Event._dispatchByTarget(d,a,d.IO_ERROR)};d.IO_ERROR="ioError";return d}(c.Event);c.IOErrorEvent=f;f.prototype.__class__="egret.IOErrorEvent"})(egret||(egret={}));
(function(c){var f=function(e){function d(b,g,a,c,d,h,f,m,n,q){void 0===g&&(g=!0);void 0===a&&(a=!0);void 0===c&&(c=0);void 0===d&&(d=0);void 0===h&&(h=0);void 0===f&&(f=!1);void 0===m&&(m=!1);void 0===q&&(q=!1);e.call(this,b,g,a);this._stageY=this._stageX=0;this.touchPointID=NaN;this.touchDown=this.altKey=this.shiftKey=this.ctrlKey=!1;this.touchPointID=c;this._stageX=d;this._stageY=h;this.ctrlKey=f;this.altKey=m;this.touchDown=q}__extends(d,e);var a=d.prototype;Object.defineProperty(a,"stageX",{get:function(){return this._stageX},
enumerable:!0,configurable:!0});Object.defineProperty(a,"stageY",{get:function(){return this._stageY},enumerable:!0,configurable:!0});Object.defineProperty(a,"localX",{get:function(){return this._currentTarget.globalToLocal(this._stageX,this._stageY,c.Point.identity).x},enumerable:!0,configurable:!0});Object.defineProperty(a,"localY",{get:function(){return this._currentTarget.globalToLocal(this._stageX,this._stageY,c.Point.identity).y},enumerable:!0,configurable:!0});d.dispatchTouchEvent=function(b,
g,a,e,l,h,f,m,n){void 0===a&&(a=0);void 0===e&&(e=0);void 0===l&&(l=0);void 0===h&&(h=!1);void 0===f&&(f=!1);void 0===m&&(m=!1);void 0===n&&(n=!1);var q=c.Event._getPropertyData(d);q.touchPointID=a;q._stageX=e;q._stageY=l;q.ctrlKey=h;q.altKey=f;q.shiftKey=m;q.touchDown=n;c.Event._dispatchByTarget(d,b,g,q,!0,!0)};d.TOUCH_TAP="touchTap";d.TOUCH_MOVE="touchMove";d.TOUCH_BEGIN="touchBegin";d.TOUCH_END="touchEnd";d.TOUCH_RELEASE_OUTSIDE="touchReleaseOutside";d.TOUCH_ROLL_OUT="touchRollOut";d.TOUCH_ROLL_OVER=
"touchRollOver";d.TOUCH_OUT="touchOut";d.TOUCH_OVER="touchOver";return d}(c.Event);c.TouchEvent=f;f.prototype.__class__="egret.TouchEvent"})(egret||(egret={}));(function(c){var f=function(e){function d(a,b,g){void 0===b&&(b=!1);void 0===g&&(g=!1);e.call(this,a,b,g)}__extends(d,e);d.dispatchTimerEvent=function(a,b){c.Event._dispatchByTarget(d,a,b)};d.TIMER="timer";d.TIMER_COMPLETE="timerComplete";return d}(c.Event);c.TimerEvent=f;f.prototype.__class__="egret.TimerEvent"})(egret||(egret={}));
(function(c){var f=function(e){function d(a,b,g,c){void 0===b&&(b=!1);void 0===g&&(g=!1);void 0===c&&(c="");e.call(this,a,b,g);this.text=c}__extends(d,e);d.dispatchTextEvent=function(a,b,g){var s=c.Event._getPropertyData(d);s.text=g;c.Event._dispatchByTarget(d,a,b,s)};d.LINK="link";return d}(c.Event);c.TextEvent=f;f.prototype.__class__="egret.TextEvent"})(egret||(egret={}));
(function(c){var f=function(e){function d(a,b,g,c,d){void 0===b&&(b=!1);void 0===g&&(g=!1);void 0===c&&(c=0);void 0===d&&(d=0);e.call(this,a,b,g);this.bytesTotal=this.bytesLoaded=0;this.bytesLoaded=c;this.bytesTotal=d}__extends(d,e);d.dispatchProgressEvent=function(a,b,g,s){void 0===g&&(g=0);void 0===s&&(s=0);c.Event._dispatchByTarget(d,a,b,{bytesLoaded:g,bytesTotal:s})};d.PROGRESS="progress";d.SOCKET_DATA="socketData";return d}(c.Event);c.ProgressEvent=f;f.prototype.__class__="egret.ProgressEvent"})(egret||
(egret={}));(function(c){var f=function(){function c(){}c.CAPTURING_PHASE=1;c.AT_TARGET=2;c.BUBBLING_PHASE=3;return c}();c.EventPhase=f;f.prototype.__class__="egret.EventPhase"})(egret||(egret={}));
(function(c){var f=function(e){function d(b){void 0===b&&(b=null);e.call(this);this._captureEventsMap=this._eventsMap=this._eventTarget=null;this._eventTarget=b?b:this}__extends(d,e);var a=d.prototype;a.addEventListener=function(b,g,a,d,e){void 0===d&&(d=!1);void 0===e&&(e=0);"undefined"===typeof d&&(d=!1);"undefined"===typeof e&&(e=0);g||c.$error(1010);d?(this._captureEventsMap||(this._captureEventsMap={}),d=this._captureEventsMap):(this._eventsMap||(this._eventsMap={}),d=this._eventsMap);var h=
d[b];h||(h=d[b]=[]);this._insertEventBin(h,g,a,e)};a._insertEventBin=function(b,g,a,c,d){void 0===d&&(d=void 0);for(var e=-1,f=b.length,m=0;m<f;m++){var n=b[m];if(n.listener==g&&n.thisObject==a&&n.display==d)return!1;-1==e&&n.priority<c&&(e=m)}g={listener:g,thisObject:a,priority:c};d&&(g.display=d);-1!=e?b.splice(e,0,g):b.push(g);return!0};a.removeEventListener=function(b,g,a,c){void 0===c&&(c=!1);if(c=c?this._captureEventsMap:this._eventsMap){var d=c[b];d&&(this._removeEventBin(d,g,a),0==d.length&&
delete c[b])}};a._removeEventBin=function(b,g,a,c,d){void 0===c&&(c=void 0);void 0===d&&(d=0);for(var e=b.length;d<e;d++){var f=b[d];if(f.listener==g&&f.thisObject==a&&f.display==c)return b.splice(d,1),!0}return!1};a.hasEventListener=function(b){return!!(this._eventsMap&&this._eventsMap[b]||this._captureEventsMap&&this._captureEventsMap[b])};a.willTrigger=function(b){return this.hasEventListener(b)};a.dispatchEvent=function(b){b._reset();b._target=this._eventTarget;b._currentTarget=this._eventTarget;
return this._notifyListener(b)};a._notifyListener=function(b){var g=1==b._eventPhase?this._captureEventsMap:this._eventsMap;if(!g)return!0;g=g[b._type];if(!g)return!0;var a=g.length;if(0==a)return!0;for(var g=g.concat(),c=0;c<a;c++){var d=g[c];d.listener.call(d.thisObject,b);if(b._isPropagationImmediateStopped)break}return!b._isDefaultPrevented};a.dispatchEventWith=function(b,g,a){void 0===g&&(g=!1);c.Event.dispatchEvent(this,b,g,a)};return d}(c.HashObject);c.EventDispatcher=f;f.prototype.__class__=
"egret.EventDispatcher"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.stage=this.deviceContext=this.netContext=this.touchContext=this.rendererContext=null;this.reuseEvent=new c.Event("")}__extends(d,e);var a=d.prototype;a.run=function(){c.Ticker.getInstance().run();c.Ticker.getInstance().register(this.renderLoop,this,Number.NEGATIVE_INFINITY);c.Ticker.getInstance().register(this.broadcastEnterFrame,this,Number.POSITIVE_INFINITY);this.touchContext.run();this._profileInstance=c.Profiler.getInstance()};a.renderLoop=
function(b){if(0<c.__callLaterFunctionList.length){var g=c.__callLaterFunctionList;c.__callLaterFunctionList=[];var a=c.__callLaterThisList;c.__callLaterThisList=[];var e=c.__callLaterArgsList;c.__callLaterArgsList=[]}b=this.stage;var l=d.cachedEvent;l._type=c.Event.RENDER;this.dispatchEvent(l);c.Stage._invalidateRenderFlag&&(this.broadcastRender(),c.Stage._invalidateRenderFlag=!1);g&&this.doCallLaterList(g,a,e);0<c.__callAsyncFunctionList.length&&this.doCallAsyncList();g=this.rendererContext;g.onRenderStart();
g.clearScreen();d.__DRAW_COMMAND_LIST=[];d._renderLoopPhase="updateTransform";b._updateTransform();d._renderLoopPhase="draw";l._type=c.Event.FINISH_UPDATE_TRANSFORM;this.dispatchEvent(l);d.__use_new_draw?this._draw(g):b._draw(g);l._type=c.Event.FINISH_RENDER;this.dispatchEvent(l);this._profileInstance._isRunning&&this._profileInstance._drawProfiler(g);g.onRenderFinish()};a._draw=function(b){for(var g=d.__DRAW_COMMAND_LIST,a=g.length,c=0;c<a;c++){var e=g[c];e.call(b);e.dispose()}};a.broadcastEnterFrame=
function(b){b=this.reuseEvent;b._type=c.Event.ENTER_FRAME;this.dispatchEvent(b);for(var g=c.DisplayObject._enterFrameCallBackList.concat(),a=g.length,d=0;d<a;d++){var e=g[d];b._target=e.display;b._currentTarget=e.display;e.listener.call(e.thisObject,b)}g=c.Recycler._callBackList;for(d=g.length-1;0<=d;d--)g[d]._checkFrame()};a.broadcastRender=function(){var b=this.reuseEvent;b._type=c.Event.RENDER;for(var g=c.DisplayObject._renderCallBackList.concat(),a=g.length,d=0;d<a;d++){var e=g[d],h=e.display;
b._target=h;b._currentTarget=h;e.listener.call(e.thisObject,b)}};a.doCallLaterList=function(b,g,a){for(var c=b.length,d=0;d<c;d++){var e=b[d];null!=e&&e.apply(g[d],a[d])}};a.doCallAsyncList=function(){var b=c.__callAsyncFunctionList.concat(),g=c.__callAsyncThisList.concat(),a=c.__callAsyncArgsList.concat();c.__callAsyncFunctionList.length=0;c.__callAsyncThisList.length=0;for(var d=c.__callAsyncArgsList.length=0;d<b.length;d++){var e=b[d];null!=e&&e.apply(g[d],a[d])}};d.deviceType=null;d.DEVICE_PC=
"web";d.DEVICE_MOBILE="native";d.RUNTIME_HTML5="runtimeHtml5";d.RUNTIME_NATIVE="runtimeNative";d.__DRAW_COMMAND_LIST=[];d.__use_new_draw=!0;d.cachedEvent=new c.Event("");return d}(c.EventDispatcher);c.MainContext=f;f.prototype.__class__="egret.MainContext"})(egret||(egret={}));var testDeviceType=function(){if(!this.navigator)return!0;var c=navigator.userAgent.toLowerCase();return-1!=c.indexOf("mobile")||-1!=c.indexOf("android")},testRuntimeType=function(){return this.navigator?!0:!1};
egret.MainContext.instance=new egret.MainContext;egret.MainContext.deviceType=testDeviceType()?egret.MainContext.DEVICE_MOBILE:egret.MainContext.DEVICE_PC;egret.MainContext.runtimeType=testRuntimeType()?egret.MainContext.RUNTIME_HTML5:egret.MainContext.RUNTIME_NATIVE;delete testDeviceType;delete testRuntimeType;
(function(c){var f=function(){function e(){this._preDrawCount=this._updateTransformPerformanceCost=this._renderPerformanceCost=this._logicPerformanceCost=this._lastTime=0;this._calculatePreDrawCount=!0;this._txt=null;this._tick=0;this._maxDeltaTime=500;this._totalDeltaTime=0;this._isRunning=!1}var d=e.prototype;e.getInstance=function(){null==e.instance&&(e.instance=new e);return e.instance};d.stop=function(){if(this._isRunning){this._isRunning=!1;c.Ticker.getInstance().unregister(this.update,this);
var a=c.MainContext.instance;a.removeEventListener(c.Event.ENTER_FRAME,this.onEnterFrame,this);a.removeEventListener(c.Event.RENDER,this.onStartRender,this);a.removeEventListener(c.Event.FINISH_RENDER,this.onFinishRender,this);a.removeEventListener(c.Event.FINISH_UPDATE_TRANSFORM,this.onFinishUpdateTransform,this)}};d.run=function(){null==this._txt&&(this._txt=new c.TextField,this._txt.size=28,this._txt.multiline=!0,this._txt._DO_Props_._parent=new c.DisplayObjectContainer);if(!this._isRunning){this._isRunning=
!0;c.Ticker.getInstance().register(this.update,this);var a=c.MainContext.instance;a.addEventListener(c.Event.ENTER_FRAME,this.onEnterFrame,this);a.addEventListener(c.Event.RENDER,this.onStartRender,this);a.addEventListener(c.Event.FINISH_RENDER,this.onFinishRender,this);a.addEventListener(c.Event.FINISH_UPDATE_TRANSFORM,this.onFinishUpdateTransform,this)}};d._drawProfiler=function(a){"_drawWebGL"in a&&a._drawWebGL();this._calculatePreDrawCount=!1;this._txt._updateTransform();this._txt._draw(a)};d._setTxtFontSize=
function(a){this._txt.size=a};d.onEnterFrame=function(a){this._lastTime=c.getTimer()};d.onStartRender=function(a){a=c.getTimer();this._logicPerformanceCost=a-this._lastTime;this._lastTime=a};d.onFinishUpdateTransform=function(a){a=c.getTimer();this._updateTransformPerformanceCost=a-this._lastTime;this._lastTime=a};d.onFinishRender=function(a){a=c.getTimer();this._renderPerformanceCost=a-this._lastTime;this._lastTime=a};d.update=function(a){this._tick++;this._totalDeltaTime+=a;if(this._totalDeltaTime>=
this._maxDeltaTime){a=this._preDrawCount.toString();var b=Math.ceil(this._logicPerformanceCost).toString()+","+Math.ceil(this._updateTransformPerformanceCost).toString()+","+Math.ceil(this._renderPerformanceCost).toString()+","+Math.ceil(c.MainContext.instance.rendererContext.renderCost).toString();this._txt.text="draw:"+a+"\ncost:"+b+"\nFPS:"+Math.floor(1E3*this._tick/this._totalDeltaTime).toString();this._tick=this._totalDeltaTime=0}this._preDrawCount=0;this._calculatePreDrawCount=!0};d.onDrawImage=
function(){this._calculatePreDrawCount&&this._preDrawCount++};return e}();c.Profiler=f;f.prototype.__class__="egret.Profiler"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._timeScale=1;this._paused=!1;this._callIndex=-1;this.callBackList=[];null!=d.instance&&c.$error(1002)}__extends(d,e);var a=d.prototype;a.run=function(){c.__START_TIME=(new Date).getTime();c.MainContext.instance.deviceContext.executeMainLoop(this.update,this)};a.update=function(b){if(!this._paused){b*=this._timeScale;this._callList=this.callBackList.concat();for(this._callIndex=0;this._callIndex<this._callList.length;this._callIndex++){var g=
this._callList[this._callIndex];g.listener.call(g.thisObject,b)}this._callIndex=-1;this._callList=null}};a.register=function(b,g,a){void 0===a&&(a=0);this._insertEventBin(this.callBackList,b,g,a)};a.unregister=function(b,g){this._removeEventBin(this.callBackList,b,g);this._callList&&-1<this._callIndex&&this._removeEventBin(this._callList,b,g,null,this._callIndex+1)};a.setTimeout=function(b,g,a){for(var d=[],e=3;e<arguments.length;e++)d[e-3]=arguments[e];c.$warn(1003);c.setTimeout.apply(null,[b,g,
a].concat(d))};a.setTimeScale=function(b){this._timeScale=b};a.getTimeScale=function(){return this._timeScale};a.pause=function(){this._paused=!0};a.resume=function(){this._paused=!1};d.getInstance=function(){null==d.instance&&(d.instance=new d);return d.instance};return d}(c.EventDispatcher);c.Ticker=f;f.prototype.__class__="egret.Ticker"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.LEFT="left";c.RIGHT="right";c.CENTER="center";c.JUSTIFY="justify";c.CONTENT_JUSTIFY="contentJustify";return c}();c.HorizontalAlign=f;f.prototype.__class__="egret.HorizontalAlign"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.TOP="top";c.BOTTOM="bottom";c.MIDDLE="middle";c.JUSTIFY="justify";c.CONTENT_JUSTIFY="contentJustify";return c}();c.VerticalAlign=f;f.prototype.__class__="egret.VerticalAlign"})(egret||(egret={}));
(function(c){var f=function(e){function d(b,g){void 0===g&&(g=0);e.call(this);this._currentCount=0;this._running=!1;this.lastTime=0;this.delay=b;this.repeatCount=g}__extends(d,e);var a=d.prototype;Object.defineProperty(a,"currentCount",{get:function(){return this._currentCount},enumerable:!0,configurable:!0});Object.defineProperty(a,"running",{get:function(){return this._running},enumerable:!0,configurable:!0});a.reset=function(){this.stop();this._currentCount=0};a.start=function(){this._running||
(this.lastTime=c.getTimer(),c.Ticker.getInstance().register(this.onEnterFrame,this),this._running=!0)};a.stop=function(){this._running&&(c.Ticker.getInstance().unregister(this.onEnterFrame,this),this._running=!1)};a.onEnterFrame=function(b){b=c.getTimer();b-this.lastTime>this.delay&&(this.lastTime=b,this._currentCount++,c.TimerEvent.dispatchTimerEvent(this,c.TimerEvent.TIMER),0<this.repeatCount&&this._currentCount>=this.repeatCount&&(this.stop(),c.TimerEvent.dispatchTimerEvent(this,c.TimerEvent.TIMER_COMPLETE)))};
return d}(c.EventDispatcher);c.Timer=f;f.prototype.__class__="egret.Timer"})(egret||(egret={}));
(function(c){function f(c){c=c.prototype?c.prototype:Object.getPrototypeOf(c);if(c.hasOwnProperty("__class__"))return c.__class__;var d=c.constructor.toString(),a=d.indexOf("("),d=d.substring(9,a);Object.defineProperty(c,"__class__",{value:d,enumerable:!1,writable:!0});return d}c.getQualifiedClassName=f;c.getQualifiedSuperclassName=function(c){c=c.prototype?c.prototype:Object.getPrototypeOf(c);if(c.hasOwnProperty("__superclass__"))return c.__superclass__;var d=Object.getPrototypeOf(c);if(null==d)return null;
d=f(d.constructor);if(!d)return null;Object.defineProperty(c,"__superclass__",{value:d,enumerable:!1,writable:!0});return d}})(egret||(egret={}));(function(c){var f={};c.getDefinitionByName=function(c){if(!c)return null;var d=f[c];if(d)return d;for(var a=c.split("."),b=a.length,d=__global,g=0;g<b;g++)if(d=d[a[g]],!d)return null;return f[c]=d}})(egret||(egret={}));var __global=__global||this;
(function(c){function f(a){for(var b in e){var g=e[b];g.delay-=a;0>=g.delay&&(g.listener.apply(g.thisObject,g.params),delete e[b])}}var e={},d=0;c.setTimeout=function(a,b,g){for(var s=[],p=3;p<arguments.length;p++)s[p-3]=arguments[p];s={listener:a,thisObject:b,delay:g,params:s};0==d&&c.Ticker.getInstance().register(f,null);d++;e[d]=s;return d};c.clearTimeout=function(a){delete e[a]}})(egret||(egret={}));
(function(c){function f(a){for(var b in e){var g=e[b];g.delay-=a;0>=g.delay&&(g.delay=g.originDelay,g.listener.apply(g.thisObject,g.params))}}var e={},d=0;c.setInterval=function(a,b,g){for(var s=[],p=3;p<arguments.length;p++)s[p-3]=arguments[p];s={listener:a,thisObject:b,delay:g,originDelay:g,params:s};0==d&&c.Ticker.getInstance().register(f,null);d++;e[d]=s;return d};c.clearInterval=function(a){delete e[a]}})(egret||(egret={}));
(function(c){c.hasDefinition=function(f){return c.getDefinitionByName(f)?!0:!1}})(egret||(egret={}));(function(c){c.toColorString=function(c){if(isNaN(c)||0>c)c=0;16777215<c&&(c=16777215);for(c=c.toString(16).toUpperCase();6>c.length;)c="0"+c;return"#"+c}})(egret||(egret={}));
(function(c){var f=function(e){function d(b,g,a,c,d,h){void 0===b&&(b=1);void 0===g&&(g=0);void 0===a&&(a=0);void 0===c&&(c=1);void 0===d&&(d=0);void 0===h&&(h=0);e.call(this);this.a=b;this.b=g;this.c=a;this.d=c;this.tx=d;this.ty=h}__extends(d,e);var a=d.prototype;a.prepend=function(b,g,a,c,d,e){var f=this.tx;if(1!=b||0!=g||0!=a||1!=c){var m=this.a,n=this.c;this.a=m*b+this.b*a;this.b=m*g+this.b*c;this.c=n*b+this.d*a;this.d=n*g+this.d*c}this.tx=f*b+this.ty*a+d;this.ty=f*g+this.ty*c+e;return this};
a.append=function(b,g,a,c,d,e){var f=this.a,m=this.b,n=this.c,q=this.d;if(1!=b||0!=g||0!=a||1!=c)this.a=b*f+g*n,this.b=b*m+g*q,this.c=a*f+c*n,this.d=a*m+c*q;this.tx=d*f+e*n+this.tx;this.ty=d*m+e*q+this.ty;return this};a.prependTransform=function(b,g,a,d,e,h,f,m,n){if(e%360){var q=c.NumberUtils.cos(e);e=c.NumberUtils.sin(e)}else q=1,e=0;if(m||n)this.tx-=m,this.ty-=n;h||f?(this.prepend(q*a,e*a,-e*d,q*d,0,0),this.prepend(c.NumberUtils.cos(f),c.NumberUtils.sin(f),-c.NumberUtils.sin(h),c.NumberUtils.cos(h),
b,g)):this.prepend(q*a,e*a,-e*d,q*d,b,g);return this};a.appendTransform=function(b,g,a,d,e,h,f,m,n){if(e%360){var q=c.NumberUtils.cos(e);e=c.NumberUtils.sin(e)}else q=1,e=0;h||f?(this.append(c.NumberUtils.cos(f),c.NumberUtils.sin(f),-c.NumberUtils.sin(h),c.NumberUtils.cos(h),b,g),this.append(q*a,e*a,-e*d,q*d,0,0)):this.append(q*a,e*a,-e*d,q*d,b,g);if(m||n)this.tx-=m*this.a+n*this.c,this.ty-=m*this.b+n*this.d;return this};a.rotate=function(b){var g=Math.cos(b);b=Math.sin(b);var a=this.a,c=this.c,d=
this.tx;this.a=a*g-this.b*b;this.b=a*b+this.b*g;this.c=c*g-this.d*b;this.d=c*b+this.d*g;this.tx=d*g-this.ty*b;this.ty=d*b+this.ty*g;return this};a.skew=function(b,g){this.append(c.NumberUtils.cos(g),c.NumberUtils.sin(g),-c.NumberUtils.sin(b),c.NumberUtils.cos(b),0,0);return this};a.scale=function(b,g){this.a*=b;this.d*=g;this.c*=b;this.b*=g;this.tx*=b;this.ty*=g;return this};a.translate=function(b,g){this.tx+=b;this.ty+=g;return this};a.identity=function(){this.a=this.d=1;this.b=this.c=this.tx=this.ty=
0;return this};a.identityMatrix=function(b){this.a=b.a;this.b=b.b;this.c=b.c;this.d=b.d;this.tx=b.tx;this.ty=b.ty;return this};a.invert=function(){var b=this.a,g=this.b,a=this.c,c=this.d,d=this.tx,e=b*c-g*a;this.a=c/e;this.b=-g/e;this.c=-a/e;this.d=b/e;this.tx=(a*this.ty-c*d)/e;this.ty=-(b*this.ty-g*d)/e;return this};d.transformCoords=function(b,g,a){var d=c.Point.identity;d.x=b.a*g+b.c*a+b.tx;d.y=b.d*a+b.b*g+b.ty;return d};a.toArray=function(b){this.array||(this.array=new Float32Array(9));b?(this.array[0]=
this.a,this.array[1]=this.b,this.array[2]=0,this.array[3]=this.c,this.array[4]=this.d,this.array[5]=0,this.array[6]=this.tx,this.array[7]=this.ty):(this.array[0]=this.a,this.array[1]=this.b,this.array[2]=this.tx,this.array[3]=this.c,this.array[4]=this.d,this.array[5]=this.ty,this.array[6]=0,this.array[7]=0);this.array[8]=1;return this.array};a.setTo=function(b,g,a,c,d,e){this.a=b;this.b=g;this.c=a;this.d=c;this.tx=d;this.ty=e};a.copyFrom=function(b){this.identityMatrix(b)};a.clone=function(){return new d(this.a,
this.b,this.c,this.d,this.tx,this.ty)};a.concat=function(b){var g=this.a,a=this.b,c=this.c,d=this.d,e=this.tx,f=this.ty,m=b.a,n=b.b,q=b.c,r=b.d,t=g*m,u=0,v=0,x=d*r,w=e*m+b.tx;b=f*r+b.ty;if(0!=a||0!=c||0!=n||0!=q)t+=a*q,x+=c*n,u+=g*n+a*r,v+=c*m+d*q,w+=f*q,b+=e*n;this.a=t;this.b=u;this.c=v;this.d=x;this.tx=w;this.ty=b};a.deltaTransformPoint=function(b){return new c.Point(this.a*b.x+this.c*b.y,this.b*b.x+this.d*b.y)};a.transformPoint=function(b){return new c.Point(this.a*b.x+this.c*b.y+this.tx,this.b*
b.x+this.d*b.y+this.ty)};a.toString=function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"};a.createBox=function(b,g,a,d,e){void 0===a&&(a=0);void 0===d&&(d=0);void 0===e&&(e=0);if(0!==a){a/=c.Matrix.DEG_TO_RAD;var h=c.NumberUtils.cos(a);a=c.NumberUtils.sin(a);this.a=h*b;this.b=a*g;this.c=-a*b;this.d=h*g}else this.a=b,this.c=this.b=0,this.d=g;this.tx=d;this.ty=e};a.createGradientBox=function(b,g,a,c,d){void 0===a&&(a=0);void 0===c&&(c=0);void 0===
d&&(d=0);this.createBox(b/1638.4,g/1638.4,a,c+b/2,d+g/2)};d.identity=new d;d.DEG_TO_RAD=Math.PI/180;return d}(c.HashObject);c.Matrix=f;f.prototype.__class__="egret.Matrix"})(egret||(egret={}));
(function(c){var f=function(e){function d(b,g){void 0===b&&(b=0);void 0===g&&(g=0);e.call(this);this.x=b;this.y=g}__extends(d,e);var a=d.prototype;a.clone=function(){return new d(this.x,this.y)};a.equals=function(b){return this.x==b.x&&this.y==b.y};d.distance=function(b,g){return Math.sqrt((b.x-g.x)*(b.x-g.x)+(b.y-g.y)*(b.y-g.y))};a.setTo=function(b,g){this.x=b;this.y=g};a.copyFrom=function(b){this.x=b.x;this.y=b.y};Object.defineProperty(a,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*
this.y)},enumerable:!0,configurable:!0});a.add=function(b){return new d(this.x+b.x,this.y+b.y)};d.interpolate=function(b,g,a){var c=1-a;return new d(b.x*a+g.x*c,b.y*a+g.y*c)};a.normalize=function(b){if(0!=this.x||0!=this.y)b/=this.length,this.x*=b,this.y*=b};a.offset=function(b,g){this.x+=b;this.y+=g};d.polar=function(b,g){return new d(b*c.NumberUtils.cos(g/c.Matrix.DEG_TO_RAD),b*c.NumberUtils.sin(g/c.Matrix.DEG_TO_RAD))};a.subtract=function(b){return new d(this.x-b.x,this.y-b.y)};a.toString=function(){return"(x="+
this.x+", y="+this.y+")"};d.identity=new d(0,0);return d}(c.HashObject);c.Point=f;f.prototype.__class__="egret.Point"})(egret||(egret={}));
(function(c){var f=function(e){function d(b,g,a,c){void 0===b&&(b=0);void 0===g&&(g=0);void 0===a&&(a=0);void 0===c&&(c=0);e.call(this);this.x=b;this.y=g;this.width=a;this.height=c}__extends(d,e);var a=d.prototype;Object.defineProperty(a,"left",{get:function(){return this.x},set:function(b){this.width+=this.x-b;this.x=b},enumerable:!0,configurable:!0});Object.defineProperty(a,"right",{get:function(){return this.x+this.width},set:function(b){this.width=b-this.x},enumerable:!0,configurable:!0});Object.defineProperty(a,
"top",{get:function(){return this.y},set:function(b){this.height+=this.y-b;this.y=b},enumerable:!0,configurable:!0});Object.defineProperty(a,"bottom",{get:function(){return this.y+this.height},set:function(b){this.height=b-this.y},enumerable:!0,configurable:!0});Object.defineProperty(a,"topLeft",{get:function(){return new c.Point(this.left,this.top)},set:function(b){this.top=b.y;this.left=b.x},enumerable:!0,configurable:!0});Object.defineProperty(a,"bottomRight",{get:function(){return new c.Point(this.right,
this.bottom)},set:function(b){this.bottom=b.y;this.right=b.x},enumerable:!0,configurable:!0});a.initialize=function(b,g,a,c){this.x=b;this.y=g;this.width=a;this.height=c;return this};a.contains=function(b,g){return this.x<=b&&this.x+this.width>=b&&this.y<=g&&this.y+this.height>=g};a.intersects=function(b){return Math.max(this.x,b.x)<=Math.min(this.right,b.right)&&Math.max(this.y,b.y)<=Math.min(this.bottom,b.bottom)};a.setEmpty=function(){this.height=this.width=this.y=this.x=0};a.clone=function(){return new d(this.x,
this.y,this.width,this.height)};a.containsPoint=function(b){return this.x<b.x&&this.x+this.width>b.x&&this.y<b.y&&this.y+this.height>b.y?!0:!1};a.setTo=function(b,g,a,c){this.initialize(b,g,a,c)};a.copyFrom=function(b){this.x=b.x;this.y=b.y;this.width=b.width;this.height=b.height};a.inflate=function(b,g){this.x-=b;this.width+=2*b;this.y-=g;this.height+=2*g};a.isEmpty=function(){return 0==this.width||0==this.height};a.containsRect=function(b){var g=b.x+b.width,a=b.y+b.height,c=this.x+this.width,d=
this.y+this.height;return b.x>=this.x&&b.x<c&&b.y>=this.y&&b.y<d&&g>this.x&&g<=c&&a>this.y&&a<=d};a.equals=function(b){return this===b?!0:this.x===b.x&&this.y===b.y&&this.width===b.width&&this.height===b.height};a.inflatePoint=function(b){this.inflate(b.x,b.y)};a.intersection=function(b){var g=this.clone(),a=g.x,c=g.y,d=b.x,e=b.y,f=Math.max(a,d),a=Math.min(a+g.width,d+b.width);if(f<=a&&(d=Math.max(c,e),b=Math.min(c+g.height,e+b.height),d<=b))return g.setTo(f,d,a-f,b-d),g;g.setEmpty();return g};a.offset=
function(b,g){this.x+=b;this.y+=g};a.offsetPoint=function(b){this.offset(b.x,b.y)};a.toString=function(){return"(x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"};a.union=function(b){var g=this.clone();if(b.isEmpty())return g;if(g.isEmpty())return g.copyFrom(b),g;var a=Math.min(g.x,b.x),c=Math.min(g.y,b.y);g.setTo(a,c,Math.max(g.right,b.right)-a,Math.max(g.bottom,b.bottom)-c);return g};d.identity=new d(0,0,0,0);return d}(c.HashObject);c.Rectangle=f;f.prototype.__class__=
"egret.Rectangle"})(egret||(egret={}));
(function(c){var f=function(c){function d(b,g,a,d,l,h,f,m){void 0===b&&(b=1);void 0===g&&(g=1);void 0===a&&(a=1);void 0===d&&(d=1);void 0===l&&(l=0);void 0===h&&(h=0);void 0===f&&(f=0);void 0===m&&(m=0);c.call(this);this._redMultiplier=b;this._greenMultiplier=g;this._blueMultiplier=a;this._alphaMultiplier=d;this._redOffset=l;this._greenOffset=h;this._blueOffset=f;this._alphaOffset=m}__extends(d,c);var a=d.prototype;Object.defineProperty(a,"alphaMultiplier",{get:function(){return this._alphaMultiplier},set:function(b){this._alphaMultiplier=
b},enumerable:!0,configurable:!0});Object.defineProperty(a,"alphaOffset",{get:function(){return this._alphaOffset},set:function(b){this._alphaOffset=b},enumerable:!0,configurable:!0});Object.defineProperty(a,"blueMultiplier",{get:function(){return this._blueMultiplier},set:function(b){this._blueMultiplier=b},enumerable:!0,configurable:!0});Object.defineProperty(a,"blueOffset",{get:function(){return this._blueOffset},set:function(b){this._blueOffset=b},enumerable:!0,configurable:!0});Object.defineProperty(a,
"greenMultiplier",{get:function(){return this._greenMultiplier},set:function(b){this._greenMultiplier=b},enumerable:!0,configurable:!0});Object.defineProperty(a,"greenOffset",{get:function(){return this._greenOffset},set:function(b){this._greenOffset=b},enumerable:!0,configurable:!0});Object.defineProperty(a,"redMultiplier",{get:function(){return this._redMultiplier},set:function(b){this._redMultiplier=b},enumerable:!0,configurable:!0});Object.defineProperty(a,"redOffset",{get:function(){return this._redOffset},
set:function(b){this._redOffset=b},enumerable:!0,configurable:!0});Object.defineProperty(a,"color",{get:function(){return this._redOffset<<16+this._greenOffset<<8+this._blueOffset},enumerable:!0,configurable:!0});a.identityColorTransform=function(b){this._alphaMultiplier=b._alphaMultiplier;this._alphaOffset=b._alphaOffset;this._redMultiplier=b._redMultiplier;this._redOffset=b._redOffset;this._greenMultiplier=b._greenMultiplier;this._greenOffset=b._greenOffset;this._blueMultiplier=b._blueMultiplier;
this._blueOffset=b._blueOffset};a.concat=function(b){this._redMultiplier*=b._redMultiplier;this._greenMultiplier*=b._greenMultiplier;this._blueMultiplier*=b._blueMultiplier;this._alphaMultiplier*=b._alphaMultiplier;this._redOffset+=b._redOffset;this._greenOffset+=b._greenOffset;this._blueOffset+=b._blueOffset;this._alphaOffset+=b._alphaOffset};a.toString=function(){return"(redMultiplier="+this._redMultiplier+", greenMultiplier="+this._greenMultiplier+", blueMultiplier="+this._blueMultiplier+", alphaMultiplier="+
this._alphaMultiplier+", redOffset="+this._redOffset+", greenOffset="+this._greenOffset+", blueOffset="+this._blueOffset+", alphaOffset="+this._alphaOffset+")"};return d}(c.HashObject);c.ColorTransform=f;f.prototype.__class__="egret.ColorTransform"})(egret||(egret={}));
(function(c){var f=function(e){function d(b){e.call(this);this._matrix=new c.Matrix;this._matrix2=new c.Matrix;this._colorTransform=new c.ColorTransform;this._colorTransform2=new c.ColorTransform;this._display=b}__extends(d,e);var a=d.prototype;Object.defineProperty(a,"matrix",{get:function(){this._matrix2.identityMatrix(this._matrix);return this._matrix2},set:function(b){this._setMatrix(b)},enumerable:!0,configurable:!0});a._setMatrix=function(b){this._display.__hack_local_matrix||(this._display.__hack_local_matrix=
new c.Matrix);this._display.__hack_local_matrix.identityMatrix(b);this._matrix.identityMatrix(b)};Object.defineProperty(a,"colorTransform",{get:function(){this._colorTransform2.identityColorTransform(this._colorTransform);return this._colorTransform2},set:function(b){this._setColorTransform(b)},enumerable:!0,configurable:!0});a._setColorTransform=function(b){this._colorTransform.identityColorTransform(b)};return d}(c.HashObject);c.Transform=f;f.prototype.__class__="egret.Transform"})(egret||(egret=
{}));
(function(c){var f=function(e){function d(){e.call(this);this._isSupportDOMParser=this._xmlDict=this._parser=null;this._xmlDict={};window.DOMParser?(this._isSupportDOMParser=!0,this._parser=new DOMParser):this._isSupportDOMParser=!1}__extends(d,e);var a=d.prototype;d.getInstance=function(){d._instance||(d._instance=new d);return d._instance};a.parserXML=function(b){for(var g=0;"\n"==b.charAt(g)||"\t"==b.charAt(g)||"\r"==b.charAt(g)||" "==b.charAt(g);)g++;0!=g&&(b=b.substring(g,b.length));this._isSupportDOMParser?g=
this._parser.parseFromString(b,"text/xml"):(g=new ActiveXObject("Microsoft.XMLDOM"),g.async="false",g.loadXML(b));null==g&&c.$warn(1015);return g};d._instance=null;return d}(c.HashObject);c.SAXParser=f;f.prototype.__class__="egret.SAXParser"})(egret||(egret={}));
(function(c){var f=function(b){function a(){b.call(this);this._designHeight=this._designWidth=0;this._scaleY=this._scaleX=1;this._stageHeight=this._stageWidth=this._offSetY=0}__extends(a,b);var e=a.prototype;a.getInstance=function(){null==a.instance&&(d.initialize(),a.instance=new a);return a.instance};e.setDesignSize=function(b,g,a){this._designWidth=b;this._designHeight=g;a&&(c.$warn(1001),this._setResolutionPolicy(a))};e._setResolutionPolicy=function(b){this._resolutionPolicy=b;b.init(this);b._apply(this,
this._designWidth,this._designHeight)};e.getScaleX=function(){return this._scaleX};e.getScaleY=function(){return this._scaleY};e.getOffSetY=function(){return this._offSetY};a.canvas_name="egretCanvas";a.egret_root_div="gameDiv";a.canvas_div_name="canvasDiv";return a}(c.HashObject);c.StageDelegate=f;f.prototype.__class__="egret.StageDelegate";var e=function(){function b(g,a){this._containerStrategy=g;this._contentStrategy=a}var a=b.prototype;a.init=function(b){this._containerStrategy.init(b);this._contentStrategy.init(b)};
a._apply=function(b,g,a){this._containerStrategy._apply(b,g,a);this._contentStrategy._apply(b,g,a)};return b}();c.ResolutionPolicy=e;e.prototype.__class__="egret.ResolutionPolicy";var d=function(){function b(){}var c=b.prototype;b.initialize=function(){b.EQUAL_TO_FRAME=new a};c.init=function(b){};c._apply=function(b,g,a){};c._setupContainer=function(){var b=document.body,g;b&&(g=b.style)&&(g.paddingTop=g.paddingTop||"0px",g.paddingRight=g.paddingRight||"0px",g.paddingBottom=g.paddingBottom||"0px",
g.paddingLeft=g.paddingLeft||"0px",g.borderTop=g.borderTop||"0px",g.borderRight=g.borderRight||"0px",g.borderBottom=g.borderBottom||"0px",g.borderLeft=g.borderLeft||"0px",g.marginTop=g.marginTop||"0px",g.marginRight=g.marginRight||"0px",g.marginBottom=g.marginBottom||"0px",g.marginLeft=g.marginLeft||"0px")};return b}();c.ContainerStrategy=d;d.prototype.__class__="egret.ContainerStrategy";var a=function(b){function a(){b.apply(this,arguments)}__extends(a,b);a.prototype._apply=function(b){this._setupContainer()};
return a}(d);c.EqualToFrame=a;a.prototype.__class__="egret.EqualToFrame";e=function(){function b(){}var a=b.prototype;a.init=function(b){};a._apply=function(b,g,a){};a.setEgretSize=function(b,g,a,s,d,e){void 0===e&&(e=0);c.StageDelegate.getInstance()._stageWidth=Math.round(b);c.StageDelegate.getInstance()._stageHeight=Math.round(g);b=document.getElementById(f.canvas_div_name);g=document.getElementById(f.egret_root_div);b||(b=c.Browser.getInstance().$new("div"),b.id=f.canvas_div_name,g.appendChild(b));
b.style.width=a+"px";b.style.height=s+"px";g.style.width=a+"px";g.style.height=s+"px";g.style.top=e+"px"};a._getClientWidth=function(){return document.documentElement.clientWidth};a._getClientHeight=function(){return document.documentElement.clientHeight};return b}();c.ContentStrategy=e;e.prototype.__class__="egret.ContentStrategy";var b=function(b){function a(c){void 0===c&&(c=0);b.call(this);this.minWidth=NaN;this.minWidth=c}__extends(a,b);a.prototype._apply=function(b,g,a){g=this._getClientWidth();
var c=this._getClientHeight(),s=c/a,d=g/s,e=1;0!=this.minWidth&&(e=Math.min(1,d/this.minWidth));this.setEgretSize(d/e,a,g,c*e);b._scaleX=s*e;b._scaleY=s*e};return a}(e);c.FixedHeight=b;b.prototype.__class__="egret.FixedHeight";b=function(b){function a(c){void 0===c&&(c=0);b.call(this);this.minHeight=NaN;this.minHeight=c}__extends(a,b);a.prototype._apply=function(b,g,a){a=this._getClientWidth();var c=this._getClientHeight(),s=a/g,d=c/s,e=1;0!=this.minHeight&&(e=Math.min(1,d/this.minHeight));this.setEgretSize(g,
d/e,a*e,c,a*(1-e)/2);b._scaleX=s*e;b._scaleY=s*e};return a}(e);c.FixedWidth=b;b.prototype.__class__="egret.FixedWidth";b=function(b){function a(c,s){b.call(this);this.width=c;this.height=s}__extends(a,b);a.prototype._apply=function(b,g,a){a=this.width;var c=this.height,s=a/g;this.setEgretSize(g,c/s,a,c);b._scaleX=s;b._scaleY=s};return a}(e);c.FixedSize=b;b.prototype.__class__="egret.FixedSize";b=function(b){function a(){b.call(this)}__extends(a,b);a.prototype._apply=function(b,g,a){this.setEgretSize(g,
a,g,a,Math.floor((g-g)/2));b._scaleX=1;b._scaleY=1};return a}(e);c.NoScale=b;b.prototype.__class__="egret.NoScale";b=function(b){function a(){b.call(this)}__extends(a,b);a.prototype._apply=function(b,g,a){var c=this._getClientWidth(),s=this._getClientHeight(),d=c,e=s,f=d/g<e/a?d/g:e/a,d=g*f,e=a*f,c=Math.floor((c-d)/2);b._offSetY=Math.floor((s-e)/2);this.setEgretSize(g,a/1,1*d,e,c,b._offSetY);b._scaleX=1*f;b._scaleY=1*f};return a}(e);c.ShowAll=b;b.prototype.__class__="egret.ShowAll";e=function(b){function a(){b.call(this)}
__extends(a,b);a.prototype._apply=function(b,g,a){var c=this._getClientWidth(),s=this._getClientHeight(),c=c/g,s=s/a;this.setEgretSize(g,a,g*c,a*s);b._scaleX=c;b._scaleY=s};return a}(e);c.FullScreen=e;e.prototype.__class__="egret.FullScreen"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._originalData={};this._drawAreaList=[]}__extends(d,e);var a=d.prototype;d.getInstance=function(){null==d.instance&&(d.instance=new d);return d.instance};a.addDrawArea=function(b){this._drawAreaList.push(b)};a.clearDrawArea=function(){this._drawAreaList=[]};a.drawImage=function(b,g,a,e,l,h,f,m,n,q,r){void 0===r&&(r=void 0);f=f||0;m=m||0;var t=g._texture_to_render;if(null!=t&&0!=h&&0!=l&&0!=n&&0!=q){var u=c.MainContext.instance.rendererContext._texture_scale_factor;
l/=u;h/=u;if(0!=this._drawAreaList.length&&c.MainContext.instance.rendererContext._cacheCanvasContext){u=c.DisplayObject.getTransformBounds(g._getSize(d.identityRectangle),g._worldTransform);g._worldBounds.initialize(u.x,u.y,u.width,u.height);u=this._originalData;u.sourceX=a;u.sourceY=e;u.sourceWidth=l;u.sourceHeight=h;u.destX=f;u.destY=m;u.destWidth=n;u.destHeight=q;for(var v=this.getDrawAreaList(),x=0;x<v.length;x++)if(!this.ignoreRender(g,v[x],u.destX,u.destY)){b.drawImage(t,a,e,l,h,f,m,n,q,r);
break}}else b.drawImage(t,a,e,l,h,f,m,n,q,r)}};a.ignoreRender=function(b,g,a,c){var d=b._worldBounds;a*=b._worldTransform.a;c*=b._worldTransform.d;return d.x+d.width+a<=g.x||d.x+a>=g.x+g.width||d.y+d.height+c<=g.y||d.y+c>=g.y+g.height?!0:!1};a.getDrawAreaList=function(){var b;0==this._drawAreaList.length?(this._defaultDrawAreaList||(this._defaultDrawAreaList=[new c.Rectangle(0,0,c.MainContext.instance.stage.stageWidth,c.MainContext.instance.stage.stageHeight)],c.MainContext.instance.stage.addEventListener(c.Event.RESIZE,
this.onResize,this)),b=this._defaultDrawAreaList):b=this._drawAreaList;return b};a.onResize=function(){c.MainContext.instance.stage.removeEventListener(c.Event.RESIZE,this.onResize,this);this._defaultDrawAreaList=null};d.identityRectangle=new c.Rectangle;return d}(c.HashObject);c.RenderFilter=f;f.prototype.__class__="egret.RenderFilter"})(egret||(egret={}));
(function(c){var f=function(){function e(){}e.mapClass=function(c,a,b){void 0===b&&(b="");c=this.getKey(c)+"#"+b;this.mapClassDic[c]=a};e.getKey=function(d){return"string"==typeof d?d:c.getQualifiedClassName(d)};e.mapValue=function(c,a,b){void 0===b&&(b="");c=this.getKey(c)+"#"+b;this.mapValueDic[c]=a};e.hasMapRule=function(c,a){void 0===a&&(a="");var b=this.getKey(c)+"#"+a;return this.mapValueDic[b]||this.mapClassDic[b]?!0:!1};e.getInstance=function(d,a){void 0===a&&(a="");var b=this.getKey(d)+"#"+
a;if(this.mapValueDic[b])return this.mapValueDic[b];var g=this.mapClassDic[b];if(g)return g=new g,this.mapValueDic[b]=g,delete this.mapClassDic[b],g;c.$error(1028,b)};e.mapClassDic={};e.mapValueDic={};return e}();c.Injector=f;f.prototype.__class__="egret.Injector"})(egret||(egret={}));(function(c){var f=function(c){function d(){c.apply(this,arguments);this.type=null}__extends(d,c);return d}(c.HashObject);c.Filter=f;f.prototype.__class__="egret.Filter"})(egret||(egret={}));
(function(c){var f=function(c){function d(a,b){c.call(this);this.blurX=a;this.blurY=b;this.type="blur"}__extends(d,c);return d}(c.Filter);c.BlurFilter=f;f.prototype.__class__="egret.BlurFilter"})(egret||(egret={}));
(function(c){var f=function(c){function d(b){void 0===b&&(b=null);c.call(this);this._matrix=[];this._matrix2=[];this.type="colorTransform";this._setMatrix(b)}__extends(d,c);var a=d.prototype;Object.defineProperty(a,"matrix",{get:function(){for(var b=0;20>b;b++)this._matrix2[b]=this._matrix[b];return this._matrix2},set:function(b){this._setMatrix(b)},enumerable:!0,configurable:!0});a._setMatrix=function(b){for(var g=0;20>g;g++)this._matrix[g]=b&&b[g]||0};return d}(c.Filter);c.ColorMatrixFilter=f;f.prototype.__class__=
"egret.ColorMatrixFilter"})(egret||(egret={}));
(function(c){var f=function(c){function d(a,b,g,s,d,l,h,f){void 0===a&&(a=16711680);void 0===b&&(b=1);void 0===g&&(g=6);void 0===s&&(s=6);void 0===d&&(d=2);void 0===l&&(l=1);void 0===h&&(h=!1);void 0===f&&(f=!1);c.call(this);this.color=a;this.alpha=b;this.blurX=g;this.blurY=s;this.strength=d;this.quality=l;this.inner=h;this.knockout=f;this.type="glow";this._blue=a&255;this._green=(a&65280)>>8;this._red=a>>16}__extends(d,c);return d}(c.Filter);c.GlowFilter=f;f.prototype.__class__="egret.GlowFilter"})(egret||
(egret={}));(function(c){var f=function(c){function d(a,b,g,s,d,l,h,f,m,n,q){void 0===a&&(a=4);void 0===b&&(b=45);void 0===g&&(g=0);void 0===s&&(s=1);void 0===d&&(d=4);void 0===l&&(l=4);void 0===h&&(h=1);void 0===f&&(f=1);void 0===m&&(m=!1);void 0===n&&(n=!1);c.call(this,g,s,d,l,h,f,m,n);this.distance=a;this.angle=b}__extends(d,c);return d}(c.GlowFilter);c.DropShadowFilter=f;f.prototype.__class__="egret.DropShadowFilter"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.NORMAL="normal";c.ADD="add";c.ERASE="erase";c.ERASE_REVERSE="eraseReverse";return c}();c.BlendMode=f;f.prototype.__class__="egret.BlendMode"})(egret||(egret={}));
(function(c){var f=function(){function c(){this._name=null;this._explicitHeight=this._explicitWidth=NaN;this._y=this._x=0;this._scaleY=this._scaleX=1;this._rotation=this._anchorY=this._anchorX=this._anchorOffsetY=this._anchorOffsetX=0;this._alpha=1;this._skewY=this._skewX=0;this._blendMode=null;this._touchEnabled=c.defaultTouchEnabled;this._visible=!0;this._worldAlpha=1;this._scrollRect=null;this._cacheAsBitmap=!1;this._stage=this._parent=null;this._needDraw=!1;this._filters=null;this._hasHeightSet=
this._hasWidthSet=!1;this._sizeDirty=this._normalDirty=!0;this._isContainer=!1}c.defaultTouchEnabled=!1;return c}();c.DisplayObjectProperties=f;f.prototype.__class__="egret.DisplayObjectProperties"})(egret||(egret={}));(function(c){var f=function(){return function(){this._hitTestPointTexture=null;this._rectH=this._rectW=0;this._cacheDirty=!1}}();c.DisplayObjectPrivateProperties=f;f.prototype.__class__="egret.DisplayObjectPrivateProperties"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.renderTexture=this.mask=this._sizeChangeCallTarget=this._sizeChangeCallBack=this.__hack_local_matrix=this._worldBounds=this._texture_to_render=null;this._DO_Props_=new c.DisplayObjectProperties;this._DO_Privs_=new c.DisplayObjectPrivateProperties;this._worldTransform=new c.Matrix;this._worldBounds=new c.Rectangle(0,0,0,0);this._DO_Privs_._cacheBounds=new c.Rectangle(0,0,0,0)}__extends(d,e);var a=d.prototype;a._setDirty=function(){this._DO_Props_._normalDirty=
!0};a.getDirty=function(){return this._DO_Props_._normalDirty||this._DO_Props_._sizeDirty};a._setParentSizeDirty=function(){var b=this._DO_Props_._parent;b&&(b._DO_Props_._hasWidthSet||b._DO_Props_._hasHeightSet?b._setCacheDirty():b._setSizeDirty())};a._setSizeDirty=function(){var b=this._DO_Props_;b._sizeDirty||(b._sizeDirty=!0,this._setDirty(),this._setCacheDirty(),this._setParentSizeDirty(),null!=this._sizeChangeCallBack&&(this._sizeChangeCallTarget==b._parent?this._sizeChangeCallBack.call(this._sizeChangeCallTarget):
this._sizeChangeCallTarget=this._sizeChangeCallBack=null))};a._clearDirty=function(){this._DO_Props_._normalDirty=!1};a._clearSizeDirty=function(){this._DO_Props_._sizeDirty=!1};Object.defineProperty(a,"name",{get:function(){return this._DO_Props_._name},set:function(b){this._DO_Props_._name=b},enumerable:!0,configurable:!0});Object.defineProperty(a,"parent",{get:function(){return this._DO_Props_._parent},enumerable:!0,configurable:!0});a._parentChanged=function(b){this._DO_Props_._parent=b};Object.defineProperty(a,
"x",{get:function(){return this._DO_Props_._x},set:function(b){this._setX(b)},enumerable:!0,configurable:!0});a._setX=function(b){c.NumberUtils.isNumber(b)&&this._DO_Props_._x!=b&&(this._DO_Props_._x=b,this._setDirty(),this._setParentSizeDirty())};Object.defineProperty(a,"y",{get:function(){return this._DO_Props_._y},set:function(b){this._setY(b)},enumerable:!0,configurable:!0});a._setY=function(b){c.NumberUtils.isNumber(b)&&this._DO_Props_._y!=b&&(this._DO_Props_._y=b,this._setDirty(),this._setParentSizeDirty())};
Object.defineProperty(a,"scaleX",{get:function(){return this._DO_Props_._scaleX},set:function(b){c.NumberUtils.isNumber(b)&&this._DO_Props_._scaleX!=b&&(this._DO_Props_._scaleX=b,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(a,"scaleY",{get:function(){return this._DO_Props_._scaleY},set:function(b){c.NumberUtils.isNumber(b)&&this._DO_Props_._scaleY!=b&&(this._DO_Props_._scaleY=b,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});
Object.defineProperty(a,"anchorOffsetX",{get:function(){return this._DO_Props_._anchorOffsetX},set:function(b){c.NumberUtils.isNumber(b)&&this._DO_Props_._anchorOffsetX!=b&&(this._DO_Props_._anchorOffsetX=b,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(a,"anchorOffsetY",{get:function(){return this._DO_Props_._anchorOffsetY},set:function(b){c.NumberUtils.isNumber(b)&&this._DO_Props_._anchorOffsetY!=b&&(this._DO_Props_._anchorOffsetY=b,this._setDirty(),
this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(a,"anchorX",{get:function(){return this._DO_Props_._anchorX},set:function(b){this._setAnchorX(b)},enumerable:!0,configurable:!0});a._setAnchorX=function(b){c.NumberUtils.isNumber(b)&&this._DO_Props_._anchorX!=b&&(this._DO_Props_._anchorX=b,this._setDirty(),this._setParentSizeDirty())};Object.defineProperty(a,"anchorY",{get:function(){return this._DO_Props_._anchorY},set:function(b){this._setAnchorY(b)},enumerable:!0,
configurable:!0});a._setAnchorY=function(b){c.NumberUtils.isNumber(b)&&this._DO_Props_._anchorY!=b&&(this._DO_Props_._anchorY=b,this._setDirty(),this._setParentSizeDirty())};Object.defineProperty(a,"visible",{get:function(){return this._DO_Props_._visible},set:function(b){this._setVisible(b)},enumerable:!0,configurable:!0});a._setVisible=function(b){this._DO_Props_._visible!=b&&(this._DO_Props_._visible=b,this._setSizeDirty())};Object.defineProperty(a,"rotation",{get:function(){return this._DO_Props_._rotation},
set:function(b){c.NumberUtils.isNumber(b)&&this._DO_Props_._rotation!=b&&(this._DO_Props_._rotation=b,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(a,"alpha",{get:function(){return this._DO_Props_._alpha},set:function(b){this._setAlpha(b)},enumerable:!0,configurable:!0});a._setAlpha=function(b){c.NumberUtils.isNumber(b)&&this._DO_Props_._alpha!=b&&(this._DO_Props_._alpha=b,this._setDirty(),this._setCacheDirty())};Object.defineProperty(a,"skewX",
{get:function(){return this._DO_Props_._skewX},set:function(b){c.NumberUtils.isNumber(b)&&this._DO_Props_._skewX!=b&&(this._DO_Props_._skewX=b,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(a,"skewY",{get:function(){return this._DO_Props_._skewY},set:function(b){c.NumberUtils.isNumber(b)&&this._DO_Props_._skewY!=b&&(this._DO_Props_._skewY=b,this._setDirty(),this._setParentSizeDirty())},enumerable:!0,configurable:!0});Object.defineProperty(a,"touchEnabled",
{get:function(){return this._DO_Props_._touchEnabled},set:function(b){this._setTouchEnabled(b)},enumerable:!0,configurable:!0});a._setTouchEnabled=function(b){this._DO_Props_._touchEnabled=b};Object.defineProperty(a,"blendMode",{get:function(){return this._DO_Props_._blendMode},set:function(b){this._DO_Props_._blendMode=b},enumerable:!0,configurable:!0});Object.defineProperty(a,"scrollRect",{get:function(){return this._DO_Props_._scrollRect},set:function(b){this._setScrollRect(b)},enumerable:!0,configurable:!0});
a._setScrollRect=function(b){this._DO_Props_._scrollRect=b;this._setSizeDirty()};Object.defineProperty(a,"measuredWidth",{get:function(){return this._measureBounds().width},enumerable:!0,configurable:!0});Object.defineProperty(a,"measuredHeight",{get:function(){return this._measureBounds().height},enumerable:!0,configurable:!0});Object.defineProperty(a,"explicitWidth",{get:function(){return this._DO_Props_._explicitWidth},enumerable:!0,configurable:!0});Object.defineProperty(a,"explicitHeight",{get:function(){return this._DO_Props_._explicitHeight},
enumerable:!0,configurable:!0});Object.defineProperty(a,"width",{get:function(){return this._getWidth()},set:function(b){this._setWidth(b)},enumerable:!0,configurable:!0});a._getWidth=function(){return this._getSize(c.Rectangle.identity).width};Object.defineProperty(a,"height",{get:function(){return this._getHeight()},set:function(b){this._setHeight(b)},enumerable:!0,configurable:!0});a._getHeight=function(){return this._getSize(c.Rectangle.identity).height};a._setWidth=function(b){this._setSizeDirty();
this._setCacheDirty();this._DO_Props_._explicitWidth=b;this._DO_Props_._hasWidthSet=c.NumberUtils.isNumber(b)};a._setHeight=function(b){this._setSizeDirty();this._setCacheDirty();this._DO_Props_._explicitHeight=b;this._DO_Props_._hasHeightSet=c.NumberUtils.isNumber(b)};Object.defineProperty(a,"worldAlpha",{get:function(){return this._DO_Props_._worldAlpha},set:function(b){this._DO_Props_._worldAlpha=b},enumerable:!0,configurable:!0});a._draw=function(b){if(this._DO_Props_._visible&&!this.drawCacheTexture(b)){var g=
c.MainContext.__use_new_draw&&this._DO_Props_._isContainer;this._hasFilters()&&!g&&this._setGlobalFilters(b);b.setAlpha(this.worldAlpha,this.blendMode);b.setTransform(this._worldTransform);var a=this.mask||this._DO_Props_._scrollRect;a&&!g&&b.pushMask(a);this._render(b);a&&!g&&b.popMask();this._hasFilters()&&!g&&this._removeGlobalFilters(b)}this.destroyCacheBounds()};a._setGlobalFilters=function(b){var g;g=this._DO_Props_._filters?this._DO_Props_._filters.concat():[];if(this._transform){var a=this._transform._colorTransform,
c=d.color;c[0]=a._redMultiplier;c[4]=a._redOffset;c[6]=a._greenMultiplier;c[9]=a._greenOffset;c[12]=a._blueMultiplier;c[14]=a._blueOffset;c[18]=a._alphaMultiplier;c[19]=a._alphaOffset;d.colorMatrixFilter._matrix=c;g.push(d.colorMatrixFilter)}b.setGlobalFilters(g)};a._removeGlobalFilters=function(b){b.setGlobalFilters(null)};a._hasFilters=function(){var b=this._DO_Props_._filters&&0<this._DO_Props_._filters.length;if(this._transform){var g=this._transform._colorTransform;if(1!=g._redMultiplier||0!=
g._redOffset||1!=g._greenMultiplier||0!=g._greenOffset||1!=g._blueMultiplier||0!=g._blueOffset||1!=g._alphaMultiplier||0!=g._alphaOffset)b=!0}return b};a._pushMask=function(b){b.setTransform(this._worldTransform);var g=this.mask||this._DO_Props_._scrollRect;g&&b.pushMask(g)};a._popMask=function(b){b.popMask()};a.drawCacheTexture=function(b){if(!1==this._DO_Props_._cacheAsBitmap)return!1;var g=this.getBounds(c.Rectangle.identity);if(this._DO_Privs_._cacheDirty||null==this._texture_to_render||1<=Math.round(g.width)-
this._texture_to_render._textureWidth||1<=Math.round(g.height)-this._texture_to_render._textureHeight)g=this._makeBitmapCache(),this._DO_Privs_._cacheDirty=!g;if(null==this._texture_to_render)return!1;var a=this._texture_to_render,g=a._offsetX,d=a._offsetY,e=a._textureWidth,a=a._textureHeight;this._updateTransform();b.setAlpha(this.worldAlpha,this.blendMode);b.setTransform(this._worldTransform);c.RenderFilter.getInstance().drawImage(b,this,0,0,e,a,g,d,e,a);return!0};Object.defineProperty(a,"needDraw",
{get:function(){return this._DO_Props_._needDraw},set:function(b){this._DO_Props_._needDraw=b},enumerable:!0,configurable:!0});a._updateTransform=function(){var b=this._DO_Props_;b._visible&&(this._calculateWorldTransform(),"updateTransform"==c.MainContext._renderLoopPhase&&(this.needDraw||this._texture_to_render||b._cacheAsBitmap)&&c.RenderCommand.push(this._draw,this))};a._calculateWorldTransform=function(){var b=this._DO_Props_,g=this._worldTransform,a=b._parent;g.identityMatrix(a._worldTransform);
this._getMatrix(g);var c=b._scrollRect;c&&g.append(1,0,0,1,-c.x,-c.y);this.worldAlpha=a.worldAlpha*b._alpha};a._render=function(b){};a.getBounds=function(b,g){void 0===g&&(g=!0);var a=this._DO_Props_,d=this._DO_Privs_,e=this._measureBounds(),h=a._hasWidthSet?a._explicitWidth:e.width,f=a._hasHeightSet?a._explicitHeight:e.height;d._rectW=e.width;d._rectH=e.height;this._clearSizeDirty();var m=e.x,e=e.y,n=0,q=0;g&&(0!=a._anchorX||0!=a._anchorY?(n=h*a._anchorX,q=f*a._anchorY):(n=a._anchorOffsetX,q=a._anchorOffsetY));
d._cacheBounds.initialize(m-n,e-q,h,f);a=d._cacheBounds;b||(b=new c.Rectangle);return b.initialize(a.x,a.y,a.width,a.height)};a.destroyCacheBounds=function(){var b=this._DO_Privs_;b._cacheBounds.x=0;b._cacheBounds.y=0;b._cacheBounds.width=0;b._cacheBounds.height=0};a._getConcatenatedMatrix=function(){for(var b=d.identityMatrixForGetConcatenated.identity(),g=this;null!=g;){var a=g._DO_Props_;0!=a._anchorX||0!=a._anchorY?(g=g._getSize(c.Rectangle.identity),b.prependTransform(a._x,a._y,a._scaleX,a._scaleY,
a._rotation,a._skewX,a._skewY,g.width*a._anchorX,g.height*a._anchorY)):b.prependTransform(a._x,a._y,a._scaleX,a._scaleY,a._rotation,a._skewX,a._skewY,a._anchorOffsetX,a._anchorOffsetY);a._scrollRect&&b.prepend(1,0,0,1,-a._scrollRect.x,-a._scrollRect.y);g=a._parent}return b};a.localToGlobal=function(b,g,a){void 0===b&&(b=0);void 0===g&&(g=0);var d=this._getConcatenatedMatrix();d.append(1,0,0,1,b,g);a||(a=new c.Point);a.x=d.tx;a.y=d.ty;return a};a.globalToLocal=function(b,g,a){void 0===b&&(b=0);void 0===
g&&(g=0);var d=this._getConcatenatedMatrix();d.invert();d.append(1,0,0,1,b,g);a||(a=new c.Point);a.x=d.tx;a.y=d.ty;return a};a.hitTest=function(b,g,a){void 0===a&&(a=!1);var d=this._DO_Props_;if(!d._visible||!a&&!d._touchEnabled)return null;a=this.getBounds(c.Rectangle.identity,!1);b-=a.x;g-=a.y;return 0<=b&&b<a.width&&0<=g&&g<a.height?this.mask||d._scrollRect?d._scrollRect&&b>d._scrollRect.x&&g>d._scrollRect.y&&b<d._scrollRect.x+d._scrollRect.width&&g<d._scrollRect.y+d._scrollRect.height||this.mask&&
this.mask.x<=b&&b<this.mask.x+this.mask.width&&this.mask.y<=g&&g<this.mask.y+this.mask.height?this:null:this:null};a.hitTestPoint=function(b,g,a){var d=this._DO_Privs_;b=this.globalToLocal(b,g);return a?(d._hitTestPointTexture||(d._hitTestPointTexture=new c.RenderTexture),a=d._hitTestPointTexture,a.drawToTexture(this),0!=a.getPixel32(b.x-d._hitTestPointTexture._offsetX,b.y-d._hitTestPointTexture._offsetY)[3]?!0:!1):!!this.hitTest(b.x,b.y,!0)};a._getMatrix=function(b){b||(b=c.Matrix.identity.identity());
var g=this._DO_Props_,a,d;d=this._getOffsetPoint();a=d.x;d=d.y;var e=this.__hack_local_matrix;e?(b.append(e.a,e.b,e.c,e.d,e.tx,e.ty),b.append(1,0,0,1,-a,-d)):b.appendTransform(g._x,g._y,g._scaleX,g._scaleY,g._rotation,g._skewX,g._skewY,a,d);return b};a._getSize=function(b){var g=this._DO_Props_;if(g._hasHeightSet&&g._hasWidthSet)return this._clearSizeDirty(),b.initialize(0,0,g._explicitWidth,g._explicitHeight);this._measureSize(b);g._hasWidthSet&&(b.width=g._explicitWidth);g._hasHeightSet&&(b.height=
g._explicitHeight);return b};a._measureSize=function(b){var g=this._DO_Privs_;this._DO_Props_._sizeDirty?(b=this._measureBounds(),g._rectW=b.width,g._rectH=b.height,this._clearSizeDirty()):(b.width=g._rectW,b.height=g._rectH);b.x=0;b.y=0;return b};a._measureBounds=function(){return c.Rectangle.identity.initialize(0,0,0,0)};a._getOffsetPoint=function(){var b=this._DO_Props_,g=b._anchorOffsetX,a=b._anchorOffsetY;if(0!=b._anchorX||0!=b._anchorY)a=this._getSize(c.Rectangle.identity),g=b._anchorX*a.width,
a=b._anchorY*a.height;b=c.Point.identity;b.x=g;b.y=a;return b};a._onAddToStage=function(){this._DO_Props_._stage=c.MainContext.instance.stage;c.DisplayObjectContainer.__EVENT__ADD_TO_STAGE_LIST.push(this)};a._onRemoveFromStage=function(){c.DisplayObjectContainer.__EVENT__REMOVE_FROM_STAGE_LIST.push(this)};Object.defineProperty(a,"stage",{get:function(){return this._DO_Props_._stage},enumerable:!0,configurable:!0});a.addEventListener=function(b,g,a,p,l){void 0===p&&(p=!1);void 0===l&&(l=0);e.prototype.addEventListener.call(this,
b,g,a,p,l);((p=b==c.Event.ENTER_FRAME)||b==c.Event.RENDER)&&this._insertEventBin(p?d._enterFrameCallBackList:d._renderCallBackList,g,a,l,this)};a.removeEventListener=function(b,g,a,p){void 0===p&&(p=!1);e.prototype.removeEventListener.call(this,b,g,a,p);((p=b==c.Event.ENTER_FRAME)||b==c.Event.RENDER)&&this._removeEventBin(p?d._enterFrameCallBackList:d._renderCallBackList,g,a,this)};a.dispatchEvent=function(b){if(!b._bubbles)return e.prototype.dispatchEvent.call(this,b);for(var g=[],a=this;a;)g.push(a),
a=a._DO_Props_._parent;b._reset();this._dispatchPropagationEvent(b,g);return!b._isDefaultPrevented};a._dispatchPropagationEvent=function(b,g,a){a=g.length;for(var c=1,d=a-1;0<=d;d--){var e=g[d];b._currentTarget=e;b._target=this;b._eventPhase=c;e._notifyListener(b);if(b._isPropagationStopped||b._isPropagationImmediateStopped)return}e=g[0];b._currentTarget=e;b._target=this;b._eventPhase=2;e._notifyListener(b);if(!b._isPropagationStopped&&!b._isPropagationImmediateStopped)for(c=3,d=1;d<a&&(e=g[d],b._currentTarget=
e,b._target=this,b._eventPhase=c,e._notifyListener(b),!b._isPropagationStopped&&!b._isPropagationImmediateStopped);d++);};a.willTrigger=function(b){for(var g=this;g;){if(g.hasEventListener(b))return!0;g=g._DO_Props_._parent}return!1};Object.defineProperty(a,"cacheAsBitmap",{get:function(){return this._DO_Props_._cacheAsBitmap},set:function(b){(this._DO_Props_._cacheAsBitmap=b)?c.callLater(this._makeBitmapCache,this):this._texture_to_render=null},enumerable:!0,configurable:!0});a._makeBitmapCache=
function(){this.renderTexture||(this.renderTexture=new c.RenderTexture);var b=this.renderTexture.drawToTexture(this);this._texture_to_render=b?this.renderTexture:null;return b};a._setCacheDirty=function(b){void 0===b&&(b=!0);this._DO_Privs_._cacheDirty=b};d.getTransformBounds=function(b,g){var a=b.x,c=b.y,d=b.width,e=b.height;(a||c)&&g.appendTransform(0,0,1,1,0,0,0,-a,-c);var f=d*g.a,d=d*g.b,m=e*g.c,e=e*g.d,n=g.tx,q=g.ty,r=n,t=n,u=q,v=q;(a=f+n)<r?r=a:a>t&&(t=a);(a=f+m+n)<r?r=a:a>t&&(t=a);(a=m+n)<
r?r=a:a>t&&(t=a);(c=d+q)<u?u=c:c>v&&(v=c);(c=d+e+q)<u?u=c:c>v&&(v=c);(c=e+q)<u?u=c:c>v&&(v=c);return b.initialize(r,u,t-r,v-u)};Object.defineProperty(a,"filters",{get:function(){return this._DO_Props_._filters},set:function(b){this._DO_Props_._filters=b},enumerable:!0,configurable:!0});Object.defineProperty(a,"transform",{get:function(){this._transform||(this._transform=new c.Transform(this));return this._transform},enumerable:!0,configurable:!0});d.color=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];
d.colorMatrixFilter=new c.ColorMatrixFilter;d.identityMatrixForGetConcatenated=new c.Matrix;d._enterFrameCallBackList=[];d._renderCallBackList=[];return d}(c.EventDispatcher);c.DisplayObject=f;f.prototype.__class__="egret.DisplayObject"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._touchChildren=!0;this._children=[];this._DO_Props_._isContainer=!0}__extends(d,e);var a=d.prototype;Object.defineProperty(a,"touchChildren",{get:function(){return this._touchChildren},set:function(b){this._touchChildren=b},enumerable:!0,configurable:!0});Object.defineProperty(a,"numChildren",{get:function(){return this._children.length},enumerable:!0,configurable:!0});a.setChildIndex=function(b,g){this.doSetChildIndex(b,g)};a.doSetChildIndex=
function(b,g){var a=this._children.indexOf(b);0>a&&c.$error(1006);this._children.splice(a,1);0>g||this._children.length<=g?this._children.push(b):this._children.splice(g,0,b)};a.addChild=function(b){var g=this._children.length;b.parent==this&&g--;return this._doAddChild(b,g)};a.addChildAt=function(b,g){return this._doAddChild(b,g)};a._doAddChild=function(b,g,a){void 0===a&&(a=!0);if(b==this)return b;if(0>g||g>this._children.length)return c.$error(1007),b;var e=b.parent;if(e==this)return this.doSetChildIndex(b,
g),b;if(e){var l=e._children.indexOf(b);0<=l&&e._doRemoveChild(l)}this._children.splice(g,0,b);b._parentChanged(this);a&&b.dispatchEventWith(c.Event.ADDED,!0);if(this._DO_Props_._stage)for(b._onAddToStage(),g=d.__EVENT__ADD_TO_STAGE_LIST;0<g.length;)e=g.shift(),a&&e.dispatchEventWith(c.Event.ADDED_TO_STAGE);b._setDirty();this._setSizeDirty();return b};a.removeChild=function(b){b=this._children.indexOf(b);if(0<=b)return this._doRemoveChild(b);c.$error(1008);return null};a.removeChildAt=function(b){if(0<=
b&&b<this._children.length)return this._doRemoveChild(b);c.$error(1007);return null};a._doRemoveChild=function(b,g){void 0===g&&(g=!0);var a=this._children,e=a[b];g&&e.dispatchEventWith(c.Event.REMOVED,!0);if(this._DO_Props_._stage){e._onRemoveFromStage();for(var l=d.__EVENT__REMOVE_FROM_STAGE_LIST;0<l.length;){var h=l.shift();g&&h.dispatchEventWith(c.Event.REMOVED_FROM_STAGE);h._DO_Props_._stage=null}}e._parentChanged(null);a.splice(b,1);this._setSizeDirty();return e};a.getChildAt=function(b){if(0<=
b&&b<this._children.length)return this._children[b];c.$error(1007);return null};a.contains=function(b){for(;b;){if(b==this)return!0;b=b.parent}return!1};a.swapChildrenAt=function(b,g){0<=b&&b<this._children.length&&0<=g&&g<this._children.length?this._swapChildrenAt(b,g):c.$error(1007)};a.swapChildren=function(b,g){var a=this._children.indexOf(b),d=this._children.indexOf(g);-1==a||-1==d?c.$error(1008):this._swapChildrenAt(a,d)};a._swapChildrenAt=function(b,g){if(b!=g){var a=this._children,c=a[b];a[b]=
a[g];a[g]=c}};a.getChildIndex=function(b){return this._children.indexOf(b)};a.removeChildren=function(){for(var b=this._children.length-1;0<=b;b--)this._doRemoveChild(b)};a._updateTransform=function(){if(this._DO_Props_._visible){this._hasFilters()&&c.RenderCommand.push(this._setGlobalFilters,this);var b=this.mask||this._DO_Props_._scrollRect;b&&c.RenderCommand.push(this._pushMask,this);e.prototype._updateTransform.call(this);if(!this._DO_Props_._cacheAsBitmap||!this._texture_to_render)for(var g=
0,a=this._children,d=a.length;g<d;g++)a[g]._updateTransform();b&&c.RenderCommand.push(this._popMask,this);this._hasFilters()&&c.RenderCommand.push(this._removeGlobalFilters,this)}};a._render=function(b){if(!c.MainContext.__use_new_draw)for(var g=0,a=this._children,d=a.length;g<d;g++)a[g]._draw(b)};a._measureBounds=function(){for(var b=0,g=0,a=0,d=0,e=this._children,h=e.length,f=0;f<h;f++){var m=e[f];if(m.visible){var n=m.getBounds(c.Rectangle.identity,!1),q=n.x,r=n.y,t=n.width,n=n.height,m=m._getMatrix(),
m=c.DisplayObject.getTransformBounds(c.Rectangle.identity.initialize(q,r,t,n),m),q=m.x,r=m.y,t=m.width+m.x,m=m.height+m.y;if(q<b||0==f)b=q;if(t>g||0==f)g=t;if(r<a||0==f)a=r;if(m>d||0==f)d=m}}return c.Rectangle.identity.initialize(b,a,g-b,d-a)};a.hitTest=function(b,g,a){void 0===a&&(a=!1);var d;if(!this._DO_Props_._visible)return null;if(this._DO_Props_._scrollRect){if(b<this._DO_Props_._scrollRect.x||g<this._DO_Props_._scrollRect.y||b>this._DO_Props_._scrollRect.x+this._DO_Props_._scrollRect.width||
g>this._DO_Props_._scrollRect.y+this._DO_Props_._scrollRect.height)return null}else if(this.mask&&(this.mask.x>b||b>this.mask.x+this.mask.width||this.mask.y>g||g>this.mask.y+this.mask.height))return null;for(var l=this._children,h=this._touchChildren,f=l.length-1;0<=f;f--){var m=l[f],n=m._getMatrix(),q=m.scrollRect;q&&n.append(1,0,0,1,-q.x,-q.y);n.invert();n=c.Matrix.transformCoords(n,b,g);if(m=m.hitTest(n.x,n.y,!0)){if(!h)return this;if(m._DO_Props_._touchEnabled&&h)return m;d=this}}return d?d:this._texture_to_render?
e.prototype.hitTest.call(this,b,g,a):null};a._onAddToStage=function(){e.prototype._onAddToStage.call(this);for(var b=this._children.length,g=0;g<b;g++)this._children[g]._onAddToStage()};a._onRemoveFromStage=function(){e.prototype._onRemoveFromStage.call(this);for(var b=this._children,g=b.length,a=0;a<g;a++)b[a]._onRemoveFromStage()};a.getChildByName=function(b){for(var g=this._children,a=g.length,c,d=0;d<a;d++)if(c=g[d],c.name==b)return c;return null};d.__EVENT__ADD_TO_STAGE_LIST=[];d.__EVENT__REMOVE_FROM_STAGE_LIST=
[];return d}(c.DisplayObject);c.DisplayObjectContainer=f;f.prototype.__class__="egret.DisplayObjectContainer"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.NO_BORDER="noBorder";c.NO_SCALE="noScale";c.SHOW_ALL="showAll";c.EXACT_FIT="exactFit";return c}();c.StageScaleMode=f;f.prototype.__class__="egret.StageScaleMode"})(egret||(egret={}));
(function(c){var f=function(e){function d(b,g){void 0===b&&(b=480);void 0===g&&(g=800);e.call(this);this._changeSizeDispatchFlag=!0;this._scaleMode="";this._stageHeight=this._stageWidth=NaN;this._frameRate=60;this.touchEnabled=!0;this._DO_Props_._stage=this;this._stageWidth=b;this._stageHeight=g}__extends(d,e);var a=d.prototype;a.invalidate=function(){d._invalidateRenderFlag=!0};Object.defineProperty(a,"scaleMode",{get:function(){return this._scaleMode},set:function(b){this._scaleMode!=b&&(this._scaleMode=
b,this.setResolutionPolicy())},enumerable:!0,configurable:!0});a.changeSize=function(){this._changeSizeDispatchFlag&&(this.setResolutionPolicy(),this.dispatchEventWith(c.Event.RESIZE))};a.setResolutionPolicy=function(){var b=d.SCALE_MODE_ENUM[this._scaleMode];b||c.$error(1024);var g=new c.EqualToFrame,b=new c.ResolutionPolicy(g,b);c.StageDelegate.getInstance()._setResolutionPolicy(b);this._stageWidth=c.StageDelegate.getInstance()._stageWidth;this._stageHeight=c.StageDelegate.getInstance()._stageHeight};
Object.defineProperty(a,"stageWidth",{get:function(){return this._stageWidth},enumerable:!0,configurable:!0});Object.defineProperty(a,"stageHeight",{get:function(){return this._stageHeight},enumerable:!0,configurable:!0});Object.defineProperty(a,"frameRate",{get:function(){return this._frameRate},set:function(b){this._frameRate=b;c.MainContext.instance.deviceContext.setFrameRate(b)},enumerable:!0,configurable:!0});a.hitTest=function(b,g,a){if(!this._DO_Props_._touchEnabled)return null;var d;if(!this._touchChildren)return this;
a=this._children;for(var e=a.length-1;0<=e;e--){d=a[e];var h=d._getMatrix(),f=d.scrollRect;f&&h.append(1,0,0,1,-f.x,-f.y);h.invert();h=c.Matrix.transformCoords(h,b,g);if((d=d.hitTest(h.x,h.y,!0))&&d.touchEnabled)return d}return this};a.getBounds=function(b){b||(b=new c.Rectangle);return b.initialize(0,0,this._stageWidth,this._stageHeight)};a._updateTransform=function(){for(var b=0,g=this._children.length;b<g;b++)this._children[b]._updateTransform()};Object.defineProperty(a,"focus",{get:function(){return null},
enumerable:!0,configurable:!0});d.registerScaleMode=function(b,g,a){d.SCALE_MODE_ENUM[b]&&!a?c.$warn(1009,b):d.SCALE_MODE_ENUM[b]=g};d._invalidateRenderFlag=!1;d.SCALE_MODE_ENUM={};return d}(c.DisplayObjectContainer);c.Stage=f;f.prototype.__class__="egret.Stage"})(egret||(egret={}));egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.NO_SCALE]=new egret.NoScale;egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.SHOW_ALL]=new egret.ShowAll;egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.NO_BORDER]=new egret.FixedWidth;
egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.EXACT_FIT]=new egret.FullScreen;
(function(c){var f=function(){return function(){this._horizontalScrollPolicy=this._verticalScrollPolicy="auto";this._scrollTop=this._scrollLeft=0;this._vCanScroll=this._hCanScroll=!1;this._lastTouchPosition=new c.Point(0,0);this._touchStartPosition=new c.Point(0,0);this._scrollStarted=!1;this._lastTouchTime=0;this._lastTouchEvent=null;this._velocitys=[];this._isVTweenPlaying=this._isHTweenPlaying=!1;this._vScrollTween=this._hScrollTween=null}}();c.ScrollViewProperties=f;f.prototype.__class__="egret.ScrollViewProperties"})(egret||
(egret={}));
(function(c){var f=function(e){function d(b){void 0===b&&(b=null);e.call(this);this.scrollBeginThreshold=10;this.scrollSpeed=1;this.touchBeginTimer=this.delayTouchBeginEvent=this._content=null;this.touchEnabled=!0;this._ScrV_Props_=new c.ScrollViewProperties;b&&this.setContent(b)}__extends(d,e);var a=d.prototype;a.setContent=function(b){this._content!==b&&(this.removeContent(),b&&(this._content=b,e.prototype.addChild.call(this,b),this._addEvents()))};a.removeContent=function(){this._content&&(this._removeEvents(),
e.prototype.removeChildAt.call(this,0));this._content=null};Object.defineProperty(a,"verticalScrollPolicy",{get:function(){return this._ScrV_Props_._verticalScrollPolicy},set:function(b){b!=this._ScrV_Props_._verticalScrollPolicy&&(this._ScrV_Props_._verticalScrollPolicy=b)},enumerable:!0,configurable:!0});Object.defineProperty(a,"horizontalScrollPolicy",{get:function(){return this._ScrV_Props_._horizontalScrollPolicy},set:function(b){b!=this._ScrV_Props_._horizontalScrollPolicy&&(this._ScrV_Props_._horizontalScrollPolicy=
b)},enumerable:!0,configurable:!0});Object.defineProperty(a,"scrollLeft",{get:function(){return this._ScrV_Props_._scrollLeft},set:function(b){b!=this._ScrV_Props_._scrollLeft&&(this._ScrV_Props_._scrollLeft=b,this._validatePosition(!1,!0),this._updateContentPosition())},enumerable:!0,configurable:!0});Object.defineProperty(a,"scrollTop",{get:function(){return this._ScrV_Props_._scrollTop},set:function(b){b!=this._ScrV_Props_._scrollTop&&(this._ScrV_Props_._scrollTop=b,this._validatePosition(!0,!1),
this._updateContentPosition())},enumerable:!0,configurable:!0});a.setScrollPosition=function(b,g,a){void 0===a&&(a=!1);if(!a||0!=b||0!=g)if(a||this._ScrV_Props_._scrollTop!=b||this._ScrV_Props_._scrollLeft!=g){if(a){a=this._isOnTheEdge(!0);var c=this._isOnTheEdge(!1);this._ScrV_Props_._scrollTop+=a?b/2:b;this._ScrV_Props_._scrollLeft+=c?g/2:g}else this._ScrV_Props_._scrollTop=b,this._ScrV_Props_._scrollLeft=g;this._validatePosition(!0,!0);this._updateContentPosition()}};a._isOnTheEdge=function(b){void 0===
b&&(b=!0);var g=this._ScrV_Props_._scrollTop,a=this._ScrV_Props_._scrollLeft;return b?0>g||g>this.getMaxScrollTop():0>a||a>this.getMaxScrollLeft()};a._validatePosition=function(b,g){void 0===b&&(b=!1);void 0===g&&(g=!1);if(b){var a=this.height,c=this._getContentHeight();this._ScrV_Props_._scrollTop=Math.max(this._ScrV_Props_._scrollTop,(0-a)/2);this._ScrV_Props_._scrollTop=Math.min(this._ScrV_Props_._scrollTop,c>a?c-a/2:a/2)}g&&(a=this.width,c=this._getContentWidth(),this._ScrV_Props_._scrollLeft=
Math.max(this._ScrV_Props_._scrollLeft,(0-a)/2),this._ScrV_Props_._scrollLeft=Math.min(this._ScrV_Props_._scrollLeft,c>a?c-a/2:a/2))};a._setWidth=function(b){this._DO_Props_._explicitWidth!=b&&(e.prototype._setWidth.call(this,b),this._updateContentPosition())};a._setHeight=function(b){this._DO_Props_._explicitHeight!=b&&(e.prototype._setHeight.call(this,b),this._updateContentPosition())};a._updateContentPosition=function(){var b=this.getBounds(c.Rectangle.identity),g=b.height,b=b.width;this.scrollRect=
new c.Rectangle(Math.round(this._ScrV_Props_._scrollLeft),Math.round(this._ScrV_Props_._scrollTop),b,g);this.dispatchEvent(new c.Event(c.Event.CHANGE))};a._checkScrollPolicy=function(){var b=this.__checkScrollPolicy(this._ScrV_Props_._horizontalScrollPolicy,this._getContentWidth(),this.width);this._ScrV_Props_._hCanScroll=b;var g=this.__checkScrollPolicy(this._ScrV_Props_._verticalScrollPolicy,this._getContentHeight(),this.height);this._ScrV_Props_._vCanScroll=g;return b||g};a.__checkScrollPolicy=
function(b,g,a){return"on"==b?!0:"off"==b?!1:g>a};a._addEvents=function(){this.addEventListener(c.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this);this.addEventListener(c.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0);this.addEventListener(c.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)};a._removeEvents=function(){this.removeEventListener(c.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this);this.removeEventListener(c.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0);this.removeEventListener(c.TouchEvent.TOUCH_END,
this._onTouchEndCapture,this,!0)};a._onTouchBegin=function(b){!b._isDefaultPrevented&&this._checkScrollPolicy()&&(this._ScrV_Props_._touchStartPosition.x=b.stageX,this._ScrV_Props_._touchStartPosition.y=b.stageY,(this._ScrV_Props_._isHTweenPlaying||this._ScrV_Props_._isVTweenPlaying)&&this._onScrollFinished(),this.stage.addEventListener(c.TouchEvent.TOUCH_MOVE,this._onTouchMove,this),this.stage.addEventListener(c.TouchEvent.TOUCH_END,this._onTouchEnd,this),this.stage.addEventListener(c.TouchEvent.LEAVE_STAGE,
this._onTouchEnd,this),this.addEventListener(c.Event.ENTER_FRAME,this._onEnterFrame,this),this._logTouchEvent(b),b.preventDefault())};a._onTouchBeginCapture=function(b){var g=this._checkScrollPolicy();if(g){for(var a=b.target;a!=this;){if("_checkScrollPolicy"in a&&(g=a._checkScrollPolicy()))return;a=a.parent}b.stopPropagation();this.delayTouchBeginEvent=this.cloneTouchEvent(b);this.touchBeginTimer||(this.touchBeginTimer=new c.Timer(100,1),this.touchBeginTimer.addEventListener(c.TimerEvent.TIMER_COMPLETE,
this._onTouchBeginTimer,this));this.touchBeginTimer.start();this._onTouchBegin(b)}};a._onTouchEndCapture=function(b){this.delayTouchBeginEvent&&this._onTouchBeginTimer()};a._onTouchBeginTimer=function(){this.touchBeginTimer.stop();var b=this.delayTouchBeginEvent;this.delayTouchBeginEvent=null;this.stage&&this.dispatchPropagationEvent(b)};a.dispatchPropagationEvent=function(b){for(var g=[],a=b._target,c=0;a;)a==this&&(c=g.length),g.push(a),a=a.parent;a=g.slice(0,c);a=a.reverse();g=a.concat(g);this._dispatchPropagationEvent(b,
g,c)};a._dispatchPropagationEvent=function(b,g,a){for(var c=g.length,d=0;d<c;d++){var e=g[d];b._currentTarget=e;b._eventPhase=d<a?1:d==a?2:3;e._notifyListener(b);if(b._isPropagationStopped||b._isPropagationImmediateStopped)break}};a._onTouchMove=function(b){if(this._ScrV_Props_._lastTouchPosition.x!=b.stageX||this._ScrV_Props_._lastTouchPosition.y!=b.stageY){if(!this._ScrV_Props_._scrollStarted){var g=b.stageX-this._ScrV_Props_._touchStartPosition.x,a=b.stageY-this._ScrV_Props_._touchStartPosition.y;
if(Math.sqrt(g*g+a*a)<this.scrollBeginThreshold){this._logTouchEvent(b);return}}this._ScrV_Props_._scrollStarted=!0;this.delayTouchBeginEvent&&(this.delayTouchBeginEvent=null,this.touchBeginTimer.stop());this.touchChildren=!1;g=this._getPointChange(b);this.setScrollPosition(g.y,g.x,!0);this._calcVelocitys(b);this._logTouchEvent(b)}};a._onTouchEnd=function(b){this.touchChildren=!0;this._ScrV_Props_._scrollStarted=!1;c.MainContext.instance.stage.removeEventListener(c.TouchEvent.TOUCH_MOVE,this._onTouchMove,
this);c.MainContext.instance.stage.removeEventListener(c.TouchEvent.TOUCH_END,this._onTouchEnd,this);c.MainContext.instance.stage.removeEventListener(c.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this);this.removeEventListener(c.Event.ENTER_FRAME,this._onEnterFrame,this);this._moveAfterTouchEnd()};a._onEnterFrame=function(b){b=c.getTimer();100<b-this._ScrV_Props_._lastTouchTime&&300>b-this._ScrV_Props_._lastTouchTime&&this._calcVelocitys(this._ScrV_Props_._lastTouchEvent)};a._logTouchEvent=function(b){this._ScrV_Props_._lastTouchPosition.x=
b.stageX;this._ScrV_Props_._lastTouchPosition.y=b.stageY;this._ScrV_Props_._lastTouchEvent=this.cloneTouchEvent(b);this._ScrV_Props_._lastTouchTime=c.getTimer()};a._getPointChange=function(b){return{x:!1===this._ScrV_Props_._hCanScroll?0:this._ScrV_Props_._lastTouchPosition.x-b.stageX,y:!1===this._ScrV_Props_._vCanScroll?0:this._ScrV_Props_._lastTouchPosition.y-b.stageY}};a._calcVelocitys=function(b){var g=c.getTimer();if(0==this._ScrV_Props_._lastTouchTime)this._ScrV_Props_._lastTouchTime=g;else{var a=
this._getPointChange(b),g=g-this._ScrV_Props_._lastTouchTime;a.x/=g;a.y/=g;this._ScrV_Props_._velocitys.push(a);5<this._ScrV_Props_._velocitys.length&&this._ScrV_Props_._velocitys.shift();this._ScrV_Props_._lastTouchPosition.x=b.stageX;this._ScrV_Props_._lastTouchPosition.y=b.stageY}};a._getContentWidth=function(){return this._content.explicitWidth||this._content.width};a._getContentHeight=function(){return this._content.explicitHeight||this._content.height};a.getMaxScrollLeft=function(){var b=this._getContentWidth()-
this.width;return Math.max(0,b)};a.getMaxScrollTop=function(){var b=this._getContentHeight()-this.height;return Math.max(0,b)};a._moveAfterTouchEnd=function(){if(0!=this._ScrV_Props_._velocitys.length){for(var b=0,g=0,a=0,c=0;c<this._ScrV_Props_._velocitys.length;c++)var e=this._ScrV_Props_._velocitys[c],f=d.weight[c],b=b+e.x*f,g=g+e.y*f,a=a+f;this._ScrV_Props_._velocitys.length=0;0>=this.scrollSpeed&&(this.scrollSpeed=1);b=b/a*this.scrollSpeed;g=g/a*this.scrollSpeed;e=Math.abs(b);a=Math.abs(g);f=
this.getMaxScrollLeft();c=this.getMaxScrollTop();b=0.02<e?this.getAnimationDatas(b,this._ScrV_Props_._scrollLeft,f):{position:this._ScrV_Props_._scrollLeft,duration:1};g=0.02<a?this.getAnimationDatas(g,this._ScrV_Props_._scrollTop,c):{position:this._ScrV_Props_._scrollTop,duration:1};this.setScrollLeft(b.position,b.duration);this.setScrollTop(g.position,g.duration)}};a._onTweenFinished=function(b){b==this._ScrV_Props_._vScrollTween&&(this._ScrV_Props_._isVTweenPlaying=!1);b==this._ScrV_Props_._hScrollTween&&
(this._ScrV_Props_._isHTweenPlaying=!1);!1==this._ScrV_Props_._isHTweenPlaying&&!1==this._ScrV_Props_._isVTweenPlaying&&this._onScrollFinished()};a._onScrollStarted=function(){};a._onScrollFinished=function(){c.Tween.removeTweens(this);this._ScrV_Props_._hScrollTween=null;this._ScrV_Props_._vScrollTween=null;this._ScrV_Props_._isHTweenPlaying=!1;this._ScrV_Props_._isVTweenPlaying=!1;this.dispatchEvent(new c.Event(c.Event.COMPLETE))};a.setScrollTop=function(b,g){void 0===g&&(g=0);var a=Math.min(this.getMaxScrollTop(),
Math.max(b,0));if(0==g)return this.scrollTop=a,null;var d=c.Tween.get(this).to({scrollTop:b},g,c.Ease.quartOut);a!=b&&d.to({scrollTop:a},300,c.Ease.quintOut);this._ScrV_Props_._isVTweenPlaying=!0;this._ScrV_Props_._vScrollTween=d;d.call(this._onTweenFinished,this,[d]);this._ScrV_Props_._isHTweenPlaying||this._onScrollStarted();return d};a.setScrollLeft=function(b,a){void 0===a&&(a=0);var d=Math.min(this.getMaxScrollLeft(),Math.max(b,0));if(0==a)return this.scrollLeft=d,null;var e=c.Tween.get(this).to({scrollLeft:b},
a,c.Ease.quartOut);d!=b&&e.to({scrollLeft:d},300,c.Ease.quintOut);this._ScrV_Props_._isHTweenPlaying=!0;this._ScrV_Props_._hScrollTween=e;e.call(this._onTweenFinished,this,[e]);this._ScrV_Props_._isVTweenPlaying||this._onScrollStarted();return e};a.getAnimationDatas=function(b,a,c){var d=Math.abs(b),e=0,f=a+500*b;if(0>f||f>c)for(f=a;Infinity!=Math.abs(b)&&0.02<Math.abs(b);)f+=b,b=0>f||f>c?0.998*b*0.95:0.998*b,e++;else e=500*-Math.log(0.02/d);return{position:Math.min(c+50,Math.max(f,-50)),duration:e}};
a.cloneTouchEvent=function(b){var a=new c.TouchEvent(b._type,b._bubbles,b.cancelable);a.touchPointID=b.touchPointID;a._stageX=b._stageX;a._stageY=b._stageY;a.ctrlKey=b.ctrlKey;a.altKey=b.altKey;a.shiftKey=b.shiftKey;a.touchDown=b.touchDown;a._isDefaultPrevented=!1;a._target=b._target;return a};a.throwNotSupportedError=function(){c.$error(1023)};a.addChild=function(b){this.throwNotSupportedError();return null};a.addChildAt=function(b,a){this.throwNotSupportedError();return null};a.removeChild=function(b){this.throwNotSupportedError();
return null};a.removeChildAt=function(b){this.throwNotSupportedError();return null};a.setChildIndex=function(b,a){this.throwNotSupportedError()};a.swapChildren=function(b,a){this.throwNotSupportedError()};a.swapChildrenAt=function(b,a){this.throwNotSupportedError()};a.hitTest=function(b,a,d){void 0===d&&(d=!1);var p=e.prototype.hitTest.call(this,b,a,d);return p?p:c.DisplayObject.prototype.hitTest.call(this,b,a,d)};d.weight=[1,1.33,1.66,2,2.33];return d}(c.DisplayObjectContainer);c.ScrollView=f;f.prototype.__class__=
"egret.ScrollView"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.REPEAT="repeat";c.SCALE="scale";return c}();c.BitmapFillMode=f;f.prototype.__class__="egret.BitmapFillMode"})(egret||(egret={}));
(function(c){var f=function(e){function d(b){e.call(this);this.scale9Grid=this._texture=null;this.fillMode="scale";b&&(this._texture=b,this._setSizeDirty());this.needDraw=!0}__extends(d,e);var a=d.prototype;Object.defineProperty(a,"texture",{get:function(){return this._texture},set:function(b){b!=this._texture&&(this._setSizeDirty(),this._texture=b)},enumerable:!0,configurable:!0});a._render=function(b){var a=this._texture;a?(this._texture_to_render=a,d._drawBitmap(b,this._DO_Props_._hasWidthSet?
this._DO_Props_._explicitWidth:a._textureWidth,this._DO_Props_._hasHeightSet?this._DO_Props_._explicitHeight:a._textureHeight,this)):this._texture_to_render=null};d._drawBitmap=function(b,a,c,e){var l=e._texture_to_render;if(l){var f=l._textureWidth,k=l._textureHeight;if("scale"==e.fillMode){var m=e.scale9Grid||l.scale9Grid;if(m&&f-m.width<a&&k-m.height<c)d.drawScale9GridImage(b,e,m,a,c);else{var m=l._offsetX,n=l._offsetY,q=l._bitmapWidth||f,r=l._bitmapHeight||k;a/=f;m=Math.round(m*a);a=Math.round(q*
a);c/=k;n=Math.round(n*c);c=Math.round(r*c);d.renderFilter.drawImage(b,e,l._bitmapX,l._bitmapY,q,r,m,n,a,c)}}else d.drawRepeatImage(b,e,a,c,e.fillMode)}};d.drawRepeatImage=function(b,a,d,e,l){var f=a._texture_to_render;if(f){var k=f._textureWidth,m=f._textureHeight,n=f._bitmapX,q=f._bitmapY,k=f._bitmapWidth||k,m=f._bitmapHeight||m,r=f._offsetX,f=f._offsetY;c.RenderFilter.getInstance().drawImage(b,a,n,q,k,m,r,f,d,e,l)}};d.drawScale9GridImage=function(b,a,d,e,l){var f=c.MainContext.instance.rendererContext._texture_scale_factor,
k=a._texture_to_render;if(k&&d){var m=k._textureWidth,n=k._textureHeight,q=k._bitmapX,r=k._bitmapY,t=k._bitmapWidth||m,u=k._bitmapHeight||n;e-=m-t;l-=n-u;if(!b.drawImageScale9(k,q,r,t,u,k._offsetX,k._offsetY,e,l,d)){m=k._offsetX/f;n=k._offsetY/f;k=c.RenderFilter.getInstance();d=c.Rectangle.identity.initialize(d.x-Math.round(m),d.y-Math.round(m),d.width,d.height);m=Math.round(m);n=Math.round(n);d.y==d.bottom&&(d.bottom<u?d.bottom++:d.y--);d.x==d.right&&(d.right<t?d.right++:d.x--);var v=q+d.x/f,x=q+
d.right/f,w=t-d.right,z=r+d.y/f,f=r+d.bottom/f,y=u-d.bottom,C=m+d.x,A=n+d.y,u=l-(u-d.bottom),t=e-(t-d.right);k.drawImage(b,a,q,r,d.x,d.y,m,n,d.x,d.y);k.drawImage(b,a,v,r,d.width,d.y,C,n,t-d.x,d.y);k.drawImage(b,a,x,r,w,d.y,m+t,n,e-t,d.y);k.drawImage(b,a,q,z,d.x,d.height,m,A,d.x,u-d.y);k.drawImage(b,a,v,z,d.width,d.height,C,A,t-d.x,u-d.y);k.drawImage(b,a,x,z,w,d.height,m+t,A,e-t,u-d.y);k.drawImage(b,a,q,f,d.x,y,m,n+u,d.x,l-u);k.drawImage(b,a,v,f,d.width,y,C,n+u,t-d.x,l-u);k.drawImage(b,a,x,f,w,y,m+
t,n+u,e-t,l-u)}}};a._measureBounds=function(){var b=this._texture;return b?c.Rectangle.identity.initialize(0,0,b._textureWidth,b._textureHeight):e.prototype._measureBounds.call(this)};d.renderFilter=c.RenderFilter.getInstance();return d}(c.DisplayObject);c.Bitmap=f;f.prototype.__class__="egret.Bitmap"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._text="";this._textChanged=!1;this._font=null;this._fontChanged=!1;this._textOffsetY=this._textOffsetX=this._textHeight=this._textWidth=this._lineSpacing=this._letterSpacing=0;this.textLinesChange=!0;this._lineHeights=[];this.needDraw=this.cacheAsBitmap=!0}__extends(d,e);var a=d.prototype;Object.defineProperty(a,"text",{get:function(){return this._text},set:function(b){this.$setText(b)},enumerable:!0,configurable:!0});a.$setText=function(b){this._text!=
b&&(this._textChanged=!0,this._text=b,this._setSizeDirty())};Object.defineProperty(a,"font",{get:function(){return this._font},set:function(b){this.$setFont(b)},enumerable:!0,configurable:!0});a.$setFont=function(b){this._font!=b&&(this._font=b,this._fontChanged=!0,this._setSizeDirty())};Object.defineProperty(a,"letterSpacing",{get:function(){return this._letterSpacing},set:function(b){this._setLetterSpacing(b)},enumerable:!0,configurable:!0});a._setLetterSpacing=function(b){this._letterSpacing=b;
this._setSizeDirty()};Object.defineProperty(a,"lineSpacing",{get:function(){return this._lineSpacing},set:function(b){this._setLineSpacing(b)},enumerable:!0,configurable:!0});a._setLineSpacing=function(b){this._lineSpacing=b};a._setSizeDirty=function(){e.prototype._setSizeDirty.call(this);this.textLinesChange=!0};a._render=function(b){var a=this._getTextLines(),e=a.length;if(0!=e){for(var p=this._font,l=p._getFirstCharHeight(),l=Math.ceil(l*d.EMPTY_FACTOR),f=0,k=this._DO_Props_._hasHeightSet?this._DO_Props_._explicitHeight:
Number.POSITIVE_INFINITY,m=this._lineHeights,n=0;n<e;n++){var q=m[n];if(0<n&&f+q>k)break;for(var r=a[n],t=r.length,u=0,v=0;v<t;v++){var x=r.charAt(v),w=p.getTexture(x);if(w){var x=w._bitmapWidth||w._textureWidth,z=w._bitmapHeight||w._textureHeight;this._texture_to_render=w;c.RenderFilter.getInstance().drawImage(b,this,w._bitmapX,w._bitmapY,x,z,u+w._offsetX,f+w._offsetY,x,z);u+=w._textureWidth+this._letterSpacing}else" "==x?u+=l:c.$warn(1011,x)}f+=q+this._lineSpacing}this._texture_to_render=null}};
a._measureBounds=function(){var b=this._getTextLines();return 0==b.length?c.Rectangle.identity.initialize(0,0,0,0):c.Rectangle.identity.initialize(this._textOffsetX,this._textOffsetY,this._textWidth-this._textOffsetX,this._textHeight-this._textOffsetY+(b.length-1)*this._lineSpacing)};a._getTextLines=function(){if(!this.textLinesChange)return this._textLines;var b=[];this._textLines=b;this.textLinesChange=!1;var a=[];this._lineHeights=a;if(!this._text||!this._font)return b;for(var e=0,p=0,l=0,f=0,
k=this._DO_Props_._hasWidthSet,m=this._DO_Props_._hasWidthSet?this._DO_Props_._explicitWidth:Number.POSITIVE_INFINITY,n=this._font,q=n._getFirstCharHeight(),r=Math.ceil(q*d.EMPTY_FACTOR),t=this._text.split(/(?:\r\n|\r|\n)/),u=t.length,v=!0,x=0;x<u;x++){for(var w=t[x],z=w.length,y=0,C=0,A=!0,B=0;B<z;B++){A||(C+=this._letterSpacing);var D=w.charAt(B),E,G=0,H=0,F=n.getTexture(D);if(F)D=F._textureWidth,E=F._textureHeight,G=F._offsetX,H=F._offsetY;else if(" "==D)D=r,E=q;else{c.$warn(1011,D);A&&(A=!1);
continue}A&&(A=!1,l=Math.min(G,l));v&&(f=Math.min(H,f));k&&0<B&&C+D>m?(b.push(w.substring(0,B)),a.push(y),p+=y,e=Math.max(C,e),w=w.substring(B),z=w.length,B=0,C=D,y=E):(C+=D,y=Math.max(E,y))}v&&(v=!1);b.push(w);a.push(y);p+=y;e=Math.max(C,e)}this._textWidth=e;this._textHeight=p;this._textOffsetX=l;this._textOffsetY=f;return b};d.EMPTY_FACTOR=0.33;return d}(c.DisplayObject);c.BitmapText=f;f.prototype.__class__="egret.BitmapText"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.LINEAR="linear";c.RADIAL="radial";return c}();c.GradientType=f;f.prototype.__class__="egret.GradientType"})(egret||(egret={}));
(function(c){var f=function(){function d(){this.fillStyle=this.strokeStyle=this.commandQueue=this._renderContext=null;this._dirty=!1;this.lineY=this.lineX=0;this._firstCheck=!0;this._lastY=this._lastX=this._maxY=this._maxX=this._minY=this._minX=0;this.commandQueue=[]}var a=d.prototype;a.beginFill=function(b,a){void 0===a&&(a=1);this.fillStyle=this._parseColor(b,a);this._pushCommand(new e(this._setStyle,this,[this.fillStyle]))};a._parseColor=function(b,a){return"rgba("+(b>>16)+","+((b&65280)>>8)+","+
(b&255)+","+a+")"};a._setStyle=function(b){c.Graphics._currentFillStyle=b;this._renderContext.fillStyle=b;this._renderContext.beginPath()};a.beginGradientFill=function(b,a,c,d,l){void 0===l&&(l=null);this.fillStyle=b=this.getGradient(b,a,c,d,l);this._pushCommand(new e(this._setStyle,this,[b]))};a.getGradient=function(b,a,d,e,l){var f=c.MainContext.instance.rendererContext,k=new c.Matrix;l?(k.a=819.2*l.a,k.b=819.2*l.b,k.c=819.2*l.c,k.d=819.2*l.d,k.tx=l.tx,k.ty=l.ty):(k.a=100,k.d=100);b=b==c.GradientType.LINEAR?
f.createLinearGradient(-1,0,1,0):f.createRadialGradient(0,0,0,0,0,1);l=a.length;for(f=0;f<l;f++)b.addColorStop(e[f]/255,this._parseColor(a[f],d[f]));b.matrix=k;return b};a.drawRect=function(b,a,c,d){this._pushCommand(new e(function(b,a,g,c){this._renderContext.beginPath();this._renderContext.rect(b,a,g,c);this._renderContext.closePath()},this,[b,a,c,d]));this._checkRect(b,a,c,d)};a.drawCircle=function(b,a,c){this._pushCommand(new e(function(b,a,g){this._renderContext.beginPath();this._renderContext.arc(b,
a,g,0,2*Math.PI);this._renderContext.closePath()},this,[b,a,c]));this._checkRect(b-c,a-c,2*c,2*c)};a.drawRoundRect=function(b,a,c,d,l,f){this._pushCommand(new e(function(b,a,g,c,d,e){d/=2;e=e?e/2:d;g=b+g;c=a+c;var s=c-e;this._renderContext.beginPath();this._renderContext.moveTo(g,s);this._renderContext.quadraticCurveTo(g,c,g-d,c);this._renderContext.lineTo(b+d,c);this._renderContext.quadraticCurveTo(b,c,b,c-e);this._renderContext.lineTo(b,a+e);this._renderContext.quadraticCurveTo(b,a,b+d,a);this._renderContext.lineTo(g-
d,a);this._renderContext.quadraticCurveTo(g,a,g,a+e);this._renderContext.lineTo(g,s);this._renderContext.closePath()},this,[b,a,c,d,l,f]));this._checkRect(b,a,c,d)};a.drawEllipse=function(b,a,c,d){this._pushCommand(new e(function(b,a,g,c){b+=g/2;a+=c/2;var d=g>c?g:c;g/=d;c/=d;d/=2;this._renderContext.scale(g,c);this._renderContext.beginPath();this._renderContext.arc(b/g,a/c,d,0,2*Math.PI);this._renderContext.closePath();this._renderContext.scale(1/g,1/c)},this,[b,a,c,d]));this._checkRect(b,a,c,d)};
a.lineStyle=function(b,a,c,d,l,f,k,m){void 0===b&&(b=NaN);void 0===a&&(a=0);void 0===c&&(c=1);void 0===d&&(d=!1);void 0===l&&(l="normal");void 0===f&&(f=null);void 0===k&&(k=null);void 0===m&&(m=3);this.strokeStyle&&(this._createEndLineCommand(),this._pushCommand(this._endLineCommand));this.strokeStyle=this._parseColor(a,c);this._pushCommand(new e(function(b,a){this._renderContext.lineWidth=b;this._renderContext.strokeStyle=a;this._renderContext.beginPath()},this,[b,this.strokeStyle]));this.moveTo(this.lineX,
this.lineY)};a.lineTo=function(b,a){this._pushCommand(new e(function(b,a){this._renderContext.lineTo(b,a)},this,[b,a]));this._checkPoint(this.lineX,this.lineY);this.lineX=b;this.lineY=a;this._checkPoint(b,a)};a.curveTo=function(b,a,c,d){this._pushCommand(new e(function(b,a,g,c){this._renderContext.quadraticCurveTo(b,a,g,c)},this,[b,a,c,d]));this._checkPoint(this.lineX,this.lineY);this.lineX=c;this.lineY=d;this._checkPoint(b,a);this._checkPoint(c,d)};a.cubicCurveTo=function(b,a,c,d,l,f){this._pushCommand(new e(function(b,
a,g,c,d,e){this._renderContext.bezierCurveTo(b,a,g,c,d,e)},this,[b,a,c,d,l,f]));this._checkPoint(this.lineX,this.lineY);this.lineX=l;this.lineY=f;this._checkPoint(b,a);this._checkPoint(c,d);this._checkPoint(l,f)};a.moveTo=function(b,a){this._pushCommand(new e(function(b,a){this._renderContext.moveTo(b,a)},this,[b,a]));this.lineX=b;this.lineY=a};a.clear=function(){this.lineY=this.lineX=this.commandQueue.length=0;this.fillStyle=this.strokeStyle=null;this._maxY=this._maxX=this._minY=this._minX=0;this._dirty=
this._firstCheck=!0};a.endFill=function(){null!=this.fillStyle&&(this._fill(),this.fillStyle=null)};a._beginDraw=function(b){};a._endDraw=function(b){};a._draw=function(b){var a=this.commandQueue.length;if(0!=a){this._beginDraw(b);for(var c=0;c<a;c++){var d=this.commandQueue[c];d.method.apply(d.thisObject,d.args)}this.fillStyle&&(this._createEndFillCommand(),d=this._endFillCommand,d.method.apply(d.thisObject,d.args));this.strokeStyle&&(this._createEndLineCommand(),d=this._endLineCommand,d.method.apply(d.thisObject,
d.args));this._endDraw(b);this._dirty=!1}};a._checkRect=function(b,a,c,d){this._firstCheck?(this._firstCheck=!1,this._minX=b,this._minY=a,this._maxX=b+c,this._maxY=a+d):(this._minX=Math.min(this._minX,b),this._minY=Math.min(this._minY,a),this._maxX=Math.max(this._maxX,b+c),this._maxY=Math.max(this._maxY,a+d));this._dirty=!0};a._checkPoint=function(b,a){this._firstCheck?(this._firstCheck=!1,this._minX=b,this._minY=a,this._maxX=b,this._maxY=a):(this._minX=Math.min(this._minX,b),this._minY=Math.min(this._minY,
a),this._maxX=Math.max(this._maxX,b),this._maxY=Math.max(this._maxY,a));this._lastX=b;this._lastY=a;this._dirty=!0};a._measureBounds=function(){return c.Rectangle.identity.initialize(this._minX,this._minY,this._maxX-this._minX,this._maxY-this._minY)};a._createEndFillCommand=function(){this._endFillCommand||(this._endFillCommand=new e(function(){this._renderContext.fill();this._renderContext.closePath()},this,null))};a._fill=function(){this.fillStyle&&(this._createEndFillCommand(),this._pushCommand(this._endFillCommand));
this.strokeStyle&&(this._createEndLineCommand(),this._pushCommand(this._endLineCommand))};a._createEndLineCommand=function(){this._endLineCommand||(this._endLineCommand=new e(function(){this._renderContext.stroke();this._renderContext.closePath()},this,null))};a._pushCommand=function(b){this.commandQueue.push(b);this._dirty=!0};return d}();c.Graphics=f;f.prototype.__class__="egret.Graphics";var e=function(){return function(c,a,b){this.method=c;this.thisObject=a;this.args=b}}();e.prototype.__class__=
"egret.Command"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._graphics=null}__extends(d,e);var a=d.prototype;Object.defineProperty(a,"graphics",{get:function(){this._graphics||(this._graphics=new c.Graphics,this.needDraw=!0);return this._graphics},enumerable:!0,configurable:!0});a._draw=function(b){this._graphics&&this._graphics._dirty&&this._setCacheDirty();e.prototype._draw.call(this,b)};a._render=function(b){this._graphics&&this._graphics._draw(b)};a._measureBounds=function(){var b=this._graphics;
return b?b._measureBounds():e.prototype._measureBounds.call(this)};return d}(c.DisplayObject);c.Shape=f;f.prototype.__class__="egret.Shape"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._graphics=null}__extends(d,e);var a=d.prototype;Object.defineProperty(a,"graphics",{get:function(){this._graphics||(this._graphics=new c.Graphics,this.needDraw=!0);return this._graphics},enumerable:!0,configurable:!0});a._draw=function(b){this._graphics&&this._graphics._dirty&&this._setCacheDirty();e.prototype._draw.call(this,b)};a._render=function(b){this._graphics&&this._graphics._draw(b);e.prototype._render.call(this,b)};a._measureBounds=
function(){for(var b=0,a=0,d=0,e=0,l=this._children.length,f=0;f<l;f++){var k=this._children[f];if(k.visible){var m=k.getBounds(c.Rectangle.identity,!1),n=m.x,q=m.y,r=m.width,m=m.height,k=k._getMatrix(),k=c.DisplayObject.getTransformBounds(c.Rectangle.identity.initialize(n,q,r,m),k),n=k.x,q=k.y,r=k.width+k.x,k=k.height+k.y;if(n<b||0==f)b=n;if(r>a||0==f)a=r;if(q<d||0==f)d=q;if(k>e||0==f)e=k}}if(this._graphics){l=this._graphics._measureBounds();n=l.x;q=l.y;r=l.width+l.x;k=l.height+l.y;if(n<b||0==f)b=
n;if(r>a||0==f)a=r;if(q<d||0==f)d=q;if(k>e||0==f)e=k}return c.Rectangle.identity.initialize(b,d,a-b,e-d)};a.hitTest=function(b,a,d){void 0===d&&(d=!1);var p=e.prototype.hitTest.call(this,b,a,d);return p?p:this._graphics?c.DisplayObject.prototype.hitTest.call(this,b,a,d):null};return d}(c.DisplayObjectContainer);c.Sprite=f;f.prototype.__class__="egret.Sprite"})(egret||(egret={}));
(function(c){var f=function(){function e(){}e._getStartLine=function(c){var a=e._getTextHeight(c),b=0;c._DO_Props_._hasHeightSet&&(!(a<c._DO_Props_._explicitHeight)&&a>c._DO_Props_._explicitHeight&&(b=Math.max(c._TF_Props_._scrollV-1,0),b=Math.min(c._TF_Props_._numLines-1,b)),c._TF_Props_._multiline||(b=Math.max(c._TF_Props_._scrollV-1,0),b=Math.min(c._TF_Props_._numLines-1,b)));return b};e._getHalign=function(d){var a=d._getLinesArr(),b=0;d._TF_Props_._textAlign==c.HorizontalAlign.CENTER?b=0.5:d._TF_Props_._textAlign==
c.HorizontalAlign.RIGHT&&(b=1);d._TF_Props_._type==c.TextFieldType.INPUT&&!d._TF_Props_._multiline&&1<a.length&&(b=0);return b};e._getTextHeight=function(d){return c.TextFieldType.INPUT!=d._TF_Props_._type||d._TF_Props_._multiline?d._TF_Props_._textMaxHeight+(d._TF_Props_._numLines-1)*d._TF_Props_._lineSpacing:d._TF_Props_._size};e._getValign=function(d){var a=e._getTextHeight(d);return d._TF_Props_._type==c.TextFieldType.INPUT?d._TF_Props_._multiline?0:0.5:d._DO_Props_._hasHeightSet&&a<d._DO_Props_._explicitHeight?
(a=0,d._TF_Props_._verticalAlign==c.VerticalAlign.MIDDLE?a=0.5:d._TF_Props_._verticalAlign==c.VerticalAlign.BOTTOM&&(a=1),a):0};e._getTextElement=function(c,a,b){a=e._getHit(c,a,b);c=c._getLinesArr();return a&&c[a.lineIndex]&&c[a.lineIndex].elements[a.textElementIndex]?c[a.lineIndex].elements[a.textElementIndex]:null};e._getHit=function(c,a,b){var g=c._getLinesArr();if(0==c._TF_Props_._textMaxWidth)return null;var s=0,p=e._getTextHeight(c),l=0;c._DO_Props_._hasHeightSet&&c._DO_Props_._explicitHeight>
p&&(l=e._getValign(c)*(c._DO_Props_._explicitHeight-p),0!=l&&(b-=l));l=0;for(p=e._getStartLine(c);p<g.length;p++){var f=g[p];if(l+f.height>=b){s=p+1;break}else l+=f.height;if(l+c._TF_Props_._lineSpacing>b)return null;l+=c._TF_Props_._lineSpacing}if(0===s)return null;c=g[s-1];for(p=b=0;p<c.elements.length;p++)if(g=c.elements[p],b+g.width<a)b+=g.width;else return{lineIndex:s-1,textElementIndex:p};return null};e._getScrollNum=function(c){var a=1;if(c._TF_Props_._multiline){var b=c.height,g=c.size;c=
c.lineSpacing;a=Math.floor(b/(g+c));b-(g+c)*a>g/2&&a++}return a};return e}();c.TextFieldUtils=f;f.prototype.__class__="egret.TextFieldUtils"})(egret||(egret={}));
(function(c){var f=function(){return function(){this._text=this._type="";this._displayAsPassword=!1;this._fontFamily=c.TextField.default_fontFamily;this._size=30;this._bold=this._italic=!1;this._textColorString="#FFFFFF";this._textColor=16777215;this._strokeColorString="#000000";this._stroke=this._strokeColor=0;this._border=!1;this._borderColor=0;this._background=!1;this._backgroundColor=16777215;this._textAlign="left";this._verticalAlign="top";this._maxChars=this._textMaxHeight=this._textMaxWidth=
0;this._scrollV=-1;this._numLines=this._lineSpacing=0;this._wordWrap=this._multiline=!1}}();c.TextFieldProperties=f;f.prototype.__class__="egret.TextFieldProperties"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._inputEnabled=!1;this._bgGraphics=this._inputUtils=null;this._isFlow=!1;this._textArr=[];this._isArrayChanged=!1;this._linesArr=[];this._isTyping=!1;this.needDraw=!0;this._TF_Props_=new c.TextFieldProperties}__extends(d,e);var a=d.prototype;a.isInput=function(){return this._TF_Props_._type==c.TextFieldType.INPUT};a._setTouchEnabled=function(b){e.prototype._setTouchEnabled.call(this,b);this.isInput()&&(this._inputEnabled=!0)};Object.defineProperty(a,
"type",{get:function(){return this._TF_Props_._type},set:function(b){this._setType(b)},enumerable:!0,configurable:!0});a._setType=function(b){var a=this._TF_Props_;a._type!=b&&(a._type=b,a._type==c.TextFieldType.INPUT?(this._DO_Props_._hasWidthSet||this._setWidth(100),this._DO_Props_._hasHeightSet||this._setHeight(30),null==this._inputUtils&&(this._inputUtils=new c.InputController),this._inputUtils.init(this),this._setDirty(),this._DO_Props_._stage&&this._inputUtils._addStageText()):this._inputUtils&&
(this._inputUtils._removeStageText(),this._inputUtils=null))};Object.defineProperty(a,"text",{get:function(){return this._getText()},set:function(b){this._setText(b)},enumerable:!0,configurable:!0});a._getText=function(){return this._TF_Props_._type==c.TextFieldType.INPUT?this._inputUtils._getText():this._TF_Props_._text};a._setSizeDirty=function(){e.prototype._setSizeDirty.call(this);this._isArrayChanged=!0};a._setTextDirty=function(){this._setSizeDirty()};a._setBaseText=function(b){null==b&&(b=
"");var a=this._TF_Props_;this._isFlow=!1;a._text!=b&&(this._setTextDirty(),a._text=b,b="",b=a._displayAsPassword?this.changeToPassText(a._text):a._text,this.setMiddleStyle([{text:b}]))};a._setText=function(b){null==b&&(b="");this._setBaseText(b);this._inputUtils&&this._inputUtils._setText(this._TF_Props_._text)};Object.defineProperty(a,"displayAsPassword",{get:function(){return this._TF_Props_._displayAsPassword},set:function(b){this._setDisplayAsPassword(b)},enumerable:!0,configurable:!0});a._setDisplayAsPassword=
function(b){var a=this._TF_Props_;a._displayAsPassword!=b&&(a._displayAsPassword=b,this._setTextDirty(),b="",b=a._displayAsPassword?this.changeToPassText(a._text):a._text,this.setMiddleStyle([{text:b}]))};Object.defineProperty(a,"fontFamily",{get:function(){return this._TF_Props_._fontFamily},set:function(b){this._setFontFamily(b)},enumerable:!0,configurable:!0});a._setFontFamily=function(b){this._TF_Props_._fontFamily!=b&&(this._setTextDirty(),this._TF_Props_._fontFamily=b)};Object.defineProperty(a,
"size",{get:function(){return this._TF_Props_._size},set:function(b){this._setSize(b)},enumerable:!0,configurable:!0});a._setSize=function(b){this._TF_Props_._size!=b&&(this._setTextDirty(),this._TF_Props_._size=b)};Object.defineProperty(a,"italic",{get:function(){return this._TF_Props_._italic},set:function(b){this._setItalic(b)},enumerable:!0,configurable:!0});a._setItalic=function(b){this._TF_Props_._italic!=b&&(this._setTextDirty(),this._TF_Props_._italic=b)};Object.defineProperty(a,"bold",{get:function(){return this._TF_Props_._bold},
set:function(b){this._setBold(b)},enumerable:!0,configurable:!0});a._setBold=function(b){this._TF_Props_._bold!=b&&(this._setTextDirty(),this._TF_Props_._bold=b)};Object.defineProperty(a,"textColor",{get:function(){return this._TF_Props_._textColor},set:function(b){this._setTextColor(b)},enumerable:!0,configurable:!0});a._setTextColor=function(b){this._TF_Props_._textColor!=b&&(this._setTextDirty(),this._TF_Props_._textColor=b,this._TF_Props_._textColorString=c.toColorString(b))};Object.defineProperty(a,
"strokeColor",{get:function(){return this._TF_Props_._strokeColor},set:function(b){this._setStrokeColor(b)},enumerable:!0,configurable:!0});a._setStrokeColor=function(b){this._TF_Props_._strokeColor!=b&&(this._setTextDirty(),this._TF_Props_._strokeColor=b,this._TF_Props_._strokeColorString=c.toColorString(b))};Object.defineProperty(a,"stroke",{get:function(){return this._TF_Props_._stroke},set:function(b){this._setStroke(b)},enumerable:!0,configurable:!0});a._setStroke=function(b){this._TF_Props_._stroke!=
b&&(this._setTextDirty(),this._TF_Props_._stroke=b)};Object.defineProperty(a,"textAlign",{get:function(){return this._TF_Props_._textAlign},set:function(b){this._setTextAlign(b)},enumerable:!0,configurable:!0});a._setTextAlign=function(b){this._TF_Props_._textAlign!=b&&(this._setTextDirty(),this._TF_Props_._textAlign=b)};Object.defineProperty(a,"verticalAlign",{get:function(){return this._TF_Props_._verticalAlign},set:function(b){this._setVerticalAlign(b)},enumerable:!0,configurable:!0});a._setVerticalAlign=
function(b){this._TF_Props_._verticalAlign!=b&&(this._setTextDirty(),this._TF_Props_._verticalAlign=b)};Object.defineProperty(a,"maxChars",{get:function(){return this._TF_Props_._maxChars},set:function(b){this._setMaxChars(b)},enumerable:!0,configurable:!0});a._setMaxChars=function(b){this._TF_Props_._maxChars!=b&&(this._TF_Props_._maxChars=b)};Object.defineProperty(a,"scrollV",{get:function(){return Math.min(Math.max(this._TF_Props_._scrollV,1),this.maxScrollV)},set:function(b){this._TF_Props_._scrollV=
Math.max(b,1);this._setDirty()},enumerable:!0,configurable:!0});Object.defineProperty(a,"maxScrollV",{get:function(){this._getLinesArr();return Math.max(this._TF_Props_._numLines-c.TextFieldUtils._getScrollNum(this)+1,1)},enumerable:!0,configurable:!0});Object.defineProperty(a,"selectionBeginIndex",{get:function(){return 0},enumerable:!0,configurable:!0});Object.defineProperty(a,"selectionEndIndex",{get:function(){return 0},enumerable:!0,configurable:!0});Object.defineProperty(a,"caretIndex",{get:function(){return 0},
enumerable:!0,configurable:!0});a._setSelection=function(b,a){};Object.defineProperty(a,"lineSpacing",{get:function(){return this._TF_Props_._lineSpacing},set:function(b){this._setLineSpacing(b)},enumerable:!0,configurable:!0});a._setLineSpacing=function(b){this._TF_Props_._lineSpacing!=b&&(this._setTextDirty(),this._TF_Props_._lineSpacing=b)};a._getLineHeight=function(){return this._TF_Props_._lineSpacing+this._TF_Props_._size};Object.defineProperty(a,"numLines",{get:function(){return this._TF_Props_._numLines},
enumerable:!0,configurable:!0});Object.defineProperty(a,"multiline",{get:function(){return this._TF_Props_._multiline},set:function(b){this._setMultiline(b)},enumerable:!0,configurable:!0});a._setMultiline=function(b){this._TF_Props_._multiline=b;this._setDirty()};a._setWidth=function(b){e.prototype._setWidth.call(this,b);this.fillBackground()};a._setHeight=function(b){e.prototype._setHeight.call(this,b);this.fillBackground()};Object.defineProperty(a,"border",{get:function(){return this._TF_Props_._border},
set:function(b){this._TF_Props_._border=b;this.fillBackground()},enumerable:!0,configurable:!0});Object.defineProperty(a,"borderColor",{get:function(){return this._TF_Props_._borderColor},set:function(b){this._TF_Props_._borderColor=b;this.fillBackground()},enumerable:!0,configurable:!0});Object.defineProperty(a,"background",{get:function(){return this._TF_Props_._background},set:function(b){this._TF_Props_._background=b;this.fillBackground()},enumerable:!0,configurable:!0});Object.defineProperty(a,
"backgroundColor",{get:function(){return this._TF_Props_._backgroundColor},set:function(b){this._TF_Props_._backgroundColor=b;this.fillBackground()},enumerable:!0,configurable:!0});a.fillBackground=function(){var b=this._bgGraphics,a=this._TF_Props_;b&&b.clear();if(a._background||a._border)null==b&&(b=this._bgGraphics=new c.Graphics),a._background&&b.beginFill(a._backgroundColor,1),a._border&&b.lineStyle(1,a._borderColor),b.drawRect(0,0,this._getWidth(),this._getHeight()),b.endFill()};a.setFocus=
function(){c.$warn(1013)};a._onRemoveFromStage=function(){e.prototype._onRemoveFromStage.call(this);this._removeEvent();this._TF_Props_._type==c.TextFieldType.INPUT&&this._inputUtils._removeStageText()};a._onAddToStage=function(){e.prototype._onAddToStage.call(this);this._addEvent();this._TF_Props_._type==c.TextFieldType.INPUT&&this._inputUtils._addStageText()};a._updateBaseTransform=function(){this._getLinesArr();0==this._TF_Props_._textMaxWidth&&this._TF_Props_._type!=c.TextFieldType.INPUT||e.prototype._updateTransform.call(this)};
a._updateTransform=function(){this._TF_Props_._type==c.TextFieldType.INPUT?this._DO_Props_._normalDirty?this._inputUtils._updateProperties():this._inputUtils._updateTransform():this._updateBaseTransform()};a._draw=function(b){var a=this._TF_Props_;if(a._type==c.TextFieldType.INPUT){if(this._isTyping)return}else if(0==a._textMaxWidth)return;e.prototype._draw.call(this,b)};a._render=function(b){this._bgGraphics&&this._bgGraphics._draw(b);this.drawText(b);this._clearDirty()};a._measureBounds=function(){var b=
this._TF_Props_;this._getLinesArr();return 0==b._textMaxWidth?c.Rectangle.identity.initialize(0,0,0,0):c.Rectangle.identity.initialize(0,0,b._textMaxWidth,c.TextFieldUtils._getTextHeight(this))};Object.defineProperty(a,"textFlow",{get:function(){return this._textArr},set:function(b){var a=this._TF_Props_;this._isFlow=!0;var c="";null==b&&(b=[]);for(var d=0;d<b.length;d++)c+=b[d].text;a._displayAsPassword?this._setBaseText(c):(a._text=c,this.setMiddleStyle(b))},enumerable:!0,configurable:!0});a.changeToPassText=
function(b){if(this._TF_Props_._displayAsPassword){for(var a="",c=0,d=b.length;c<d;c++)switch(b.charAt(c)){case "\n":a+="\n";break;case "\r":break;default:a+="*"}return a}return b};a.setMiddleStyle=function(b){this._isArrayChanged=!0;this._textArr=b;this._setSizeDirty()};Object.defineProperty(a,"textWidth",{get:function(){return this._TF_Props_._textMaxWidth},enumerable:!0,configurable:!0});Object.defineProperty(a,"textHeight",{get:function(){return c.TextFieldUtils._getTextHeight(this)},enumerable:!0,
configurable:!0});a.appendText=function(b){this.appendElement({text:b})};a.appendElement=function(b){var a=this._TF_Props_,c=a._text+b.text;a._displayAsPassword?this._setBaseText(c):(a._text=c,this._textArr.push(b),this.setMiddleStyle(this._textArr))};a._getLinesArr=function(){var b=this._TF_Props_;if(!this._isArrayChanged)return this._linesArr;this._isArrayChanged=!1;var a=this._textArr,d=c.MainContext.instance.rendererContext;this._linesArr.length=0;b._textMaxHeight=0;b._textMaxWidth=0;if(this._DO_Props_._hasWidthSet&&
0==this._DO_Props_._explicitWidth)return b._numLines=0,[{width:0,height:0,charNum:0,elements:[],hasNextLine:!1}];this._isFlow||d.setupFont(this);for(var e=this._linesArr,l=0,f=0,k=0,m=0,n,q=0,r=a.length;q<r;q++){var t=a[q];t.style=t.style||{};for(var u=t.text.toString().split(/(?:\r\n|\r|\n)/),v=0,x=u.length;v<x;v++){null==e[m]&&(n={width:0,height:0,elements:[],charNum:0,hasNextLine:!1},e[m]=n,f=k=l=0);var k=b._type==c.TextFieldType.INPUT?b._size:Math.max(k,t.style.size||b._size),w=!0;if(""==u[v])v==
x-1&&(w=!1);else{this._isFlow&&d.setupFont(this,t.style);var z=d.measureText(u[v]);if(this._DO_Props_._hasWidthSet)if(l+z<=this._DO_Props_._explicitWidth)n.elements.push({width:z,text:u[v],style:t.style}),l+=z,f+=u[v].length,v==x-1&&(w=!1);else{for(var y=0,C=0,A=u[v],B=this._TF_Props_._wordWrap?A.split(/\b/):A.match(/./g),D=B.length,E=0;y<D;y++){z=d.measureText(B[y]);if(0!=l&&l+z>this._DO_Props_._explicitWidth&&0!=l+y)break;E+=B[y].length;C+=z;l+=z;f+=E}if(0<y){n.elements.push({width:C,text:A.substring(0,
E),style:t.style});z=A.substring(E);y=0;for(C=z.length;y<C&&" "==z.charAt(y);y++);u[v]=z.substring(y)}""!=u[v]&&(v--,w=!1)}else l+=z,f+=u[v].length,n.elements.push({width:z,text:u[v],style:t.style}),v==x-1&&(w=!1)}w&&(f++,n.hasNextLine=!0);v<u.length-1&&(n.width=l,n.height=k,n.charNum=f,b._textMaxWidth=Math.max(b._textMaxWidth,l),b._textMaxHeight+=k,m++)}q==a.length-1&&n&&(n.width=l,n.height=k,n.charNum=f,b._textMaxWidth=Math.max(b._textMaxWidth,l),b._textMaxHeight+=k)}b._numLines=e.length;return e};
Object.defineProperty(a,"wordWrap",{get:function(){return this._TF_Props_._wordWrap},set:function(b){this._TF_Props_._wordWrap=b},enumerable:!0,configurable:!0});a.drawText=function(b){var a=this._TF_Props_,d=this._getLinesArr();if(0!=a._textMaxWidth){var e=this._DO_Props_._hasWidthSet?this._DO_Props_._explicitWidth:a._textMaxWidth,l=c.TextFieldUtils._getTextHeight(this),f=0,k=c.TextFieldUtils._getStartLine(this);if(this._DO_Props_._hasHeightSet&&this._DO_Props_._explicitHeight>l)var m=c.TextFieldUtils._getValign(this),
f=f+m*(this._DO_Props_._explicitHeight-l);for(var f=Math.round(f),l=c.TextFieldUtils._getHalign(this),m=0,n=k,q=a._numLines;n<q;n++){var r=d[n],t=r.height,f=f+t/2;if(n!=k){if(a._type==c.TextFieldType.INPUT&&!a._multiline)break;if(this._DO_Props_._hasHeightSet&&f>this._DO_Props_._explicitHeight)break}for(var m=Math.round((e-r.width)*l),u=0,v=r.elements.length;u<v;u++){var x=r.elements[u];b.drawText(this,x.text,m,f+(t-(x.style.size||a._size))/2,x.width,x.style);m+=x.width}f+=t/2+a._lineSpacing}}};a._addEvent=
function(){this.addEventListener(c.TouchEvent.TOUCH_TAP,this.onTapHandler,this)};a._removeEvent=function(){this.removeEventListener(c.TouchEvent.TOUCH_TAP,this.onTapHandler,this)};a.onTapHandler=function(b){if(this._TF_Props_._type!=c.TextFieldType.INPUT&&(b=c.TextFieldUtils._getTextElement(this,b.localX,b.localY),null!=b&&(b=b.style)&&b.href&&b.href.match(/^event:/))){var a=b.href.match(/^event:/)[0];c.TextEvent.dispatchTextEvent(this,c.TextEvent.LINK,b.href.substring(a.length))}};d.default_fontFamily=
"Arial";return d}(c.DisplayObject);c.TextField=f;f.prototype.__class__="egret.TextField"})(egret||(egret={}));
(function(c){var f=function(){function c(){this._replaceArr=[];this.resutlArr=[];this.initReplaceArr()}var d=c.prototype;d.initReplaceArr=function(){this._replaceArr=[];this._replaceArr.push([/&lt;/g,"<"]);this._replaceArr.push([/&gt;/g,">"]);this._replaceArr.push([/&amp;/g,"&"]);this._replaceArr.push([/&quot;/g,'"']);this._replaceArr.push([/&apos;/g,"'"])};d.replaceSpecial=function(a){for(var b=0;b<this._replaceArr.length;b++)a=a.replace(this._replaceArr[b][0],this._replaceArr[b][1]);return a};d.parser=
function(a){this.stackArray=[];this.resutlArr=[];for(var b=0,g=a.length;b<g;){var c=a.indexOf("<",b);0>c?(this.addToResultArr(a.substring(b)),b=g):(this.addToResultArr(a.substring(b,c)),b=a.indexOf(">",c),"/"==a.charAt(c+1)?this.stackArray.pop():this.addToArray(a.substring(c+1,b)),b+=1)}return this.resutlArr};d.addToResultArr=function(a){""!=a&&(a=this.replaceSpecial(a),0<this.stackArray.length?this.resutlArr.push({text:a,style:this.stackArray[this.stackArray.length-1]}):this.resutlArr.push({text:a}))};
d.changeStringToObject=function(a){a=a.trim();var b={},g=[];if("i"==a.charAt(0)||"b"==a.charAt(0))this.addProperty(b,a,"true");else if(g=a.match(/^(font|a)\s/))for(a=a.substring(g[0].length).trim(),g=0;g=a.match(this.getHeadReg());){var c=g[0],d="";a=a.substring(c.length).trim();'"'==a.charAt(0)?(g=a.indexOf('"',1),d=a.substring(1,g),g+=1):"'"==a.charAt(0)?(g=a.indexOf("'",1),d=a.substring(1,g),g+=1):(d=a.match(/(\S)+/)[0],g=d.length);this.addProperty(b,c.substring(0,c.length-1).trim(),d.trim());
a=a.substring(g).trim()}return b};d.getHeadReg=function(){return/^(color|textcolor|strokecolor|stroke|b|bold|i|italic|size|fontfamily|href)(\s)*=/};d.addProperty=function(a,b,g){switch(b.toLowerCase()){case "color":case "textcolor":g=g.replace(/#/,"0x");a.textColor=parseInt(g);break;case "strokecolor":g=g.replace(/#/,"0x");a.strokeColor=parseInt(g);break;case "stroke":a.stroke=parseInt(g);break;case "b":case "bold":a.bold="true"==g;break;case "i":case "italic":a.italic="true"==g;break;case "size":a.size=
parseInt(g);break;case "fontfamily":a.fontFamily=g;break;case "href":a.href=this.replaceSpecial(g)}};d.addToArray=function(a){a=this.changeStringToObject(a);if(0!=this.stackArray.length){var b=this.stackArray[this.stackArray.length-1],g;for(g in b)null==a[g]&&(a[g]=b[g])}this.stackArray.push(a)};return c}();c.HtmlTextParser=f;f.prototype.__class__="egret.HtmlTextParser"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.DYNAMIC="dynamic";c.INPUT="input";return c}();c.TextFieldType=f;f.prototype.__class__="egret.TextFieldType"})(egret||(egret={}));
(function(c){var f=function(e){function d(b){e.call(this);this._bitmapY=this._bitmapX=this._sourceHeight=this._sourceWidth=0;this._textureMap={};this.texture=b;this._sourceWidth=b._sourceWidth;this._sourceHeight=b._sourceHeight;this._bitmapX=b._bitmapX-b._offsetX;this._bitmapY=b._bitmapY-b._offsetY}__extends(d,e);var a=d.prototype;a.getTexture=function(b){return this._textureMap[b]};a.createTexture=function(b,a,d,e,l,f,k,m,n){void 0===f&&(f=0);void 0===k&&(k=0);"undefined"===typeof m&&(m=f+e);"undefined"===
typeof n&&(n=k+l);var q=this.texture._clone(),r=c.MainContext.instance.rendererContext._texture_scale_factor;q._bitmapX=this._bitmapX+a;q._bitmapY=this._bitmapY+d;q._bitmapWidth=e*r;q._bitmapHeight=l*r;q._offsetX=f;q._offsetY=k;q._textureWidth=m*r;q._textureHeight=n*r;q._sourceWidth=this._sourceWidth;q._sourceHeight=this._sourceHeight;return this._textureMap[b]=q};a.dispose=function(){this.texture&&this.texture.dispose()};return d}(c.HashObject);c.SpriteSheet=f;f.prototype.__class__="egret.SpriteSheet"})(egret||
(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._text=null;this._isFocus=!1}__extends(d,e);var a=d.prototype;a.init=function(b){this._text=b;this.stageText=c.StageText.create();this.stageText._setTextField(this._text)};a._addStageText=function(){this._text._inputEnabled||(this._text._DO_Props_._touchEnabled=!0);this.stageText._add();this.stageText._addListeners();this.stageText.addEventListener("updateText",this.updateTextHandler,this);this._text.addEventListener(c.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,
this);c.MainContext.instance.stage.addEventListener(c.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this);this.stageText.addEventListener("blur",this.blurHandler,this);this.stageText.addEventListener("focus",this.focusHandler,this)};a._removeStageText=function(){this._text._inputEnabled||(this._text._DO_Props_._touchEnabled=!1);this.stageText._remove();this.stageText._removeListeners();this.stageText._removeInput();this.stageText.removeEventListener("updateText",this.updateTextHandler,this);this._text.removeEventListener(c.TouchEvent.TOUCH_BEGIN,
this.onMouseDownHandler,this);c.MainContext.instance.stage.removeEventListener(c.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this);this.stageText.removeEventListener("blur",this.blurHandler,this);this.stageText.removeEventListener("focus",this.focusHandler,this)};a._getText=function(){return this.stageText._getText()};a._setText=function(b){this.stageText._setText(b)};a.focusHandler=function(b){this._isFocus=!0;this._text._isTyping=!0;this._text.dispatchEvent(new c.FocusEvent(c.FocusEvent.FOCUS_IN))};
a.blurHandler=function(b){this._isFocus=!1;this._text._isTyping=!1;this._text.dispatchEvent(new c.FocusEvent(c.FocusEvent.FOCUS_OUT))};a.onMouseDownHandler=function(b){b.stopPropagation();this._text._DO_Props_._visible&&!this._isFocus&&(this._isFocus=!0,this.stageText._show(this._text._TF_Props_._multiline,this._text.size,this._text.width,this._text.height),b=this._text.localToGlobal(),this.stageText._initElement(b.x,b.y,this._text._worldTransform.a,this._text._worldTransform.d))};a.onStageDownHandler=
function(b){this.stageText._hide()};a.updateTextHandler=function(b){this.resetText();this._text.dispatchEvent(new c.Event(c.Event.CHANGE))};a.resetText=function(){this._text._setBaseText(this.stageText._getText())};a._hideInput=function(){this.stageText._removeInput()};a._updateTransform=function(){this._text._updateBaseTransform();!this._text._DO_Props_._visible&&this.stageText&&this._hideInput()};a._updateProperties=function(){if(!this._isFocus){var b=this._text._DO_Props_._stage;if(null==b)this.stageText._setVisible(!1);
else{for(var a=this._text,c=a._DO_Props_._visible;c;){a=a.parent;if(a==b)break;c=a._DO_Props_._visible}this.stageText._setVisible(c)}this.stageText._setMultiline(this._text._TF_Props_._multiline);this.stageText._setTextType(this._text._TF_Props_._displayAsPassword?"password":"text");this.stageText._setText(this._text._TF_Props_._text);this.stageText._resetStageText()}this._updateTransform()};return d}(c.HashObject);c.InputController=f;f.prototype.__class__="egret.InputController"})(egret||(egret=
{}));
(function(c){var f=function(c){function d(b,a){c.call(this,b);this.firstCharHeight=0;"string"==typeof a?this.charList=this.parseConfig(a):a&&a.hasOwnProperty("frames")?this.charList=a.frames:this.charList={}}__extends(d,c);var a=d.prototype;a.getTexture=function(b){var a=this._textureMap[b];if(!a){a=this.charList[b];if(!a)return null;a=this.createTexture(b,a.x,a.y,a.w,a.h,a.offX,a.offY,a.sourceW,a.sourceH);this._textureMap[b]=a}return a};a._getFirstCharHeight=function(){if(0==this.firstCharHeight)for(var b in this.charList){var a=this.charList[b];
if(a){var c=a.sourceH;void 0===c&&(c=a.h,void 0===c&&(c=0),a=a.offY,void 0===a&&(a=0),c+=a);if(!(0>=c)){this.firstCharHeight=c;break}}}return this.firstCharHeight};a.parseConfig=function(b){b=b.split("\r\n").join("\n");b=b.split("\n");for(var a=this.getConfigByKey(b[3],"count"),c={},d=4;d<4+a;d++){var e=b[d],f=String.fromCharCode(this.getConfigByKey(e,"id")),k={};c[f]=k;k.x=this.getConfigByKey(e,"x");k.y=this.getConfigByKey(e,"y");k.w=this.getConfigByKey(e,"width");k.h=this.getConfigByKey(e,"height");
k.offX=this.getConfigByKey(e,"xoffset");k.offY=this.getConfigByKey(e,"yoffset")}return c};a.getConfigByKey=function(b,a){for(var c=b.split(" "),d=0,e=c.length;d<e;d++){var f=c[d];if(a==f.substring(0,a.length))return c=f.substring(a.length+1),parseInt(c)}return 0};return d}(c.SpriteSheet);c.BitmapFont=f;f.prototype.__class__="egret.BitmapFont"})(egret||(egret={}));
(function(c){var f=function(e){function d(b){e.call(this);this._isAddedToStage=!1;this._frames=this._movieClipData=this._textureToRender=null;this._totalFrames=0;this._frameLabels=null;this._frameIntervalTime=0;this._eventPool=null;this._isPlaying=!1;this._isStopped=!0;this._passedTime=this._displayedKeyFrameNum=this._nextFrameNum=this._currentFrameNum=this._playTimes=0;this._setMovieClipData(b);this.needDraw=!0}__extends(d,e);var a=d.prototype;a._init=function(){this._reset();var b=this._movieClipData;
b&&b._isDataValid()&&(this._frames=b.frames,this._totalFrames=b.numFrames,this._frameLabels=b.labels,this._frameIntervalTime=1E3/b.frameRate,this._initFrame())};a._reset=function(){this._frames=null;this._playTimes=0;this._isPlaying=!1;this.setIsStopped(!0);this._currentFrameNum=0;this._nextFrameNum=1;this._passedTime=this._displayedKeyFrameNum=0;this._eventPool=[]};a._initFrame=function(){this._movieClipData._isTextureValid()&&(this._advanceFrame(),this._constructFrame())};a._render=function(b){var a=
this._textureToRender;if(this._texture_to_render=a){var c=Math.round(a._offsetX),e=Math.round(a._offsetY),l=a._bitmapWidth||a._textureWidth,f=a._bitmapHeight||a._textureHeight,k=Math.round(l),m=Math.round(f);d.renderFilter.drawImage(b,this,a._bitmapX,a._bitmapY,l,f,c,e,k,m)}};a._measureBounds=function(){var b=this._textureToRender;return b?c.Rectangle.identity.initialize(b._offsetX,b._offsetY,b._textureWidth,b._textureHeight):e.prototype._measureBounds.call(this)};a._onAddToStage=function(){e.prototype._onAddToStage.call(this);
this._isAddedToStage=!0;this._isPlaying&&1<this._totalFrames&&this.setIsStopped(!1)};a._onRemoveFromStage=function(){e.prototype._onRemoveFromStage.call(this);this._isAddedToStage=!1;this.setIsStopped(!0)};a._getFrameLabelByName=function(b,a){void 0===a&&(a=!1);a&&(b=b.toLowerCase());var c=this._frameLabels;if(c)for(var d=null,e=0;e<c.length;e++)if(d=c[e],a?d.name.toLowerCase()===b:d.name===b)return d;return null};a._getFrameLabelByFrame=function(b){var a=this._frameLabels;if(a)for(var c=null,d=0;d<
a.length;d++)if(c=a[d],c.frame===b)return c;return null};a._getFrameLabelForFrame=function(b){var a=null,c=null,d=this._frameLabels;if(d)for(var e=0;e<d.length;e++){c=d[e];if(c.frame>b)break;a=c}return a};a.play=function(b){void 0===b&&(b=0);this._isPlaying=!0;this.setPlayTimes(b);1<this._totalFrames&&this._isAddedToStage&&this.setIsStopped(!1)};a.stop=function(){this._isPlaying=!1;this.setIsStopped(!0)};a.prevFrame=function(){this.gotoAndStop(this._currentFrameNum-1)};a.nextFrame=function(){this.gotoAndStop(this._currentFrameNum+
1)};a.gotoAndPlay=function(b,a){void 0===a&&(a=0);(0===arguments.length||2<arguments.length)&&c.$error(1022,"MovieClip.gotoAndPlay()");this.play(a);this._gotoFrame(b)};a.gotoAndStop=function(b){1!=arguments.length&&c.$error(1022,"MovieClip.gotoAndStop()");this.stop();this._gotoFrame(b)};a._gotoFrame=function(b){var a;"string"===typeof b?a=this._getFrameLabelByName(b).frame:(a=parseInt(b+"",10),a!=b&&c.$error(1022,"Frame Label Not Found"));1>a?a=1:a>this._totalFrames&&(a=this._totalFrames);a!==this._nextFrameNum&&
(this._nextFrameNum=a,this._advanceFrame(),this._constructFrame(),this._handlePendingEvent())};a._advanceTime=function(b){var a=this._frameIntervalTime;b=this._passedTime+b;this._passedTime=b%a;a=b/a;if(!(1>a)){for(;1<=a;){a--;this._nextFrameNum++;if(this._nextFrameNum>this._totalFrames)if(-1==this._playTimes)this._eventPool.push(c.Event.LOOP_COMPLETE),this._nextFrameNum=1;else if(this._playTimes--,0<this._playTimes)this._eventPool.push(c.Event.LOOP_COMPLETE),this._nextFrameNum=1;else{this._nextFrameNum=
this._totalFrames;this._eventPool.push(c.Event.COMPLETE);this.stop();break}this._advanceFrame()}this._constructFrame();this._handlePendingEvent();this._setDirty()}};a._advanceFrame=function(){this._currentFrameNum=this._nextFrameNum};a._constructFrame=function(){var b=this._currentFrameNum;this._displayedKeyFrameNum!=b&&(this._textureToRender=this._movieClipData.getTextureByFrame(b),this._DO_Props_._sizeDirty=!0,this._displayedKeyFrameNum=b)};a._handlePendingEvent=function(){if(0!=this._eventPool.length){this._eventPool.reverse();
for(var b=this._eventPool,a=b.length,d=!1,e=!1,l=0;l<a;l++){var f=b.pop();f==c.Event.LOOP_COMPLETE?e=!0:f==c.Event.COMPLETE?d=!0:this.dispatchEventWith(f)}e&&this.dispatchEventWith(c.Event.LOOP_COMPLETE);d&&this.dispatchEventWith(c.Event.COMPLETE)}};Object.defineProperty(a,"totalFrames",{get:function(){return this._totalFrames},enumerable:!0,configurable:!0});Object.defineProperty(a,"currentFrame",{get:function(){return this._currentFrameNum},enumerable:!0,configurable:!0});Object.defineProperty(a,
"currentFrameLabel",{get:function(){var b=this._getFrameLabelByFrame(this._currentFrameNum);return b&&b.name},enumerable:!0,configurable:!0});Object.defineProperty(a,"currentLabel",{get:function(){var b=this._getFrameLabelForFrame(this._currentFrameNum);return b?b.name:null},enumerable:!0,configurable:!0});Object.defineProperty(a,"frameRate",{get:function(){return this.movieClipData.frameRate},set:function(b){b!=this._movieClipData.frameRate&&(this._movieClipData.frameRate=b,this._frameIntervalTime=
1E3/this._movieClipData.frameRate)},enumerable:!0,configurable:!0});Object.defineProperty(a,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0});Object.defineProperty(a,"movieClipData",{get:function(){return this._movieClipData},set:function(b){this._setMovieClipData(b)},enumerable:!0,configurable:!0});a._setMovieClipData=function(b){this._movieClipData!=b&&(this._movieClipData=b,this._init())};a.setPlayTimes=function(b){if(0>b||1<=b)this._playTimes=0>b?-1:Math.floor(b)};
a.setIsStopped=function(b){this._isStopped!=b&&((this._isStopped=b)?(this._playTimes=0,c.Ticker.getInstance().unregister(this._advanceTime,this)):(this._playTimes=0==this._playTimes?1:this._playTimes,c.Ticker.getInstance().register(this._advanceTime,this)))};d.renderFilter=c.RenderFilter.getInstance();return d}(c.DisplayObject);c.MovieClip=f;f.prototype.__class__="egret.MovieClip"})(egret||(egret={}));
(function(c){var f=function(c){function d(b,a){c.call(this);this._name=b;this._frame=a|0}__extends(d,c);var a=d.prototype;Object.defineProperty(a,"name",{get:function(){return this._name},enumerable:!0,configurable:!0});Object.defineProperty(a,"frame",{get:function(){return this._frame},enumerable:!0,configurable:!0});a.clone=function(){return new d(this._name,this._frame)};return d}(c.EventDispatcher);c.FrameLabel=f;f.prototype.__class__="egret.FrameLabel"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._mcData=null;this.numFrames=1;this.frames=[];this.labels=null;this.frameRate=0;this.spriteSheet=this.textureData=null}__extends(d,e);var a=d.prototype;a._init=function(b,a,c){this.textureData=a;this.spriteSheet=c;this._setMCData(b)};a.getKeyFrameData=function(b){b=this.frames[b-1];b.frame&&(b=this.frames[b.frame-1]);return b};a.getTextureByFrame=function(b){b=this.getKeyFrameData(b);if(b.res){var a=this.getTextureByResName(b.res);a._offsetX=
b.x|0;a._offsetY=b.y|0;return a}return null};a.getTextureByResName=function(b){var a=this.spriteSheet.getTexture(b);a||(a=this.textureData[b],a=this.spriteSheet.createTexture(b,a.x,a.y,a.w,a.h));return a};a._isDataValid=function(){return 0<this.frames.length};a._isTextureValid=function(){return null!=this.textureData&&null!=this.spriteSheet};a._fillMCData=function(b){this.frameRate=b.frameRate||24;this._fillFramesData(b.frames);this._fillFrameLabelsData(b.labels)};a._fillFramesData=function(b){for(var a=
this.frames,c=b?b.length:0,d,e=0;e<c;e++)if(d=b[e],a.push(d),d.duration){var f=parseInt(d.duration);if(1<f){d=a.length;for(var k=1;k<f;k++)a.push({frame:d})}}this.numFrames=a.length};a._fillFrameLabelsData=function(b){if(b){var a=b.length;if(0<a){this.labels=[];for(var d=0;d<a;d++){var e=b[d];this.labels.push(new c.FrameLabel(e.name,e.frame))}}}};Object.defineProperty(a,"mcData",{get:function(){return this._mcData},set:function(b){this._setMCData(b)},enumerable:!0,configurable:!0});a._setMCData=function(b){this._mcData!=
b&&(this._mcData=b)&&this._fillMCData(b)};return d}(c.HashObject);c.MovieClipData=f;f.prototype.__class__="egret.MovieClipData"})(egret||(egret={}));
(function(c){var f=function(e){function d(b,a){e.call(this);this.enableCache=!0;this._mcDataCache={};this._mcDataSet=b;this.setTexture(a)}__extends(d,e);var a=d.prototype;a.clearCache=function(){this._mcDataCache={}};a.generateMovieClipData=function(b){void 0===b&&(b="");if(""==b&&this._mcDataSet)for(b in this._mcDataSet.mc)break;if(""==b)return null;var a=this._findFromCache(b,this._mcDataCache);a||(a=new c.MovieClipData,this._fillData(b,a,this._mcDataCache));return a};a._findFromCache=function(b,
a){return this.enableCache&&a[b]?a[b]:null};a._fillData=function(b,a,c){if(this._mcDataSet){var d=this._mcDataSet.mc[b];d&&(a._init(d,this._mcDataSet.res,this._spriteSheet),this.enableCache&&(c[b]=a))}};Object.defineProperty(a,"mcDataSet",{get:function(){return this._mcDataSet},set:function(b){this._mcDataSet=b},enumerable:!0,configurable:!0});Object.defineProperty(a,"texture",{set:function(b){this.setTexture(b)},enumerable:!0,configurable:!0});Object.defineProperty(a,"spriteSheet",{get:function(){return this._spriteSheet},
enumerable:!0,configurable:!0});a.setTexture=function(b){this._spriteSheet=b?new c.SpriteSheet(b):null};return d}(c.EventDispatcher);c.MovieClipDataFactory=f;f.prototype.__class__="egret.MovieClipDataFactory"})(egret||(egret={}));
(function(c){var f=function(c){function d(){c.call(this);this._scaleY=this._scaleX=1;this._size=30;this._color="#FFFFFF";this._fontFamily="Arial";this._italic=this._bold=!1;this._textAlign="left";this._verticalAlign="top";this._visible=!1;this._height=this._width=0;this._multiline=!1;this._maxChars=0}__extends(d,c);var a=d.prototype;a._setTextField=function(b){this._textfield=b};a._getText=function(){return null};a._setText=function(b){};a._setTextType=function(b){};a._getTextType=function(){return null};
a._show=function(b,a,c,d){};a._add=function(){};a._remove=function(){};a._hide=function(){};a._addListeners=function(){};a._removeListeners=function(){};a._setScale=function(b,a){this._scaleX=b;this._scaleY=a};a.changePosition=function(b,a){};a._setSize=function(b){this._size=b};a._setTextColor=function(b){this._color=b};a._setTextFontFamily=function(b){this._fontFamily=b};a._setBold=function(b){this._bold=b};a._setItalic=function(b){this._italic=b};a._setTextAlign=function(b){this._textAlign=b};
a._setVerticalAlign=function(b){this._verticalAlign=b};a._setVisible=function(b){this._visible=b};a._setWidth=function(b){this._width=b};a._setHeight=function(b){this._height=b};a._setMultiline=function(b){this._multiline=b};a._setMaxChars=function(b){this._maxChars=b};a._resetStageText=function(){};a._initElement=function(b,a,c,d){};a._removeInput=function(){};d.create=function(){return null};return d}(c.EventDispatcher);c.StageText=f;f.prototype.__class__="egret.StageText"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.GET="get";c.POST="post";return c}();c.URLRequestMethod=f;f.prototype.__class__="egret.URLRequestMethod"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.BINARY="binary";c.TEXT="text";c.VARIABLES="variables";c.TEXTURE="texture";c.SOUND="sound";return c}();c.URLLoaderDataFormat=f;f.prototype.__class__="egret.URLLoaderDataFormat"})(egret||(egret={}));
(function(c){var f=function(c){function d(b){void 0===b&&(b=null);c.call(this);this.variables=null;null!==b&&this.decode(b)}__extends(d,c);var a=d.prototype;a.decode=function(b){this.variables||(this.variables={});b=b.split("+").join(" ");for(var a,c=/[?&]?([^=]+)=([^&]*)/g;a=c.exec(b);){var d=decodeURIComponent(a[1]);a=decodeURIComponent(a[2]);if(!1==d in this.variables)this.variables[d]=a;else{var e=this.variables[d];e instanceof Array?e.push(a):this.variables[d]=[e,a]}}};a.toString=function(){if(!this.variables)return"";
var b=this.variables,a=[],c;for(c in b)a.push(this.encodeValue(c,b[c]));return a.join("&")};a.encodeValue=function(b,a){return a instanceof Array?this.encodeArray(b,a):encodeURIComponent(b)+"="+encodeURIComponent(a)};a.encodeArray=function(b,a){return b?0==a.length?encodeURIComponent(b)+"=":a.map(function(a){return encodeURIComponent(b)+"="+encodeURIComponent(a)}).join("&"):""};return d}(c.HashObject);c.URLVariables=f;f.prototype.__class__="egret.URLVariables"})(egret||(egret={}));
(function(c){var f=function(){return function(c,d){this.value=this.name="";this.name=c;this.value=d}}();c.URLRequestHeader=f;f.prototype.__class__="egret.URLRequestHeader"})(egret||(egret={}));(function(c){var f=function(e){function d(a){void 0===a&&(a=null);e.call(this);this.data=null;this.method=c.URLRequestMethod.GET;this.url="";this.url=a}__extends(d,e);return d}(c.HashObject);c.URLRequest=f;f.prototype.__class__="egret.URLRequest"})(egret||(egret={}));
(function(c){var f=function(e){function d(b){void 0===b&&(b=null);e.call(this);this.dataFormat=c.URLLoaderDataFormat.TEXT;this._request=this.data=null;this._status=-1;b&&this.load(b)}__extends(d,e);var a=d.prototype;a.load=function(b){this._request=b;this.data=null;c.MainContext.instance.netContext.proceed(this)};a.__recycle=function(){this.data=this._request=null};return d}(c.EventDispatcher);c.URLLoader=f;f.prototype.__class__="egret.URLLoader"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._sourceHeight=this._sourceWidth=this._textureHeight=this._textureWidth=this._offsetY=this._offsetX=this._bitmapHeight=this._bitmapWidth=this._bitmapY=this._bitmapX=0;this._bitmapData=null}__extends(d,e);var a=d.prototype;Object.defineProperty(a,"textureWidth",{get:function(){return this._textureWidth},enumerable:!0,configurable:!0});Object.defineProperty(a,"textureHeight",{get:function(){return this._textureHeight},enumerable:!0,configurable:!0});
a._setBitmapData=function(b){var a=c.MainContext.instance.rendererContext._texture_scale_factor;this._bitmapData=b;this._sourceWidth=b.width;this._sourceHeight=b.height;this._textureWidth=this._sourceWidth*a;this._textureHeight=this._sourceHeight*a;this._bitmapWidth=this._textureWidth;this._bitmapHeight=this._textureHeight;this._offsetX=this._offsetY=this._bitmapX=this._bitmapY=0};a.getPixel32=function(b,a){return this._bitmapData.getContext("2d").getImageData(b,a,1,1).data};a.dispose=function(){var b=
this._bitmapData;b.dispose&&b.dispose()};a._clone=function(){var b=new d;b._bitmapData=this._bitmapData;return b};a.draw=function(b,a,c,d,e,f,k,m,n,q){};a._drawForCanvas=function(b,a,c,d,e,f,k,m,n,q){var r=this._bitmapData;r&&r.avaliable&&(void 0!=q?this._drawRepeatImageForCanvas(b,a,c,d,e,f,k,m,n,q):b.drawImage(r,a,c,d,e,f,k,m,n))};a._drawForNative=function(b,a,c,d,e,f,k,m,n,q){var r=this._bitmapData;r&&r.avaliable&&(void 0!==q?this._drawRepeatImageForNative(b,a,c,d,e,f,k,m,n,q):b.drawImage(r,a,
c,d,e,f,k,m,n))};a._drawRepeatImageForNative=function(b,a,d,e,l,f,k,m,n,q){q=c.MainContext.instance.rendererContext._texture_scale_factor;e*=q;for(l*=q;f<m;f+=e)for(var r=k;r<n;r+=l){var t=Math.min(e,m-f),u=Math.min(l,n-r);this._drawForNative(b,a,d,t/q,u/q,f,r,t,u,void 0)}};a._drawRepeatImageForCanvas=function(b,a,d,e,l,f,k,m,n,q){if(void 0===this.pattern){var r=c.MainContext.instance.rendererContext._texture_scale_factor,t=this._bitmapData,u=t;if(t.width!=e||t.height!=l||1!=r)u=document.createElement("canvas"),
u.width=e*r,u.height=l*r,u.getContext("2d").drawImage(t,a,d,e,l,0,0,e*r,l*r);this.pattern=b.createPattern(u,q)}b.fillStyle=this.pattern;b.translate(f,k);b.fillRect(0,0,m,n);b.translate(-f,-k)};a._disposeForCanvas=function(){d.deleteWebGLTexture(this);var b=this._bitmapData;b.onload=null;b.onerror=null;b.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAATSURBVHjaYvj//z8DAAAA//8DAAj8Av7TpXVhAAAAAElFTkSuQmCC";
b.avaliable=!1;console.log("_disposeForCanvas")};a._disposeForNative=function(){var b=this._bitmapData;b.dispose();b.avaliable=!1;console.log("_disposeForNative")};d.deleteWebGLTexture=function(b){if(b=b._bitmapData){var a=b.webGLTexture;if(a)for(var c in a){var d=a[c];d.glContext.deleteTexture(d)}b.webGLTexture=null}};d.createBitmapData=function(b,a){};d._createBitmapDataForCanvasAndWebGl=function(b,a){var e=d._bitmapDataFactory[b];e||(e=document.createElement("img"),e.setAttribute("bitmapSrc",b),
d._bitmapDataFactory[b]=e);if(e.avaliable)a(0,e);else{e.crossOrigin=d.crossOrigin;var p=window.URL||window.webkitURL;if(null==d._bitmapCallbackMap[b])if(d._addToCallbackList(b,a),0!=b.indexOf("data:")&&0!=b.indexOf("http:")&&0!=b.indexOf("https:")&&c.Browser.getInstance().isIOS()&&7<=parseInt(c.Browser.getInstance().getIOSVersion().charAt(0))&&p){var l=new XMLHttpRequest;l.open("get",b,!0);l.responseType="blob";l.onload=function(){if(200==this.status){var c=this.response;e.onload=function(){p.revokeObjectURL(e.src);
d._onLoad(b,e)};e.onerror=function(){d._onError(b,e)};e.src=p.createObjectURL(c)}else a(1,null)};l.send()}else e.onload=function(){d._onLoad(b,e)},e.onerror=function(){d._onError(b,e)},e.src=b;else d._addToCallbackList(b,a)}};d._onLoad=function(b,a){a.avaliable=!0;a.onload&&(a.onload=null);a.onerror&&(a.onerror=null);var c=d._bitmapCallbackMap[b];if(c&&c.length){delete d._bitmapCallbackMap[b];for(var e=c.length,l=0;l<e;l++)(0,c[l])(0,a)}};d._onError=function(b,a){var c=d._bitmapCallbackMap[b];if(c&&
c.length){delete d._bitmapCallbackMap[b];for(var e=c.length,l=0;l<e;l++)(0,c[l])(1,a)}};d._createBitmapDataForNative=function(b,a){console.log("_createBitmapDataForNative:"+b);var e=d._bitmapDataFactory[b];e?(e.avaliable||(console.log("reload"),e.reload(),e.avaliable=!0),a(0,e)):c.NativeNetContext.__use_asyn?d._bitmapCallbackMap[b]?d._addToCallbackList(b,a):(d._addToCallbackList(b,a),e=new c.PromiseObject,e.onSuccessFunc=function(a){d._bitmapDataFactory[b]=a;d._onLoad(b,a)},e.onErrorFunc=function(){d._onError(b,
null)},console.log("addTextureAsyn"),egret_native.Texture.addTextureAsyn(b,e)):(console.log("addTexture"),e=egret_native.Texture.addTexture(b),d._bitmapDataFactory[b]=e,e.avaliable=!0,a(0,e))};d._addToCallbackList=function(b,a){var c=d._bitmapCallbackMap[b];c||(c=[]);c.push(a);d._bitmapCallbackMap[b]=c};d.crossOrigin=null;d._bitmapDataFactory={};d._bitmapCallbackMap={};return d}(c.HashObject);c.Texture=f;f.prototype.__class__="egret.Texture"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this)}__extends(d,e);var a=d.prototype;a.init=function(){this._bitmapData=document.createElement("canvas");this._bitmapData.avaliable=!0;this.renderContext=c.RendererContext.createRendererContext(this._bitmapData)};a.drawToTexture=function(b,a,e){var p=a||b.getBounds(c.Rectangle.identity);if(0==p.width||0==p.height)return!1;this._bitmapData||this.init();var l=p.x,f=p.y,k=p.width,p=p.height,m,n,q=c.MainContext.instance.rendererContext._texture_scale_factor;
m=k/q;n=p/q;m=Math.round(m);n=Math.round(n);this.setSize(m,n);this.begin();b._worldTransform.identity();b._worldTransform.a=1/q;b._worldTransform.d=1/q;e&&(b._worldTransform.a*=e,b._worldTransform.d*=e);e=b._DO_Props_._anchorOffsetX;q=b._DO_Props_._anchorOffsetY;if(0!=b._DO_Props_._anchorX||0!=b._DO_Props_._anchorY)e=b._DO_Props_._anchorX*m,q=b._DO_Props_._anchorY*n;this._offsetX=l+e;this._offsetY=f+q;b._worldTransform.append(1,0,0,1,-this._offsetX,-this._offsetY);a&&(this._offsetX-=l,this._offsetY-=
f);b.worldAlpha=1;if(b instanceof c.DisplayObjectContainer)for(a=b._children,l=0,f=a.length;l<f;l++)a[l]._updateTransform();this.renderContext.setTransform(b._worldTransform);a=c.RenderFilter.getInstance();l=a._drawAreaList.concat();a._drawAreaList.length=0;this.renderContext.clearScreen();this.renderContext.onRenderStart();c.Texture.deleteWebGLTexture(this);b._hasFilters()&&b._setGlobalFilters(this.renderContext);(f=b.mask||b._DO_Props_._scrollRect)&&this.renderContext.pushMask(f);e=c.MainContext.__use_new_draw;
c.MainContext.__use_new_draw=!1;b._render(this.renderContext);c.MainContext.__use_new_draw=e;f&&this.renderContext.popMask();b._hasFilters()&&b._removeGlobalFilters(this.renderContext);d.identityRectangle.width=m;d.identityRectangle.height=n;a.addDrawArea(d.identityRectangle);this.renderContext.onRenderFinish();a._drawAreaList=l;this._sourceWidth=m;this._sourceHeight=n;this._textureWidth=Math.round(k);this._textureHeight=Math.round(p);this.end();return!0};a.setSize=function(b,a){var c=this._bitmapData;
c.width=b;c.height=a;c.style.width=b+"px";c.style.height=a+"px";this.renderContext._cacheCanvas&&(this.renderContext._cacheCanvas.width=b,this.renderContext._cacheCanvas.height=a)};a.begin=function(){};a.end=function(){};a.dispose=function(){this._bitmapData&&(this.renderContext=this._bitmapData=null)};d.create=function(){return d._pool.length?d._pool.pop():new d};d.release=function(b){d._pool.push(b)};d.identityRectangle=new c.Rectangle;d._pool=[];return d}(c.Texture);c.RenderTexture=f;f.prototype.__class__=
"egret.RenderTexture"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.renderCost=0;this._texture_scale_factor=1;this.profiler=c.Profiler.getInstance();d.blendModesForGL||d.initBlendMode()}__extends(d,e);var a=d.prototype;Object.defineProperty(a,"texture_scale_factor",{get:function(){return this._texture_scale_factor},set:function(b){this._setTextureScaleFactor(b)},enumerable:!0,configurable:!0});a._setTextureScaleFactor=function(b){this._texture_scale_factor=b};a.clearScreen=function(){};a.clearRect=function(b,
a,c,d){};a.drawImage=function(b,a,c,d,e,f,k,m,n,q){this.profiler.onDrawImage()};a.drawImageScale9=function(b,a,c,d,e,f,k,m,n,q){return!1};a._addOneDraw=function(){this.profiler.onDrawImage()};a.setTransform=function(b){};a.setAlpha=function(b,a){};a.setupFont=function(b,a){};a.measureText=function(b){return 0};a.drawText=function(b,a,c,d,e,f){this.profiler.onDrawImage()};a.strokeRect=function(b,a,c,d,e){};a.pushMask=function(b){};a.popMask=function(){};a.onRenderStart=function(){};a.onRenderFinish=
function(){};a.createLinearGradient=function(b,a,c,d){return null};a.createRadialGradient=function(b,a,c,d,e,f){return null};a.setGlobalFilters=function(b){};a.drawCursor=function(b,a,c,d){};d.createRendererContext=function(b){return null};d.initBlendMode=function(){d.blendModesForGL={};d.blendModesForGL[c.BlendMode.NORMAL]=[1,771];d.blendModesForGL[c.BlendMode.ADD]=[770,1];d.blendModesForGL[c.BlendMode.ERASE]=[0,771];d.blendModesForGL[c.BlendMode.ERASE_REVERSE]=[0,770]};d.registerBlendModeForGL=
function(b,a,e,p){d.blendModesForGL[b]&&!p?c.$warn(1005,b):d.blendModesForGL[b]=[a,e]};d.imageSmoothingEnabled=!0;d.blendModesForGL=null;return d}(c.HashObject);c.RendererContext=f;f.prototype.__class__="egret.RendererContext"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.MOUSE="mouse";c.TOUCH="touch";c.mode="touch";return c}();c.InteractionMode=f;f.prototype.__class__="egret.InteractionMode"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._currentTouchTarget={};this.maxTouches=2;this.touchDownTarget={};this.touchingIdentifiers=[];this.lastTouchY=this.lastTouchX=-1}__extends(d,e);var a=d.prototype;a.run=function(){};a.getTouchData=function(b,a,c){var d=this._currentTouchTarget[b];null==d&&(d={},this._currentTouchTarget[b]=d);d.stageX=a;d.stageY=c;d.identifier=b;return d};a.dispatchEvent=function(b,a){c.TouchEvent.dispatchTouchEvent(a.target,b,a.identifier,a.stageX,a.stageY,
!1,!1,!1,!0==this.touchDownTarget[a.identifier])};a.onTouchBegan=function(b,a,d){if(this.touchingIdentifiers.length!=this.maxTouches){this.lastTouchX=b;this.lastTouchY=a;var e=c.MainContext.instance.stage.hitTest(b,a);e&&(b=this.getTouchData(d,b,a),this.touchDownTarget[d]=!0,b.target=e,b.beginTarget=e,this.dispatchEvent(c.TouchEvent.TOUCH_BEGIN,b));this.touchingIdentifiers.push(d)}};a.onTouchMove=function(b,a,d){if(-1!=this.touchingIdentifiers.indexOf(d)&&(b!=this.lastTouchX||a!=this.lastTouchY)){this.lastTouchX=
b;this.lastTouchY=a;var e=c.MainContext.instance.stage.hitTest(b,a);e&&(b=this.getTouchData(d,b,a),b.target=e,this.dispatchEvent(c.TouchEvent.TOUCH_MOVE,b))}};a.onTouchEnd=function(b,a,d){var e=this.touchingIdentifiers.indexOf(d);-1!=e&&(this.touchingIdentifiers.splice(e,1),e=c.MainContext.instance.stage.hitTest(b,a))&&(b=this.getTouchData(d,b,a),delete this.touchDownTarget[d],d=b.beginTarget,b.target=e,this.dispatchEvent(c.TouchEvent.TOUCH_END,b),d==e?this.dispatchEvent(c.TouchEvent.TOUCH_TAP,b):
b.beginTarget&&(b.target=b.beginTarget,this.dispatchEvent(c.TouchEvent.TOUCH_RELEASE_OUTSIDE,b)),delete this._currentTouchTarget[b.identifier])};return d}(c.HashObject);c.TouchContext=f;f.prototype.__class__="egret.TouchContext"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this)}__extends(d,e);var a=d.prototype;a.proceed=function(b){};d._getUrl=function(b){var a=b.url;-1==a.indexOf("?")&&b.method==c.URLRequestMethod.GET&&b.data&&b.data instanceof c.URLVariables&&(a=a+"?"+b.data.toString());return a};a.getChangeList=function(){return[]};return d}(c.HashObject);c.NetContext=f;f.prototype.__class__="egret.NetContext"})(egret||(egret={}));
(function(c){var f=function(c){function d(){c.call(this)}__extends(d,c);var a=d.prototype;a.executeMainLoop=function(b,a){};a.setFrameRate=function(b){};return d}(c.HashObject);c.DeviceContext=f;f.prototype.__class__="egret.DeviceContext"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.call=function(c,a){};c.addCallback=function(c,a){};return c}();c.ExternalInterface=f;f.prototype.__class__="egret.ExternalInterface"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.header=this.trans=null;this.ua=navigator.userAgent.toLowerCase();this.trans=this.getTrans("transform")}__extends(d,e);var a=d.prototype;d.getInstance=function(){null==d.instance&&(d.instance=new d);return d.instance};Object.defineProperty(a,"isMobile",{get:function(){c.$warn(1E3);return c.MainContext.deviceType==c.MainContext.DEVICE_MOBILE},enumerable:!0,configurable:!0});a.isIOS=function(){return 0>this.ua.indexOf("windows")&&(0<=this.ua.indexOf("iphone")||
0<=this.ua.indexOf("ipad")||0<=this.ua.indexOf("ipod"))};a.getIOSVersion=function(){return this.ua.toLowerCase().match(/cpu [^\d]*\d.*like mac os x/)[0].match(/\d(_\d)*/)[0]};a.getUserAgent=function(){return this.ua};a.getTrans=function(b,a){void 0===a&&(a=!1);var c="";a?c=this.getHeader(b):(null==this.header&&(this.header=this.getHeader("transform")),c=this.header);return""==c?b:c+b.charAt(0).toUpperCase()+b.substring(1,b.length)};a.getHeader=function(b){var a=document.createElement("div").style;
if(b in a)return"";b=b.charAt(0).toUpperCase()+b.substring(1,b.length);for(var c=["webkit","ms","Moz","O"],d=0;d<c.length;d++)if(c[d]+b in a)return c[d];return""};a.$new=function(b){return this.$(document.createElement(b))};a.$=function(b){var a=document;if(b=b instanceof HTMLElement?b:a.querySelector(b))b.find=b.find||this.$,b.hasClass=b.hasClass||function(b){return this.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))},b.addClass=b.addClass||function(b){this.hasClass(b)||(this.className&&(this.className+=
" "),this.className+=b);return this},b.removeClass=b.removeClass||function(b){this.hasClass(b)&&(this.className=this.className.replace(b,""));return this},b.remove=b.remove||function(){},b.appendTo=b.appendTo||function(b){b.appendChild(this);return this},b.prependTo=b.prependTo||function(b){b.childNodes[0]?b.insertBefore(this,b.childNodes[0]):b.appendChild(this);return this},b.transforms=b.transforms||function(){this.style[d.getInstance().trans]=d.getInstance().translate(this.position)+d.getInstance().rotate(this.rotation)+
d.getInstance().scale(this.scale)+d.getInstance().skew(this.skew);return this},b.position=b.position||{x:0,y:0},b.rotation=b.rotation||0,b.scale=b.scale||{x:1,y:1},b.skew=b.skew||{x:0,y:0},b.translates=function(b,a){this.position.x=b;this.position.y=a-c.MainContext.instance.stage.stageHeight;this.transforms();return this},b.rotate=function(b){this.rotation=b;this.transforms();return this},b.resize=function(b,a){this.scale.x=b;this.scale.y=a;this.transforms();return this},b.setSkew=function(b,a){this.skew.x=
b;this.skew.y=a;this.transforms();return this};return b};a.translate=function(b){return"translate("+b.x+"px, "+b.y+"px) "};a.rotate=function(b){return"rotate("+b+"deg) "};a.scale=function(b){return"scale("+b.x+", "+b.y+") "};a.skew=function(b){return"skewX("+-b.x+"deg) skewY("+b.y+"deg)"};return d}(c.HashObject);c.Browser=f;f.prototype.__class__="egret.Browser"})(egret||(egret={}));
(function(c){(function(c){c.getItem=function(c){return null};c.setItem=function(c,d){return!1};c.removeItem=function(c){};c.clear=function(){}})(c.localStorage||(c.localStorage={}))})(egret||(egret={}));
(function(c){var f=function(){function e(){}e.parse=function(d){d=c.SAXParser.getInstance().parserXML(d);if(!d||!d.childNodes)return null;for(var a=d.childNodes.length,b=!1,g=0;g<a;g++){var s=d.childNodes[g];if(1==s.nodeType){b=!0;break}}return b?e.parseNode(s):null};e.parseNode=function(c){if(!c||1!=c.nodeType)return null;var a={};a.localName=c.localName;a.name=c.nodeName;c.namespaceURI&&(a.namespace=c.namespaceURI);c.prefix&&(a.prefix=c.prefix);for(var b=c.attributes,g=b.length,s=0;s<g;s++){var p=
b[s],l=p.name;0!=l.indexOf("xmlns:")&&(a["$"+l]=p.value)}b=c.childNodes;g=b.length;for(s=0;s<g;s++)if(p=e.parseNode(b[s]))a.children||(a.children=[]),p.parent=a,a.children.push(p);!a.children&&(c=c.textContent.trim())&&(a.text=c);return a};e.findChildren=function(c,a,b){b?b.length=0:b=[];e.findByPath(c,a,b);return b};e.findByPath=function(c,a,b){var g=a.indexOf("."),s;-1==g?(s=a,g=!0):(s=a.substring(0,g),a=a.substring(g+1),g=!1);if(c=c.children)for(var p=c.length,l=0;l<p;l++){var f=c[l];f.localName==
s&&(g?b.push(f):e.findByPath(f,a,b))}};e.getAttributes=function(c,a){a?a.length=0:a=[];for(var b in c)"$"==b.charAt(0)&&a.push(b.substring(1));return a};return e}();c.XML=f;f.prototype.__class__="egret.XML"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.LITTLE_ENDIAN="littleEndian";c.BIG_ENDIAN="bigEndian";return c}();c.Endian=f;f.prototype.__class__="egret.Endian";var e=function(){function d(b){this.BUFFER_EXT_SIZE=0;this.EOF_code_point=this.EOF_byte=-1;this._setArrayBuffer(b||new ArrayBuffer(this.BUFFER_EXT_SIZE));this.endian=f.BIG_ENDIAN}var a=d.prototype;a._setArrayBuffer=function(b){this.write_position=b.byteLength;this.data=new DataView(b);this._position=0};Object.defineProperty(a,"buffer",{get:function(){return this.data.buffer},
set:function(b){this.data=new DataView(b)},enumerable:!0,configurable:!0});Object.defineProperty(a,"dataView",{get:function(){return this.data},set:function(b){this.data=b;this.write_position=b.byteLength},enumerable:!0,configurable:!0});Object.defineProperty(a,"bufferOffset",{get:function(){return this.data.byteOffset},enumerable:!0,configurable:!0});Object.defineProperty(a,"position",{get:function(){return this._position},set:function(b){this._position<b&&!this.validate(b-this._position)||(this._position=
b,this.write_position=b>this.write_position?b:this.write_position)},enumerable:!0,configurable:!0});Object.defineProperty(a,"length",{get:function(){return this.write_position},set:function(b){this.validateBuffer(b,!0)},enumerable:!0,configurable:!0});Object.defineProperty(a,"bytesAvailable",{get:function(){return this.data.byteLength-this._position},enumerable:!0,configurable:!0});a.clear=function(){this._setArrayBuffer(new ArrayBuffer(this.BUFFER_EXT_SIZE))};a.readBoolean=function(){return this.validate(d.SIZE_OF_BOOLEAN)?
0!=this.data.getUint8(this.position++):null};a.readByte=function(){return this.validate(d.SIZE_OF_INT8)?this.data.getInt8(this.position++):null};a.readBytes=function(b,a,c){void 0===a&&(a=0);void 0===c&&(c=0);if(0==c)c=this.bytesAvailable;else if(!this.validate(c))return null;b?b.validateBuffer(c):b=new d(new ArrayBuffer(c));for(var e=0;e<c;e++)b.data.setUint8(e+a,this.data.getUint8(this.position++))};a.readDouble=function(){if(!this.validate(d.SIZE_OF_FLOAT64))return null;var b=this.data.getFloat64(this.position,
this.endian==f.LITTLE_ENDIAN);this.position+=d.SIZE_OF_FLOAT64;return b};a.readFloat=function(){if(!this.validate(d.SIZE_OF_FLOAT32))return null;var b=this.data.getFloat32(this.position,this.endian==f.LITTLE_ENDIAN);this.position+=d.SIZE_OF_FLOAT32;return b};a.readInt=function(){if(!this.validate(d.SIZE_OF_INT32))return null;var b=this.data.getInt32(this.position,this.endian==f.LITTLE_ENDIAN);this.position+=d.SIZE_OF_INT32;return b};a.readShort=function(){if(!this.validate(d.SIZE_OF_INT16))return null;
var b=this.data.getInt16(this.position,this.endian==f.LITTLE_ENDIAN);this.position+=d.SIZE_OF_INT16;return b};a.readUnsignedByte=function(){return this.validate(d.SIZE_OF_UINT8)?this.data.getUint8(this.position++):null};a.readUnsignedInt=function(){if(!this.validate(d.SIZE_OF_UINT32))return null;var b=this.data.getUint32(this.position,this.endian==f.LITTLE_ENDIAN);this.position+=d.SIZE_OF_UINT32;return b};a.readUnsignedShort=function(){if(!this.validate(d.SIZE_OF_UINT16))return null;var b=this.data.getUint16(this.position,
this.endian==f.LITTLE_ENDIAN);this.position+=d.SIZE_OF_UINT16;return b};a.readUTF=function(){if(!this.validate(d.SIZE_OF_UINT16))return null;var b=this.data.getUint16(this.position,this.endian==f.LITTLE_ENDIAN);this.position+=d.SIZE_OF_UINT16;return 0<b?this.readUTFBytes(b):""};a.readUTFBytes=function(b){if(!this.validate(b))return null;var a=new Uint8Array(this.buffer,this.bufferOffset+this.position,b);this.position+=b;return this.decodeUTF8(a)};a.writeBoolean=function(b){this.validateBuffer(d.SIZE_OF_BOOLEAN);
this.data.setUint8(this.position++,b?1:0)};a.writeByte=function(b){this.validateBuffer(d.SIZE_OF_INT8);this.data.setInt8(this.position++,b)};a.writeBytes=function(b,a,c){void 0===a&&(a=0);void 0===c&&(c=0);if(!(0>a||0>c)&&(c=0==c?b.length-a:Math.min(b.length-a,c),0<c)){this.validateBuffer(c);b=new DataView(b.buffer);for(var d=a;d<c+a;d++)this.data.setUint8(this.position++,b.getUint8(d))}};a.writeDouble=function(b){this.validateBuffer(d.SIZE_OF_FLOAT64);this.data.setFloat64(this.position,b,this.endian==
f.LITTLE_ENDIAN);this.position+=d.SIZE_OF_FLOAT64};a.writeFloat=function(b){this.validateBuffer(d.SIZE_OF_FLOAT32);this.data.setFloat32(this.position,b,this.endian==f.LITTLE_ENDIAN);this.position+=d.SIZE_OF_FLOAT32};a.writeInt=function(b){this.validateBuffer(d.SIZE_OF_INT32);this.data.setInt32(this.position,b,this.endian==f.LITTLE_ENDIAN);this.position+=d.SIZE_OF_INT32};a.writeShort=function(b){this.validateBuffer(d.SIZE_OF_INT16);this.data.setInt16(this.position,b,this.endian==f.LITTLE_ENDIAN);this.position+=
d.SIZE_OF_INT16};a.writeUnsignedInt=function(b){this.validateBuffer(d.SIZE_OF_UINT32);this.data.setUint32(this.position,b,this.endian==f.LITTLE_ENDIAN);this.position+=d.SIZE_OF_UINT32};a.writeUTF=function(b){b=this.encodeUTF8(b);var a=b.length;this.validateBuffer(d.SIZE_OF_UINT16+a);this.data.setUint16(this.position,a,this.endian===f.LITTLE_ENDIAN);this.position+=d.SIZE_OF_UINT16;this._writeUint8Array(b,!1)};a.writeUTFBytes=function(b){this._writeUint8Array(this.encodeUTF8(b))};a.toString=function(){return"[ByteArray] length:"+
this.length+", bytesAvailable:"+this.bytesAvailable};a._writeUint8Array=function(b,a){void 0===a&&(a=!0);a&&this.validateBuffer(this.position+b.length);for(var c=0;c<b.length;c++)this.data.setUint8(this.position++,b[c])};a.validate=function(b){if(0<this.data.byteLength&&this._position+b<=this.data.byteLength)return!0;c.$error(1025)};a.validateBuffer=function(b,a){void 0===a&&(a=!1);this.write_position=b>this.write_position?b:this.write_position;b+=this._position;if(this.data.byteLength<b||a){var c=
new Uint8Array(new ArrayBuffer(b+this.BUFFER_EXT_SIZE)),d=Math.min(this.data.buffer.byteLength,b+this.BUFFER_EXT_SIZE);c.set(new Uint8Array(this.data.buffer,0,d));this.buffer=c.buffer}};a.encodeUTF8=function(b){var a=0;b=this.stringToCodePoints(b);for(var c=[];b.length>a;){var d=b[a++];if(this.inRange(d,55296,57343))this.encoderError(d);else if(this.inRange(d,0,127))c.push(d);else{var e,f;this.inRange(d,128,2047)?(e=1,f=192):this.inRange(d,2048,65535)?(e=2,f=224):this.inRange(d,65536,1114111)&&(e=
3,f=240);for(c.push(this.div(d,Math.pow(64,e))+f);0<e;){var k=this.div(d,Math.pow(64,e-1));c.push(128+k%64);e-=1}}}return new Uint8Array(c)};a.decodeUTF8=function(b){for(var a=0,c="",d,e=0,f=0,k=0,m=0;b.length>a;){d=b[a++];if(d===this.EOF_byte)d=0!==f?this.decoderError(!1):this.EOF_code_point;else if(0===f)this.inRange(d,0,127)||(this.inRange(d,194,223)?(f=1,m=128,e=d-192):this.inRange(d,224,239)?(f=2,m=2048,e=d-224):this.inRange(d,240,244)?(f=3,m=65536,e=d-240):this.decoderError(!1),e*=Math.pow(64,
f),d=null);else if(this.inRange(d,128,191))if(k+=1,e+=(d-128)*Math.pow(64,f-k),k!==f)d=null;else{var n=e,q=m,m=k=f=e=0;d=this.inRange(n,q,1114111)&&!this.inRange(n,55296,57343)?n:this.decoderError(!1,d)}else m=k=f=e=0,a--,d=this.decoderError(!1,d);null!==d&&d!==this.EOF_code_point&&(65535>=d?0<d&&(c+=String.fromCharCode(d)):(d-=65536,c+=String.fromCharCode(55296+(d>>10&1023)),c+=String.fromCharCode(56320+(d&1023))))}return c};a.encoderError=function(b){c.$error(1026,b)};a.decoderError=function(b,
a){b&&c.$error(1027);return a||65533};a.inRange=function(b,a,c){return a<=b&&b<=c};a.div=function(b,a){return Math.floor(b/a)};a.stringToCodePoints=function(b){for(var a=[],c=0,d=b.length;c<b.length;){var e=b.charCodeAt(c);if(this.inRange(e,55296,57343))if(this.inRange(e,56320,57343))a.push(65533);else if(c===d-1)a.push(65533);else{var f=b.charCodeAt(c+1);this.inRange(f,56320,57343)?(e&=1023,f&=1023,c+=1,a.push(65536+(e<<10)+f)):a.push(65533)}else a.push(e);c+=1}return a};d.SIZE_OF_BOOLEAN=1;d.SIZE_OF_INT8=
1;d.SIZE_OF_INT16=2;d.SIZE_OF_INT32=4;d.SIZE_OF_UINT8=1;d.SIZE_OF_UINT16=2;d.SIZE_OF_UINT32=4;d.SIZE_OF_FLOAT32=4;d.SIZE_OF_FLOAT64=8;return d}();c.ByteArray=e;e.prototype.__class__="egret.ByteArray"})(egret||(egret={}));(function(c){c.getOption=function(c){if(window.hasOwnProperty("location")){var e=location.search;if(""==e)return"";for(var e=e.slice(1),e=e.split("&"),d=e.length,a=0;a<d;a++){var b=e[a].split("=");if(b[0]==c)return b[1]}}return""}})(egret||(egret={}));
(function(c){var f=function(e){function d(b,a,c){e.call(this);this._target=null;this.loop=this.ignoreGlobalPause=this._useTicks=!1;this._actions=this._steps=this.pluginData=null;this.paused=!1;this.duration=0;this._prevPos=-1;this.position=null;this._stepPosition=this._prevPosition=0;this.passive=!1;this.initialize(b,a,c)}__extends(d,e);var a=d.prototype;d.get=function(b,a,c,e){void 0===a&&(a=null);void 0===c&&(c=null);void 0===e&&(e=!1);e&&d.removeTweens(b);return new d(b,a,c)};d.removeTweens=function(b){if(b.tween_count){for(var a=
d._tweens,c=a.length-1;0<=c;c--)a[c]._target==b&&(a[c].paused=!0,a.splice(c,1));b.tween_count=0}};d.pauseTweens=function(b){if(b.tween_count)for(var a=c.Tween._tweens,d=a.length-1;0<=d;d--)a[d]._target==b&&(a[d].paused=!0)};d.resumeTweens=function(b){if(b.tween_count)for(var a=c.Tween._tweens,d=a.length-1;0<=d;d--)a[d]._target==b&&(a[d].paused=!1)};d.tick=function(b,a){void 0===a&&(a=!1);for(var c=d._tweens.concat(),e=c.length-1;0<=e;e--){var f=c[e];a&&!f.ignoreGlobalPause||f.paused||f.tick(f._useTicks?
1:b)}};d._register=function(b,a){var e=b._target,p=d._tweens;if(a)e&&(e.tween_count=0<e.tween_count?e.tween_count+1:1),p.push(b),d._inited||(c.Ticker.getInstance().register(d.tick,null),d._inited=!0);else for(e&&e.tween_count--,e=p.length;e--;)if(p[e]==b){p.splice(e,1);break}};d.removeAllTweens=function(){for(var b=d._tweens,a=0,c=b.length;a<c;a++){var e=b[a];e.paused=!0;e._target.tweenjs_count=0}b.length=0};a.initialize=function(b,a,c){this._target=b;a&&(this._useTicks=a.useTicks,this.ignoreGlobalPause=
a.ignoreGlobalPause,this.loop=a.loop,a.onChange&&this.addEventListener("change",a.onChange,a.onChangeObj),a.override&&d.removeTweens(b));this.pluginData=c||{};this._curQueueProps={};this._initQueueProps={};this._steps=[];this._actions=[];a&&a.paused?this.paused=!0:d._register(this,!0);a&&null!=a.position&&this.setPosition(a.position,d.NONE)};a.setPosition=function(b,a){void 0===a&&(a=1);0>b&&(b=0);var c=b,d=!1;c>=this.duration&&(this.loop?c%=this.duration:(c=this.duration,d=!0));if(c==this._prevPos)return d;
var e=this._prevPos;this.position=this._prevPos=c;this._prevPosition=b;if(this._target)if(d)this._updateTargetProps(null,1);else if(0<this._steps.length){for(var f=0,k=this._steps.length;f<k&&!(this._steps[f].t>c);f++);f=this._steps[f-1];this._updateTargetProps(f,(this._stepPosition=c-f.t)/f.d)}0!=a&&0<this._actions.length&&(this._useTicks?this._runActions(c,c):1==a&&c<e?(e!=this.duration&&this._runActions(e,this.duration),this._runActions(0,c,!0)):this._runActions(e,c));d&&this.setPaused(!0);this.dispatchEventWith("change");
return d};a._runActions=function(b,a,c){void 0===c&&(c=!1);var d=b,e=a,f=-1,k=this._actions.length,m=1;b>a&&(d=a,e=b,f=k,k=m=-1);for(;(f+=m)!=k;){a=this._actions[f];var n=a.t;(n==e||n>d&&n<e||c&&n==b)&&a.f.apply(a.o,a.p)}};a._updateTargetProps=function(b,a){var c,e,f,h;if(b||1!=a){if(this.passive=!!b.v)return;b.e&&(a=b.e(a,0,1,1));c=b.p0;e=b.p1}else this.passive=!1,c=e=this._curQueueProps;for(var k in this._initQueueProps){null==(f=c[k])&&(c[k]=f=this._initQueueProps[k]);null==(h=e[k])&&(e[k]=h=f);
f=f==h||0==a||1==a||"number"!=typeof f?1==a?h:f:f+(h-f)*a;var m=!1;if(h=d._plugins[k])for(var n=0,q=h.length;n<q;n++){var r=h[n].tween(this,k,f,c,e,a,!!b&&c==e,!b);r==d.IGNORE?m=!0:f=r}m||(this._target[k]=f)}};a.setPaused=function(b){this.paused=b;d._register(this,!b);return this};a._cloneProps=function(b){var a={},c;for(c in b)a[c]=b[c];return a};a._addStep=function(b){0<b.d&&(this._steps.push(b),b.t=this.duration,this.duration+=b.d);return this};a._appendQueueProps=function(b){var a,c,e,f,h,k;for(k in b)if(void 0===
this._initQueueProps[k]){c=this._target[k];if(a=d._plugins[k])for(e=0,f=a.length;e<f;e++)c=a[e].init(this,k,c);this._initQueueProps[k]=this._curQueueProps[k]=void 0===c?null:c}for(k in b){c=this._curQueueProps[k];if(a=d._plugins[k])for(h=h||{},e=0,f=a.length;e<f;e++)a[e].step&&a[e].step(this,k,c,b[k],h);this._curQueueProps[k]=b[k]}h&&this._appendQueueProps(h);return this._curQueueProps};a._addAction=function(b){b.t=this.duration;this._actions.push(b);return this};a._set=function(b,a){for(var c in b)a[c]=
b[c]};a.wait=function(b,a){if(null==b||0>=b)return this;var c=this._cloneProps(this._curQueueProps);return this._addStep({d:b,p0:c,p1:c,v:a})};a.to=function(b,a,c){void 0===c&&(c=void 0);if(isNaN(a)||0>a)a=0;return this._addStep({d:a||0,p0:this._cloneProps(this._curQueueProps),e:c,p1:this._cloneProps(this._appendQueueProps(b))})};a.call=function(b,a,c){void 0===a&&(a=void 0);void 0===c&&(c=void 0);return this._addAction({f:b,p:c?c:[],o:a?a:this._target})};a.set=function(b,a){void 0===a&&(a=null);
return this._addAction({f:this._set,o:this,p:[b,a?a:this._target]})};a.play=function(b){b||(b=this);return this.call(b.setPaused,b,[!1])};a.pause=function(b){b||(b=this);return this.call(b.setPaused,b,[!0])};a.tick=function(b){this.paused||this.setPosition(this._prevPosition+b)};d.NONE=0;d.LOOP=1;d.REVERSE=2;d._tweens=[];d.IGNORE={};d._plugins={};d._inited=!1;return d}(c.EventDispatcher);c.Tween=f;f.prototype.__class__="egret.Tween"})(egret||(egret={}));
(function(c){var f=function(){function e(){c.$error(1014)}e.get=function(c){-1>c&&(c=-1);1<c&&(c=1);return function(a){return 0==c?a:0>c?a*(a*-c+1+c):a*((2-a)*c+(1-c))}};e.getPowIn=function(c){return function(a){return Math.pow(a,c)}};e.getPowOut=function(c){return function(a){return 1-Math.pow(1-a,c)}};e.getPowInOut=function(c){return function(a){return 1>(a*=2)?0.5*Math.pow(a,c):1-0.5*Math.abs(Math.pow(2-a,c))}};e.sineIn=function(c){return 1-Math.cos(c*Math.PI/2)};e.sineOut=function(c){return Math.sin(c*
Math.PI/2)};e.sineInOut=function(c){return-0.5*(Math.cos(Math.PI*c)-1)};e.getBackIn=function(c){return function(a){return a*a*((c+1)*a-c)}};e.getBackOut=function(c){return function(a){return--a*a*((c+1)*a+c)+1}};e.getBackInOut=function(c){c*=1.525;return function(a){return 1>(a*=2)?0.5*a*a*((c+1)*a-c):0.5*((a-=2)*a*((c+1)*a+c)+2)}};e.circIn=function(c){return-(Math.sqrt(1-c*c)-1)};e.circOut=function(c){return Math.sqrt(1- --c*c)};e.circInOut=function(c){return 1>(c*=2)?-0.5*(Math.sqrt(1-c*c)-1):0.5*
(Math.sqrt(1-(c-=2)*c)+1)};e.bounceIn=function(c){return 1-e.bounceOut(1-c)};e.bounceOut=function(c){return c<1/2.75?7.5625*c*c:c<2/2.75?7.5625*(c-=1.5/2.75)*c+0.75:c<2.5/2.75?7.5625*(c-=2.25/2.75)*c+0.9375:7.5625*(c-=2.625/2.75)*c+0.984375};e.bounceInOut=function(c){return 0.5>c?0.5*e.bounceIn(2*c):0.5*e.bounceOut(2*c-1)+0.5};e.getElasticIn=function(c,a){var b=2*Math.PI;return function(g){if(0==g||1==g)return g;var e=a/b*Math.asin(1/c);return-(c*Math.pow(2,10*(g-=1))*Math.sin((g-e)*b/a))}};e.getElasticOut=
function(c,a){var b=2*Math.PI;return function(g){if(0==g||1==g)return g;var e=a/b*Math.asin(1/c);return c*Math.pow(2,-10*g)*Math.sin((g-e)*b/a)+1}};e.getElasticInOut=function(c,a){var b=2*Math.PI;return function(g){var e=a/b*Math.asin(1/c);return 1>(g*=2)?-0.5*c*Math.pow(2,10*(g-=1))*Math.sin((g-e)*b/a):c*Math.pow(2,-10*(g-=1))*Math.sin((g-e)*b/a)*0.5+1}};e.quadIn=e.getPowIn(2);e.quadOut=e.getPowOut(2);e.quadInOut=e.getPowInOut(2);e.cubicIn=e.getPowIn(3);e.cubicOut=e.getPowOut(3);e.cubicInOut=e.getPowInOut(3);
e.quartIn=e.getPowIn(4);e.quartOut=e.getPowOut(4);e.quartInOut=e.getPowInOut(4);e.quintIn=e.getPowIn(5);e.quintOut=e.getPowOut(5);e.quintInOut=e.getPowInOut(5);e.backIn=e.getBackIn(1.7);e.backOut=e.getBackOut(1.7);e.backInOut=e.getBackInOut(1.7);e.elasticIn=e.getElasticIn(1,0.3);e.elasticOut=e.getElasticOut(1,0.3);e.elasticInOut=e.getElasticInOut(1,0.3*1.5);return e}();c.Ease=f;f.prototype.__class__="egret.Ease"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.path="";this.audio=null;this.type=d.EFFECT;this._pauseTime=0;this._listeners=[]}__extends(d,e);var a=d.prototype;Object.defineProperty(a,"position",{get:function(){return this.audio?Math.floor(1E3*this.audio._getCurrentTime()):0},enumerable:!0,configurable:!0});a.play=function(b,a){void 0===b&&(b=!1);void 0===a&&(a=0);var c=this.audio;c&&(c._setCurrentTime(a/1E3),c._setLoop(b),c._play(this.type))};a.stop=function(){var b=this.audio;b&&
(this._pauseTime=0,b._setCurrentTime(0),b._pause())};a.pause=function(){var b=this.audio;b&&(this._pauseTime=b._getCurrentTime(),b._pause())};a.resume=function(){var b=this.audio;b&&(b._setCurrentTime(this._pauseTime),this._pauseTime=0,b._play(this.type))};a.load=function(){var b=this.audio;b&&b._load()};a.addEventListener=function(b,a,d){e.prototype.addEventListener.call(this,b,a,d);var p=this;this.audio&&1==this._eventsMap[b].length&&(a=b==c.SoundEvent.SOUND_COMPLETE?function(b){c.Event._dispatchByTarget(c.SoundEvent,
p,c.SoundEvent.SOUND_COMPLETE)}:function(b){c.Event._dispatchByTarget(c.Event,p,b.type)},this._listeners.push({type:b,func:a}),b=p.getVirtualType(b),this.audio._addEventListener(b,a,!1))};a.removeEventListener=function(b,a,c){e.prototype.removeEventListener.call(this,b,a,c);if(this.audio&&(!this._eventsMap||!this._eventsMap[b]||0==this._eventsMap[b].length))for(c=0;c<this._listeners.length;c++)if(a=this._listeners[c],a.type==b){this._listeners.splice(c,1);b=this.getVirtualType(b);this.audio._removeEventListener(b,
a.func,!1);break}};a.getVirtualType=function(b){switch(b){case c.SoundEvent.SOUND_COMPLETE:return"ended";default:return b}};Object.defineProperty(a,"volume",{get:function(){return this.audio?this.audio._getVolume():0},set:function(b){var a=this.audio;a&&a._setVolume(Math.max(0,Math.min(b,1)))},enumerable:!0,configurable:!0});a.setVolume=function(b){c.$warn(1031);this.volume=b};a.getVolume=function(){c.$warn(1032);return this.volume};a.preload=function(b,a,c){void 0===a&&(a=null);void 0===c&&(c=null);
this.type=b;this.audio._preload(b,a,c)};a._setAudio=function(b){this.audio=b};a.destroy=function(){this.audio._destroy()};d.MUSIC="music";d.EFFECT="effect";return d}(c.EventDispatcher);c.Sound=f;f.prototype.__class__="egret.Sound"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.isNumber=function(c){return"number"===typeof c&&!isNaN(c)};c.sin=function(d){var a=Math.floor(d),b=a+1,g=c.sinInt(a),s=c.sinInt(b);return(d-a)*s+(b-d)*g};c.sinInt=function(c){c%=360;0>c&&(c+=360);return 90>c?egret_sin_map[c]:180>c?egret_cos_map[c-90]:270>c?-egret_sin_map[c-180]:-egret_cos_map[c-270]};c.cos=function(d){var a=Math.floor(d),b=a+1,g=c.cosInt(a),s=c.cosInt(b);return(d-a)*s+(b-d)*g};c.cosInt=function(c){c%=360;0>c&&(c+=360);return 90>c?egret_cos_map[c]:
180>c?-egret_sin_map[c-90]:270>c?-egret_cos_map[c-180]:egret_sin_map[c-270]};return c}();c.NumberUtils=f;f.prototype.__class__="egret.NumberUtils"})(egret||(egret={}));for(var egret_sin_map={},egret_cos_map={},NumberUtils_i=0;90>=NumberUtils_i;NumberUtils_i++)egret_sin_map[NumberUtils_i]=Math.sin(NumberUtils_i*egret.Matrix.DEG_TO_RAD),egret_cos_map[NumberUtils_i]=Math.cos(NumberUtils_i*egret.Matrix.DEG_TO_RAD);
Function.prototype.bind||(Function.prototype.bind=function(c){"function"!==typeof this&&egret.$error(1029);var f=Array.prototype.slice.call(arguments,1),e=this,d=function(){},a=function(){return e.apply(this instanceof d&&c?this:c,f.concat(Array.prototype.slice.call(arguments)))};d.prototype=this.prototype;a.prototype=new d;return a});
(function(c){var f=function(){function e(){this.downloadingSizeThisObject=this.downloadingSizeFunc=this.onErrorThisObject=this.onErrorFunc=this.onSuccessThisObject=this.onSuccessFunc=null}var d=e.prototype;e.create=function(){return e.promiseObjectList.length?e.promiseObjectList.pop():new c.PromiseObject};d.onSuccess=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];this.onSuccessFunc&&this.onSuccessFunc.apply(this.onSuccessThisObject,a);this.destroy()};d.onError=function(){for(var a=
[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];this.onErrorFunc&&this.onErrorFunc.apply(this.onErrorThisObject,a);this.destroy()};d.downloadingSize=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];this.downloadingSizeFunc&&this.downloadingSizeFunc.apply(this.downloadingSizeThisObject,a)};d.destroy=function(){this.downloadingSizeThisObject=this.downloadingSizeFunc=this.onErrorThisObject=this.onErrorFunc=this.onSuccessThisObject=this.onSuccessFunc=void 0;e.promiseObjectList.push(this)};
e.promiseObjectList=[];return e}();c.PromiseObject=f;f.prototype.__class__="egret.PromiseObject"})(egret||(egret={}));
(function(c){var f=function(e){function d(b){void 0===b&&(b=60);e.call(this);this.frameRate=b;this._time=0;this._requestAnimationId=NaN;this._isActivate=!0;d.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;d.cancelAnimationFrame=window.cancelAnimationFrame||window.msCancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.oCancelAnimationFrame||
window.cancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame;d.requestAnimationFrame||(d.requestAnimationFrame=function(a){return window.setTimeout(a,1E3/b)});d.cancelAnimationFrame||(d.cancelAnimationFrame=function(b){return window.clearTimeout(b)});d.instance=this;this.registerListener()}__extends(d,e);var a=d.prototype;a.setFrameRate=function(b){0==60%b&&(d.countTime=
60/b-1)};a.enterFrame=function(){var b=d.instance,a=d._thisObject,e=d._callback,p=c.getTimer(),f=p-b._time;b._requestAnimationId=d.requestAnimationFrame.call(window,d.prototype.enterFrame);d.count<d.countTime?d.count++:(d.count=0,e.call(a,f),b._time=p)};a.executeMainLoop=function(b,a){d._callback=b;d._thisObject=a;this.enterFrame()};a.reset=function(){var b=d.instance;b._requestAnimationId&&(b._time=c.getTimer(),d.cancelAnimationFrame.call(window,b._requestAnimationId),b.enterFrame())};a.registerListener=
function(){var b=this,a=function(){b._isActivate&&(b._isActivate=!1,c.MainContext.instance.stage.dispatchEvent(new c.Event(c.Event.DEACTIVATE)))},e=function(){b._isActivate||(b._isActivate=!0,d.instance.reset(),c.MainContext.instance.stage.dispatchEvent(new c.Event(c.Event.ACTIVATE)))},p=function(){document[f]?a():e()};window.addEventListener("focus",e,!1);window.addEventListener("blur",a,!1);var f,h;"undefined"!==typeof document.hidden?(f="hidden",h="visibilitychange"):"undefined"!==typeof document.mozHidden?
(f="mozHidden",h="mozvisibilitychange"):"undefined"!==typeof document.msHidden?(f="msHidden",h="msvisibilitychange"):"undefined"!==typeof document.webkitHidden?(f="webkitHidden",h="webkitvisibilitychange"):"undefined"!==typeof document.oHidden&&(f="oHidden",h="ovisibilitychange");"onpageshow"in window&&"onpagehide"in window&&(window.addEventListener("pageshow",e,!1),window.addEventListener("pagehide",a,!1));f&&h&&document.addEventListener(h,p,!1);p=navigator.userAgent;h=/micromessenger/gi.test(p);
var k=/mqq/ig.test(p);if(/mobile.*qq/gi.test(p)||h)k=!1;k&&(p=window.browser||{},p.execWebFn=p.execWebFn||{},p.execWebFn.postX5GamePlayerMessage=function(b){b=b.type;"app_enter_background"==b?a():"app_enter_foreground"==b&&e()},window.browser=p)};d.instance=null;d.countTime=0;d.requestAnimationFrame=null;d.cancelAnimationFrame=null;d._thisObject=null;d._callback=null;d.count=0;return d}(c.DeviceContext);c.HTML5DeviceContext=f;f.prototype.__class__="egret.HTML5DeviceContext"})(egret||(egret={}));var egret_html5_localStorage;
(function(c){c.getItem=function(c){return window.localStorage.getItem(c)};c.setItem=function(c,e){try{return window.localStorage.setItem(c,e),!0}catch(d){return egret.$warn(1018,c,e),!1}};c.removeItem=function(c){window.localStorage.removeItem(c)};c.clear=function(){window.localStorage.clear()};c.init=function(){for(var f in c)egret.localStorage[f]=c[f]}})(egret_html5_localStorage||(egret_html5_localStorage={}));egret_html5_localStorage.init();
(function(c){var f=function(e){function d(b,a){void 0===a&&(a=!0);e.call(this);this.useCacheCanvas=a;c.Texture.prototype.draw=c.Texture.prototype._drawForCanvas;c.Texture.prototype.dispose=c.Texture.prototype._disposeForCanvas;this.canvas=b||this.createCanvas();this.canvasContext=this.canvas.getContext("2d");a?(this._cacheCanvas=document.createElement("canvas"),this._cacheCanvas.width=this.canvas.width,this._cacheCanvas.height=this.canvas.height,this.drawCanvasContext=this._cacheCanvasContext=this._cacheCanvas.getContext("2d")):
this.drawCanvasContext=this.canvasContext;var d=this.drawCanvasContext;if(void 0==d.imageSmoothingEnabled){for(var p=["webkitImageSmoothingEnabled","mozImageSmoothingEnabled","msImageSmoothingEnabled"],f=0;f<p.length;f++){var h=p[f];if(void 0!=d[h])break}Object.defineProperty(d,"imageSmoothingEnabled",{get:function(){return this[h]},set:function(b){this[h]=b},enumerable:!0,configurable:!0})}this.onResize();var k=this.drawCanvasContext.setTransform,m=this;this.drawCanvasContext.setTransform=function(b,
a,c,g,d,e){m._matrixA=b;m._matrixB=a;m._matrixC=c;m._matrixD=g;m._matrixTx=d;m._matrixTy=e;k.call(m.drawCanvasContext,b,a,c,g,d,e)};this._matrixA=1;this._matrixC=this._matrixB=0;this._matrixD=1;this._transformTy=this._transformTx=this._matrixTy=this._matrixTx=0;this.initBlendMode()}__extends(d,e);var a=d.prototype;a.createCanvas=function(){var b=c.Browser.getInstance().$("#egretCanvas");if(!b){var a=document.getElementById(c.StageDelegate.canvas_div_name),b=c.Browser.getInstance().$new("canvas");
b.id="egretCanvas";a.appendChild(b)}c.MainContext.instance.stage.addEventListener(c.Event.RESIZE,this.onResize,this);return b};a.onResize=function(){if(this.canvas){var b=document.getElementById(c.StageDelegate.canvas_div_name);this.canvas.width=c.MainContext.instance.stage.stageWidth;this.canvas.height=c.MainContext.instance.stage.stageHeight;this.canvas.style.width=b.style.width;this.canvas.style.height=b.style.height;this.useCacheCanvas&&(this._cacheCanvas.width=this.canvas.width,this._cacheCanvas.height=
this.canvas.height);this.drawCanvasContext.imageSmoothingEnabled=c.RendererContext.imageSmoothingEnabled}};a.clearScreen=function(){for(var b=c.RenderFilter.getInstance().getDrawAreaList(),a=0,d=b.length;a<d;a++){var e=b[a];this.clearRect(e.x,e.y,e.width,e.height)}b=c.MainContext.instance.stage;this.useCacheCanvas&&this._cacheCanvasContext.clearRect(0,0,b.stageWidth,b.stageHeight);this.renderCost=0};a.clearRect=function(b,a,c,d){this.canvasContext.clearRect(b,a,c,d)};a.drawImage=function(b,a,d,p,
f,h,k,m,n,q){void 0===q&&(q=void 0);h+=this._transformTx;k+=this._transformTy;var r=c.getTimer();b.draw(this.drawCanvasContext,a,d,p,f,h,k,m,n,q);e.prototype.drawImage.call(this,b,a,d,p,f,h,k,m,n,q);this.renderCost+=c.getTimer()-r};a.setTransform=function(b){1==b.a&&0==b.b&&0==b.c&&1==b.d&&1==this._matrixA&&0==this._matrixB&&0==this._matrixC&&1==this._matrixD?(this._transformTx=b.tx-this._matrixTx,this._transformTy=b.ty-this._matrixTy):(this._transformTx=this._transformTy=0,this._matrixA==b.a&&this._matrixB==
b.b&&this._matrixC==b.c&&this._matrixD==b.d&&this._matrixTx==b.tx&&this._matrixTy==b.ty||this.drawCanvasContext.setTransform(b.a,b.b,b.c,b.d,b.tx,b.ty))};a.setAlpha=function(b,a){this.drawCanvasContext.globalAlpha=b;a?(this.blendValue=this.blendModes[a],this.drawCanvasContext.globalCompositeOperation=this.blendValue):this.blendValue!=c.BlendMode.NORMAL&&(this.blendValue=this.blendModes[c.BlendMode.NORMAL],this.drawCanvasContext.globalCompositeOperation=this.blendValue)};a.initBlendMode=function(){this.blendModes=
{};this.blendModes[c.BlendMode.NORMAL]="source-over";this.blendModes[c.BlendMode.ADD]="lighter";this.blendModes[c.BlendMode.ERASE]="destination-out";this.blendModes[c.BlendMode.ERASE_REVERSE]="destination-in"};a.setupFont=function(b,a){void 0===a&&(a=null);a=a||{};var c=b._TF_Props_,d=null==a.size?c._size:a.size,e=null==a.fontFamily?c._fontFamily:a.fontFamily,f=this.drawCanvasContext,k=(null==a.italic?c._italic:a.italic)?"italic ":"normal ",k=k+((null==a.bold?c._bold:a.bold)?"bold ":"normal ");f.font=
k+(d+"px "+e);f.textAlign="left";f.textBaseline="middle"};a.measureText=function(b){return this.drawCanvasContext.measureText(b).width};a.drawText=function(b,a,d,p,f,h){void 0===h&&(h=null);this.setupFont(b,h);h=h||{};var k=b._TF_Props_,m;m=null!=h.textColor?c.toColorString(h.textColor):k._textColorString;var n;n=null!=h.strokeColor?c.toColorString(h.strokeColor):k._strokeColorString;var k=null!=h.stroke?h.stroke:k._stroke,q=this.drawCanvasContext;q.fillStyle=m;q.strokeStyle=n;k&&(q.lineWidth=2*k,
q.strokeText(a,d+this._transformTx,p+this._transformTy,f||65535));q.fillText(a,d+this._transformTx,p+this._transformTy,f||65535);e.prototype.drawText.call(this,b,a,d,p,f,h)};a.strokeRect=function(b,a,c,d,e){this.drawCanvasContext.strokeStyle=e;this.drawCanvasContext.strokeRect(b,a,c,d)};a.pushMask=function(b){this.drawCanvasContext.save();this.drawCanvasContext.beginPath();this.drawCanvasContext.rect(b.x+this._transformTx,b.y+this._transformTy,b.width,b.height);this.drawCanvasContext.clip();this.drawCanvasContext.closePath()};
a.popMask=function(){this.drawCanvasContext.restore();this.drawCanvasContext.setTransform(1,0,0,1,0,0)};a.onRenderStart=function(){this.drawCanvasContext.save()};a.onRenderFinish=function(){this.drawCanvasContext.restore();this.drawCanvasContext.setTransform(1,0,0,1,0,0);if(this.useCacheCanvas)for(var b=this._cacheCanvas.width,a=this._cacheCanvas.height,d=c.RenderFilter.getInstance().getDrawAreaList(),e=0,f=d.length;e<f;e++){var h=d[e],k=h.x,m=h.y,n=h.width,h=h.height;k+n>b&&(n=b-k);m+h>a&&(h=a-m);
0<n&&0<h&&this.canvasContext.drawImage(this._cacheCanvas,k,m,n,h,k,m,n,h)}};a.drawCursor=function(b,a,c,d){this.drawCanvasContext.strokeStyle="#40a5ff";this.drawCanvasContext.lineWidth=2;this.drawCanvasContext.beginPath();this.drawCanvasContext.moveTo(Math.round(b+this._transformTx),Math.round(a+this._transformTy));this.drawCanvasContext.lineTo(Math.round(c+this._transformTx),Math.round(d+this._transformTy));this.drawCanvasContext.closePath();this.drawCanvasContext.stroke()};a.createLinearGradient=
function(b,a,c,d){return this.drawCanvasContext.createLinearGradient(b,a,c,d)};a.createRadialGradient=function(b,a,c,d,e,f){return this.drawCanvasContext.createRadialGradient(b,a,c,d,e,f)};return d}(c.RendererContext);c.HTML5CanvasRenderer=f;f.prototype.__class__="egret.HTML5CanvasRenderer"})(egret||(egret={}));egret.RendererContext.createRendererContext=function(c){return new egret.HTML5CanvasRenderer(c,!1)};
egret.Graphics.prototype._beginDraw=function(c){this._renderContext=c.drawCanvasContext;var f=c._transformTx;c=c._transformTy;0==f&&0==c||this._renderContext.translate(f,c)};egret.Graphics.prototype._endDraw=function(c){this._renderContext=c.drawCanvasContext;var f=c._transformTx;c=c._transformTy;0==f&&0==c||this._renderContext.translate(-f,-c)};var originCanvas2DFill=CanvasRenderingContext2D.prototype.fill;
CanvasRenderingContext2D.prototype.fill=function(){var c=this.fillStyle;"string"!=typeof c?(c=c.matrix)?(this.transform(c.a,c.b,c.c,c.d,c.tx,c.ty),originCanvas2DFill.call(this),c=egret.MainContext.instance.rendererContext,c._transformTx=c._transformTy=0,this.setTransform(c._matrixA,c._matrixB,c._matrixC,c._matrixD,c._matrixTx,c._matrixTy)):originCanvas2DFill.call(this):originCanvas2DFill.call(this)};
(function(c){var f=function(e){function d(b){e.call(this);this.glID=this.gl=this.canvas=null;this.size=2E3;this.vertices=null;this.vertSize=5;this.indices=null;this.projectionY=this.projectionX=NaN;this.shaderManager=null;this.contextLost=!1;this.glContextId=0;this.currentBlendMode="";this.currentBaseTexture=null;this.currentBatchSize=0;this.worldTransform=null;this.worldAlpha=1;this.maskList=[];this.maskDataFreeList=[];this.graphicsIndexBuffer=this.graphicsBuffer=this.graphicsIndices=this.graphicsPoints=
this.filterType=this.colorTransformMatrix=null;this.graphicsStyle={};c.Texture.prototype.dispose=c.Texture.prototype._disposeForCanvas;this.canvas=b||this.createCanvas();this.canvas.addEventListener("webglcontextlost",this.handleContextLost.bind(this),!1);this.canvas.addEventListener("webglcontextrestored",this.handleContextRestored.bind(this),!1);this.html5Canvas=document.createElement("canvas");this.canvasContext=new c.HTML5CanvasRenderer(this.html5Canvas);this.onResize();this.projectionX=this.canvas.width/
2;this.projectionY=-this.canvas.height/2;b=6*this.size;this.vertices=new Float32Array(4*this.size*this.vertSize);this.indices=new Uint16Array(b);for(var a=0,d=0;a<b;a+=6,d+=4)this.indices[a+0]=d+0,this.indices[a+1]=d+1,this.indices[a+2]=d+2,this.indices[a+3]=d+0,this.indices[a+4]=d+2,this.indices[a+5]=d+3;this.initWebGL();this.shaderManager=new c.WebGLShaderManager(this.gl);this.worldTransform=new c.Matrix;this.initAll()}__extends(d,e);var a=d.prototype;a.onRenderFinish=function(){this._drawWebGL()};
d.initWebGLCanvas=function(){c.RenderTexture.WebGLCanvas||(c.RenderTexture.WebGLCanvas=document.createElement("canvas"),c.RenderTexture.WebGLCanvas.avaliable=!0,c.RenderTexture.WebGLRenderer=new c.WebGLRenderer(c.RenderTexture.WebGLCanvas),c.RenderTexture.WebGLRenderer.setAlpha(1))};a.initAll=function(){d.isInit||(d.isInit=!0,egret_webgl_graphics.init(),c.TextField.prototype._makeBitmapCache=function(){this.renderTexture||(this.renderTexture=new c.RenderTexture);var b=this.getBounds(c.Rectangle.identity);
if(0==b.width||0==b.height)return this._texture_to_render=null,!1;this._bitmapData||(this._bitmapData=document.createElement("canvas"),this._bitmapData.avaliable=!0,this.renderContext=c.RendererContext.createRendererContext(this._bitmapData));var a=this._bitmapData,d=b.width,b=b.height,e,f,h=c.MainContext.instance.rendererContext._texture_scale_factor;e=d/h;f=b/h;e=Math.round(e);f=Math.round(f);a.width=e;a.height=f;a.style.width=e+"px";a.style.height=f+"px";this.renderContext._cacheCanvas&&(this.renderContext._cacheCanvas.width=
e,this.renderContext._cacheCanvas.height=f);this._worldTransform.identity();this._worldTransform.a=1/h;this._worldTransform.d=1/h;this.renderContext.setTransform(this._worldTransform);this.worldAlpha=1;a=c.RenderFilter.getInstance();h=a._drawAreaList.concat();a._drawAreaList.length=0;this.renderContext.clearScreen();this.renderContext.onRenderStart();c.Texture.deleteWebGLTexture(this.renderTexture);this.renderTexture.dispose();this._hasFilters()&&this._setGlobalFilters(this.renderContext);var k=this.mask||
this._DO_Props_._scrollRect;k&&this.renderContext.pushMask(k);this._render(this.renderContext);k&&this.renderContext.popMask();this._hasFilters()&&this._removeGlobalFilters(this.renderContext);c.RenderTexture.identityRectangle.width=e;c.RenderTexture.identityRectangle.height=f;a.addDrawArea(c.RenderTexture.identityRectangle);this.renderContext.onRenderFinish();a._drawAreaList=h;this.renderTexture._bitmapData=this._bitmapData;this.renderTexture._sourceWidth=e;this.renderTexture._sourceHeight=f;this.renderTexture._textureWidth=
d;this.renderTexture._textureHeight=b;this._texture_to_render=this.renderTexture;return!0},c.TextField.prototype._draw=function(b){this._TF_Props_._type==c.TextFieldType.INPUT&&this._isTyping||(this.getDirty()&&(this._texture_to_render=this.renderTexture,this._DO_Props_._cacheAsBitmap=!0),c.DisplayObject.prototype._draw.call(this,b))},c.RenderTexture.prototype.init=function(){this._bitmapData=document.createElement("canvas");this._bitmapData.avaliable=!0;this.canvasContext=this._bitmapData.getContext("2d");
d.initWebGLCanvas();this._webglBitmapData=c.RenderTexture.WebGLCanvas;this.renderContext=c.RenderTexture.WebGLRenderer},c.RenderTexture.prototype.setSize=function(b,a){this._webglBitmapData&&this.renderContext.setSize(b,a);if(this._bitmapData){var c=this._bitmapData;c.width=b;c.height=a;c.style.width=b+"px";c.style.height=a+"px"}},c.RenderTexture.prototype.end=function(){},c.RenderTexture.prototype.drawToTexture=function(b,a,d){var e=a||b.getBounds(c.Rectangle.identity);if(0==e.width||0==e.height)return!1;
"undefined"==typeof d&&(d=1);this._bitmapData||this.init();var f=e.x,h=e.y,k=e.width,e=e.height,e=e/d,m=c.MainContext.instance.rendererContext._texture_scale_factor,k=Math.round(k/d),e=Math.round(e);this.setSize(k,e);var n=this._bitmapData,q=k/m*d,r=e/m*d;n.width=q;n.height=r;n.style.width=q+"px";n.style.height=r+"px";this.begin();b._worldTransform.identity();n=b._DO_Props_._anchorOffsetX;q=b._DO_Props_._anchorOffsetY;if(0!=b._DO_Props_._anchorX||0!=b._DO_Props_._anchorY)n=b._DO_Props_._anchorX*k,
q=b._DO_Props_._anchorY*e;this._offsetX=f+n;this._offsetY=h+q;b._worldTransform.append(1,0,0,1,-this._offsetX,-this._offsetY);a&&(this._offsetX-=f,this._offsetY-=h);b.worldAlpha=1;a=c.MainContext.__use_new_draw;c.MainContext.__use_new_draw=!1;if(b instanceof c.DisplayObjectContainer)for(f=b._children,h=0,n=f.length;h<n;h++)f[h]._updateTransform();this.renderContext.setTransform(b._worldTransform);f=c.RenderFilter.getInstance();h=f._drawAreaList.concat();f._drawAreaList.length=0;n=this.renderContext.gl;
n.viewport(0,0,k,e);n.bindFramebuffer(n.FRAMEBUFFER,null);n.clearColor(0,0,0,0);n.clear(n.COLOR_BUFFER_BIT);this.renderContext.onRenderStart();c.Texture.deleteWebGLTexture(this);b._hasFilters()&&b._setGlobalFilters(this.renderContext);(n=b.mask||b._DO_Props_._scrollRect)&&this.renderContext.pushMask(n);b._render(this.renderContext);this.renderContext._drawWebGL();c.MainContext.__use_new_draw=a;n&&this.renderContext.popMask();b._hasFilters()&&b._removeGlobalFilters(this.renderContext);c.RenderTexture.identityRectangle.width=
k;c.RenderTexture.identityRectangle.height=e;f.addDrawArea(c.RenderTexture.identityRectangle);this.renderContext.onRenderFinish();f._drawAreaList=h;this._sourceWidth=k/m*d;this._sourceHeight=e/m*d;this._textureWidth=k*d;this._textureHeight=e*d;this.canvasContext.drawImage(this._webglBitmapData,0,0,k,e,0,0,this._sourceWidth,this._sourceHeight);return!0})};a.createCanvas=function(){var b=c.Browser.getInstance().$("#egretCanvas");if(!b){var a=document.getElementById(c.StageDelegate.canvas_div_name),
b=c.Browser.getInstance().$new("canvas");b.id="egretCanvas";a.appendChild(b)}c.MainContext.instance.stage.addEventListener(c.Event.RESIZE,this.onResize,this);return b};a.onResize=function(){this.setSize(c.MainContext.instance.stage.stageWidth,c.MainContext.instance.stage.stageHeight)};a.setSize=function(b,a){var d=document.getElementById(c.StageDelegate.canvas_div_name);this.canvas&&(this.canvas.width=b,this.canvas.height=a,this.canvas.style.width=d.style.width,this.canvas.style.height=d.style.height,
this.projectionX=this.canvas.width/2,this.projectionY=-this.canvas.height/2);this.html5Canvas&&(this.html5Canvas.width=b,this.html5Canvas.height=a,this.html5Canvas.style.width=d.style.width,this.html5Canvas.style.height=d.style.height);this.width=b;this.height=a};a.handleContextLost=function(){this.contextLost=!0};a.handleContextRestored=function(){this.initWebGL();this.shaderManager.setContext(this.gl);this.contextLost=!1};a.initWebGL=function(){for(var b={},a,e=["experimental-webgl","webgl"],p=
0;p<e.length;p++){try{a=this.canvas.getContext(e[p],b)}catch(f){}if(a)break}a||c.$error(1021);d.glID++;this.glID=d.glID;this.setContext(a)};a.setContext=function(b){this.gl=b;b.id=this.glContextId++;this.vertexBuffer=b.createBuffer();this.indexBuffer=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.indexBuffer);b.bufferData(b.ELEMENT_ARRAY_BUFFER,this.indices,b.STATIC_DRAW);b.bindBuffer(b.ARRAY_BUFFER,this.vertexBuffer);b.bufferData(b.ARRAY_BUFFER,this.vertices,b.DYNAMIC_DRAW);b.disable(b.DEPTH_TEST);
b.disable(b.CULL_FACE);b.enable(b.BLEND);b.colorMask(!0,!0,!0,!0)};a.start=function(){if(!this.contextLost){var b=this.gl;b.activeTexture(b.TEXTURE0);b.bindBuffer(b.ARRAY_BUFFER,this.vertexBuffer);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var a;a="colorTransform"==this.filterType?this.shaderManager.colorTransformShader:"blur"==this.filterType?this.shaderManager.blurShader:this.shaderManager.defaultShader;this.shaderManager.activateShader(a);a.syncUniforms();b.uniform2f(a.projectionVector,
this.projectionX,this.projectionY);var c=4*this.vertSize;b.vertexAttribPointer(a.aVertexPosition,2,b.FLOAT,!1,c,0);b.vertexAttribPointer(a.aTextureCoord,2,b.FLOAT,!1,c,8);b.vertexAttribPointer(a.colorAttribute,2,b.FLOAT,!1,c,16)}};a.clearScreen=function(){var b=this.gl;b.colorMask(!0,!0,!0,!0);for(var a=c.RenderFilter.getInstance().getDrawAreaList(),d=0,e=a.length;d<e;d++){var f=a[d];b.viewport(f.x,f.y,f.width,f.height);b.bindFramebuffer(b.FRAMEBUFFER,null);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT)}b.viewport(0,
0,this.width,this.height);this.renderCost=0};a.setBlendMode=function(b){b||(b=c.BlendMode.NORMAL);if(this.currentBlendMode!=b){var a=c.RendererContext.blendModesForGL[b];a&&(this._drawWebGL(),this.gl.blendFunc(a[0],a[1]),this.currentBlendMode=b)}};a.drawRepeatImage=function(b,a,d,e,f,h,k,m,n,q){q=c.MainContext.instance.rendererContext._texture_scale_factor;e*=q;for(f*=q;h<m;h+=e)for(var r=k;r<n;r+=f){var t=Math.min(e,m-h),u=Math.min(f,n-r);this.drawImage(b,a,d,t/q,u/q,h,r,t,u)}};a.drawImage=function(b,
a,c,d,e,f,k,m,n,q){void 0===q&&(q=void 0);if(!this.contextLost){var r=b._bitmapData;if(r&&r.avaliable)if(void 0!==q)this.drawRepeatImage(b,a,c,d,e,f,k,m,n,q);else{if(this.filters)for(q=0;1>q;q++)if("glow"==this.filters[0].type){this.useGlow(b,a,c,d,e,f,k,m,n);return}this._drawImage(b,a,c,d,e,f,k,m,n)}}};a._drawImage=function(b,a,c,d,e,f,k,m,n){this.createWebGLTexture(b);var q=b._bitmapData.webGLTexture[this.glID];if(q!==this.currentBaseTexture||this.currentBatchSize>=this.size-1)this._drawWebGL(),
this.currentBaseTexture=q;var r=this.worldTransform,t=r.a,u=r.b,v=r.c,x=r.d,w=r.tx,z=r.ty;0==f&&0==k||r.append(1,0,0,1,f,k);1==d/m&&1==e/n||r.append(m/d,0,0,n/e,0,0);f=r.a;k=r.b;m=r.c;n=r.d;var q=r.tx,y=r.ty;r.a=t;r.b=u;r.c=v;r.d=x;r.tx=w;r.ty=z;t=b._sourceWidth;u=b._sourceHeight;b=d;r=e;a/=t;c/=u;d/=t;e/=u;t=this.vertices;u=4*this.currentBatchSize*this.vertSize;v=this.worldAlpha;t[u++]=q;t[u++]=y;t[u++]=a;t[u++]=c;t[u++]=v;t[u++]=f*b+q;t[u++]=k*b+y;t[u++]=d+a;t[u++]=c;t[u++]=v;t[u++]=f*b+m*r+q;t[u++]=
n*r+k*b+y;t[u++]=d+a;t[u++]=e+c;t[u++]=v;t[u++]=m*r+q;t[u++]=n*r+y;t[u++]=a;t[u++]=e+c;t[u++]=v;this.currentBatchSize++};a.useGlow=function(b,a,e,f,l,h,k,m,n){var q=this.filters[0],r=q.distance||0,t=q.angle||0,u=0,v=0;0!=r&&0!=t&&(u=Math.ceil(r*c.NumberUtils.cos(t)),v=Math.ceil(r*c.NumberUtils.sin(t)));var r=q.quality,t=q.blurX/10,x=q.blurY/10,w=m+2*t+20+Math.abs(u),z=n+2*x+20+Math.abs(v);d.initWebGLCanvas();var y=c.RenderTexture.WebGLRenderer,C=c.RenderTexture.WebGLCanvas,A=c.RenderTexture.create();
A._bitmapData||A.init();A.setSize(w,z);A._sourceWidth=w;A._sourceHeight=z;var B=c.RenderTexture.create();B._bitmapData||B.init();B.setSize(w,z);B._sourceWidth=w;B._sourceHeight=z;y.clearScreen();y.filterType="colorTransform";y.setGlobalColorTransform([0,0,0,0,q._red,0,0,0,0,q._green,0,0,0,0,q._blue,0,0,0,0,255*q.alpha]);y.setAlpha(1,c.BlendMode.NORMAL);y.setTransform(new c.Matrix(1,0,0,1,0,0));y.drawImage(b,a,e,f,l,t+10,x+10,m,n);y._drawWebGL();y.filterType=null;A.canvasContext.clearRect(0,0,w,z);
A.canvasContext.drawImage(C,0,0,w,z,0,0,w,z);y.clearScreen();y.setAlpha(1,c.BlendMode.NORMAL);y.setTransform(new c.Matrix(1,0,0,1,0,0));y.filterType="blur";y.setBlurData(t,0);c.Texture.deleteWebGLTexture(A);y.drawImage(A,t,x,w-2*t,z-2*x,t,x,w-2*t,z-2*x);y._drawWebGL();y.filterType=null;B.canvasContext.clearRect(0,0,w,z);B.canvasContext.drawImage(C,0,0,w,z,0,0,w,z);y.clearScreen();y.setAlpha(1,c.BlendMode.NORMAL);y.setTransform(new c.Matrix(1,0,0,1,0,0));y.filterType="blur";y.setBlurData(0,x);c.Texture.deleteWebGLTexture(B);
y.drawImage(B,0,x,w,z-2*x,0,x+5,w,z-2*x);y._drawWebGL();y.filterType=null;A.canvasContext.clearRect(0,0,w,z);A.canvasContext.drawImage(C,0,0,w,z,0,0,w,z);y.clearScreen();y.setAlpha(1,c.BlendMode.NORMAL);y.setTransform(new c.Matrix(1,0,0,1,0,0));c.Texture.deleteWebGLTexture(A);for(q=0;q<r;q++)y.drawImage(A,0,0,w,z,u,v,w,z);y._drawWebGL();y.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);y.currentBlendMode=null;y.drawImage(b,a,e,f,l,h+t+10,k+x+15,m,n);y._drawWebGL();B.canvasContext.clearRect(0,
0,w,z);B.canvasContext.drawImage(C,0,0,w,z,0,0,w,z);c.Texture.deleteWebGLTexture(B);this._drawImage(B,0,0,w,z,h-t-10,k-x-15,w,z);this._drawWebGL();c.RenderTexture.release(A);c.RenderTexture.release(B)};a._drawWebGL=function(){if(0!=this.currentBatchSize&&!this.contextLost){var b=c.getTimer();this.start();var a=this.gl;a.bindTexture(a.TEXTURE_2D,this.currentBaseTexture);var d=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);a.bufferSubData(a.ARRAY_BUFFER,0,d);a.drawElements(a.TRIANGLES,
6*this.currentBatchSize,a.UNSIGNED_SHORT,0);this.currentBatchSize=0;this.renderCost+=c.getTimer()-b;c.Profiler.getInstance().onDrawImage()}};a.setTransform=function(b){var a=this.worldTransform;a.a=b.a;a.b=b.b;a.c=b.c;a.d=b.d;a.tx=b.tx;a.ty=b.ty};a.setAlpha=function(b,a){this.worldAlpha=b;this.setBlendMode(a)};a.createWebGLTexture=function(b){b=b._bitmapData;b.webGLTexture||(b.webGLTexture={});if(!b.webGLTexture[this.glID]){var a=this.gl;b.webGLTexture[this.glID]=a.createTexture();b.webGLTexture[this.glID].glContext=
a;a.bindTexture(a.TEXTURE_2D,b.webGLTexture[this.glID]);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.bindTexture(a.TEXTURE_2D,null)}};a.pushMask=function(b){this._drawWebGL();var a=this.gl;
0==this.maskList.length&&a.enable(a.SCISSOR_TEST);b=this.getScissorRect(b);this.maskList.push(b);this.scissor(b.x,b.y,b.width,b.height)};a.getScissorRect=function(b){var a=this.maskList[this.maskList.length-1],d,e,f;a?a.intersects(a)?(d=Math.max(b.x+this.worldTransform.tx,a.x),e=Math.max(b.y+this.worldTransform.ty,a.y),f=Math.min(b.x+this.worldTransform.tx+b.width,a.x+a.width)-d,b=Math.min(b.y+this.worldTransform.ty+b.height,a.y+a.height)-e):b=f=e=d=0:(d=b.x+this.worldTransform.tx,e=b.y+this.worldTransform.ty,
f=b.width,b=b.height);(a=this.maskDataFreeList.pop())?(a.x=d,a.y=e,a.width=f,a.height=b):a=new c.Rectangle(d,e,f,b);return a};a.popMask=function(){this._drawWebGL();var b=this.gl,a=this.maskList.pop();this.maskDataFreeList.push(a);a=this.maskList.length;0!=a?(a=this.maskList[a-1],(0<a.width||0<a.height)&&this.scissor(a.x,a.y,a.width,a.height)):b.disable(b.SCISSOR_TEST)};a.scissor=function(b,a,d,e){var f=this.gl;0>d&&(d=0);0>e&&(e=0);f.scissor(b,-a+c.MainContext.instance.stage.stageHeight-e,d,e)};
a.setGlobalColorTransform=function(b){if(this.colorTransformMatrix!=b&&(this._drawWebGL(),this.colorTransformMatrix=b)){b=b.concat();var a=this.shaderManager.colorTransformShader;a.uniforms.colorAdd.value.w=b.splice(19,1)[0]/255;a.uniforms.colorAdd.value.z=b.splice(14,1)[0]/255;a.uniforms.colorAdd.value.y=b.splice(9,1)[0]/255;a.uniforms.colorAdd.value.x=b.splice(4,1)[0]/255;a.uniforms.matrix.value=b}};a.setBlurData=function(b,a){var c=this.shaderManager.blurShader;c.uniforms.blur.value.x=b;c.uniforms.blur.value.y=
a};a.setGlobalFilters=function(b){this._drawWebGL();this.setFilterProperties(b)};a.setFilterProperties=function(b){if((this.filters=b)&&b.length)for(var a=0;1>a;a++){var c=b[a];this.filterType=c.type;switch(c.type){case "blur":this.setBlurData(c.blurX,c.blurY);break;case "colorTransform":this.setGlobalColorTransform(c._matrix)}}else this.filterType=null};a.setupFont=function(b,a){void 0===a&&(a=null);this.canvasContext.setupFont(b,a)};a.measureText=function(b){return this.canvasContext.measureText(b)};
a.renderGraphics=function(b){this._drawWebGL();var a=this.gl,c=this.shaderManager.primitiveShader;this.graphicsPoints?(this.graphicsPoints.length=0,this.graphicsIndices.length=0):(this.graphicsPoints=[],this.graphicsIndices=[],this.graphicsBuffer=a.createBuffer(),this.graphicsIndexBuffer=a.createBuffer());this.updateGraphics(b);this.shaderManager.activateShader(c);a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA);a.uniformMatrix3fv(c.translationMatrix,!1,this.worldTransform.toArray(!0));a.uniform2f(c.projectionVector,
this.projectionX,-this.projectionY);a.uniform2f(c.offsetVector,0,0);a.uniform3fv(c.tintColor,[1,1,1]);a.uniform1f(c.alpha,this.worldAlpha);a.bindBuffer(a.ARRAY_BUFFER,this.graphicsBuffer);a.vertexAttribPointer(c.aVertexPosition,2,a.FLOAT,!1,24,0);a.vertexAttribPointer(c.colorAttribute,4,a.FLOAT,!1,24,8);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.graphicsIndexBuffer);a.drawElements(a.TRIANGLE_STRIP,this.graphicsIndices.length,a.UNSIGNED_SHORT,0);this.shaderManager.activateShader(this.shaderManager.defaultShader)};
a.updateGraphics=function(b){var a=this.gl;this.buildRectangle(b);a.bindBuffer(a.ARRAY_BUFFER,this.graphicsBuffer);a.bufferData(a.ARRAY_BUFFER,new Float32Array(this.graphicsPoints),a.STATIC_DRAW);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.graphicsIndexBuffer);a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.graphicsIndices),a.STATIC_DRAW)};a.buildRectangle=function(b){var a=b.x,c=b.y,d=b.w;b=b.h;var e=this.graphicsStyle.a,f=this.graphicsStyle.r*e,k=this.graphicsStyle.g*e,m=this.graphicsStyle.b*
e,n=this.graphicsPoints,q=this.graphicsIndices,r=n.length/6;n.push(a,c);n.push(f,k,m,e);n.push(a+d,c);n.push(f,k,m,e);n.push(a,c+b);n.push(f,k,m,e);n.push(a+d,c+b);n.push(f,k,m,e);q.push(r,r,r+1,r+2,r+3,r+3)};a.setGraphicsStyle=function(b,a,c,d){this.graphicsStyle.r=b;this.graphicsStyle.g=a;this.graphicsStyle.b=c;this.graphicsStyle.a=d};d.glID=0;d.isInit=!1;return d}(c.RendererContext);c.WebGLRenderer=f;f.prototype.__class__="egret.WebGLRenderer"})(egret||(egret={}));var egret_webgl_graphics;
(function(c){c.beginFill=function(c,d){void 0===d&&(d=1);this._pushCommand(new f(this._setStyle,this,[(c>>16)/255,((c&65280)>>8)/255,(c&255)/255,d]))};c.beginGradientFill=function(c,d,a,b,g){};c.drawRect=function(c,d,a,b){this._pushCommand(new f(function(b){this.renderContext.renderGraphics(b)},this,[{x:c,y:d,w:a,h:b}]));this._checkRect(c,d,a,b)};c.drawCircle=function(c,d,a){};c.drawRoundRect=function(c,d,a,b,g,s){};c.drawEllipse=function(c,d,a,b){};c.lineStyle=function(c,d,a,b,g,s,f,l){};c.lineTo=
function(c,d){};c.curveTo=function(c,d,a,b){};c.cubicCurveTo=function(c,d,a,b,g,s){};c.moveTo=function(c,d){};c.clear=function(){this._maxY=this._maxX=this._minY=this._minX=this.commandQueue.length=0};c.endFill=function(){};c._pushCommand=function(c){this.commandQueue.push(c)};c._draw=function(c){var d=this.commandQueue.length;if(0!=d)for(this.renderContext=c,c=0;c<d;c++){var a=this.commandQueue[c];a.method.apply(a.thisObject,a.args)}};var f=function(){return function(c,d,a){this.method=c;this.thisObject=
d;this.args=a}}();f.prototype.__class__="egret_webgl_graphics.Command";c._setStyle=function(c,d,a,b){this.renderContext.setGraphicsStyle(c,d,a,b)};c.init=function(){for(var e in c)egret.Graphics.prototype[e]=c[e]}})(egret_webgl_graphics||(egret_webgl_graphics={}));
(function(c){var f=function(){function e(){}e.compileProgram=function(d,a,b){b=e.compileFragmentShader(d,b);a=e.compileVertexShader(d,a);var g=d.createProgram();d.attachShader(g,a);d.attachShader(g,b);d.linkProgram(g);d.getProgramParameter(g,d.LINK_STATUS)||c.$warn(1020);return g};e.compileFragmentShader=function(c,a){return e._compileShader(c,a,c.FRAGMENT_SHADER)};e.compileVertexShader=function(c,a){return e._compileShader(c,a,c.VERTEX_SHADER)};e._compileShader=function(d,a,b){b=d.createShader(b);
d.shaderSource(b,a);d.compileShader(b);return d.getShaderParameter(b,d.COMPILE_STATUS)?b:(c.Logger.info(d.getShaderInfoLog(b)),null)};e.checkCanUseWebGL=function(){if(void 0==e.canUseWebGL)try{var c=document.createElement("canvas");e.canUseWebGL=!!window.WebGLRenderingContext&&!(!c.getContext("webgl")&&!c.getContext("experimental-webgl"))}catch(a){e.canUseWebGL=!1}return e.canUseWebGL};return e}();c.WebGLUtils=f;f.prototype.__class__="egret.WebGLUtils"})(egret||(egret={}));
(function(c){var f=function(){function e(a){this.defaultVertexSrc="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec2 aColor;\nuniform vec2 projectionVector;\nuniform vec2 offsetVector;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nconst vec2 center = vec2(-1.0, 1.0);\nvoid main(void) {\n   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.x, aColor.x, aColor.x, aColor.x);\n}";
this.program=this.gl=null;this.fragmentSrc="precision lowp float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nvoid main(void) {\ngl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;\n}";this.uniforms=null;this.gl=a;this.init()}var d=e.prototype;d.init=function(){var a=this.gl,b=c.WebGLUtils.compileProgram(a,this.defaultVertexSrc,this.fragmentSrc);a.useProgram(b);this.uSampler=a.getUniformLocation(b,"uSampler");this.projectionVector=a.getUniformLocation(b,
"projectionVector");this.offsetVector=a.getUniformLocation(b,"offsetVector");this.dimensions=a.getUniformLocation(b,"dimensions");this.aVertexPosition=a.getAttribLocation(b,"aVertexPosition");this.aTextureCoord=a.getAttribLocation(b,"aTextureCoord");this.colorAttribute=a.getAttribLocation(b,"aColor");-1===this.colorAttribute&&(this.colorAttribute=2);this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var g in this.uniforms)this.uniforms[g].uniformLocation=a.getUniformLocation(b,
g);this.initUniforms();this.program=b};d.initUniforms=function(){if(this.uniforms){var a=this.gl,b,c;for(c in this.uniforms){b=this.uniforms[c];var d=b.type;"mat2"===d||"mat3"===d||"mat4"===d?(b.glMatrix=!0,b.glValueLength=1,"mat2"===d?b.glFunc=a.uniformMatrix2fv:"mat3"===d?b.glFunc=a.uniformMatrix3fv:"mat4"===d&&(b.glFunc=a.uniformMatrix4fv)):(b.glFunc=a["uniform"+d],b.glValueLength="2f"===d||"2i"===d?2:"3f"===d||"3i"===d?3:"4f"===d||"4i"===d?4:1)}}};d.syncUniforms=function(){if(this.uniforms){var a,
b=this.gl,c;for(c in this.uniforms)a=this.uniforms[c],1===a.glValueLength?!0===a.glMatrix?a.glFunc.call(b,a.uniformLocation,a.transpose,a.value):a.glFunc.call(b,a.uniformLocation,a.value):2===a.glValueLength?a.glFunc.call(b,a.uniformLocation,a.value.x,a.value.y):3===a.glValueLength?a.glFunc.call(b,a.uniformLocation,a.value.x,a.value.y,a.value.z):4===a.glValueLength&&a.glFunc.call(b,a.uniformLocation,a.value.x,a.value.y,a.value.z,a.value.w)}};return e}();c.EgretShader=f;f.prototype.__class__="egret.EgretShader"})(egret||
(egret={}));
(function(c){var f=function(c){function d(a){c.call(this,a);this.fragmentSrc="precision mediump float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform float invert;\nuniform mat4 matrix;\nuniform vec4 colorAdd;\nuniform sampler2D uSampler;\nvoid main(void) {\nvec4 texColor = texture2D(uSampler, vTextureCoord);\nvec4 locColor = texColor * matrix;\nif(texColor.a != 0.0){\nlocColor += colorAdd;\n}\ngl_FragColor = vColor*vec4(locColor.rgb*locColor.a,locColor.a);\n}";this.uniforms={matrix:{type:"mat4",
value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},colorAdd:{type:"4f",value:{x:0,y:0,z:0,w:0}}};this.init()}__extends(d,c);return d}(c.EgretShader);c.ColorTransformShader=f;f.prototype.__class__="egret.ColorTransformShader"})(egret||(egret={}));
(function(c){var f=function(c){function d(a){c.call(this,a);this.fragmentSrc="precision mediump float;uniform vec2 blur;uniform sampler2D uSampler;varying vec2 vTextureCoord;void main(){gl_FragColor = vec4(0.0);gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.028 * blur.x, -0.028 * blur.y))) * 0.0044299121055113265;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.024 * blur.x, -0.024 * blur.y))) * 0.00895781211794;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.020 * blur.x, -0.020 * blur.y))) * 0.0215963866053;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.016 * blur.x, -0.016 * blur.y))) * 0.0443683338718;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.012 * blur.x, -0.012 * blur.y))) * 0.0776744219933;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.008 * blur.x, -0.008 * blur.y))) * 0.115876621105;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.004 * blur.x, -0.004 * blur.y))) * 0.147308056121;gl_FragColor += texture2D(uSampler, vTextureCoord) * 0.159576912161;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.004 * blur.x,  0.004 * blur.y))) * 0.147308056121;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.008 * blur.x,  0.008 * blur.y))) * 0.115876621105;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.012 * blur.x,  0.012 * blur.y))) * 0.0776744219933;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.016 * blur.x,  0.016 * blur.y))) * 0.0443683338718;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.020 * blur.x,  0.020 * blur.y))) * 0.0215963866053;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.024 * blur.x,  0.024 * blur.y))) * 0.00895781211794;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.028 * blur.x,  0.028 * blur.y))) * 0.0044299121055113265;}";this.uniforms=
{blur:{type:"2f",value:{x:2,y:2}}};this.init()}__extends(d,c);return d}(c.EgretShader);c.BlurShader=f;f.prototype.__class__="egret.BlurShader"})(egret||(egret={}));
(function(c){var f=function(){function e(c){this.alpha=this.translationMatrix=this.attributes=this.colorAttribute=this.aVertexPosition=this.tintColor=this.offsetVector=this.projectionVector=this.program=this.gl=null;this.fragmentSrc="precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n   gl_FragColor = vColor;\n}";this.vertexSrc="attribute vec2 aVertexPosition;\nattribute vec4 aColor;\nuniform mat3 translationMatrix;\nuniform vec2 projectionVector;\nuniform vec2 offsetVector;\nuniform float alpha;\nuniform vec3 tint;\nvarying vec4 vColor;\nvoid main(void) {\n   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);\n   v -= offsetVector.xyx;\n   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);\n   vColor = aColor * vec4(tint * alpha, alpha);\n}";
this.gl=c;this.init()}e.prototype.init=function(){var d=this.gl,a=c.WebGLUtils.compileProgram(d,this.vertexSrc,this.fragmentSrc);d.useProgram(a);this.projectionVector=d.getUniformLocation(a,"projectionVector");this.offsetVector=d.getUniformLocation(a,"offsetVector");this.tintColor=d.getUniformLocation(a,"tint");this.aVertexPosition=d.getAttribLocation(a,"aVertexPosition");this.colorAttribute=d.getAttribLocation(a,"aColor");this.attributes=[this.aVertexPosition,this.colorAttribute];this.translationMatrix=
d.getUniformLocation(a,"translationMatrix");this.alpha=d.getUniformLocation(a,"alpha");this.program=a};return e}();c.PrimitiveShader=f;f.prototype.__class__="egret.PrimitiveShader"})(egret||(egret={}));
(function(c){var f=function(){function e(a){this.gl=null;this.maxAttibs=10;this.attribState=[];this.tempAttribState=[];this.blurShader=this.colorTransformShader=this.primitiveShader=this.defaultShader=this.currentShader=null;for(var b=0;b<this.maxAttibs;b++)this.attribState[b]=!1;this.setContext(a)}var d=e.prototype;d.setContext=function(a){this.gl=a;this.primitiveShader=new c.PrimitiveShader(a);this.defaultShader=new c.EgretShader(a);this.colorTransformShader=new c.ColorTransformShader(a);this.blurShader=
new c.BlurShader(a);this.activateShader(this.defaultShader)};d.activateShader=function(a){this.currentShader!=a&&(this.gl.useProgram(a.program),this.setAttribs(a.attributes),this.currentShader=a)};d.setAttribs=function(a){var b,c;c=this.tempAttribState.length;for(b=0;b<c;b++)this.tempAttribState[b]=!1;c=a.length;for(b=0;b<c;b++)this.tempAttribState[a[b]]=!0;a=this.gl;c=this.attribState.length;for(b=0;b<c;b++)this.attribState[b]!==this.tempAttribState[b]&&(this.attribState[b]=this.tempAttribState[b],
this.tempAttribState[b]?a.enableVertexAttribArray(b):a.disableVertexAttribArray(b))};return e}();c.WebGLShaderManager=f;f.prototype.__class__="egret.WebGLShaderManager"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);c.Texture.createBitmapData=c.Texture._createBitmapDataForCanvasAndWebGl}__extends(d,e);var a=d.prototype;a.initVersion=function(b){this._versionCtr=b};a.proceed=function(b){function a(){if(4==e.readyState)if(e.status!=b._status&&(b._status=e.status,c.HTTPStatusEvent.dispatchHTTPStatusEvent(b,e.status)),400<=e.status||0==e.status)c.IOErrorEvent.dispatchIOErrorEvent(b);else{switch(b.dataFormat){case c.URLLoaderDataFormat.TEXT:b.data=e.responseText;
break;case c.URLLoaderDataFormat.VARIABLES:b.data=new c.URLVariables(e.responseText);break;case c.URLLoaderDataFormat.BINARY:b.data=e.response;break;default:b.data=e.responseText}c.__callAsync(c.Event.dispatchEvent,c.Event,b,c.Event.COMPLETE)}}if(b.dataFormat==c.URLLoaderDataFormat.TEXTURE)this.loadTexture(b);else if(b.dataFormat==c.URLLoaderDataFormat.SOUND)c.Html5Capatibility._audioType==c.AudioType.WEB_AUDIO?this.loadWebAudio(b):c.Html5Capatibility._audioType==c.AudioType.QQ_AUDIO?this.loadQQAudio(b):
this.loadSound(b);else{var d=b._request,e=this.getXHR();e.onreadystatechange=a;var f=this.getVirtualUrl(c.NetContext._getUrl(d));e.open(d.method,f,!0);this.setResponseType(e,b.dataFormat);d.method!=c.URLRequestMethod.GET&&d.data?d.data instanceof c.URLVariables?(e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send(d.data.toString())):(e.setRequestHeader("Content-Type","multipart/form-data"),e.send(d.data)):e.send()}};a.loadSound=function(b){function a(e){c.clearTimeout(f.__timeoutId);
f.removeEventListener("canplaythrough",a,!1);f.removeEventListener("error",d,!1);e=new c.Html5Audio;e._setAudio(f);var p=new c.Sound;p._setAudio(e);b.data=p;c.__callAsync(c.Event.dispatchEvent,c.Event,b,c.Event.COMPLETE)}function d(e){c.clearTimeout(f.__timeoutId);f.removeEventListener("canplaythrough",a,!1);f.removeEventListener("error",d,!1);c.IOErrorEvent.dispatchIOErrorEvent(b)}var e=this.getVirtualUrl(b._request.url),f=new Audio(e);f.__timeoutId=c.setTimeout(a,this,100);f.addEventListener("canplaythrough",
a,!1);f.addEventListener("error",d,!1);f.load()};a.loadQQAudio=function(b){var a=c.Html5Capatibility._QQRootPath+this.getVirtualUrl(b._request.url);console.log("loadQQAudio");QZAppExternal.preloadSound(function(d){if(0==d.code){d=new c.QQAudio;d._setPath(a);var e=new c.Sound;e._setAudio(d);b.data=e;c.__callAsync(c.Event.dispatchEvent,c.Event,b,c.Event.COMPLETE)}else c.IOErrorEvent.dispatchIOErrorEvent(b)},{bid:-1,url:a,refresh:1})};a.loadWebAudio=function(b){var a=this.getVirtualUrl(b._request.url),
d=new XMLHttpRequest;d.open("GET",a,!0);d.responseType="arraybuffer";console.log("loadWebAudio");d.onload=function(){var a=new c.WebAudio;a._setArrayBuffer(d.response,function(){var g=new c.Sound;g._setAudio(a);b.data=g;c.__callAsync(c.Event.dispatchEvent,c.Event,b,c.Event.COMPLETE)})};d.send()};a.getXHR=function(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")};a.setResponseType=function(b,a){switch(a){case c.URLLoaderDataFormat.TEXT:case c.URLLoaderDataFormat.VARIABLES:b.responseType=
c.URLLoaderDataFormat.TEXT;break;case c.URLLoaderDataFormat.BINARY:b.responseType="arraybuffer";break;default:b.responseType=a}};a.loadTexture=function(b){var a=this.getVirtualUrl(b._request.url);c.Texture.createBitmapData(a,function(a,g){if(0!=a)c.IOErrorEvent.dispatchIOErrorEvent(b);else{var d=new c.Texture;d._setBitmapData(g);b.data=d;c.__callAsync(c.Event.dispatchEvent,c.Event,b,c.Event.COMPLETE)}})};a.getVirtualUrl=function(b){return this._versionCtr?this._versionCtr.getVirtualUrl(b):b};return d}(c.NetContext);
c.HTML5NetContext=f;f.prototype.__class__="egret.HTML5NetContext"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._isTouchDown=!1;this.rootDiv=null;this.rootDiv=document.getElementById(c.StageDelegate.canvas_div_name);if(!this.rootDiv){var b=document.getElementById(c.StageDelegate.egret_root_div);this.rootDiv=c.Browser.getInstance().$new("div");this.rootDiv.id=c.StageDelegate.canvas_div_name;b.appendChild(this.rootDiv)}}__extends(d,e);var a=d.prototype;a.prevent=function(b){b.stopPropagation();!0==b.isScroll||c.HTMLInput.getInstance().isInputOn()||
b.preventDefault()};a.run=function(){var b=this;window.navigator.msPointerEnabled?(this.rootDiv.addEventListener("MSPointerDown",function(a){b._onTouchBegin(a);b.prevent(a)},!1),this.rootDiv.addEventListener("MSPointerMove",function(a){b._onTouchMove(a);b.prevent(a)},!1),this.rootDiv.addEventListener("MSPointerUp",function(a){b._onTouchEnd(a);b.prevent(a)},!1)):c.MainContext.deviceType==c.MainContext.DEVICE_MOBILE?this.addTouchListener():c.MainContext.deviceType==c.MainContext.DEVICE_PC&&(this.addTouchListener(),
this.addMouseListener());window.addEventListener("mousedown",function(a){b.inOutOfCanvas(a)?b.dispatchLeaveStageEvent():b._isTouchDown=!0});window.addEventListener("mouseup",function(a){b._isTouchDown&&(b.inOutOfCanvas(a)?b.dispatchLeaveStageEvent():b._onTouchEnd(a));b._isTouchDown=!1})};a.addMouseListener=function(){var b=this;this.rootDiv.addEventListener("mousedown",function(a){b._onTouchBegin(a)});this.rootDiv.addEventListener("mousemove",function(a){b._onTouchMove(a)});this.rootDiv.addEventListener("mouseup",
function(a){b._onTouchEnd(a)})};a.addTouchListener=function(){var b=this;this.rootDiv.addEventListener("touchstart",function(a){for(var c=a.changedTouches.length,d=0;d<c;d++)b._onTouchBegin(a.changedTouches[d]);b.prevent(a)},!1);this.rootDiv.addEventListener("touchmove",function(a){for(var c=a.changedTouches.length,d=0;d<c;d++)b._onTouchMove(a.changedTouches[d]);b.prevent(a)},!1);this.rootDiv.addEventListener("touchend",function(a){for(var c=a.changedTouches.length,d=0;d<c;d++)b._onTouchEnd(a.changedTouches[d]);
b.prevent(a)},!1);this.rootDiv.addEventListener("touchcancel",function(a){for(var c=a.changedTouches.length,d=0;d<c;d++)b._onTouchEnd(a.changedTouches[d]);b.prevent(a)},!1)};a.inOutOfCanvas=function(b){var a=this.getLocation(this.rootDiv,b);b=a.x;var a=a.y,d=c.MainContext.instance.stage;return 0>b||0>a||b>d.stageWidth||a>d.stageHeight?!0:!1};a.dispatchLeaveStageEvent=function(){this.touchingIdentifiers.length=0;c.MainContext.instance.stage.dispatchEventWith(c.Event.LEAVE_STAGE)};a._onTouchBegin=function(b){var a=
this.getLocation(this.rootDiv,b),c=-1;b.hasOwnProperty("identifier")&&(c=b.identifier);this.onTouchBegan(a.x,a.y,c)};a._onTouchMove=function(b){var a=this.getLocation(this.rootDiv,b),c=-1;b.hasOwnProperty("identifier")&&(c=b.identifier);this.onTouchMove(a.x,a.y,c)};a._onTouchEnd=function(b){var a=this.getLocation(this.rootDiv,b),c=-1;b.hasOwnProperty("identifier")&&(c=b.identifier);this.onTouchEnd(a.x,a.y,c)};a.getLocation=function(b,a){var d=document.documentElement,e=window,f,h;"function"===typeof b.getBoundingClientRect?
(h=b.getBoundingClientRect(),f=h.left,h=h.top):h=f=0;f+=e.pageXOffset-d.clientLeft;h+=e.pageYOffset-d.clientTop;null!=a.pageX?(d=a.pageX,e=a.pageY):(f-=document.body.scrollLeft,h-=document.body.scrollTop,d=a.clientX,e=a.clientY);var k=c.Point.identity;k.x=(d-f)/c.StageDelegate.getInstance().getScaleX();k.y=(e-h)/c.StageDelegate.getInstance().getScaleY();return k};return d}(c.TouchContext);c.HTML5TouchContext=f;f.prototype.__class__="egret.HTML5TouchContext"})(egret||(egret={}));
(function(c){var f=function(d){function a(){d.call(this);this._isNeedShow=!1;this.inputDiv=this.inputElement=null;this._gscaleY=this._gscaleX=0;this._isNeesHide=!1;this.textValue="";this._styleInfoes={};e.getInstance()}__extends(a,d);var b=a.prototype;b._initElement=function(b,a,d,e){var f=c.StageDelegate.getInstance().getScaleX(),k=c.StageDelegate.getInstance().getScaleY();this.inputDiv.style.left=b*f+"px";this.inputDiv.style.top=a*k+"px";this._gscaleX=f*d;this._gscaleY=k*e};b._show=function(b,a,
c,d){this._multiline=b;e.getInstance().isCurrentStageText(this)?this.inputElement.onblur=null:(this.inputElement=e.getInstance().getInputElement(this),this.inputDiv=e.getInstance()._inputDIV);this._isNeedShow=e.getInstance()._needShow=!0};b.onBlurHandler=function(){e.getInstance().clearInputElement();window.scrollTo(0,0)};b.executeShow=function(){this.inputElement.value=this._getText();null==this.inputElement.onblur&&(this.inputElement.onblur=this.onBlurHandler);this._resetStageText();0<this._textfield._TF_Props_._maxChars?
this.inputElement.setAttribute("maxlength",this._textfield._TF_Props_._maxChars):this.inputElement.removeAttribute("maxlength");this.inputElement.selectionStart=this.inputElement.value.length;this.inputElement.selectionEnd=this.inputElement.value.length;this.inputElement.focus()};b._hide=function(){this._isNeesHide=!0;0<=c.Browser.getInstance().getUserAgent().indexOf("ios")&&e.getInstance().disconnectStageText(this)};b._getText=function(){this.textValue||(this.textValue="");return this.textValue};
b._setText=function(b){this.textValue=b;this.resetText()};b.resetText=function(){this.inputElement&&(this.inputElement.value=this.textValue)};b._onInput=function(){this.textValue=this.inputElement.value;c.Event.dispatchEvent(this,"updateText",!1)};b._onClickHandler=function(b){this._isNeedShow&&(b.stopImmediatePropagation(),this._isNeedShow=!1,this.executeShow(),this.dispatchEvent(new c.Event("focus")))};b._onDisconnect=function(){this.inputElement=null;this.dispatchEvent(new c.Event("blur"))};b.setElementStyle=
function(b,a){this.inputElement&&this._styleInfoes[b]!=a&&(this.inputElement.style[b]=a)};b._removeInput=function(){this.inputElement&&e.getInstance().disconnectStageText(this)};b._resetStageText=function(){if(this.inputElement){var b=this._textfield,a=b._TF_Props_;this.setElementStyle("fontFamily",a._fontFamily);this.setElementStyle("fontStyle",a._italic?"italic":"normal");this.setElementStyle("fontWeight",a._bold?"bold":"normal");this.setElementStyle("textAlign",a._textAlign);this.setElementStyle("fontSize",
a._size*this._gscaleY+"px");this.setElementStyle("lineHeight",a._size*this._gscaleY+"px");this.setElementStyle("color",a._textColorString);this.setElementStyle("width",b._getSize(c.Rectangle.identity).width*this._gscaleX+"px");this.setElementStyle("height",b._getSize(c.Rectangle.identity).height*this._gscaleY+"px");this.setElementStyle("verticalAlign",a._verticalAlign)}};return a}(c.StageText);c.HTML5StageText=f;f.prototype.__class__="egret.HTML5StageText";var e=function(){function d(){this._needShow=
!1}var a=d.prototype;a.isInputOn=function(){return null!=this._stageText};a.isCurrentStageText=function(b){return this._stageText==b};a.initValue=function(b){b.style.position="absolute";b.style.left="0px";b.style.top="0px";b.style.border="none";b.style.padding="0"};a._initStageDelegateDiv=function(){var b=this,a=c.Browser.getInstance().$("#StageDelegateDiv");a||(a=c.Browser.getInstance().$new("div"),a.id="StageDelegateDiv",document.getElementById(c.StageDelegate.egret_root_div).appendChild(a),b.initValue(a),
a.style.width="0px",a.style.height="0px",b._inputDIV=c.Browser.getInstance().$new("div"),b.initValue(b._inputDIV),b._inputDIV.style.width="0px",b._inputDIV.style.height="0px",b._inputDIV.style.left="0px",b._inputDIV.style.top="-100px",b._inputDIV.style[c.Browser.getInstance().getTrans("transformOrigin")]="0% 0% 0px",a.appendChild(b._inputDIV),document.getElementById(c.StageDelegate.canvas_div_name).addEventListener("click",function(a){b._needShow?(b._needShow=!1,c.MainContext.instance.stage._changeSizeDispatchFlag=
!1,b._stageText._onClickHandler(a),d.getInstance().show()):b._inputElement&&(b.clearInputElement(),b._inputElement.blur(),b._inputElement=null)}),b.initInputElement(!0),b.initInputElement(!1))};a.initInputElement=function(b){var a=this;b?(b=document.createElement("textarea"),b.style.resize="none",a._multiElement=b,b.id="egretTextarea"):(b=document.createElement("input"),a._simpleElement=b,b.id="egretInput");b.type="text";a._inputDIV.appendChild(b);b.setAttribute("tabindex","-1");b.style.width="1px";
b.style.height="12px";a.initValue(b);b.style.outline="thin";b.style.background="none";b.style.overflow="hidden";b.style.wordBreak="break-all";b.style.opacity=0;b.oninput=function(){a._stageText&&a._stageText._onInput()}};a.show=function(){var b=this._inputElement;c.__callAsync(function(){b.style.opacity=1},this)};a.disconnectStageText=function(b){if(null==this._stageText||this._stageText==b)this.clearInputElement(),this._inputElement&&this._inputElement.blur()};a.clearInputElement=function(){this._inputElement&&
(this._inputElement.value="",this._inputElement.onblur=null,this._inputElement.style.width="1px",this._inputElement.style.height="12px",this._inputElement.style.left="0px",this._inputElement.style.top="0px",this._inputElement.style.opacity=0,(this._simpleElement==this._inputElement?this._multiElement:this._simpleElement).style.display="block",this._inputDIV.style.left="0px",this._inputDIV.style.top="-100px");this._stageText&&(this._stageText._onDisconnect(),this._stageText=null);c.MainContext.instance.stage._changeSizeDispatchFlag=
!0};a.getInputElement=function(b){this.clearInputElement();this._stageText=b;this._inputElement=this._stageText._multiline?this._multiElement:this._simpleElement;(this._simpleElement==this._inputElement?this._multiElement:this._simpleElement).style.display="none";return this._inputElement};d.getInstance=function(){null==d._instance&&(d._instance=new c.HTMLInput);return d._instance};return d}();c.HTMLInput=e;e.prototype.__class__="egret.HTMLInput"})(egret||(egret={}));
egret.StageText.create=function(){egret.HTMLInput.getInstance()._initStageDelegateDiv();return new egret.HTML5StageText};
(function(c){var f=function(){function e(){this._loop=!1;this.paused=!0;this._listeners=[];this._onEndedCall=null;this._volume=1;this._startTime=0}var d=e.prototype;d._play=function(a){this.removeListeners();c.Html5Capatibility._audioMustLoad&&this._audio.load();this.paused=!1;this._audio.autoplay=!0;this._audio.volume=this._volume;var b=this,d=function(a){b._audio.removeEventListener("ended",d);b._onEndedCall&&b._onEndedCall.call(null,a);b.clear()};this._audio.addEventListener("ended",d);this.initStart();
try{this._audio.currentTime=this._startTime}catch(e){}finally{this._audio.play()}};d.clear=function(){try{this._audio.pause()}catch(a){}finally{this.removeListeners(),this._loop&&!this.paused&&this._play()}};d._pause=function(){this.paused=!0;this._audio.pause()};d._load=function(){this._audio.load()};d._setAudio=function(a){this._audio=a};d.initStart=function(){for(var a=0;a<this._listeners.length;a++){var b=this._listeners[a];this._audio.addEventListener(b.type,b.listener,b.useCapture)}};d._addEventListener=
function(a,b,c){void 0===c&&(c=!1);"ended"==a?this._onEndedCall=b:(this._listeners.push({type:a,listener:b,useCapture:c}),this._audio&&this._audio.addEventListener(a,b,c))};d.removeListeners=function(){for(var a=0;a<this._listeners.length;a++){var b=this._listeners[a];this._audio&&this._audio.removeEventListener(b.type,b.listener,b.useCapture)}};d._removeEventListener=function(a,b,c){void 0===c&&(c=!1);if("ended"==a)this._onEndedCall=null;else for(var d=0;d<this._listeners.length;d++){var e=this._listeners[d];
if(e.listener==b&&e.useCapture==c&&e.type==a){this._listeners.splice(d,1);this._audio&&this._audio.removeEventListener(a,b,c);break}}};d._preload=function(a,b,d){void 0===b&&(b=null);void 0===d&&(d=null);c.callLater(b,d)};d._destroy=function(){};d._getVolume=function(){return this._volume};d._setVolume=function(a){this._volume=Math.max(0,Math.min(a,1));this._audio.volume=this._volume};d._setLoop=function(a){this._loop=a};d._getCurrentTime=function(){return this._audio.currentTime};d._setCurrentTime=
function(a){this._startTime=a};return e}();c.Html5Audio=f;f.prototype.__class__="egret.Html5Audio"})(egret||(egret={}));
(function(c){var f=function(){function e(){this.context=e.ctx;this.bufferSource=null;this.paused=!0;this._loop=!1;this._listeners=[];this._onEndedCall=null;this._volume=1;this._currentTime=this._startTime=0;this.gain=e.ctx.createGain?e.ctx.createGain():e.ctx.createGainNode()}var d=e.prototype;e.decodeAudios=function(){if(!(0>=e.decodeArr.length||e.isDecoding)){e.isDecoding=!0;var a=e.decodeArr.shift();e.ctx.decodeAudioData(a.buffer,function(b){a.self.audioBuffer=b;a.callback&&a.callback();e.isDecoding=
!1;e.decodeAudios()})}};d._play=function(a){var b=this;this.bufferSource&&(this.bufferSource.onended=null,this.removeListeners(),this.bufferSource=null);a=this.context;var c=this.gain,d=a.createBufferSource();this.bufferSource=d;this.addListeners();d.buffer=this.audioBuffer;d.connect(c);c.connect(a.destination);d.onended=function(a){b.clear();b._onEndedCall&&b._onEndedCall.call(null,a);b._loop&&!b.paused&&b._play()};this.paused=!1;this._startTime=Date.now();this.gain.gain.value=this._volume;d.start(0,
this._currentTime);this._currentTime=0};d.clear=function(){if(this.bufferSource){this.removeListeners();var a=this.bufferSource;a.stop?a.stop(0):a.noteOff(0);this.bufferSource.disconnect();this.bufferSource=null}};d.addListeners=function(){for(var a=0;a<this._listeners.length;a++){var b=this._listeners[a];this.bufferSource.addEventListener(b.type,b.listener,b.useCapture)}};d.removeListeners=function(){for(var a=0;a<this._listeners.length;a++){var b=this._listeners[a];this.bufferSource.removeEventListener(b.type,
b.listener,b.useCapture)}};d._pause=function(){this.paused=!0;this.clear()};d._addEventListener=function(a,b,c){void 0===c&&(c=!1);"ended"==a?this._onEndedCall=b:(this._listeners.push({type:a,listener:b,useCapture:c}),this.bufferSource&&this.bufferSource.addEventListener(a,b,c))};d._removeEventListener=function(a,b,c){void 0===c&&(c=!1);if("ended"==a)this._onEndedCall=null;else for(var d=0;d<this._listeners.length;d++){var e=this._listeners[d];if(e.listener==b&&e.useCapture==c&&e.type==a){this._listeners.splice(d,
1);this.bufferSource&&this.bufferSource.removeEventListener(a,b,c);break}}};d._load=function(){this._setArrayBuffer(this._arrayBuffer,null)};d._setArrayBuffer=function(a,b){this._arrayBuffer=a;e.decodeArr.push({buffer:a,callback:b,self:this});e.decodeAudios()};d._preload=function(a,b,d){void 0===b&&(b=null);void 0===d&&(d=null);c.callLater(b,d)};d._getVolume=function(){return this._volume};d._setVolume=function(a){this._volume=a;this.gain.gain.value=a};d._setLoop=function(a){this._loop=a};d._getCurrentTime=
function(){return this.bufferSource?(Date.now()-this._startTime)/1E3:0};d._setCurrentTime=function(a){this._currentTime=a};d._destroy=function(){};e.canUseWebAudio=window.AudioContext||window.webkitAudioContext||window.mozAudioContext;e.ctx=e.canUseWebAudio?new (window.AudioContext||window.webkitAudioContext||window.mozAudioContext):void 0;e.decodeArr=[];e.isDecoding=!1;return e}();c.WebAudio=f;f.prototype.__class__="egret.WebAudio"})(egret||(egret={}));
(function(c){var f=function(){function e(){this._loop=!1;this._currentTime=0}var d=e.prototype;d._play=function(a){this._type=a;a==c.Sound.EFFECT?QZAppExternal.playLocalSound(function(b){alert(JSON.stringify(b))},{bid:-1,url:this._path,loop:this._loop?-1:0}):QZAppExternal.playLocalBackSound({bid:-1,url:this._path,loop:this._loop?-1:0})};d._pause=function(){this._type==c.Sound.EFFECT?QZAppExternal.stopSound():QZAppExternal.stopBackSound()};d._addEventListener=function(a,b,c){};d._removeEventListener=
function(a,b,c){};d._load=function(){};d._preload=function(a,b,d){void 0===b&&(b=null);void 0===d&&(d=null);c.callLater(b,d)};d._setPath=function(a){this._path=a};d._getVolume=function(){return 1};d._setVolume=function(a){};d._setLoop=function(a){this._loop=a};d._getCurrentTime=function(){return 0};d._setCurrentTime=function(a){this._currentTime=a};d._destroy=function(){};return e}();c.QQAudio=f;f.prototype.__class__="egret.QQAudio"})(egret||(egret={}));
(function(c){var f=function(){function a(){}a.QQ_AUDIO=1;a.WEB_AUDIO=2;a.HTML5_AUDIO=3;return a}();c.AudioType=f;f.prototype.__class__="egret.AudioType";var e=function(){function a(){}a.WPHONE=1;a.IOS=2;a.ADNROID=3;return a}();c.SystemOSType=e;e.prototype.__class__="egret.SystemOSType";var d=function(a){function b(){a.call(this)}__extends(b,a);b._init=function(){var a=navigator.userAgent.toLowerCase();b.ua=a;b._canUseBlob=!1;b._audioType=f.HTML5_AUDIO;b._AudioClass=c.Html5Audio;b._audioMustLoad=!0;
if(0<=a.indexOf("windows phone"))b._System_OS=e.WPHONE,b._audioMustLoad=!1;else if(0<=a.indexOf("android"))b._System_OS=e.ADNROID,0<=a.indexOf("ucbrowser")&&(b._audioMustLoad=!1),window.hasOwnProperty("QZAppExternal")&&0<=a.indexOf("qzone")&&(b._AudioClass=c.QQAudio,b._audioType=f.QQ_AUDIO,(a=document.getElementsByTagName("base"))&&0<a.length?b._QQRootPath=a[0].baseURI:(a=window.location.href.indexOf("?"),-1==a&&(a=window.location.href.length),a=window.location.href.substring(0,a),a=a.substring(0,
a.lastIndexOf("/")),b._QQRootPath=a+"/"));else if(0<=a.indexOf("iphone")||0<=a.indexOf("ipad")||0<=a.indexOf("ipod"))b._System_OS=e.IOS,7<=b.getIOSVersion()&&(b._canUseBlob=!0,b._AudioClass=c.WebAudio,b._audioType=f.WEB_AUDIO);window.URL||window.webkitURL||(b._canUseBlob=!1);window.AudioContext||window.webkitAudioContext||window.mozAudioContext||b._audioType!=f.WEB_AUDIO||(b._audioType=f.HTML5_AUDIO,b._AudioClass=c.Html5Audio)};b.getIOSVersion=function(){var a=b.ua.toLowerCase().match(/cpu [^\d]*\d.*like mac os x/)[0];
return parseInt(a.match(/\d(_\d)*/)[0])||0};b._canUseBlob=!1;b._audioType=0;b._audioMustLoad=!1;b._QQRootPath="";b._System_OS=0;b.ua="";return b}(c.HashObject);c.Html5Capatibility=d;d.prototype.__class__="egret.Html5Capatibility";d._init()})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.localVersionDataPath="localVersion.manifest";this.localVersionData=null;this.changeVersionDataPath="version.manifest";this.changeVersionData=null;this.baseVersionDataPath="base.manifest";this.baseVersionData=null;this.localVersionCodePath="localCode.manifest";this.serverVersionCodePath="code.manifest";this._call=this._load=null}__extends(d,e);var a=d.prototype;a.fetchVersion=function(){this._load=new c.NativeResourceLoader;this._load.addEventListener(c.IOErrorEvent.IO_ERROR,
this.loadError,this);this._load.addEventListener(c.Event.COMPLETE,this.fileLoadComplete,this);this.initLocalVersionData()};a.initLocalVersionData=function(){var b=this.getData("appVersion.manifest",!0);if(b){if(1==b.debug){this.baseVersionData=null;if(b=this.getData(this.localVersionDataPath,!1))for(var a in b)this.deleteFile(a);this.deleteFile(this.localVersionDataPath);this.deleteFile(this.localVersionCodePath);this.loadOver();return}var c=this.getData("appVersion.manifest",!1);if(null==c||c.version!=
b.version){this.localVersionData=this.getData(this.localVersionDataPath,!0);null==this.localVersionData&&(this.localVersionData={});this.deleteFile(this.localVersionCodePath);this.save("appVersion.manifest",JSON.stringify(b));if(b=this.getData(this.localVersionCodePath,!1))for(a in b)b[a]!=this.localVersionData[a]&&this.deleteFile(a);else b={};for(a in this.localVersionData)b[a]!=this.localVersionData[a]&&this.deleteFile(a);this.save(this.localVersionDataPath,JSON.stringify(this.localVersionData));
this.loadCodeVersion();return}}this.localVersionData=this.getLocalData(this.localVersionDataPath);null==this.localVersionData&&(this.localVersionData=this.getLocalData(this.baseVersionDataPath),null==this.localVersionData&&(this.localVersionData={}),this.save(this.localVersionDataPath,JSON.stringify(this.localVersionData)));this.loadCodeVersion()};a.deleteFile=function(b){egret_native.deleteUpdateFile&&egret_native.deleteUpdateFile(b)};a.loadCodeVersion=function(){var b=1;this.newCode=1;var a=this.getLocalData(this.localVersionCodePath);
null!=a&&(b=a.code);a=this.getLocalData(this.serverVersionCodePath);null!=a&&(this.newCode=a.code);this.loadBaseVersion(b!=this.newCode)};a.loadBaseVersion=function(b){this.baseVersionData=this.getLocalData(this.baseVersionDataPath);this.changeVersionData=this.getLocalData(this.changeVersionDataPath);var a=this;null==a.baseVersionData||b?a.loadFile(a.baseVersionDataPath,function(){a.baseVersionData=a.getLocalData(a.baseVersionDataPath);a.loadBaseOver()}):a.loadBaseOver()};a.loadBaseOver=function(){this.save(this.localVersionCodePath,
JSON.stringify({code:this.newCode}));this.loadOver()};a.loadFile=function(b,a){void 0===a&&(a=null);this._call=a;this._load.load(b,1E3)};a.fileLoadComplete=function(b){this._call&&this._call()};a.loadError=function(b){this._load.removeEventListener(c.IOErrorEvent.IO_ERROR,this.loadError,this);this._load.removeEventListener(c.Event.COMPLETE,this.fileLoadComplete,this);this.dispatchEvent(b)};a.loadOver=function(){this._load.removeEventListener(c.IOErrorEvent.IO_ERROR,this.loadError,this);this._load.removeEventListener(c.Event.COMPLETE,
this.fileLoadComplete,this);this.dispatchEvent(new c.Event(c.Event.COMPLETE))};a.save=function(b,a){egret_native.writeFileSync?egret_native.writeFileSync(b,a):egret_native.saveRecord&&egret_native.saveRecord(b,a)};a.getData=function(b,a){if(egret_native.readUpdateFileSync&&egret_native.readResourceFileSync){var c=a?egret_native.readResourceFileSync(b):egret_native.readUpdateFileSync(b);return null!=c?JSON.parse(c):null}return this.getLocalDataByOld(b)};a.getLocalData=function(b){if(egret_native.readUpdateFileSync&&
egret_native.readResourceFileSync){var a=egret_native.readUpdateFileSync(b);if(null!=a)return JSON.parse(a);a=egret_native.readResourceFileSync(b);return null!=a?JSON.parse(a):null}return this.getLocalDataByOld(b)};a.getLocalDataByOld=function(b){var a=null;egret_native.isRecordExists(b)?(b=egret_native.loadRecord(b),a=JSON.parse(b)):egret_native.isFileExists(b)&&(b=egret_native.readFileSync(b),a=JSON.parse(b));return a};a.getChangeList=function(){if(!this.baseVersionData)return[];var b={},a;for(a in this.changeVersionData)1==
this.changeVersionData[a].d?delete this.baseVersionData[a]:this.baseVersionData[a]=this.changeVersionData[a];for(a in this.baseVersionData)null!=this.localVersionData[a]&&this.compareVersion(this.localVersionData,this.baseVersionData,a)||(b[a]={url:a,size:this.baseVersionData[a].s});var c=[];for(a in b)c.push(b[a]);return c};a.compareVersion=function(b,a,c){return null==b[c]||null==a[c]?!1:b[c].v==a[c].v};a.checkIsNewVersion=function(b){return this.baseVersionData?null!=this.changeVersionData[b]?
this.compareVersion(this.changeVersionData,this.localVersionData,b):null!=this.baseVersionData[b]?this.compareVersion(this.baseVersionData,this.localVersionData,b):!0:!0};a.saveVersion=function(b){if(this.baseVersionData){var a=!1;null!=this.changeVersionData[b]?this.compareVersion(this.changeVersionData,this.localVersionData,b)||(a=!0,this.localVersionData[b]=this.changeVersionData[b]):null==this.baseVersionData[b]||this.compareVersion(this.baseVersionData,this.localVersionData,b)||(a=!0,this.localVersionData[b]=
this.baseVersionData[b]);a&&this.save(this.localVersionDataPath,JSON.stringify(this.localVersionData))}};a.getVirtualUrl=function(b){return b};return d}(c.EventDispatcher);c.NativeVersionController=f;f.prototype.__class__="egret.NativeVersionController"})(egret||(egret={}));var RES;
(function(c){var f=function(c){function d(a,b,d){void 0===b&&(b=!1);void 0===d&&(d=!1);c.call(this,a,b,d);this.itemsTotal=this.itemsLoaded=0;this.groupName="";this.resItem=null}__extends(d,c);d.dispatchResourceEvent=function(a,b,c,e,f,l){void 0===c&&(c="");void 0===e&&(e=null);void 0===f&&(f=0);void 0===l&&(l=0);var h=egret.Event._getPropertyData(d);h.groupName=c;h.resItem=e;h.itemsLoaded=f;h.itemsTotal=l;egret.Event._dispatchByTarget(d,a,b,h)};d.ITEM_LOAD_ERROR="itemLoadError";d.CONFIG_COMPLETE=
"configComplete";d.CONFIG_LOAD_ERROR="configLoadError";d.GROUP_PROGRESS="groupProgress";d.GROUP_COMPLETE="groupComplete";d.GROUP_LOAD_ERROR="groupLoadError";return d}(egret.Event);c.ResourceEvent=f;f.prototype.__class__="RES.ResourceEvent"})(RES||(RES={}));
(function(c){var f=function(){function c(a,b,d){this.groupName="";this.data=null;this._loaded=!1;this.name=a;this.url=b;this.type=d}var d=c.prototype;Object.defineProperty(d,"loaded",{get:function(){return this.data?this.data.loaded:this._loaded},set:function(a){this.data&&(this.data.loaded=a);this._loaded=a},enumerable:!0,configurable:!0});d.toString=function(){return'[ResourceItem name="'+this.name+'" url="'+this.url+'" type="'+this.type+'"]'};c.TYPE_XML="xml";c.TYPE_IMAGE="image";c.TYPE_BIN="bin";
c.TYPE_TEXT="text";c.TYPE_JSON="json";c.TYPE_SHEET="sheet";c.TYPE_FONT="font";c.TYPE_SOUND="sound";return c}();c.ResourceItem=f;f.prototype.__class__="RES.ResourceItem"})(RES||(RES={}));
(function(c){var f=function(){function e(){this.keyMap={};this.groupDic={};c.configInstance=this}var d=e.prototype;d.getGroupByName=function(a){var b=[];if(!this.groupDic[a])return b;a=this.groupDic[a];for(var c=a.length,d=0;d<c;d++)b.push(this.parseResourceItem(a[d]));return b};d.getRawGroupByName=function(a){return this.groupDic[a]?this.groupDic[a]:[]};d.createGroup=function(a,b,c){void 0===c&&(c=!1);if(!c&&this.groupDic[a]||!b||0==b.length)return!1;c=this.groupDic;for(var d=[],e=b.length,f=0;f<
e;f++){var h=b[f],k=c[h];if(k)for(var h=k.length,m=0;m<h;m++){var n=k[m];-1==d.indexOf(n)&&d.push(n)}else(n=this.keyMap[h])?-1==d.indexOf(n)&&d.push(n):egret.$warn(2E3,h)}if(0==d.length)return!1;this.groupDic[a]=d;return!0};d.parseConfig=function(a,b){if(a){var c=a.resources;if(c)for(var d=c.length,e=0;e<d;e++){var f=c[e],h=f.url;h&&-1==h.indexOf("://")&&(f.url=b+h);this.addItemToKeyMap(f)}if(c=a.groups)for(d=c.length,e=0;e<d;e++){for(var h=c[e],k=[],m=h.keys.split(","),n=m.length,q=0;q<n;q++)f=m[q].trim(),
(f=this.keyMap[f])&&-1==k.indexOf(f)&&k.push(f);this.groupDic[h.name]=k}}};d.addSubkey=function(a,b){var c=this.keyMap[b];c&&!this.keyMap[a]&&(this.keyMap[a]=c)};d.addItemToKeyMap=function(a){this.keyMap[a.name]||(this.keyMap[a.name]=a);if(a.hasOwnProperty("subkeys")){var b=a.subkeys.split(",");a.subkeys=b;for(var c=b.length,d=0;d<c;d++){var e=b[d];null==this.keyMap[e]&&(this.keyMap[e]=a)}}};d.getName=function(a){return(a=this.keyMap[a])?a.name:""};d.getType=function(a){return(a=this.keyMap[a])?a.type:
""};d.getRawResourceItem=function(a){return this.keyMap[a]};d.getResourceItem=function(a){return(a=this.keyMap[a])?this.parseResourceItem(a):null};d.parseResourceItem=function(a){var b=new c.ResourceItem(a.name,a.url,a.type);b.data=a;return b};return e}();c.ResourceConfig=f;f.prototype.__class__="RES.ResourceConfig"})(RES||(RES={}));
(function(c){var f=function(e){function d(){e.call(this);this.thread=2;this.loadingCount=0;this.resInstance=this.callBack=null;this.groupTotalDic={};this.numLoadedDic={};this.itemListDic={};this.groupErrorDic={};this.retryTimesDic={};this.maxRetryTimes=3;this.failedList=[];this.priorityQueue={};this.lazyLoadList=[];this.analyzerDic={};this.queueIndex=0}__extends(d,e);var a=d.prototype;a.isGroupInLoading=function(b){return void 0!==this.itemListDic[b]};a.loadGroup=function(b,a,d){void 0===d&&(d=0);
if(!this.itemListDic[a]&&a)if(b&&0!=b.length){this.priorityQueue[d]?this.priorityQueue[d].push(a):this.priorityQueue[d]=[a];this.itemListDic[a]=b;d=b.length;for(var e=0;e<d;e++)b[e].groupName=a;this.groupTotalDic[a]=b.length;this.numLoadedDic[a]=0;this.next()}else egret.$warn(2001,a),b=new c.ResourceEvent(c.ResourceEvent.GROUP_LOAD_ERROR),b.groupName=a,this.dispatchEvent(b)};a.loadItem=function(b){this.lazyLoadList.push(b);b.groupName="";this.next()};a.next=function(){for(;this.loadingCount<this.thread;){var b=
this.getOneResourceItem();if(!b)break;this.loadingCount++;if(b.loaded)this.onItemComplete(b);else{var a=this.analyzerDic[b.type];a||(a=this.analyzerDic[b.type]=egret.Injector.getInstance(c.AnalyzerBase,b.type));a.loadFile(b,this.onItemComplete,this)}}};a.getOneResourceItem=function(){if(0<this.failedList.length)return this.failedList.shift();var b=Number.NEGATIVE_INFINITY,a;for(a in this.priorityQueue)b=Math.max(b,a);b=this.priorityQueue[b];if(!b||0==b.length)return 0==this.lazyLoadList.length?null:
this.lazyLoadList.pop();a=b.length;for(var c,d=0;d<a;d++){this.queueIndex>=a&&(this.queueIndex=0);c=this.itemListDic[b[this.queueIndex]];if(0<c.length)break;this.queueIndex++}return 0==c.length?null:c.shift()};a.onItemComplete=function(b){this.loadingCount--;var a=b.groupName;if(!b.loaded){var d=this.retryTimesDic[b.name]||1;if(d>this.maxRetryTimes)delete this.retryTimesDic[b.name],c.ResourceEvent.dispatchResourceEvent(this.resInstance,c.ResourceEvent.ITEM_LOAD_ERROR,a,b);else{this.retryTimesDic[b.name]=
d+1;this.failedList.push(b);this.next();return}}if(a){this.numLoadedDic[a]++;var d=this.numLoadedDic[a],e=this.groupTotalDic[a];b.loaded||(this.groupErrorDic[a]=!0);c.ResourceEvent.dispatchResourceEvent(this.resInstance,c.ResourceEvent.GROUP_PROGRESS,a,b,d,e);d==e&&(b=this.groupErrorDic[a],this.removeGroupName(a),delete this.groupTotalDic[a],delete this.numLoadedDic[a],delete this.itemListDic[a],delete this.groupErrorDic[a],b?c.ResourceEvent.dispatchResourceEvent(this,c.ResourceEvent.GROUP_LOAD_ERROR,
a):c.ResourceEvent.dispatchResourceEvent(this,c.ResourceEvent.GROUP_COMPLETE,a))}else this.callBack.call(this.resInstance,b);this.next()};a.removeGroupName=function(b){for(var a in this.priorityQueue){for(var c=this.priorityQueue[a],d=c.length,e=0,f=!1,d=c.length,k=0;k<d;k++){if(c[k]==b){c.splice(e,1);f=!0;break}e++}if(f){0==c.length&&delete this.priorityQueue[a];break}}};return d}(egret.EventDispatcher);c.ResourceLoader=f;f.prototype.__class__="RES.ResourceLoader"})(RES||(RES={}));
(function(c){var f=function(e){function d(){e.call(this);this.resourceConfig=null;this.resourceConfig=c.configInstance}__extends(d,e);var a=d.prototype;a.addSubkey=function(b,a){this.resourceConfig.addSubkey(b,a)};a.loadFile=function(b,a,c){};a.getRes=function(b){};a.destroyRes=function(b){return!1};d.getStringPrefix=function(b){if(!b)return"";var a=b.indexOf(".");return-1!=a?b.substring(0,a):""};d.getStringTail=function(b){if(!b)return"";var a=b.indexOf(".");return-1!=a?b.substring(a+1):""};return d}(egret.HashObject);
c.AnalyzerBase=f;f.prototype.__class__="RES.AnalyzerBase"})(RES||(RES={}));
(function(c){var f=function(c){function d(){c.call(this);this.fileDic={};this.resItemDic=[];this._dataFormat=egret.URLLoaderDataFormat.BINARY;this.recycler=new egret.Recycler}__extends(d,c);var a=d.prototype;a.loadFile=function(b,a,c){if(this.fileDic[b.name])a.call(c,b);else{var d=this.getLoader();this.resItemDic[d.hashCode]={item:b,func:a,thisObject:c};d.load(new egret.URLRequest(b.url))}};a.getLoader=function(){var b=this.recycler.pop();b||(b=new egret.URLLoader,b.addEventListener(egret.Event.COMPLETE,
this.onLoadFinish,this),b.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this));b.dataFormat=this._dataFormat;return b};a.onLoadFinish=function(b){var a=b.target,c=this.resItemDic[a.hashCode];delete this.resItemDic[a.hashCode];var d=c.item,e=c.func;d.loaded=b.type==egret.Event.COMPLETE;d.loaded&&this.analyzeData(d,a.data);this.recycler.push(a);e.call(c.thisObject,d)};a.analyzeData=function(b,a){var c=b.name;!this.fileDic[c]&&a&&(this.fileDic[c]=a)};a.getRes=function(b){return this.fileDic[b]};
a.hasRes=function(b){return null!=this.getRes(b)};a.destroyRes=function(b){return this.fileDic[b]?(this.onResourceDestroy(this.fileDic[b]),delete this.fileDic[b],!0):!1};a.onResourceDestroy=function(b){};return d}(c.AnalyzerBase);c.BinAnalyzer=f;f.prototype.__class__="RES.BinAnalyzer"})(RES||(RES={}));
(function(c){var f=function(c){function d(){c.call(this);this._dataFormat=egret.URLLoaderDataFormat.TEXTURE}__extends(d,c);var a=d.prototype;a.analyzeData=function(b,a){var c=b.name;!this.fileDic[c]&&a&&(this.fileDic[c]=a,(c=b.data)&&c.scale9grid&&(c=c.scale9grid.split(","),a.scale9Grid=new egret.Rectangle(parseInt(c[0]),parseInt(c[1]),parseInt(c[2]),parseInt(c[3]))))};a.onResourceDestroy=function(b){b.dispose()};return d}(c.BinAnalyzer);c.ImageAnalyzer=f;f.prototype.__class__="RES.ImageAnalyzer"})(RES||
(RES={}));(function(c){var f=function(c){function d(){c.call(this);this._dataFormat=egret.URLLoaderDataFormat.TEXT}__extends(d,c);d.prototype.analyzeData=function(a,b){var c=a.name;if(!this.fileDic[c]&&b)try{this.fileDic[c]=JSON.parse(b)}catch(d){egret.$warn(1017,a.url,b)}};return d}(c.BinAnalyzer);c.JsonAnalyzer=f;f.prototype.__class__="RES.JsonAnalyzer"})(RES||(RES={}));
(function(c){var f=function(c){function d(){c.call(this);this._dataFormat=egret.URLLoaderDataFormat.TEXT}__extends(d,c);return d}(c.BinAnalyzer);c.TextAnalyzer=f;f.prototype.__class__="RES.TextAnalyzer"})(RES||(RES={}));
(function(c){var f=function(e){function d(){e.call(this);this.sheetMap={};this.textureMap={};this._dataFormat=egret.URLLoaderDataFormat.TEXT}__extends(d,e);var a=d.prototype;a.getRes=function(b){var a=this.fileDic[b];a||(a=this.textureMap[b]);!a&&(a=c.AnalyzerBase.getStringPrefix(b),a=this.fileDic[a])&&(b=c.AnalyzerBase.getStringTail(b),a=a.getTexture(b));return a};a.onLoadFinish=function(b){var a=b.target,c=this.resItemDic[a.hashCode];delete this.resItemDic[a.hashCode];var d=c.item,e=c.func;d.loaded=
b.type==egret.Event.COMPLETE;if(d.loaded)if("string"==typeof a.data){if(d.loaded=!1,b=this.analyzeConfig(d,a.data)){a=d.url;d.url=b;this._dataFormat=egret.URLLoaderDataFormat.TEXTURE;this.loadFile(d,e,c.thisObject);this._dataFormat=egret.URLLoaderDataFormat.TEXT;d.url=a;return}}else this.analyzeBitmap(d,a.data);this.recycler.push(a);e.call(c.thisObject,d)};a.analyzeConfig=function(b,a){var c=b.name,d,e="";try{d=JSON.parse(a)}catch(f){egret.$warn(1017,b.url,a)}d&&(this.sheetMap[c]=d,e=this.getRelativePath(b.url,
d.file));return e};a.analyzeBitmap=function(b,a){var c=b.name;if(!this.fileDic[c]&&a){var d=this.sheetMap[c];delete this.sheetMap[c];d=this.parseSpriteSheet(a,d,b.data&&b.data.subkeys?"":c);this.fileDic[c]=d}};a.getRelativePath=function(b,a){b=b.split("\\").join("/");var c=b.lastIndexOf("/");return b=-1!=c?b.substring(0,c+1)+a:a};a.parseSpriteSheet=function(b,a,c){a=a.frames;if(!a)return null;var d=new egret.SpriteSheet(b),e=this.textureMap,f;for(f in a){var k=a[f];b=d.createTexture(f,k.x,k.y,k.w,
k.h,k.offX,k.offY,k.sourceW,k.sourceH);k.scale9grid&&(k=k.scale9grid.split(","),b.scale9Grid=new egret.Rectangle(parseInt(k[0]),parseInt(k[1]),parseInt(k[2]),parseInt(k[3])));null==e[f]&&(e[f]=b,c&&this.addSubkey(f,c))}return d};a.destroyRes=function(b){var a=this.fileDic[b];if(a){delete this.fileDic[b];for(var c in a._textureMap)this.textureMap[c]&&delete this.textureMap[c];this.onResourceDestroy(a);return!0}return!1};a.onResourceDestroy=function(b){b.dispose()};return d}(c.BinAnalyzer);c.SheetAnalyzer=
f;f.prototype.__class__="RES.SheetAnalyzer"})(RES||(RES={}));
(function(c){var f=function(c){function d(){c.call(this)}__extends(d,c);var a=d.prototype;a.analyzeConfig=function(b,a){var c=b.name,d,e="";try{d=JSON.parse(a)}catch(f){}d?e=this.getRelativePath(b.url,d.file):(d=a,e=this.getTexturePath(b.url,d));this.sheetMap[c]=d;return e};a.analyzeBitmap=function(b,a){var c=b.name;if(!this.fileDic[c]&&a){var d=this.sheetMap[c];delete this.sheetMap[c];d=new egret.BitmapFont(a,d);this.fileDic[c]=d}};a.getTexturePath=function(b,a){var c="",d=a.split("\n")[2],e=d.indexOf('file="');
-1!=e&&(d=d.substring(e+6),e=d.indexOf('"'),c=d.substring(0,e));b=b.split("\\").join("/");e=b.lastIndexOf("/");return b=-1!=e?b.substring(0,e+1)+c:c};a.onResourceDestroy=function(b){b.dispose()};return d}(c.SheetAnalyzer);c.FontAnalyzer=f;f.prototype.__class__="RES.FontAnalyzer"})(RES||(RES={}));
(function(c){var f=function(c){function d(){c.call(this);this._dataFormat=egret.URLLoaderDataFormat.SOUND}__extends(d,c);d.prototype.analyzeData=function(a,b){var c=a.name;!this.fileDic[c]&&b&&(this.fileDic[c]=b,(c=a.data)&&c.soundType?b.preload(c.soundType):b.preload(egret.Sound.EFFECT))};return d}(c.BinAnalyzer);c.SoundAnalyzer=f;f.prototype.__class__="RES.SoundAnalyzer"})(RES||(RES={}));
(function(c){var f=function(c){function d(){c.call(this);this._dataFormat=egret.URLLoaderDataFormat.TEXT}__extends(d,c);d.prototype.analyzeData=function(a,b){var c=a.name;if(!this.fileDic[c]&&b)try{var d=egret.XML.parse(b);this.fileDic[c]=d}catch(e){}};return d}(c.BinAnalyzer);c.XMLAnalyzer=f;f.prototype.__class__="RES.XMLAnalyzer"})(RES||(RES={}));
(function(c){c.loadConfig=function(c,a,b){void 0===a&&(a="");void 0===b&&(b="json");e.loadConfig(c,a,b)};c.loadGroup=function(c,a){void 0===a&&(a=0);e.loadGroup(c,a)};c.isGroupLoaded=function(c){return e.isGroupLoaded(c)};c.getGroupByName=function(c){return e.getGroupByName(c)};c.createGroup=function(c,a,b){void 0===b&&(b=!1);return e.createGroup(c,a,b)};c.hasRes=function(c){return e.hasRes(c)};c.parseConfig=function(c,a){void 0===a&&(a="");e.parseConfig(c,a)};c.getRes=function(c){return e.getRes(c)};
c.getResAsync=function(c,a,b){e.getResAsync(c,a,b)};c.getResByUrl=function(c,a,b,g){void 0===g&&(g="");e.getResByUrl(c,a,b,g)};c.destroyRes=function(c,a){return e.destroyRes(c,a)};c.setMaxLoadingThread=function(c){e.setMaxLoadingThread(c)};c.setMaxRetryTimes=function(c){e.setMaxRetryTimes(c)};c.addEventListener=function(c,a,b,g,s){void 0===g&&(g=!1);void 0===s&&(s=0);e.addEventListener(c,a,b,g,s)};c.removeEventListener=function(c,a,b,g){void 0===g&&(g=!1);e.removeEventListener(c,a,b,g)};var f=function(d){function a(){d.call(this);
this.analyzerDic={};this.configItemList=[];this.configComplete=this.callLaterFlag=!1;this.loadedGroups=[];this.groupNameList=[];this.asyncDic={};this.init()}__extends(a,d);var b=a.prototype;b.getAnalyzerByType=function(b){var a=this.analyzerDic[b];a||(a=this.analyzerDic[b]=egret.Injector.getInstance(c.AnalyzerBase,b));return a};b.init=function(){egret.Injector.hasMapRule(c.AnalyzerBase,c.ResourceItem.TYPE_BIN)||egret.Injector.mapClass(c.AnalyzerBase,c.BinAnalyzer,c.ResourceItem.TYPE_BIN);egret.Injector.hasMapRule(c.AnalyzerBase,
c.ResourceItem.TYPE_IMAGE)||egret.Injector.mapClass(c.AnalyzerBase,c.ImageAnalyzer,c.ResourceItem.TYPE_IMAGE);egret.Injector.hasMapRule(c.AnalyzerBase,c.ResourceItem.TYPE_TEXT)||egret.Injector.mapClass(c.AnalyzerBase,c.TextAnalyzer,c.ResourceItem.TYPE_TEXT);egret.Injector.hasMapRule(c.AnalyzerBase,c.ResourceItem.TYPE_JSON)||egret.Injector.mapClass(c.AnalyzerBase,c.JsonAnalyzer,c.ResourceItem.TYPE_JSON);egret.Injector.hasMapRule(c.AnalyzerBase,c.ResourceItem.TYPE_SHEET)||egret.Injector.mapClass(c.AnalyzerBase,
c.SheetAnalyzer,c.ResourceItem.TYPE_SHEET);egret.Injector.hasMapRule(c.AnalyzerBase,c.ResourceItem.TYPE_FONT)||egret.Injector.mapClass(c.AnalyzerBase,c.FontAnalyzer,c.ResourceItem.TYPE_FONT);egret.Injector.hasMapRule(c.AnalyzerBase,c.ResourceItem.TYPE_SOUND)||egret.Injector.mapClass(c.AnalyzerBase,c.SoundAnalyzer,c.ResourceItem.TYPE_SOUND);egret.Injector.hasMapRule(c.AnalyzerBase,c.ResourceItem.TYPE_XML)||egret.Injector.mapClass(c.AnalyzerBase,c.XMLAnalyzer,c.ResourceItem.TYPE_XML);this.resConfig=
new c.ResourceConfig;this.resLoader=new c.ResourceLoader;this.resLoader.callBack=this.onResourceItemComp;this.resLoader.resInstance=this;this.resLoader.addEventListener(c.ResourceEvent.GROUP_COMPLETE,this.onGroupComp,this);this.resLoader.addEventListener(c.ResourceEvent.GROUP_LOAD_ERROR,this.onGroupError,this)};b.loadConfig=function(b,a,c){void 0===c&&(c="json");this.configItemList.push({url:b,resourceRoot:a,type:c});this.callLaterFlag||(egret.callLater(this.startLoadConfig,this),this.callLaterFlag=
!0)};b.startLoadConfig=function(){this.callLaterFlag=!1;var b=this.configItemList;this.configItemList=[];this.loadingConfigList=b;for(var d=b.length,e=[],f=0;f<d;f++){var h=b[f],h=new c.ResourceItem(h.url,h.url,h.type);e.push(h)}this.resLoader.loadGroup(e,a.GROUP_CONFIG,Number.MAX_VALUE)};b.isGroupLoaded=function(b){return-1!=this.loadedGroups.indexOf(b)};b.getGroupByName=function(b){return this.resConfig.getGroupByName(b)};b.loadGroup=function(b,a){void 0===a&&(a=0);if(-1!=this.loadedGroups.indexOf(b))c.ResourceEvent.dispatchResourceEvent(this,
c.ResourceEvent.GROUP_COMPLETE,b);else if(!this.resLoader.isGroupInLoading(b))if(this.configComplete){var d=this.resConfig.getGroupByName(b);this.resLoader.loadGroup(d,b,a)}else this.groupNameList.push({name:b,priority:a})};b.createGroup=function(b,a,c){void 0===c&&(c=!1);if(c){var d=this.loadedGroups.indexOf(b);-1!=d&&this.loadedGroups.splice(d,1)}return this.resConfig.createGroup(b,a,c)};b.onGroupComp=function(b){if(b.groupName==a.GROUP_CONFIG){b=this.loadingConfigList.length;for(var d=0;d<b;d++){var e=
this.loadingConfigList[d],f=this.getAnalyzerByType(e.type),h=f.getRes(e.url);f.destroyRes(e.url);this.resConfig.parseConfig(h,e.resourceRoot)}this.configComplete=!0;this.loadingConfigList=null;c.ResourceEvent.dispatchResourceEvent(this,c.ResourceEvent.CONFIG_COMPLETE);this.loadDelayGroups()}else this.loadedGroups.push(b.groupName),this.dispatchEvent(b)};b.loadDelayGroups=function(){var b=this.groupNameList;this.groupNameList=[];for(var a=b.length,c=0;c<a;c++){var d=b[c];this.loadGroup(d.name,d.priority)}};
b.onGroupError=function(b){b.groupName==a.GROUP_CONFIG?(this.loadingConfigList=null,c.ResourceEvent.dispatchResourceEvent(this,c.ResourceEvent.CONFIG_LOAD_ERROR)):this.dispatchEvent(b)};b.hasRes=function(b){var a=this.resConfig.getType(b);return""==a&&(b=c.AnalyzerBase.getStringPrefix(b),a=this.resConfig.getType(b),""==a)?!1:!0};b.parseConfig=function(b,a){this.resConfig.parseConfig(b,a);this.configComplete||this.loadingConfigList||(this.configComplete=!0,this.loadDelayGroups())};b.getRes=function(b){var a=
this.resConfig.getType(b);return""==a&&(a=c.AnalyzerBase.getStringPrefix(b),a=this.resConfig.getType(a),""==a)?null:this.getAnalyzerByType(a).getRes(b)};b.getResAsync=function(b,a,d){var e=this.resConfig.getType(b),f=this.resConfig.getName(b);if(""==e&&(f=c.AnalyzerBase.getStringPrefix(b),e=this.resConfig.getType(f),""==e)){a.call(d,null);return}(e=this.getAnalyzerByType(e).getRes(b))?a.call(d,e):(b={key:b,compFunc:a,thisObject:d},this.asyncDic[f]?this.asyncDic[f].push(b):(this.asyncDic[f]=[b],f=
this.resConfig.getResourceItem(f),this.resLoader.loadItem(f)))};b.getResByUrl=function(b,a,d,e){void 0===e&&(e="");if(b){e||(e=this.getTypeByUrl(b));var f=this.getAnalyzerByType(e).getRes(b);f?a.call(d,f):(a={key:b,compFunc:a,thisObject:d},this.asyncDic[b]?this.asyncDic[b].push(a):(this.asyncDic[b]=[a],b=new c.ResourceItem(b,b,e),this.resLoader.loadItem(b)))}else a.call(d,null)};b.getTypeByUrl=function(b){(b=b.substr(b.lastIndexOf(".")+1))&&(b=b.toLowerCase());switch(b){case c.ResourceItem.TYPE_XML:case c.ResourceItem.TYPE_JSON:case c.ResourceItem.TYPE_SHEET:break;
case "png":case "jpg":case "gif":case "jpeg":case "bmp":b=c.ResourceItem.TYPE_IMAGE;break;case "fnt":b=c.ResourceItem.TYPE_FONT;break;case "txt":b=c.ResourceItem.TYPE_TEXT;break;case "mp3":case "ogg":case "mpeg":case "wav":case "m4a":case "mp4":case "aiff":case "wma":case "mid":b=c.ResourceItem.TYPE_SOUND;break;default:b=c.ResourceItem.TYPE_BIN}return b};b.onResourceItemComp=function(b){var a=this.asyncDic[b.name];delete this.asyncDic[b.name];b=this.getAnalyzerByType(b.type);for(var c=a.length,d=
0;d<c;d++){var e=a[d],f=b.getRes(e.key);e.compFunc.call(e.thisObject,f,e.key)}};b.destroyRes=function(b,a){void 0===a&&(a=!0);var c=this.resConfig.getRawGroupByName(b);if(c&&0<c.length){var d=this.loadedGroups.indexOf(b);-1!=d&&this.loadedGroups.splice(d,1);for(var e=c.length,f=0;f<e;f++)if(d=c[f],a||!this.isResInLoadedGroup(d.name)){d.loaded=!1;var m=this.getAnalyzerByType(d.type);m.destroyRes(d.name);this.removeLoadedGroupsByItemName(d.name)}return!0}c=this.resConfig.getType(b);if(""==c)return!1;
d=this.resConfig.getRawResourceItem(b);d.loaded=!1;m=this.getAnalyzerByType(c);c=m.destroyRes(b);this.removeLoadedGroupsByItemName(d.name);return c};b.removeLoadedGroupsByItemName=function(b){for(var a=this.loadedGroups,c=a.length,d=0;d<c;d++)for(var e=this.resConfig.getRawGroupByName(a[d]),f=e.length,m=0;m<f;m++)if(e[m].name==b){a.splice(d,1);d--;c=a.length;break}};b.isResInLoadedGroup=function(b){for(var a=this.loadedGroups,c=a.length,d=0;d<c;d++)for(var e=this.resConfig.getRawGroupByName(a[d]),
f=e.length,m=0;m<f;m++)if(e[m].name==b)return!0;return!1};b.setMaxLoadingThread=function(b){1>b&&(b=1);this.resLoader.thread=b};b.setMaxRetryTimes=function(b){b=Math.max(b,0);this.resLoader.maxRetryTimes=b};a.GROUP_CONFIG="RES__CONFIG";return a}(egret.EventDispatcher);f.prototype.__class__="RES.Resource";var e=new f})(RES||(RES={}));
(function(c){var f=function(e){function d(){e.call(this);this._isDestroy=!1;this._listenerData2=this._listenerData=null;this._listenerData={};this._listenerData2={}}__extends(d,e);var a=d.prototype;Object.defineProperty(a,"className",{get:function(){return this.constructor.name},enumerable:!0,configurable:!0});Object.defineProperty(a,"tooltip",{get:function(){return null},set:function(b){b&&(this.touchEnabled=!0);c.TooltipManager.setTooltip(this,b)},enumerable:!0,configurable:!0});a.toString=function(){for(var b=
this.parent,a=this.className;null!=b;)a=null!=this.stage&&b==this.stage?"Stage."+a:"className"in b?b.className+"."+a:b.name+"."+a,b=b.parent;return a};a.addEventListener=function(b,a,c,d,f){void 0===d&&(d=!1);void 0===f&&(f=0);this._isDestroy||(e.prototype.addEventListener.call(this,b,a,c,d,f),d?this._listenerData2[b]=a:this._listenerData[b]=a)};a.removeEventListener=function(b,a,c,d){void 0===d&&(d=!1);this._isDestroy||e.prototype.removeEventListener.call(this,b,a,c,d)};a.destroy=function(){if(!this._isDestroy){c.DisplayObjectUtil.destroyChildren(this,
!1);this.parent&&this.parent.removeChild(this);for(var b in this._listenerData)this.removeEventListener(b,this._listenerData[b],this,!1);for(b in this._listenerData2)this.removeEventListener(b,this._listenerData2[b],this,!0);this._listenerData2=this._listenerData=null;this._isDestroy=!0}};return d}(c.Sprite);c.CoreSprite=f;f.prototype.__class__="egret.CoreSprite"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._id=this._data=null;this._depth=this._lastY=this._lastX=this._alpha=this._y=this._x=0;this._depthPoint=this._namePad=null;this._enabled=!0;this.touchChildren=this.touchEnabled=!1;this._namePad=new c.SceneElementNamePad;this.addChild(this._namePad);this._depthPoint=new c.Point;this.addListeners()}__extends(d,e);var a=d.prototype;Object.defineProperty(a,"enabled",{get:function(){return this._enabled},set:function(b){this._enabled!=b&&(this.touchEnabled=
this._enabled=b)},enumerable:!0,configurable:!0});Object.defineProperty(a,"alpha",{get:function(){return this._alpha},set:function(b){this._alpha!=b&&(this._alpha=b,e.prototype._setAlpha.call(this,b))},enumerable:!0,configurable:!0});Object.defineProperty(a,"y",{get:function(){return this._y},set:function(b){this._y!=b&&(this._y=b,e.prototype._setY.call(this,b))},enumerable:!0,configurable:!0});Object.defineProperty(a,"x",{get:function(){return this._x},set:function(b){this._x!=b&&(this._x=b,e.prototype._setX.call(this,
b))},enumerable:!0,configurable:!0});Object.defineProperty(a,"namePad",{get:function(){return this._namePad},enumerable:!0,configurable:!0});Object.defineProperty(a,"depth",{get:function(){return this.getDepth()},enumerable:!0,configurable:!0});a.getDepth=function(){if(this._lastX!=this._x||this._lastY!=this._y)this._lastX=this._x,this._lastY=this._y,this._depthPoint.x=this._x,this._depthPoint.y=this._y,this._depth=c.IsoUtil.getDepth(c.IsoUtil.getPoint3D(this._depthPoint));return this._depth};Object.defineProperty(a,
"id",{get:function(){return this._id||this.name},set:function(b){this._id=b},enumerable:!0,configurable:!0});Object.defineProperty(a,"data",{get:function(){return this._data},set:function(b){this.setData(b)},enumerable:!0,configurable:!0});a.setData=function(b){if(this._data=b)if(this._data.vo&&this._data.vo.id)this._id=this._data.vo.idString;else if(this._data.lo&&this._data.lo.id)this._id=this._data.lo.idString;else throw Error("\u65e0\u6548\u7684\u573a\u666f\u5143\u7d20\u6570\u636e\uff0cid \u4e0d\u80fd\u4e3a 0");
};a.updateName=function(){var b=null;this._data&&(this._data.vo&&(b=this._data.vo.name),!b&&this._data.lo&&(b=this._data.lo.name));b&&this._namePad.setName(b)};a.updateXY=function(){var b=this._data.vo;b&&(this.x=b.x,this.y=b.y)};a.addToScene=function(){this.updateName();this.updateXY();this.addListeners()};a.removeFromScene=function(){};a.addListeners=function(){};a.setNameTextFormat=function(b,a){void 0===b&&(b=20);void 0===a&&(a=16777215);this._namePad.setNameTextFormat(b,a)};a.destroy=function(){this._isDestroy||
(this._namePad.destroy(),e.prototype.destroy.call(this))};return d}(c.CoreSprite);c.SceneElement=f;f.prototype.__class__="egret.SceneElement"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._isDestroy=!1;this._listenerData2=this._listenerData=null;this.isResized=!1;this._preHeight=this._preWidth=0;this._stage=null;this._listenerData={};this._listenerData2={};this.addEventListener(c.Event.ADDED_TO_STAGE,this.addedToStage,this)}__extends(d,e);var a=d.prototype;Object.defineProperty(a,"className",{get:function(){return this.constructor.name},enumerable:!0,configurable:!0});a.toString=function(){for(var b=this.parent,a=this.className;null!=
b;)a=null!=this.stage&&b==this.stage?"Stage."+a:"className"in b?b.className+"."+a:b.name+"."+a,b=b.parent;return a};a.addEventListener=function(b,a,c,d,f){void 0===d&&(d=!1);void 0===f&&(f=0);this._isDestroy||(e.prototype.addEventListener.call(this,b,a,c,d,f),d?this._listenerData2[b]=a:this._listenerData[b]=a)};a.removeEventListener=function(b,a,c,d){void 0===d&&(d=!1);this._isDestroy||e.prototype.removeEventListener.call(this,b,a,c,d)};a.addChild=function(b){this.recordWH();e.prototype.addChild.call(this,
b);this.checkResize();return b};a.addChildAt=function(b,a){void 0===a&&(a=0);this.recordWH();e.prototype.addChildAt.call(this,b,a);this.checkResize();return b};a.removeChild=function(b){this.recordWH();e.prototype.removeChild.call(this,b);this.checkResize();return b};a.removeChildAt=function(b){void 0===b&&(b=0);this.recordWH();b=e.prototype.removeChildAt.call(this,b);this.checkResize();return b};a.destroy=function(){if(!this._isDestroy){c.DisplayObjectUtil.destroyChildren(this,!0);this.parent&&this.parent.removeChild(this);
for(var b in this._listenerData)this.removeEventListener(b,this._listenerData[b],this,!1);for(b in this._listenerData2)this.removeEventListener(b,this._listenerData2[b],this,!0);this._listenerData2=this._listenerData=null;this._isDestroy=!0}};a.addedToStage=function(b){this.removeEventListener(c.Event.ADDED_TO_STAGE,this.addedToStage,this)};a.recordWH=function(){this._preHeight=this.height;this._preWidth=this.width};a.checkResize=function(){this.isResized&&(this._preWidth==this.width&&this._preHeight==
this.height||this.dispatchEvent(new c.Event(c.Event.RESIZE,!1,!1)))};return d}(c.DisplayObjectContainer);c.CoreContainer=f;f.prototype.__class__="egret.CoreContainer"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._overFilters=[new c.GlowFilter(65535,1,2,2,3,1)];this._layerHashMap=this._sceneAvatarVo=this._avatar=null;this.touchEnabled=!0;this._layerHashMap=new c.HashMap;this._sceneAvatarVo=new c.SceneAvatarVo;this._avatar=new c.Avatar;this.show(this._avatar,c.SceneElementLayerType.ACTION)}__extends(d,e);var a=d.prototype;a.setAvatarDirectionSplit=function(b){this._avatar.directionSplit=b};a.setIsCheckResource=function(b){this._avatar.isCheckResource=
b};a.setMovieName=function(b){var a=this._data;a||(a=new c.SceneElementDataItem);var d=a.lo;d||(d=new c.SceneElementLo,d.id=c.dataManager().sceneElementData.getAutoElementId(),d.idString=d.id+"");d.movieName=b;a.lo=d;this.setData(a)};Object.defineProperty(a,"avatar",{get:function(){return this._avatar},enumerable:!0,configurable:!0});Object.defineProperty(a,"sceneAvatarVo",{get:function(){return this._sceneAvatarVo},set:function(b){this._sceneAvatarVo=b},enumerable:!0,configurable:!0});Object.defineProperty(a,
"isPlayed",{get:function(){return this._avatar.isPlayed},enumerable:!0,configurable:!0});Object.defineProperty(a,"actionType",{get:function(){return this._avatar.actionType},set:function(b){this._avatar.actionType!=b&&(this._avatar.actionType=b)},enumerable:!0,configurable:!0});Object.defineProperty(a,"direction",{get:function(){return this._avatar.direction},set:function(b){this._avatar.direction!=b&&(this._avatar.direction=b)},enumerable:!0,configurable:!0});a.play=function(b,a,d,e,f,h,k,m){void 0===
b&&(b=-1);void 0===a&&(a=-1);void 0===d&&(d=-1);void 0===e&&(e=0);void 0===f&&(f=null);void 0===h&&(h=null);void 0===k&&(k=null);void 0===m&&(m=null);if(!this._isDestroy&&this._sceneAvatarVo.body){if(f&&!h)throw Error("\u672a\u6307\u5b9a\u56de\u8c03\u51fd\u6570\u5bf9\u8c61");var n=c.ActionPartType.TYPES_BODY_ONLY;this._avatar.play(b,a,d,e,f,h,k,m);this._avatar.setPartTypes(n,this.getPartUrl,this,this.loadActionComplete,this);this._namePad.y=this._avatar.topLineY}};a.loadActionComplete=function(){this._namePad.y=
this._avatar.topLineY};a.stop=function(b,a,c){void 0===b&&(b=-1);void 0===a&&(a=-1);void 0===c&&(c=-1);this._avatar.stop(b,a,c)};a.setActionVo=function(b,a){this._avatar.setActionPart(b,a)};a.getActionVo=function(b){return this._avatar.getActionVo(b)};a.setActionUrl=function(b,a,c){void 0===c&&(c=null);this._avatar.setActionUrl(b,a,c)};a.getLayerContainer=function(b){void 0===b&&(b=0);var a=null,a=this._layerHashMap.get(b);if(!a){var d=c.SceneElementLayerType.LAYER_MOUSE_CONFIGS[b],a=new c.DisplayObjectContainer;
a.name="sceneElementInteractiveLayer"+b;a.touchEnabled=d.touchEnabled;a.touchChildren=d.touchChildren;this.addChild(a);this._layerHashMap.put(b,a);b=this._layerHashMap.keys();b.sort(c.ArrayUtil.numeric);for(var d=b.length,e=0;e<d;e++)this.setChildIndex(this._layerHashMap.get(b[e]),e)}return a};a.show=function(b,a,c,d){void 0===c&&(c=NaN);void 0===d&&(d=NaN);(a=this.getLayerContainer(a))&&b.parent!=a&&a.addChild(b);isNaN(c)||(b.x=c);isNaN(d)||(b.y=d)};a.hide=function(b){b&&b.parent&&b.parent.removeChild(b)};
a.updateAvatar=function(b){this.setData(b);this._avatar.clear(!1);this.play()};a.setData=function(b){e.prototype.setData.call(this,b);c.SceneElementData.getInstance().setSceneAvatarVo(this._sceneAvatarVo,b.lo)};a.addToScene=function(){e.prototype.addToScene.call(this)};a.removeFromScene=function(){e.prototype.removeFromScene.call(this);this.removeEventListener(c.TouchEvent.TOUCH_ROLL_OVER,this.roleOverHandler,this);this.removeEventListener(c.TouchEvent.TOUCH_ROLL_OUT,this.roleOutHandler,this);this.roleOutHandler();
this.stop();this._avatar.clear()};a.destroy=function(){this._isDestroy||(this._avatar.destroy(),e.prototype.destroy.call(this))};a.addListeners=function(){e.prototype.addListeners.call(this)};a.roleOverHandler=function(b){};a.checkAlpha=function(){};a.roleOutHandler=function(b){this.filters=null};a.getPartUrl=function(b){var a=c.PathData.PATH_MOVIES_COMMON;b=this._sceneAvatarVo[b];return c.dataManager().sceneElementData.getActionUrl(a,b,this._avatar.actionType)};return d}(c.SceneElement);c.SceneElementInteractive=
f;f.prototype.__class__="egret.SceneElementInteractive"})(egret||(egret={}));(function(c){var f=function(){return function(){}}();c.BaseVo=f;f.prototype.__class__="egret.BaseVo"})(egret||(egret={}));
(function(c){var f=function(e){function d(b,a){void 0===b&&(b=0);void 0===a&&(a=-1);e.call(this);this.applicationManager=null;this._layerType=0;this._align=c.AlignType.NONE;this._updateHashMap=null;this._right=this._left=this._bottom=this._top=0;this._layerType=b;this._align=a;this._updateHashMap=new c.HashMap}__extends(d,e);var a=d.prototype;Object.defineProperty(a,"right",{get:function(){return this._right},set:function(b){this._right!=b&&(this._right=b,this.align=this._align)},enumerable:!0,configurable:!0});
Object.defineProperty(a,"left",{get:function(){return this._left},set:function(b){this._left!=b&&(this._left=b,this.align=this._align)},enumerable:!0,configurable:!0});Object.defineProperty(a,"bottom",{get:function(){return this._bottom},set:function(b){this._bottom!=b&&(this._bottom=b,this.align=this._align)},enumerable:!0,configurable:!0});Object.defineProperty(a,"top",{get:function(){return this._top},set:function(b){this._top!=b&&(this._top=b,this.align=this._align)},enumerable:!0,configurable:!0});
Object.defineProperty(a,"align",{get:function(){return this._align},set:function(b){this._align=b;this.applicationManager?this.applicationManager.setAlign(this,this._align):c.ApplicationManager.getInstance().setAlign(this,this._align)},enumerable:!0,configurable:!0});Object.defineProperty(a,"layerType",{get:function(){return this._layerType},set:function(b){this._layerType!=b&&(this._layerType=b)},enumerable:!0,configurable:!0});a.initWindow=function(){};a.addEvents=function(){};a.globalUpdate=function(b){for(var a=
1;a<arguments.length;a++);};a.update=function(){for(var b=0;b<arguments.length;b++);};a.recall=function(){this.stage&&this.addEvents();this.applicationManager?this.applicationManager.dispatchRecall(this):c.ApplicationManager.getInstance().dispatchRecall(this)};a.remove=function(){};a.addUpdateType=function(){for(var b=[],a=0;a<arguments.length;a++)b[a-0]=arguments[a];for(var a=b.length,c=0;c<a;c++){var d=b[c];this._updateHashMap.containsKey(d)||this._updateHashMap.put(d,!0)}};a.removeUpdateType=function(){for(var b=
[],a=0;a<arguments.length;a++)b[a-0]=arguments[a];for(var a=b.length,c=0;c<a;c++)this._updateHashMap.remove(b[c])};a.hasUpdateType=function(b){void 0===b&&(b=0);return this._updateHashMap.get(b)};a.destroy=function(){this._isDestroy||e.prototype.destroy.call(this)};return d}(c.CoreContainer);c.Window=f;f.prototype.__class__="egret.Window"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.pathPartValue=1E3;this.onStopMove=this.nodeChangedHandler=this.movingEndHandler=this.movingHandler=null;this._finalY=this._finalX=this._targetY=this._targetX=this._speed=0;this._currentNode=this._pathTargetNode=this._targetNode=null;this._hasSetTarget=this._hasPath=!1;this._isMovingEnd=!0;this._isDispatchStart=!1;this._isoSize=20;this._mapHeight=this._mapWidth=this._halfSize=this._isoSize2=0;this._isoMap=null;this._nodeInterval=2;this._isFollowed=
!1;this._pathNodes=this._mapNodes=this.pathTypes=null;this._trackIndex=this._moveIndex=0;this._recoverPoints=this._passingPoints=this._passingNodes=null;this._maxY=this._maxX=this._floorOffsetHeight=this._floorOffsetWidth=this._toplimitOffsetHeight=this._toplimitOffsetWidth=this._timeDelay=this._speedAbsY=this._speedAbsX=this._speedY=this._speedX=0;this._finalPoint=null;this._isRole=this._isMoving=!1;this._centerNode=this._targetPoint3D=this._neerPoint3D=this._neerNode=this._neerPoint=this._nodePoint=
this._nodeColumns=this._nodeLines=this._isoNodePoint=this._isoPoint=this._pathPartPoint=this._distancePoint=null;this._passingNodeIndex=this._passingIndex=0;this._nodeChangedFlag=!0;var b=d.PASSING_POINT_COUNT+1;this._passingNodes=[];this._passingPoints=[];this._recoverPoints=[];for(var a=0;a<b;a++)this._recoverPoints[a]=new c.PassingPoint;this._isoNodePoint=new c.Point;this._distancePoint=new c.Point;this._pathPartPoint=new c.Point;this._nodePoint=new c.Point;this._neerPoint=new c.Point;this._isoPoint=
new c.Point;this._targetPoint3D=new c.Point3D;this._neerPoint3D=new c.Point3D;this._nodeLines=[];this._nodeColumns=[];this._neerNode=new c.IsoNode;this._neerNode.init();this._targetNode=new c.IsoNode;this._targetNode.init();this._currentNode=new c.IsoNode;this._currentNode.init();this._centerNode=new c.IsoNode;this._centerNode.init()}__extends(d,e);var a=d.prototype;Object.defineProperty(a,"finalPoint",{get:function(){return this._finalPoint},enumerable:!0,configurable:!0});Object.defineProperty(a,
"finalY",{get:function(){return this._finalPoint?this._finalPoint.x:this._finalY},enumerable:!0,configurable:!0});Object.defineProperty(a,"finalX",{get:function(){return this._finalPoint?this._finalPoint.y:this._finalX},enumerable:!0,configurable:!0});Object.defineProperty(a,"isRole",{get:function(){return this._isRole},set:function(b){this._isRole=b;this.pathPartValue=4600},enumerable:!0,configurable:!0});Object.defineProperty(a,"isMoving",{get:function(){return this._isMoving},enumerable:!0,configurable:!0});
Object.defineProperty(a,"pathNodes",{get:function(){return this._pathNodes},enumerable:!0,configurable:!0});Object.defineProperty(a,"passingPoints",{get:function(){return this._passingPoints},enumerable:!0,configurable:!0});Object.defineProperty(a,"passingNodes",{get:function(){return this._passingNodes},enumerable:!0,configurable:!0});Object.defineProperty(a,"depth",{get:function(){var b=this.currentNode;return(b=this._isoMap.getMapNode(b.row,b.column))?b.depth:e.prototype.getDepth.call(this)},enumerable:!0,
configurable:!0});Object.defineProperty(a,"isFollowed",{get:function(){return this._isFollowed},set:function(b){this._isFollowed=b},enumerable:!0,configurable:!0});Object.defineProperty(a,"nodeInterval",{get:function(){return this._nodeInterval},set:function(b){this._nodeInterval=b},enumerable:!0,configurable:!0});Object.defineProperty(a,"speed",{get:function(){return this._speed},set:function(b){this._speed!=b&&(this._speed=b,this._speed=Math.max(2,this._speed))},enumerable:!0,configurable:!0});
Object.defineProperty(a,"currentNode",{get:function(){-1==this._currentNode.row&&this._currentNode.copyBy(this.centerNode);return this._currentNode},enumerable:!0,configurable:!0});Object.defineProperty(a,"canMove",{get:function(){return this._x==this._finalX&&this._y==this._finalY?!1:!0},enumerable:!0,configurable:!0});Object.defineProperty(a,"isArrive",{get:function(){return this._x==this._finalX&&this._y==this._finalY&&null==this._finalPoint},enumerable:!0,configurable:!0});Object.defineProperty(a,
"centerNode",{get:function(){this._centerNode.copyBy(this.getIsoNode(this._x,this._y));return this._centerNode},enumerable:!0,configurable:!0});Object.defineProperty(a,"targetNode",{get:function(){return this._targetNode},enumerable:!0,configurable:!0});a.destroy=function(){this._isDestroy||(this.stopMove(),e.prototype.destroy.call(this))};a.clearFollowPoints=function(){for(var b=0;b<d.PASSING_POINT_COUNT;b++)this._passingPoints[b]&&(this._recoverPoints[b]=this._passingPoints[b],this._passingPoints[b]=
null);this._passingIndex=0;for(var a=d.PASSING_NODE_COUNT+1,b=0;b<a;b++)this._passingNodes[b]=null;this._passingNodeIndex=0};a.getIsoNode=function(b,a){var c=Math.round(a/this._halfSize),d=Math.round(b/this._isoSize);this._nodeLines[0]=c-1;this._nodeLines[1]=c;this._nodeLines[2]=c+1;this._nodeColumns[0]=d-1;this._nodeColumns[1]=d;this._nodeColumns[2]=d+1;this._isoNodePoint.x=b;this._isoNodePoint.y=a;return this.getNeerNode(this._isoNodePoint,this._nodeLines,this._nodeColumns)};a.gotoXY=function(b,
a){this.setTargetNode(this.getIsoNode(b,a));this._hasSetTarget=!0;this.gotoGrid(this._targetNode.row,this._targetNode.column)};a.gotoGrid=function(b,a){this._hasSetTarget||this.setTargetNode(this.getIsoNodeByRow(b,a));this._hasSetTarget=!1;var c=this.getIsoPoint(b,a);this.setXY(c.x,c.y);this.setCurrentNode(this.centerNode)};a.moveTo=function(b,a,c){void 0===c&&(c=!0);this.setCurrentNode(this.centerNode);this.setTargetNode(this.getIsoNode(b,a));this._hasSetTarget=!0;this.moveToGridPath(this._targetNode.row,
this._targetNode.column,c)};a.moveTo2=function(b,a){this.setCurrentNode(this.centerNode);this.setTargetNode(this.getIsoNode(b,a));this._hasSetTarget=!0;this.moveToGrid(this._targetNode.row,this._targetNode.column)};a.moveTo3=function(b,a){this.moveToGrid2(b,a)};a.stopMove=function(){this._finalPoint=null;this.stopMoveInternal();null!=this.onStopMove&&this.onStopMove.apply(this.scene,[this])};a.stopMoveInternal=function(b){void 0===b&&(b=!0);this._isMoving&&!this.checkFinalPoint()&&(this.addEngine(!1),
this.clearPathNodes(),b&&this.play(-1,c.ActionType.PREPARE))};a.checkFinalPoint=function(){return this._finalPoint?(this.moveTo(this._finalPoint.x,this._finalPoint.y),!0):!1};a.moveToGrid=function(b,a){this._hasSetTarget||this.setTargetNode(this.getIsoNodeByRow(b,a));this._hasSetTarget=!1;var d=this.getIsoPoint(b,a),e=d.x,d=d.y;this.calcDistance(e,d);this.checkDistance()||(this.addEngine(!0),e=c.ActionMovieClipData.getInstance().calculateDirection(this._x,this._y,e,d),this.play(-1,c.ActionType.WALK,
e));this._isMovingEnd=!this.canMove;this._isDispatchStart||this._isMovingEnd||(this._isDispatchStart=!0)};a.moveToGrid2=function(b,a){this.calcDistance(b,a);if(!this.checkDistance()){this.addEngine(!0);var d=c.ActionMovieClipData.getInstance().calculateDirection(this._x,this._y,b,a);this.play(-1,c.ActionType.WALK,d)}this._isMovingEnd=!this.canMove;this._isDispatchStart||this._isMovingEnd||(this._isDispatchStart=!0)};a.moveToNode=function(b){this.setTargetNode(b);this._hasSetTarget=!1;var a=b.point2D;
b=a.x;a=a.y;this.calcDistance(b,a);this.checkDistance()||(this.addEngine(!0),b=c.ActionMovieClipData.getInstance().calculateDirection(this._x,this._y,b,a),this.play(-1,c.ActionType.WALK,b));this._isMovingEnd=!this.canMove;this._isDispatchStart||this._isMovingEnd||(this._isDispatchStart=!0)};a.moveToGridPath=function(b,a,d){void 0===d&&(d=!1);var e=this._currentNode.row,f=this._currentNode.column;if(b==e&&a==f)this.stopMove();else{this._currentNode||this.setCurrentNode(this.centerNode);var h=this._mapNodes.length-
1;b>=h&&(b=h);h=this._mapNodes[b].length-1;a>=h&&(a=h);e=this._mapNodes[e][f];b=this._mapNodes[b][a];if(-1==this.pathTypes.indexOf(b.type))var k=c.IsoUtil.getNeerNodeByType2(b,e,this._mapNodes,this.pathTypes);k&&(b=k);d?this.checkPathPart(b.row,b.column):2>this._pathNodes.length||(d=b.point2D,d=this.getPointDistance(d.x,d.y),this._finalX=d.x,this._finalY=d.y,this.hasEventListener(c.SceneElementEvent.SCENE_ELEMENT_PATH_CHANGED)&&this.dispatchEvent(new c.SceneElementEvent(c.SceneElementEvent.SCENE_ELEMENT_PATH_CHANGED)),
this.moveByPath())}};a.checkPathPart=function(b,a){void 0===a&&(a=0);var d=this.getIsoNodeByRow(b,a);this._pathPartPoint.x=this._x;this._pathPartPoint.y=this._y;if(c.DimensionUtil.distance(d.point2D,this._pathPartPoint)>=this.pathPartValue){this._finalPoint=d.point2D;for(var e=Math.atan2(this._finalPoint.y-this._y,this._finalPoint.x-this._x),f=Math.cos(e)*this.pathPartValue,d=Math.sin(e)*this.pathPartValue,e=f/10,h=d/10,f=f+this._x,k=d+this._y,d=this.getIsoNode(f,k),m=0;!this._isoMap.canCross(d.row,
d.column);)if(f+=e,k+=h,d=this._isoMap.getIsoNode(f,k),m++,100<m){c.LogManager.error(this,"\u67e5\u627e\u5206\u6bb5\u8def\u5f84\u9012\u5f52\u8fbe\u5230\u6700\u5927\u503c");break}b=d.row;a=d.column}else this._finalPoint=null;this.moveToGridPath(b,a,!1)};a.moveByPoints=function(b){var a=b.length-6*this._nodeInterval;if(0<=a){if(b=b[a])this.setXY(b.x,b.y),a=-1,isNaN(b.tx)||(a=c.ActionMovieClipData.getInstance().calculateDirection(this._x,this._y,b.tx,b.ty)),this.play(-1,c.ActionType.WALK,a)}else this.stopMove()};
a.moveByTrack=function(b){var a=b.length-this._nodeInterval;0<=a&&this.moveToNode(b[a])};a.moveByPath=function(){this._moveIndex=0;this._hasPath=!0;this.moveToNextNode()};a.moveToNextNode=function(){if(this._pathNodes){var b=this._pathNodes.length;this._moveIndex++;(this._hasPath=!(this._moveIndex>=b))?(this._pathTargetNode=this._pathNodes[this._moveIndex],this.moveToNode(this._pathTargetNode)):(b=this._moveIndex-1,0<=b&&!this._pathNodes[b]&&this.stopMove(),this.clearPathNodes())}};a.clearPathNodes=
function(){this._pathNodes&&(this._pathNodes.length=0)};a.setCurrentNode=function(b){this.setNode(b,d.CURRENT_NODE)};a.setNode=function(b,a,c){c=this[a];var e=-1,f=-1;c&&(e=c.row,f=c.column);this[a].copyBy(b);!b||e==b.row&&f==b.column||a!=d.CURRENT_NODE||(this.setPassingNode(b),this.checkNode())};a.setTargetNode=function(b,a){void 0===a&&(a=!0);this.setNode(b,d.TARGET_NODE,a)};a.getNeerNode=function(b,a,d){var e=Number.POSITIVE_INFINITY,f=0,h=f=0,k=a.length,m=d.length,n=0,q=0,r=NaN,t=NaN,h=f=NaN,
f=b.x/2,h=b.y;this._targetPoint3D.x=h+f;this._targetPoint3D.z=h-f;for(b=0;b<k;b++)if(n=a[b],!(0>n))for(var u=0;u<m;u++)if(q=d[u],!(0>q)&&(f=n%2,h=q%2,0==f&&0==h||1==f&&1==h))this._nodePoint.x=q*this._isoSize,this._nodePoint.y=n*this._halfSize,f=this._nodePoint.x/2,h=this._nodePoint.y,this._neerPoint3D.x=h+f,this._neerPoint3D.z=h-f,f=c.DimensionUtil.distance3D(this._targetPoint3D,this._neerPoint3D),f<e&&(e=f,r=this._neerPoint3D.x,t=this._neerPoint3D.z,this._neerPoint.x=this._nodePoint.x,this._neerPoint.y=
this._nodePoint.y);this._neerPoint3D.x=r;this._neerPoint3D.z=t;this._neerNode.point3D=this._neerPoint3D;this._neerNode.point2D=this._neerPoint;this._neerNode.row=Math.round(this._neerPoint.y/this._halfSize);this._neerNode.column=this._neerPoint.x/this._isoSize2|0;return this._neerNode};a.getIsoNodeByRow=function(b,a){if(this._isoMap)return this._isoMap.getMapNode(b,a);var d=new c.IsoNode;d.row=b;d.column=a;d.point2D=this.getIsoPoint(b,a);return d};a.calcDistance=function(b,a){var c=Math.atan2(a-this._y,
b-this._x);this._speedX=Math.cos(c)*this._speed;this._speedY=Math.sin(c)*this._speed;this._speedAbsX=Math.abs(this._speedX);this._speedAbsY=Math.abs(this._speedY);c=this.getPointDistance(b,a);this._targetX=c.x;this._targetY=c.y;c=this._targetNode.point2D;this.addPassingPoint(this._x,this._y,c.x,c.y);this._hasPath||(this._finalX=this._targetX,this._finalY=this._targetY)};a.getPointDistance=function(b,a){var c=0;this._floorOffsetWidth>=c&&(c=this._floorOffsetWidth);var d=0;this._floorOffsetHeight>=
d&&(d=this._floorOffsetHeight);this._distancePoint.x=this.limitValue(b,c,this._maxX);this._distancePoint.y=this.limitValue(a,d,this._maxY);return this._distancePoint};a.moveMap=function(){this.checkDistance()?this.stopMoveInternal(!this._isFollowed):(this.updateMap(),this.addPassingPoint(this._x,this._y),this._isMovingEnd||null==this.movingHandler||this.movingHandler.apply(this.scene),this._x==this._targetX&&this._y==this._targetY&&(this._pathTargetNode?this.setCurrentNode(this._pathTargetNode):this.setCurrentNode(this._targetNode),
this.moveToNextNode(),this.checkDistance()&&this.stopMoveInternal(!this._isFollowed),this.isArrive&&!this._isMovingEnd&&(this._isMovingEnd=!0,this._isDispatchStart=!1,!this._hasPath&&this._isMovingEnd&&this.setCurrentNode(this._targetNode),null!=this.movingEndHandler&&this.movingEndHandler.apply(this.scene,[this]))))};a.updateMap=function(){var b=this._x,a=this._y,c=this._speedX,d=this._speedY,e=this._targetX-b,f=this._targetY-a;Math.abs(e)<this._speedAbsX&&(c=e);Math.abs(f)<this._speedAbsY&&(d=f);
this.setXY(b+c,a+d)};a.setXY=function(b,a){var c=d.MOVER_WIDTH/2,e=d.MOVER_HEIGHT;b=this.limitValue(b,c,this._maxX-c);a=this.limitValue(a,e,this._maxY);this.setCurrentNode(this.getIsoNode(b,a));if(this._nodeChangedFlag){if(c=this._data.vo)c.x=b,c.y=a;this.x=b;this.y=a}};a.updateXY=function(){e.prototype.updateXY.call(this);var b=this._data.vo;b&&this.setXY(b.x,b.y)};a.checkDistance=function(){return this._hasPath||this._x!=this._finalX||this._y!=this._finalY?!1:!0};a.addEngine=function(b){this._nodeChangedFlag=
!0;b?this._isMoving||(this._engineId=c.EnterFrameManager.getInstance().addExecute(this.mapContainerEnterFrame,this),this._isMoving=!0):this._isMoving&&(c.EnterFrameManager.getInstance().removeExecute(this._engineId),this._isMoving=!1)};a.mapContainerEnterFrame=function(b){this.moveMap()};a.setMapData=function(b){if(this._isoMap=b)this.pathTypes=this._isoMap.pathTypes,this._mapNodes=this._isoMap.mapNodes,this._isoSize=this._isoMap.isoSize,this._halfSize=this._isoSize/2,this._isoSize2=2*this._isoSize,
this._mapWidth=this._isoMap.mapWidth,this._mapHeight=this._isoMap.mapHeight,this._maxX=this._mapWidth-this._toplimitOffsetWidth,this._maxY=this._mapHeight-this._toplimitOffsetHeight;this.clearFollowPoints()};a.getIsoPoint=function(b,a){var c=b*this._halfSize,d=a*this._isoSize2;1==b%2&&(d+=this._isoSize);this._isoPoint.x=d;this._isoPoint.y=c;return this._isoPoint};a.limitValue=function(b,a,c){b<a&&(b=a);b>c&&(b=c);return b};a.checkNode=function(){var b=this.currentNode;if(this._isoMap)var a=this._isoMap.getMapNode(b.row,
b.column);this.alpha=a&&a.type==c.PathType.TRANSPARENT?0.6:1;null!=this.nodeChangedHandler&&(this._nodeChangedFlag=this.nodeChangedHandler.apply(this.scene,[a]))};a.addPassingPoint=function(b,a,c,e){void 0===c&&(c=NaN);void 0===e&&(e=NaN);var f=this._recoverPoints[this._passingIndex];if(!f)throw Error();this._recoverPoints[this._passingIndex]=null;f.x=b;f.y=a;f.tx=c;f.ty=e;this._passingPoints[this._passingIndex]=f;this._passingIndex++;if(this._passingIndex>d.PASSING_POINT_COUNT){this._passingIndex=
d.PASSING_POINT_COUNT;this._recoverPoints[this._passingIndex]=this._passingPoints[0];b=d.PASSING_POINT_COUNT+1;for(a=1;a<b;a++)this._passingPoints[a-1]=this._passingPoints[a];this._passingPoints[d.PASSING_POINT_COUNT]=null}};a.setPassingNode=function(b){this._passingNodes[this._passingNodeIndex]=b;this._passingNodeIndex++;if(this._passingNodeIndex>d.PASSING_NODE_COUNT){b=d.PASSING_NODE_COUNT+1;this._passingNodeIndex=d.PASSING_NODE_COUNT;for(var a=1;a<b;a++)this._passingNodes[a-1]=this._passingNodes[a];
this._passingNodes[d.PASSING_NODE_COUNT]=null}};a.removeFromScene=function(){this.stopMove();e.prototype.removeFromScene.call(this)};d.MOVER_WIDTH=100;d.MOVER_HEIGHT=150;d.CURRENT_NODE="_currentNode";d.TARGET_NODE="_targetNode";d.PASSING_POINT_COUNT=60;d.PASSING_NODE_COUNT=10;return d}(c.SceneElementInteractive);c.SceneElementMover=f;f.prototype.__class__="egret.SceneElementMover"})(egret||(egret={}));
(function(c){var f=function(e){function d(b,a,d,f,l,h,k){void 0===b&&(b=1E3);void 0===a&&(a=1E3);void 0===d&&(d=20);void 0===f&&(f=200);void 0===l&&(l=160);void 0===h&&(h=0);void 0===k&&(k=0);e.call(this);this._pathShape=this._mapTileContainer=this._sceneContainer=this._renderShape=this._viewShape=this._mapContainer=this.layerConfigs=null;this._viewHeight=this._viewWidth=this._renderOffsetHeight=this._renderOffsetWidth=this._mapHeight=this._mapWidth=0;this._viewRect=this._renderRect=null;this._isoSize=
20;this._pathThickness=this._halfSize=this._isoSize2=0;this._pathColor=16750848;this._renderRectAlpha=0;this._lastTileMap=this._updateData=this._mapTiles=this._oPoint=this._cPoint=null;this._isShowRender=this._isShowPath=this._isShowView=this._isShowTile=!1;this._isDrawInteractive=!0;this._pathPolicy=c.PathPolicyType.VIEW;this._layerHashMap=null;this._renderMY=this._renderMX=0;this._stage=this._renderParams=null;this.touchEnabled=!1;this._updateData={};this._renderRect=new c.Rectangle;this._viewRect=
new c.Rectangle;this._layerHashMap=new c.HashMap;this._oPoint=new c.Point;this._cPoint=new c.Point;this._mapContainer=new c.DisplayObjectContainer;this._mapContainer.touchEnabled=!1;this.addChild(this._mapContainer);this._sceneContainer=new c.DisplayObjectContainer;this._sceneContainer.touchEnabled=!1;this._mapContainer.addChild(this._sceneContainer);this._mapTileContainer=new c.Sprite;this._mapTileContainer.touchEnabled=!0;this._mapTileContainer.touchChildren=!1;this._sceneContainer.addChild(this._mapTileContainer);
this._renderParams=["renderRect"];this.showPath(!0);this.setProperties(b,a,d,f,l,h,k);this.addEventListener(c.Event.ADDED_TO_STAGE,this.thisAddedToStage,this)}__extends(d,e);var a=d.prototype;Object.defineProperty(a,"isDrawInteractive",{get:function(){return this._isDrawInteractive},set:function(b){this._isDrawInteractive!=b&&(this._isDrawInteractive=b,this.drawMapRect())},enumerable:!0,configurable:!0});Object.defineProperty(a,"mapTileContainer",{get:function(){return this._mapTileContainer},enumerable:!0,
configurable:!0});Object.defineProperty(a,"renderRectAlpha",{get:function(){return this._renderRectAlpha},set:function(b){this._renderRectAlpha!=b&&(this._renderRectAlpha=b,this.drawMapRect())},enumerable:!0,configurable:!0});Object.defineProperty(a,"pathPolicy",{get:function(){return this._pathPolicy},set:function(b){this._pathPolicy!=b&&(this._pathPolicy=b)},enumerable:!0,configurable:!0});Object.defineProperty(a,"pathColor",{get:function(){return this._pathColor},set:function(b){this._pathColor!=
b&&(this._pathColor=b)},enumerable:!0,configurable:!0});Object.defineProperty(a,"pathThickness",{get:function(){return this._pathThickness},set:function(b){this._pathThickness!=b&&(this._pathThickness=b)},enumerable:!0,configurable:!0});Object.defineProperty(a,"isoSize",{get:function(){return this._isoSize},enumerable:!0,configurable:!0});Object.defineProperty(a,"renderOffsetHeight",{get:function(){return this._renderOffsetHeight},enumerable:!0,configurable:!0});Object.defineProperty(a,"renderOffsetWidth",
{get:function(){return this._renderOffsetWidth},enumerable:!0,configurable:!0});Object.defineProperty(a,"mapHeight",{get:function(){return this._mapHeight},enumerable:!0,configurable:!0});Object.defineProperty(a,"mapWidth",{get:function(){return this._mapWidth},enumerable:!0,configurable:!0});Object.defineProperty(a,"x",{set:function(b){this._setX(b);this._oPoint=this.localToGlobal(0,0);this._cPoint=this.localToGlobal(this._viewWidth/2,this._viewHeight/2)},enumerable:!0,configurable:!0});Object.defineProperty(a,
"y",{set:function(b){this._setY(b);this._oPoint=this.localToGlobal(0,0);this._cPoint=this.localToGlobal(this._viewWidth/2,this._viewHeight/2)},enumerable:!0,configurable:!0});Object.defineProperty(a,"viewHeight",{get:function(){return this._viewHeight},enumerable:!0,configurable:!0});Object.defineProperty(a,"viewWidth",{get:function(){return this._viewWidth},enumerable:!0,configurable:!0});Object.defineProperty(a,"totalRows",{get:function(){var b=Math.ceil(this._mapHeight/this._isoSize);0==this._mapHeight%
this._isoSize&&b++;return 2*b},enumerable:!0,configurable:!0});Object.defineProperty(a,"totalColumns",{get:function(){var b=Math.ceil(this._mapWidth/this._isoSize2);0==this._mapWidth%this._isoSize2&&b++;return b},enumerable:!0,configurable:!0});Object.defineProperty(a,"viewRect",{get:function(){var b=this.originalPoint;this._viewRect.x=b.x;this._viewRect.y=b.y;return this._viewRect},enumerable:!0,configurable:!0});Object.defineProperty(a,"renderRect",{get:function(){if(this.getUpdateData(this._renderParams)){var b=
this.originalPoint,a=b.x-this._renderOffsetWidth,a=this.limitValue(a,0,this._renderMX),b=b.y-this._renderOffsetHeight,c=this._renderMY;0>c&&(c=0);b=this.limitValue(b,0,c);this._renderRect.x=a;this._renderRect.y=b;this.setUpdateData("renderRect",!1)}return this._renderRect},enumerable:!0,configurable:!0});Object.defineProperty(a,"originalPoint",{get:function(){return this._mapContainer.globalToLocal(this._oPoint.x,this._oPoint.y)},enumerable:!0,configurable:!0});Object.defineProperty(a,"centerPoint",
{get:function(){return this._mapContainer.globalToLocal(this._cPoint.x,this._cPoint.y)},enumerable:!0,configurable:!0});a.destroy=function(){if(!this._isDestroy){if(this._mapTiles)for(var b=0;b<this._mapTiles.length;b++)c.DisplayObjectUtil.destroyTargets.apply(null,this._mapTiles[b]);e.prototype.destroy.call(this)}};a.setProperties=function(b,a,d,e,f,h,k){void 0===b&&(b=0);void 0===a&&(a=0);void 0===d&&(d=0);void 0===e&&(e=0);void 0===f&&(f=0);void 0===h&&(h=0);void 0===k&&(k=0);var m="_mapWidth _mapHeight _isoSize _viewWidth _viewHeight _renderOffsetWidth _renderOffsetHeight".split(" "),
n;for(n in arguments)0<arguments[n]&&(this[m[n]]=arguments[n]);this._renderOffsetWidth=Math.max(0,this._renderOffsetWidth);this._renderOffsetHeight=Math.max(0,this._renderOffsetHeight);this._renderRect.width=this._viewWidth+2*this._renderOffsetWidth;this._renderRect.height=this._viewHeight+2*this._renderOffsetHeight;this._viewRect.width=this._viewWidth;this._viewRect.height=this._viewHeight;this._renderMX=this._mapWidth-this._renderRect.width;this._renderMY=this._mapHeight-this._renderRect.height;
this.setUpdateData("renderRect");this.drawRenderRect();this.showMapTile(this._isShowTile);this.showViewport(this._isShowView);this._cPoint=this.localToGlobal(this._viewWidth/2,this._viewHeight/2);this._halfSize=this._isoSize/2;this._isoSize2=2*this._isoSize;this.hasEventListener(c.IsoMapEvent.ISO_MAP_PROPERTY_CHANGED)&&this.dispatchEvent(new c.IsoMapEvent(c.IsoMapEvent.ISO_MAP_PROPERTY_CHANGED,!1,!1))};a.showViewport=function(b){void 0===b&&(b=!0);(this._isShowView=b)?(this._viewShape||(this._viewShape=
new c.Shape,this.addChild(this._viewShape)),this._viewShape.visible=!0,0<this.numChildren&&this.setChildIndex(this._viewShape,this.numChildren-1),this.drawView()):this._viewShape&&(this._viewShape.visible=!1)};a.showRenderRect=function(b){void 0===b&&(b=!0);(this._isShowRender=b)?(this._renderShape||(this._renderShape=new c.Shape,this._mapContainer.addChild(this._renderShape)),this._renderShape.visible=!0,this.setMapLayer(),this.drawRenderRect()):this._renderShape&&(this._renderShape.visible=!1)};
a.showMapTile=function(b){void 0===b&&(b=!0);this._isShowTile=b;0<this._mapTileContainer.numChildren&&c.DisplayObjectUtil.destroyChildren(this._mapTileContainer);b?(this._mapTileContainer.graphics.clear(),this._mapTiles=c.IsoUtil.drawTiles(this._mapTileContainer,this._mapWidth,this._mapHeight,this._isoSize,6710886)):this.drawMapRect()};a.showPath=function(b){void 0===b&&(b=!0);(this._isShowPath=b)?(this._pathShape||(this._pathShape=new c.Shape,this._mapContainer.addChild(this._pathShape)),this.setMapLayer(),
this._pathShape.visible=!0):this._pathShape&&(this._pathShape.graphics.clear(),this._pathShape.visible=!1)};a.drawPath=function(b){this._pathShape.graphics.clear();if(this._isShowPath){var a=0,c=null,d=null,c=null;if(b){a=b.length-1;this._pathShape.graphics.lineStyle(this._pathThickness,this._pathColor,1,!0,"none");for(var e=0;e<a;e++){c=b[e];d=b[e+1];if(!c||!d)break;c=this.getIsoPoint(c.row,c.column);this._pathShape.graphics.moveTo(c.x,c.y);c=this.getIsoPoint(d.row,d.column);this._pathShape.graphics.lineTo(c.x,
c.y)}}}};a.getIsoPoint=function(b,a){var d=b*this._halfSize,e=a*this._isoSize2;1==b%2&&(e+=this._isoSize);return new c.Point(e,d)};a.setTileColor=function(b,a,d,e){void 0===e&&(e=null);if(this._mapTiles&&this._mapTiles[b])var f=this._mapTiles[b][a];f&&(f.color=d,e?(b=f.getChildByName("infoText"),b||(b=new c.TextField,b.size=10,b.name="infoText",f.addChild(b)),b.text=e,b.x=-b.width/2,b.y=-b.height/2):(b=f.getChildByName("infoText"))&&b.parent&&b.parent.removeChild(b))};a.showTileText=function(b,a){if(this._mapTiles&&
this._mapTiles[b])var d=this._mapTiles[b][a];if(d){var e=d.getChildByName("textField");e||(e=new c.TextField,d.addChild(e));e.text=b+"-"+a;e.x=-e.width/2;e.y=-e.height/2}};a.checkTiles=function(b){if(this._isShowTile)for(var a=this._mapTiles.length,c=this._mapTiles[0].length,d=0;d<a;d++)for(var e=0;e<c;e++){var f=this._mapTiles[d][e];b.containsPoint(f.point)?f.parent!=this._mapTileContainer&&this._mapTileContainer.addChild(f):f.parent&&f.parent.removeChild(f)}};a.drawView=function(){this._isShowView&&
(c.DisplayObjectUtil.drawRectBorder(this._viewShape,this._viewWidth,this._viewHeight,65280,1,2),this._viewShape.graphics.moveTo(0,0),this._viewShape.graphics.lineTo(this._viewWidth,this._viewHeight),this._viewShape.graphics.moveTo(0,this._viewHeight),this._viewShape.graphics.lineTo(this._viewWidth,0))};a.setUpdateData=function(b,a){void 0===a&&(a=!0);this._updateData[b]=a};a.getUpdateData=function(b){var a=!1;if(this._updateData)for(var c=b.length,d=0;d<c;d++){var e=b[d];if(a=a||this._updateData[e])break}return a};
a.thisAddedToStage=function(b){this.removeEventListener(c.Event.ADDED_TO_STAGE,this.thisAddedToStage,this);this._stage=this.stage;this._oPoint=this.localToGlobal(0,0);this._cPoint=this.localToGlobal(this._viewWidth/2,this._viewHeight/2);this.addListeners()};a.addListeners=function(){};a.initMap=function(){};a.selectedTile=function(b,a){if(this._mapTiles)var c=this._mapTiles[b][a];c&&(c.color=16776960,this._lastTileMap&&this._lastTileMap!=c&&(this._lastTileMap.color=6710886),this._lastTileMap=c)};
a.drawRenderRect=function(){if(this._isShowRender){var b=this.renderRect;this._renderShape.graphics.clear();this._renderShape.graphics.beginFill(16711680,0.3);this._renderShape.graphics.lineStyle(3,16711680,1);this._renderShape.graphics.drawRect(b.x,b.y,b.width,b.height);this._renderShape.graphics.endFill()}};a.drawMapRect=function(){this._mapTileContainer.graphics.clear();if(!this._isShowTile&&this._isDrawInteractive){var b=this.renderRect;this._mapTileContainer.graphics.beginFill(6710886,this._renderRectAlpha);
this._mapTileContainer.graphics.drawRect(b.x,b.y,b.width,b.height);this._mapTileContainer.graphics.endFill()}};a.limitValue=function(b,a,c){b<a&&(b=a);b>c&&(b=c);return b};a.setMapLayer=function(){for(var b=[this._sceneContainer,this._renderShape,this._pathShape],a=null,c=0;c<b.length;c++){for(a=b[c];(!a||a.parent!=this._mapContainer)&&(b.splice(c,1),a=b[c],0!=b.length););a&&a.parent==this._mapContainer&&this._mapContainer.setChildIndex(a,c)}};a.getLayerContainer=function(b){if(!this.layerConfigs)return c.LogManager.error(this,
"\u5c42\u7ea7\u914d\u7f6e\u5c5e\u6027layerConfigs\u672a\u8bbe\u7f6e."),null;var a=null,a=this._layerHashMap.get(b);if(!a){var d=this.layerConfigs[b],a=new c.DisplayObjectContainer;a.name="sceneContainerLayer"+b;a.touchEnabled=d.touchEnabled;a.touchChildren=d.touchChildren;this._sceneContainer.addChild(a);this._layerHashMap.put(b,a);b=this._layerHashMap.keys();b.sort(c.ArrayUtil.numeric);for(var d=b.length,e=0;e<d;e++)this._sceneContainer.setChildIndex(this._layerHashMap.get(b[e]),e)}return a};a.show=
function(b,a,c,d){void 0===c&&(c=NaN);void 0===d&&(d=NaN);(a=this.getLayerContainer(a))&&b.parent!=a&&a.addChild(b);isNaN(c)||(b.x=c);isNaN(d)||(b.y=d)};a.hide=function(b){b&&b.parent&&b.parent.removeChild(b)};return d}(c.CoreSprite);c.IsoMapRender=f;f.prototype.__class__="egret.IsoMapRender"})(egret||(egret={}));
(function(c){var f=function(c){function d(){c.call(this);this.id=0;this.idString=null;this.y=this.x=0;this.name=""}__extends(d,c);return d}(c.BaseVo);c.SceneElementVo=f;f.prototype.__class__="egret.SceneElementVo"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this,c.ApplicationLayerType.BOTTOM);this.RENDER_OFFSET_HEIGHT=this.RENDER_OFFSET_WIDTH=100;this.DELAY_SORT=8;this.PATH_TYPES=[{label:"\u4e0d\u53ef\u901a\u8fc7",data:{type:c.PathType.OBSTACLE,color:16711680}},{label:"\u53ef\u884c\u8d70",data:{type:c.PathType.WALKABLE,color:0}},{label:"\u900f\u660e",data:{type:c.PathType.TRANSPARENT,color:255}},{label:"\u98de\u884c",data:{type:c.PathType.FLYING,color:16750848}},{label:"\u6e38\u6cf3",data:{type:c.PathType.SWIMMING,
color:65535}},{label:"\u5c71\u5761",data:{type:c.PathType.HILLSIDE,color:13434879}}];this._viewWidth=600;this._viewHeight=400;this._biologyMap=this._elementsMap=this._elementsIdMap=this._pieceMap=this._isoMap=null;this._biologyIndex=0;this._isClear=!1;this._role=null;this._roleOffsetY=this._roleOffsetX=0;this._indexMap=this._sortFields=this._sceneEditLo=null;this._elementsIdMap=new c.HashMap;this._elementsMap=new c.HashMap;this._indexMap=new c.HashMap;this._biologyMap=[];this._sortFields=["depth",
"id"]}__extends(d,e);var a=d.prototype;Object.defineProperty(a,"isoMap",{get:function(){return this._isoMap},enumerable:!0,configurable:!0});a.getBiologyMap=function(){return this._biologyMap};a.initData=function(b){this._sceneEditLo=b;this.clearScene();this.setRoleViewProperties();this._isoMap.setProperties(b.width,b.height,b.gridSize,this._viewWidth,this._viewHeight);this._isoMap.setMapNodes(b.nodeTypes);this._pieceMap.initData(b);this._isClear=!1};a.setRole=function(b){this._role=b;this._role.addEventListener(c.SceneElementEvent.SCENE_ELEMENT_PATH_CHANGED,
this.sceneElementPathChanged,this)};a.isInRenderRect=function(b,a){void 0===a&&(a=0);return this._isoMap.renderRect.contains(b,a)};a.addElement=function(b,a,d,e){void 0===d&&(d=NaN);void 0===e&&(e=NaN);if(this._elementsMap.containsKey(b.hashCode))return null;this._isoMap.show(b,a,d,e);var f=null;b instanceof c.SceneElement?(f=b.id,b instanceof c.SceneElementMover&&(b.setMapData(this._isoMap),isNaN(d)||isNaN(e)||b.setXY(d,e)),b.addToScene()):f=b.name;if(null==f)throw Error("\u573a\u666f\u5143\u7d20 id \u4e0d\u80fd\u4e3a\u7a7a");
this._elementsMap.put(b.hashCode,!0);this._elementsIdMap.put(f,b);a==c.SceneLayerType.BIOLOGY&&(this._biologyMap[this._biologyIndex]=b,this._biologyIndex++,this._indexMap.put(b.hashCode,b.parent.getChildIndex(b)));return b};a.getElementSpeed=function(){c.LogManager.error(this,"\u5b50\u7c7b\u5e94\u91cd\u5199\u6b64\u65b9\u6cd5");return 0};a.removeElement=function(b,a){void 0===a&&(a=!0);if(!b)return b;var d=null!=b.stage;this._isoMap.hide(b);var e=null;b instanceof c.SceneElement?(e=b.id,b.removeFromScene()):
e=b.name;this._elementsMap.remove(b.hashCode);this._elementsIdMap.remove(e);this.removeBiology(b);a&&d&&b instanceof c.SceneElement&&this.recoverElement(b);return b};a.removeBiology=function(b){if(b){for(var a=this._biologyIndex,c=0,d=0;d<a;d++)if(b==this._biologyMap[d]){c=a-1;d<c&&(this._biologyMap[d]=this._biologyMap[c]);this._biologyMap[c]=null;this._biologyIndex--;break}if(0>this._biologyIndex)throw Error("removeBiology");this._indexMap.remove(b.hashCode)}};a.recoverElement=function(b){};a.removeElementById=
function(b){b=this._elementsIdMap.remove(b);this._elementsMap.remove(b.hashCode);this.removeBiology(b);return b?this.removeElement(b):null};a.getElement=function(b){return this._elementsIdMap.get(b)};a.renderElement=function(b){};a.renderFixedElements=function(b){};a.renderDynamicElements=function(b){};a.getFixedElementMap=function(){return null};a.renderElementInternal=function(b,a,c){return null};a.clearScene=function(){this._isClear=!0;this._pieceMap.clearMap();for(var b=this._elementsIdMap.values(),
a=b.length,c=0;c<a;c++)this.removeElement(b[c])};a.initWindow=function(){e.prototype.initWindow.call(this);this._pieceMap=new c.PieceMap2;this._pieceMap.rootPath=c.dataManager().pathData.getResourceUrl(c.PathData.PATH_MAP);this._isoMap=new c.IsoMap(0,0,0,0,0,this.RENDER_OFFSET_WIDTH,this.RENDER_OFFSET_HEIGHT);this._isoMap.pathPolicy=c.PathPolicyType.ALL;this._isoMap.moveType=c.MapMoveType.CONSTANT_VELOCITY;this._isoMap.showPath(!1);this.addChild(this._isoMap);for(var b=this.PATH_TYPES.length,a=0;a<
b;a++){var d=this.PATH_TYPES[a];this._isoMap.setTileTypeColor(d.data.type,d.data.color)}this._isoMap.pathTypes=[c.PathType.WALKABLE,c.PathType.TRANSPARENT];this._isoMap.speed=6;this._isoMap.layerConfigs=c.SceneLayerType.LAYER_MOUSE_CONFIGS;this._isoMap.show(this._pieceMap,c.SceneLayerType.NEARBY_VIEW);this._isoMap.show(this._isoMap.mapTileContainer,c.SceneLayerType.NEARBY_VIEW);this.recall()};a.addEvents=function(){e.prototype.addEvents.call(this);this._isoMap.addEventListener(c.IsoMapEvent.ISO_MAP_RENDER_CHANGED,
this.renderChangedHandler,this);this._isoMap.addEventListener(c.IsoMapEvent.ISO_MAP_PROPERTY_CHANGED,this.mapChanged,this);c.ApplicationManager.getInstance().stage.addEventListener(c.Event.RESIZE,this.stageResize,this);c.EnterFrameManager.getInstance().hasExecute(this._sortId)||(this._sortId=c.EnterFrameManager.getInstance().addExecute(this.sortBiology,this,this.DELAY_SORT))};a.remove=function(){e.prototype.remove.call(this);this._isoMap.removeEventListener(c.IsoMapEvent.ISO_MAP_RENDER_CHANGED,this.renderChangedHandler,
this);this._role&&this._role.removeEventListener(c.SceneElementEvent.SCENE_ELEMENT_PATH_CHANGED,this.sceneElementPathChanged,this);c.ApplicationManager.getInstance().stage.removeEventListener(c.Event.RESIZE,this.stageResize,this);c.EnterFrameManager.getInstance().removeExecute(this._sortId);this.clearScene()};a.destroy=function(){this._isDestroy||(this.clearScene(),this._isoMap.destroy(),this._pieceMap.destroy(),e.prototype.destroy.call(this))};a.mapChanged=function(b){b=this._biologyMap.length;for(var a=
0;a<b;a++){var d=this._biologyMap[a];d instanceof c.SceneElementMover&&d.setMapData(this._isoMap)}};a.renderChangedHandler=function(b){this._isClear||this.updateRenderRect()};a.sceneElementPathChanged=function(b){this._role&&(this._isoMap.pathNodes=this._role.pathNodes.concat(),this._isoMap.drawCurrentPath())};a.updateRenderRect=function(){var b=this._isoMap.renderRect;this._pieceMap.renderMap(this._isoMap.viewRect,b);this.renderFixedElements(b);this.renderDynamicElements(b)};a.sortBiology=function(b){1<
this._biologyIndex&&this._biologyMap.sort(this.sortElement);b=this._isoMap.getLayerContainer(c.SceneLayerType.BIOLOGY);for(var a=this._biologyIndex,d=null,e=0;e<a;e++)d=this._biologyMap[e],this._indexMap.get(d.hashCode)!=e&&(this._indexMap.put(d.hashCode,e),b.setChildIndex(d,e))};a.sortElement=function(b,a){return b&&a?b.depth>a.depth?1:b.depth<a.depth?-1:0:0};a.stageResize=function(b){this.setRoleViewProperties();this._sceneEditLo&&(this._role&&this._isoMap.setCurrentMapXY(this._role.x,this._role.y),
this._isoMap.setProperties(this._sceneEditLo.width,this._sceneEditLo.height,this._sceneEditLo.gridSize,this._viewWidth,this._viewHeight))};a.setRoleViewProperties=function(){this._viewWidth=c.ApplicationManager.getInstance().stage.stageWidth;this._viewHeight=c.ApplicationManager.getInstance().stage.stageHeight;this._roleOffsetX=this._viewWidth/2;this._roleOffsetY=this._viewHeight/2};return d}(c.Window);c.SceneRender=f;f.prototype.__class__="egret.SceneRender"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._frameCount=this._timerCount=0;this._radiansCache=[];this._damageTargets=[];this._skillTimeData={};this.speed=3;this._hpBar=new c.HPBar;this._namePad.show(this._hpBar,-1)}__extends(d,e);var a=d.prototype;a.updateXY=function(){e.prototype.updateXY.call(this)};a.addToScene=function(){e.prototype.addToScene.call(this);this.updateHp()};a.updateHp=function(){var b=this._data.vo;this._hpBar.setProperty(b.hp+"",b.hp/b.hpTotal)};a.play=function(b,
a,c,d,f,h,k,m){void 0===b&&(b=-1);void 0===a&&(a=-1);void 0===c&&(c=-1);void 0===d&&(d=0);void 0===f&&(f=null);void 0===h&&(h=null);void 0===k&&(k=null);void 0===m&&(m=null);this._isLocked||(e.prototype.play.apply(this,arguments),this.clearAttack())};a.removeFromScene=function(){this.isSkillStatus=!1;this.unlock();this.stopAttack();e.prototype.removeFromScene.call(this)};a.setChaseArriveHandler=function(b,a){this._chaseArriveItem||(this._chaseArriveItem=new c.ScriptItem);this._chaseArriveItem.execute=
b;this._chaseArriveItem.target=a};a.chaseArmies=function(b){if(!(0>=this.data.vo.hp))if(this.armies=b){c.TimerManager.getInstance().hasExecute(this._chaseTimerId)||(this._chaseTimerId=c.TimerManager.getInstance().addExecute(this.checkAutoAttack,this,200));b=1E5;var a,d,e=this.x,f=this.y,h;for(h in this.armies)a=this.armies[h].vo,0<a.hp&&(a=c.DimensionUtil.distance2(e,f,a.x,a.y),a<b&&(b=a,d=this.armies[h]));d?(this._attackTarget=d,this.checkChaseArrive()||c.EnterFrameManager.getInstance().hasExecute(this._chaseId)||
(this._chaseId=c.EnterFrameManager.getInstance().addExecute(this.checkChaseArrive,this,3))):(this._attackTarget=null,this.attackEnd())}else this._attackTarget=null,this.attackEnd()};a.checkAutoAttack=function(){this._timerCount++;0==this._timerCount%6&&this.chaseArmies(this.armies)};a.checkChaseArrive=function(){this._frameCount++;this.getElementMinRange();if(this._isLocked)return!1;if(c.DimensionUtil.distance2(this._x,this._y,this._attackTarget.vo.x,this._attackTarget.vo.y)<this.getAttackRange())return c.EnterFrameManager.getInstance().removeExecute(this._chaseId),
this.attack(),this._chaseArriveItem&&(this._chaseArriveItem.params=[this._attackTarget],this._chaseArriveItem.apply()),!0;0==this._frameCount%3&&this.moveTo2(this._attackTarget.vo.x,this._attackTarget.vo.y);return!1};a.getAttackRange=function(){return 150};a.getElementMinRange=function(){return 80};a.attack=function(){if(!this._isLocked&&this._attackTarget&&!(0>=this._attackTarget.vo.hp)){this.stopMove();var b=c.ActionMovieClipData.getInstance().calculateDirection(this.x,this.y,this._attackTarget.vo.x,
this._attackTarget.vo.y);this.play(0,c.ActionType.ATTACK,b,1,this.attackEnd,this);this._avatar.setFrameHandler(this.playSkill,this)}};a.attackEnd=function(){this._attackTarget||c.TimerManager.getInstance().removeExecute(this._chaseTimerId);this._avatar.actionType==c.ActionType.ATTACK&&this.play(0,c.ActionType.PREPARE)};a.clearAttack=function(){this._timerCount=0;this._avatar.setFrameHandler(null)};a.playSkill=function(){};a.stopAttack=function(){this._attackTarget=null;this.stopMove();this.attackEnd();
this.clearAttack();c.EnterFrameManager.getInstance().removeExecute(this._chaseId);c.TimerManager.getInstance().removeExecute(this._chaseTimerId)};a.changeSceneEffect=function(){this.stopAttack();this.enterSceneEffect()};a.enterSceneEffect=function(){if(this.scene){var b=c.SceneElementManager.getInstance().getElement(c.ElementEffect);b.setIsCheckResource(!1);b.setMovieName(c.MovieName.EFFECT_01);this.scene.addElement(b,c.SceneLayerType.BATTLE_EFFECT,this.x,this.y)}};a.damage=function(b,a){void 0===
b&&(b=0);void 0===a&&(a=null);if(this._attackTarget){a||(a=this.getDamageTargets(b));var d=this.getDamageRadians(a),e=c.dataManager().fightData.damage(b,a);c.globalUpdateWindows([c.UpdateType.DAMAGE_HP_CHANGE],a,e.damageValues,d)}};a.getDamageTargets=function(b){this._damageTargets.length=0;this._damageTargets.push(this._attackTarget);return this._damageTargets};a.getDamageRadians=function(b){this._radiansCache.length=0;for(var a in b)this._radiansCache.push(Math.atan2(b[a].vo.y-this.y,b[a].vo.x-
this.x));return this._radiansCache};a.setSkillTime=function(b){this._skillTimeData[b]=c.getTimer()};a.getSkillTime=function(b){return this._skillTimeData[b]?c.getTimer()-this._skillTimeData[b]:1E9};a.setUseSkill=function(b){this.setSkillTime(b);this.skillType=b};a.lock=function(){this._isLocked=!0;this._avatar.stopMovie()};a.unlock=function(){this._isLocked=!1;this._avatar.playMovie()};a.stepBack=function(b,a,d){this.stopMove();var e=Math.atan2(this._y-a,this._x-b);b=Math.cos(e)*d+b;a=Math.sin(e)*
d+a;c.Tween.get(this).to({x:b,y:a},200).call(this.stepBackComplete,this,[b,a])};a.stepBackComplete=function(b,a){this.setXY(b,a);this.chaseArmies(this.armies)};return d}(c.SceneElementMover);c.SceneElementDriver=f;f.prototype.__class__="egret.SceneElementDriver"})(egret||(egret={}));
(function(c){var f=function(){function e(){this.id=0;this._idString=null;this.name="";this.coorPoint=null;this.sceneId=0;this._point=this.actionConfig=this.movieName=null}var d=e.prototype;Object.defineProperty(d,"point",{get:function(){if(!this._point){var a=this.coorPoint.split(",");this._point=new c.Point(a[0],a[1])}return this._point},set:function(a){},enumerable:!0,configurable:!0});Object.defineProperty(d,"idString",{get:function(){this._idString||(this._idString=this.id+"");return this._idString},
set:function(a){},enumerable:!0,configurable:!0});return e}();c.SceneElementLo=f;f.prototype.__class__="egret.SceneElementLo"})(egret||(egret={}));
(function(c){var f=function(){function c(){this.vo=this.lo=null}Object.defineProperty(c.prototype,"id",{get:function(){if(this.vo){if(this.vo.idString)return this.vo.idString;if(this.vo.id)return this.vo.id+""}return this.lo&&this.lo.id?this.lo.id+"":null},enumerable:!0,configurable:!0});return c}();c.SceneElementDataItem=f;f.prototype.__class__="egret.SceneElementDataItem"})(egret||(egret={}));
(function(c){var f=function(c){function d(){c.apply(this,arguments);this.hpTotal=this.hp=1E3}__extends(d,c);return d}(c.SceneElementVo);c.SceneDriverVo=f;f.prototype.__class__="egret.SceneDriverVo"})(egret||(egret={}));
(function(c){var f=function(){function e(){this.column=this.row=-1;this.size=0;this.point2D=null;this.depth=0;this.nextNode=this.preNode=this.point3D=null;this.h=this.g=this.f=0;this.factor=1;this.flag=!1}var d=e.prototype;d.toString=function(){return"[IsoNode(row = "+this.row+",column = "+this.column+",depth = "+this.depth+")]"};d.copyBy=function(a){this.row=a.row;this.column=a.column;this.size=a.size;this.depth=a.depth;this.f=a.f;this.g=a.g;this.h=a.h;this.factor=a.factor;this.nextNode&&a.nextNode&&
this.nextNode.copyBy(a.nextNode);this.preNode&&a.preNode&&this.preNode.copyBy(a.preNode);this.point2D&&a.point2D&&(this.point2D.x=a.point2D.x,this.point2D.y=a.point2D.y);this.point3D&&a.point3D&&(this.point3D.x=a.point3D.x,this.point3D.y=a.point3D.y,this.point3D.z=a.point3D.z)};d.init=function(){this.preNode=new e;this.nextNode=new e;this.point2D=new c.Point;this.point3D=new c.Point3D};return e}();c.IsoNode=f;f.prototype.__class__="egret.IsoNode"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.speed=6}__extends(d,e);var a=d.prototype;a.updateAvatar=function(b){this.setData(b);this._avatar.clear();this.stage&&this.play()};a.setData=function(b){e.prototype.setData.call(this,b);b=b.vo;c.SceneElementData.getInstance().setSceneAvatarVoPlayer2(this._sceneAvatarVo,b.vocation,b.sex,b.bodyLevel,b.weaponLevel,b.wingLevel)};a.play=function(b,a,d,e,f,h,k,m){void 0===b&&(b=-1);void 0===a&&(a=-1);void 0===d&&(d=-1);void 0===e&&(e=0);void 0===
f&&(f=null);void 0===h&&(h=null);void 0===k&&(k=null);void 0===m&&(m=null);if(!this._isLocked&&!this._isDestroy&&this._sceneAvatarVo.body){var n=null;this._data.vo.mountsState==c.MountedType.NONE?n=c.ActionPartType.TYPES_NORMAL:(n=c.ActionPartType.TYPES,this._data.vo.mountsState==c.MountedType.FLYED&&(a=c.ActionType.PREPARE));this._avatar.play(b,a,d,e,f,h,k,m);this._avatar.setPartTypes(n,this.getPartUrl,this,this.loadActionComplete,this);this.clearAttack();this._namePad.y=this._avatar.topLineY}};
a.getPartUrl=function(b){var a=null;b==c.ActionPartType.BODY?a=c.PathData.PATH_MOVIES_PLAYER:b==c.ActionPartType.WEAPON?a=c.PathData.PATH_MOVIES_WEAPON:b==c.ActionPartType.WING?a=c.PathData.PATH_MOVIES_WING:b==c.ActionPartType.MOUNTS&&(a=c.PathData.PATH_MOVIES_MOUNTS);b=this._sceneAvatarVo[b];return c.dataManager().sceneElementData.getActionUrl(a,b,this._avatar.actionType)};a.checkAutoAttack=function(){};a.checkAutoAttack2=function(){this._isLocked||this._attackTarget&&0>=this._attackTarget.vo.hp&&
this.chaseArmies(this.armies)};a.attack=function(){if(!(this._isLocked||this.isSkillStatus||!this._attackTarget||0>=this._attackTarget.vo.hp)){this.stopMove();var b=c.ActionMovieClipData.getInstance().calculateDirection(this.x,this.y,this._attackTarget.vo.x,this._attackTarget.vo.y);this._avatar.actionType==c.ActionType.ATTACK?this.direction=b:(this.play(0,c.ActionType.ATTACK,b),this._avatar.setFrameHandler(this.playSkill,this))}};return d}(c.SceneElementDriver);c.ElementPlayer=f;f.prototype.__class__=
"egret.ElementPlayer"})(egret||(egret={}));(function(c){var f=function(){function e(){c.LogManager.debug(this,"\u6e38\u620f\u542f\u52a8")}var d=e.prototype;d.loadConfig=function(){};d.initComponents=function(){};d.setLanguage=function(){};d.openWindows=function(){};return e}();c.ApplicationRunner=f;f.prototype.__class__="egret.ApplicationRunner"})(egret||(egret={}));
(function(c){var f=function(){function c(a,b,d,e){void 0===a&&(a=null);void 0===b&&(b=null);void 0===d&&(d=0);void 0===e&&(e=null);this._priority=0;this.id=NaN;this.params=this.execute=this.target=null;this._currentCount=this.repeatCount=0;this.execute=a;this.params=b;this.priority=d;this.target=e;this._currentCount=0}var d=c.prototype;Object.defineProperty(d,"currentCount",{get:function(){return this._currentCount},enumerable:!0,configurable:!0});Object.defineProperty(d,"priority",{get:function(){return this._priority},
set:function(a){this._priority!=a&&(a=Math.max(a,c.PRIORITY_MIN),this._priority=a=Math.min(a,c.PRIORITY_MAX))},enumerable:!0,configurable:!0});Object.defineProperty(d,"isCompleted",{get:function(){return 0<this.repeatCount&&this._currentCount>=this.repeatCount},enumerable:!0,configurable:!0});d.apply=function(){if(null==this.execute)return null;this._currentCount++;return this.execute.apply(this.target,this.params)};d.destroy=function(){this._priority=this.repeatCount=this._currentCount=0;this.params=
this.execute=this.target=null};c.PRIORITY_MAX=10;c.PRIORITY_MIN=0;return c}();c.ScriptItem=f;f.prototype.__class__="egret.ScriptItem"})(egret||(egret={}));
(function(c){var f=function(){function c(){this.length=this.length=0;this.content={}}var d=c.prototype;d.size=function(){return this.length};d.isEmpty=function(){return 0==this.length};d.keys=function(){var a=Array(this.length),b=0,c;for(c in this.content)a[b]=c,b++;return a};d.eachKey=function(a,b){for(var c in this.content)a.apply(b,[c])};d.eachValue=function(a,b){for(var c in this.content)a.apply(b,[this.content[c]])};d.values=function(){var a=Array(this.length),b=0,c;for(c in this.content)a[b]=
this.content[c],b++;return a};d.containsValue=function(a){for(var b in this.content)if(this.content[b]===a)return!0;return!1};d.containsKey=function(a){return void 0!=this.content[a]?!0:!1};d.get=function(a){a=this.content[a];return void 0!==a?a:null};d.getValue=function(a){return this.get(a)};d.put=function(a,b){if(null==a)throw Error("cannot put a value with undefined or null key!");if(null==b)return this.remove(a);if("string"!=typeof a&&"number"!=typeof a)throw Error("JS\u4e0d\u652f\u6301\u5bf9\u8c61\u4f5c\u4e3aKey");
var c=this.content[a];c||this.length++;this.content[a]=b;return c};d.remove=function(a){if(void 0==this.content[a])return null;var b=this.content[a];delete this.content[a];this.length--;return b};d.clear=function(){c.deleteObjectKey(this.content);this.length=0};d.clone=function(){var a=new c,b;for(b in this.content)a.put(b,this.content[b]);return a};d.toString=function(){for(var a=this.keys(),b=this.values(),c="HashMap Content:\n",d=0;d<a.length;d++)c+=a[d]+" -> "+b[d]+"\n";return c};c.deleteObjectKey=
function(a){for(var b in a)c._keyArray.push(b);b=c._keyArray.length;for(var d=0;d<b;d++)delete a[c._keyArray[d]];c._keyArray.length=0};c._keyArray=[];return c}();c.HashMap=f;f.prototype.__class__="egret.HashMap"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._dataItems=this._baseMovieClipVo=this._shadow=this._bitmap=null;this._hasData=!1;this._frameRate=this._frameIndexMax=this._totalFramesManual=this._totalFrames=0;this._shadow=new c.Bitmap;this._shadow.cacheAsBitmap=!0;this.addChild(this._shadow);this._bitmap=new c.Bitmap;this.addChild(this._bitmap)}__extends(d,e);var a=d.prototype;Object.defineProperty(a,"totalFramesManual",{get:function(){return this._totalFramesManual},set:function(b){this._totalFramesManual=
b},enumerable:!0,configurable:!0});Object.defineProperty(a,"frameRate",{get:function(){return this._frameRate},enumerable:!0,configurable:!0});Object.defineProperty(a,"totalFrames",{get:function(){return this._totalFrames},enumerable:!0,configurable:!0});Object.defineProperty(a,"baseMovieClipVo",{get:function(){return this._baseMovieClipVo},set:function(b){(this._baseMovieClipVo=b)?(this._dataItems=this._baseMovieClipVo.dataItems,this._hasData=!0,this._totalFrames=this._dataItems.length,this._frameIndexMax=
this._totalFrames-1,this._frameRate=this._baseMovieClipVo.frameRate):this._bitmap&&this._bitmap.texture&&(this._dataItems=null,this._hasData=!1,this._frameRate=this._frameIndexMax=this._totalFrames=0)},enumerable:!0,configurable:!0});a.clear=function(){this.baseMovieClipVo=null;this._bitmap.texture=null};a.destroy=function(){this._isDestroy||(this.clear(),e.prototype.destroy.call(this))};a.setFrameIndex=function(b){void 0===b&&(b=0);if(this._hasData){0<this._totalFramesManual?b>this._frameIndexMax&&
(b%=this._frameIndexMax):b>=this._totalFrames&&(b=0);var a=this._dataItems[b]}a?(this._bitmap.x=a.x,this._bitmap.y=a.y,this._bitmap.texture=a.bitmapData):this._bitmap.texture=null};return d}(c.CoreSprite);c.BaseMovieClip2=f;f.prototype.__class__="egret.BaseMovieClip2"})(egret||(egret={}));
(function(c){var f=function(e){function d(b){void 0===b&&(b=!1);e.call(this);b&&this.addEventListener(c.Event.ADDED_TO_STAGE,this.thisAddedToStage,this)}__extends(d,e);var a=d.prototype;a.initWindow=function(){e.prototype.initWindow.call(this);this.stage?c.ApplicationManager.getInstance().init(this):c.LogManager.warn(this,"\u821e\u53f0\u4e0d\u5b58\u5728\uff0c\u4e3b\u7a0b\u5e8f\u6709\u8bef")};a.destroy=function(){this._isDestroy||e.prototype.destroy.call(this)};a.thisAddedToStage=function(b){this.removeEventListener(c.Event.ADDED_TO_STAGE,
this.thisAddedToStage,this);this.initWindow()};return d}(c.Window);c.Application=f;f.prototype.__class__="egret.Application"})(egret||(egret={}));
(function(c){var f=function(e){function d(b){e.call(this);this._size=this.vz=this.vy=this.vx=this.line=this.column=0;this._walkable=!1;this._depth=0;this._updateData=this._point=this._rect=null;this._updateData={};this._rect=new c.Rectangle(0,0,b,b);this._size=b;this._position=new c.Point3D;this._point=new c.Point;this.updateScreenPosition()}__extends(d,e);var a=d.prototype;a.toString=function(){return"[IsoObject (x:"+this._position.x+", y:"+this._position.y+", z:"+this._position.z+")]"};Object.defineProperty(a,
"x",{get:function(){return this._position.x},set:function(b){this._position.x!=b&&(this._position.x=b,this.updateScreenPosition())},enumerable:!0,configurable:!0});Object.defineProperty(a,"y",{get:function(){return this._position.y},set:function(b){this._position.y!=b&&(this._position.y=b,this.updateScreenPosition())},enumerable:!0,configurable:!0});Object.defineProperty(a,"z",{get:function(){return this._position.z},set:function(b){this._position.z!=b&&(this._position.z=b,this.updateScreenPosition())},
enumerable:!0,configurable:!0});Object.defineProperty(a,"position",{get:function(){this.getUpdateData("position")&&(this._position=c.IsoUtil.getPoint3D(this._point),this.setUpdateData("position",!1));return this._position},set:function(b){if(this._position.x!=b.x||this._position.y!=b.y||this._position.z!=b.z)this._position=b,this.updateScreenPosition()},enumerable:!0,configurable:!0});Object.defineProperty(a,"depth",{get:function(){this.getUpdateData("depth")&&(this._depth=0.866*(this.position.x+
this.position.z)-0.707*this.position.y,this.setUpdateData("depth",!1));return this._depth},enumerable:!0,configurable:!0});Object.defineProperty(a,"walkable",{get:function(){return this._walkable},set:function(b){this._walkable=b},enumerable:!0,configurable:!0});Object.defineProperty(a,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(a,"rect",{get:function(){this.getUpdateData("rect")&&(this._rect.x=this.position.x-this._size/2,this._rect.y=this.position.z-
this._size/2,this.setUpdateData("rect",!1));return this._rect},enumerable:!0,configurable:!0});Object.defineProperty(a,"point",{get:function(){return this._point},set:function(b){if(this._point.x!=b.x||this._point.y!=b.y)this._point=b,this._setX(this._point.x),this._setY(this._point.y),this.invalidate()},enumerable:!0,configurable:!0});a.destroy=function(){this._isDestroy||e.prototype.destroy.call(this)};a.updateScreenPosition=function(){this.point=c.IsoUtil.getPoint2D(this._position);this.setUpdateData("position",
!1)};a.setUpdateData=function(b,a){void 0===a&&(a=!0);this._updateData[b]=a};a.getUpdateData=function(){for(var b=[],a=0;a<arguments.length;a++)b[a-0]=arguments[a];a=!1;if(this._updateData)for(var c=b.length,d=0;d<c;d++){var e=b[d];if(a=a||this._updateData[e])break}return a};a.invalidate=function(){this.setUpdateData("depth");this.setUpdateData("rect");this.setUpdateData("position")};return d}(c.CoreSprite);c.IsoBase=f;f.prototype.__class__="egret.IsoBase"})(egret||(egret={}));
(function(c){var f=function(e){function d(b,a,d,f,l,h,k){void 0===b&&(b=1E3);void 0===a&&(a=1E3);void 0===d&&(d=20);void 0===f&&(f=200);void 0===l&&(l=160);void 0===h&&(h=0);void 0===k&&(k=0);e.call(this,b,a,d,f,l,h,k);this.moveType=c.MapMoveType.FACTOR;this.stopMoveHandler=null;this._speed=0;this._moveFactor=0.2;this._targetY=this._targetX=this._speedY=this._speedX=0;this._isAddedMove=this._isAdded=!1;this._currentMapY=this._currentMapX=this._timeDelay=0;this._isMapMoved=!1;this._unRenderH=this._unRenderW=
this._renderDisY=this._renderDisX=this._minMapY=this._minMapX=0;this._centerNode=this._targetPoint3D=this._neerPoint3D=this._neerNode=this._neerPoint=this._nodePoint=this._nodeColumns=this._nodeLines=this._isoNodePoint=null;this._nodeLines=[];this._nodeColumns=[];this._nodePoint=new c.Point;this._neerPoint=new c.Point;this._isoNodePoint=new c.Point;this._neerNode=new c.IsoNode;this._neerNode.init();this._centerNode=new c.IsoNode;this._centerNode.init();this._neerPoint3D=new c.Point3D;this._targetPoint3D=
new c.Point3D;this.speed=2}__extends(d,e);var a=d.prototype;Object.defineProperty(a,"moveFactor",{get:function(){return this._moveFactor},set:function(b){this._moveFactor!=b&&(this._moveFactor=Math.max(0,b),this._moveFactor=Math.min(1,this._moveFactor))},enumerable:!0,configurable:!0});Object.defineProperty(a,"currentMapY",{get:function(){return this._currentMapY},enumerable:!0,configurable:!0});Object.defineProperty(a,"currentMapX",{get:function(){return this._currentMapX},enumerable:!0,configurable:!0});
Object.defineProperty(a,"speed",{get:function(){return this._speed},set:function(b){this._speed!=b&&(this._speed=b,this._speed=Math.max(2,this._speed))},enumerable:!0,configurable:!0});Object.defineProperty(a,"centerNode",{get:function(){var b=this.centerPoint;this._centerNode.copyBy(this.getIsoNode(b.x,b.y));return this._centerNode},enumerable:!0,configurable:!0});Object.defineProperty(a,"mapMouseX",{get:function(){return this._mapTileContainer.anchorX},enumerable:!0,configurable:!0});Object.defineProperty(a,
"mapMouseY",{get:function(){return this._mapTileContainer.anchorY},enumerable:!0,configurable:!0});a.setProperties=function(b,a,d,f,l,h,k){void 0===b&&(b=0);void 0===a&&(a=0);void 0===d&&(d=0);void 0===f&&(f=0);void 0===l&&(l=0);void 0===h&&(h=0);void 0===k&&(k=0);e.prototype.setProperties.call(this,b,a,d,f,l,h,k);this._minMapX=this._viewWidth-this._mapWidth;this._minMapY=this._viewHeight-this._mapHeight;this._renderDisX=4*this._isoSize;this._renderDisY=4*this._isoSize;this._unRenderW=this._mapWidth-
this._viewWidth-this._renderDisX;this._unRenderH=this._mapHeight-this._viewHeight-this._renderDisY;0<this._currentMapX&&0<this._currentMapY&&this.gotoXY(this._currentMapX,this._currentMapY);this.hasEventListener(c.IsoMapEvent.ISO_MAP_RENDER_CHANGED)&&this.dispatchEvent(new c.IsoMapEvent(c.IsoMapEvent.ISO_MAP_RENDER_CHANGED,!1,!1))};a.destroy=function(){this._isDestroy||(this._mapContainer.removeEventListener(c.Event.ENTER_FRAME,this.mapContainerEnterFrame,this),this._mapTileContainer.removeEventListener(c.TouchEvent.TOUCH_BEGIN,
this.tileContainerMouseDown,this),this._mapTileContainer.removeEventListener(c.TouchEvent.TOUCH_END,this.tileContainerMouseUp,this),e.prototype.destroy.call(this))};a.setCurrentMapXY=function(b,a){void 0===a&&(a=0);this._currentMapX=b;this._currentMapY=a};a.getIsoNode=function(b,a){var c=Math.round(a/this._halfSize),d=Math.round(b/this._isoSize);this._nodeLines[0]=c-1;this._nodeLines[1]=c;this._nodeLines[2]=c+1;this._nodeColumns[0]=d-1;this._nodeColumns[1]=d;this._nodeColumns[2]=d+1;this._isoNodePoint.x=
b;this._isoNodePoint.y=a;return this.getNeerNode(this._isoNodePoint,this._nodeLines,this._nodeColumns)};a.gotoXY=function(b,a){var c=this.getIsoNode(b,a).point2D;this._currentMapX=c.x;this._currentMapY=c.y;c=this.centerPoint;this.setMapContainerXY(this._mapContainer.x-(this._currentMapX-c.x),this._mapContainer.y-(this._currentMapY-c.y));this.checkRenderRect(!0)};a.gotoXY2=function(b,a){this._currentMapX=b;this._currentMapY=a;var c=this.centerPoint;this.setMapContainerXY(this._mapContainer.x-(this._currentMapX-
c.x),this._mapContainer.y-(this._currentMapY-c.y));this.checkRenderRect(!0)};a.moveTo=function(b,a){this._isMapMoved=!0;this.calcDistance(b,a);this.checkDistance()||this.addMoveEngine(!0)};a.getPointDistance=function(b,a){var d=new c.Point;d.x=Math.floor(this.limitValue(b,this._minMapX,0));d.y=Math.floor(this.limitValue(a,this._minMapY,0));return d};a.stopMove=function(){this.addMoveEngine(!1);this._isMapMoved=!1;this.checkRenderRect();null!=this.stopMoveHandler&&this.stopMoveHandler()};a.setMapXY=
function(b,a){this.setMapContainerXY(b,a);this.checkRenderRect()};a.addListeners=function(){this._mapTileContainer.addEventListener(c.TouchEvent.TOUCH_BEGIN,this.tileContainerMouseDown,this)};a.tileContainerMouseDown=function(b){this.addEngine(!0);this._stage.addEventListener(c.TouchEvent.TOUCH_END,this.tileContainerMouseUp,this);c.TimeRecordManager.getInstance().resetRelativeTime("checkStartMove")};a.tileContainerMouseUp=function(b){this._stage.removeEventListener(c.TouchEvent.TOUCH_END,this.tileContainerMouseUp,
this);this.addEngine(!1)};a.initMap=function(){};a.getNeerNode=function(b,a,d){var e=Number.POSITIVE_INFINITY,f=0,h=f=0,k=a.length,m=d.length,n=0,q=0,r=NaN,t=NaN,h=f=NaN,f=b.x/2,h=b.y;this._targetPoint3D.x=h+f;this._targetPoint3D.z=h-f;for(b=0;b<k;b++)if(n=a[b],!(0>n))for(var u=0;u<m;u++)if(q=d[u],!(0>q)&&(f=n%2,h=q%2,0==f&&0==h||1==f&&1==h))this._nodePoint.x=q*this._isoSize,this._nodePoint.y=n*this._halfSize,f=this._nodePoint.x/2,h=this._nodePoint.y,this._neerPoint3D.x=h+f,this._neerPoint3D.z=h-
f,f=c.DimensionUtil.distance3D(this._targetPoint3D,this._neerPoint3D),f<e&&(e=f,r=this._neerPoint3D.x,t=this._neerPoint3D.z,this._neerPoint.x=this._nodePoint.x,this._neerPoint.y=this._nodePoint.y);this._neerPoint3D.x=r;this._neerPoint3D.z=t;this._neerNode.point3D=this._neerPoint3D;this._neerNode.point2D=this._neerPoint;this._neerNode.row=Math.round(this._neerPoint.y/this._halfSize);this._neerNode.column=this._neerPoint.x/this._isoSize2|0;return this._neerNode};a.getIsoNodeByRow=function(b,a){var d=
new c.IsoNode;d.row=b;d.column=a;d.point2D=this.getIsoPoint(b,a);return d};a.moveMap=function(){this._isMapMoved&&(this.checkDistance()?this.stopMove():(this.updateMap(),this.checkDistance()&&this.stopMove()))};a.calcDistance=function(b,a){var d=this.centerPoint,e=this.getIsoNode(b,a),e=new c.Point(e.point2D.x,e.point2D.y);e.x=this._mapContainer.x+(d.x-e.x);e.y=this._mapContainer.y+(d.y-e.y);d=this.getPointDistance(e.x,e.y);this._targetX=d.x;this._targetY=d.y;d=Math.atan2(this._targetY-this._mapContainer.y,
this._targetX-this._mapContainer.x);this._speedX=Math.cos(d)*this._speed;this._speedY=Math.sin(d)*this._speed};a.updateMap=function(){var b=this._mapContainer.x,a=this._mapContainer.y,d=this._targetX-b,e=this._targetY-a;if(this.moveType==c.MapMoveType.CONSTANT_VELOCITY){var f=this._speedX,h=this._speedY;Math.abs(d)<Math.abs(this._speedX)&&(f=d);Math.abs(e)<Math.abs(this._speedY)&&(h=e)}else this.moveType==c.MapMoveType.FACTOR&&(f=d*this._moveFactor,h=e*this._moveFactor,1>Math.abs(d)?f=d:(d=Math.abs(f),
0<d&&1>d&&(f/=d)),1>Math.abs(e)?h=e:(e=Math.abs(h),0<e&&1>e&&(h/=e)));b+=f;a+=h;b==this._targetX&&1>Math.abs(h)&&(a=this._targetY);a==this._targetY&&1>Math.abs(f)&&(b=this._targetX);this.setMapXY(b,a)};a.setMapContainerXY=function(b,a){b=this.limitValue(b,this._minMapX,0);this._mapContainer.x=b|0;a=this.limitValue(a,this._minMapY,0);this._mapContainer.y=a|0};a.checkRenderRect=function(b){void 0===b&&(b=!1);if(!b){var a=this.originalPoint,d=a.x,a=a.y,e=this.renderRect,f=e.x,h=e.y,k=e.width,e=e.height,
m=d>this._renderDisX&&d<f+this._renderDisX;if(!m){var n=a>this._renderDisY&&a<h+this._renderDisY;if(!n){var q=d<this._unRenderW&&d+this._viewWidth>f+k-this._renderDisX;if(!q){var r=a<this._unRenderH&&a+this._viewHeight>h+e-this._renderDisY;if(!r&&(d<=this._renderDisX&&0<f||a<=this._renderDisY&&0<h||d>=this._unRenderW&&f+k<this._mapWidth||a>=this._unRenderH&&h+e<this._mapHeight))var t=!0}}}}if(b||m||n||q||r||t)this.setUpdateData("renderRect"),this.drawRenderRect(),this.drawMapRect(),this.checkTiles(this.renderRect),
this.dispatchEvent(new c.IsoMapEvent(c.IsoMapEvent.ISO_MAP_RENDER_CHANGED,!1,!1))};a.checkDistance=function(){return this._mapContainer.x==this._targetX&&this._mapContainer.y==this._targetY};a.addEngine=function(b){b?this._isAdded||(this._isAdded=!0,this._mapContainer.addEventListener(c.Event.ENTER_FRAME,this.mapContainerEnterFrame,this)):this._isAdded&&(this._isAdded=!1,this._mapContainer.removeEventListener(c.Event.ENTER_FRAME,this.mapContainerEnterFrame,this))};a.addMoveEngine=function(b){b?this._isAddedMove||
(this._isAddedMove=!0,this.addEventListener(c.Event.ENTER_FRAME,this.moveEnterFrame,this)):this._isAddedMove&&(this._isAddedMove=!1,this.removeEventListener(c.Event.ENTER_FRAME,this.moveEnterFrame,this))};a.moveEnterFrame=function(b){this.moveMap()};a.mapContainerEnterFrame=function(b){};return d}(c.IsoMapRender);c.IsoMapDriver=f;f.prototype.__class__="egret.IsoMapDriver"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._upperNaviItem=this._currentNaviItem=this._navigatorItems=null;this._navigateIndex=-1;this._lastNaviPoint=null;this._elementRadius=1;this._mapId=0;this._lastNaviPoint=new c.Point;this._navigatorItems=[]}__extends(d,e);var a=d.prototype;a.loadData=function(b){this._mapId=b;var a=c.IsoMapData.getInstance().getData(b);if(a)this.initData(a);else{var a=c.PathData.PATH_MAP_DATA,d=b+c.ExtensionType.JSON,a=c.dataManager().pathData.getResourceUrl(a,
d);c.ResoureManager.getInstance().loadMapData(a,b,this.loadCompleteData,this)}};a.gotoXY=function(b,a){void 0===a&&(a=0);this._isoMap.gotoXY(b,a);c.RoleManager.getInstance().showPlayer(this,b,a)};a.loadCompleteData=function(){this.loadData(this._mapId)};a.initData=function(b){e.prototype.initData.call(this,b);c.RoleManager.getInstance().hidePlayer();this.setRole(c.RoleManager.getInstance().role);c.TimerManager.getInstance().addExecute(this.changeScene,this,1E3,null,1)};a.setRole=function(b){e.prototype.setRole.call(this,
b);this._role.scene=this;this._role.movingHandler=this.roleMoving;this._role.nodeChangedHandler=this.nodeChanged;this._role.onStopMove=this.onStopMove};a.onStopMove=function(b){};a.nodeChanged=function(b){return!0};a.moveElement=function(b,a,c){void 0===c&&(c=0);if(b=this._elementsIdMap.get(b))b.speed=this.getElementSpeed(),b.moveTo(a,c)};a.navigateToElement=function(b){this._currentNaviItem||(this._currentNaviItem=new c.SceneNavigatorDataItem);this._currentNaviItem.elementId=b;b=this.getElementPoint(b+
"");this.navigateTo(b.x,b.y)};a.navigateTo=function(b,a){this.checkArriveNaviPoint()||(this._currentNaviItem||(this._currentNaviItem=new c.SceneNavigatorDataItem,this._currentNaviItem.x=b,this._currentNaviItem.y=a),this._lastNaviPoint.x=b,this._lastNaviPoint.y=a,c.RoleManager.getInstance().moveTo2(b,a),this._isoMap.setCurrentMapXY(b,a))};a.navigate=function(b,a,c,d){};a.navigateToItem=function(b){this.navigate(b.sceneId,b.elementId,b.x,b.y)};a.roleMoving=function(){this._isoMap.setMapXY(this._roleOffsetX-
this._role.x,this._roleOffsetY-this._role.y)};a.clearScene=function(){e.prototype.clearScene.call(this);this._currentNaviItem=null;c.RoleManager.getInstance().changeScene(this)};a.navigateByItems=function(b){b?(this._navigatorItems=b,this._navigateIndex=-1,this.navigateToNextItem()):c.LogManager.error(this,"\u5bfc\u822a\u6570\u636e\u9879\u76ee\u6570\u7ec4\u4e3a\u7a7a")};a.navigateToNextItem=function(){this._navigateIndex++;this._navigateIndex>=this._navigatorItems.length?(this._currentNaviItem=null,
this._lastNaviPoint.x=0,this._lastNaviPoint.y=0,0<this._navigatorItems.length&&c.RoleManager.getInstance().stopMove()):(this._currentNaviItem=this._navigatorItems[this._navigateIndex],-1!=this._currentNaviItem.elementId?this.navigateToElement(this._currentNaviItem.elementId):-1!=this._currentNaviItem.x&&-1!=this._currentNaviItem.y?this.navigateTo(this._currentNaviItem.x,this._currentNaviItem.y):c.LogManager.error(this,"\u5bfc\u822a\u6570\u636e\u6709\u8bef"))};a.addEvents=function(){e.prototype.addEvents.call(this);
this._isoMap.getLayerContainer(c.SceneLayerType.BIOLOGY).addEventListener(c.TouchEvent.TOUCH_TAP,this.biologyContainerClick,this);this._isoMap.addEventListener(c.IsoMapEvent.ISO_MAP_MOVING_START,this.isoMapTileMovingStart,this)};a.remove=function(){e.prototype.remove.call(this);this._isoMap.getLayerContainer(c.SceneLayerType.BIOLOGY).removeEventListener(c.TouchEvent.TOUCH_TAP,this.biologyContainerClick,this);this._isoMap.removeEventListener(c.IsoMapEvent.ISO_MAP_MOVING_START,this.isoMapTileMovingStart,
this);this._role&&(this._role.movingHandler=null,this._role.nodeChangedHandler=null,this._role.onStopMove=null)};a.updateElement=function(b){var a=b.vo;this._isoMap.renderRect.contains(a.x,a.y)?(a=this.getElement(a.idString))?a.updateXY():this.renderElement(b):this.removeElementById(b.id)};a.addElement=function(b,a,d,f){void 0===d&&(d=NaN);void 0===f&&(f=NaN);b=e.prototype.addElement.call(this,b,a,d,f);b instanceof c.SceneElement&&(b.scene=this);b instanceof c.SceneElementMover&&(b.movingEndHandler=
this.elementMovingEnd);return b};a.removeElement=function(b,a){void 0===a&&(a=!0);var c=e.prototype.removeElement.call(this,b,a);c&&(c.movingEndHandler=null);return c};a.clickElement=function(b){};a.elementMovingEnd=function(b){};a.getElementPoint=function(b){return null};a.biologyContainerClick=function(b){(b=b.target)&&this.clickElement(b)};a.isoMapTileMovingStart=function(b){};a.checkArriveNaviPoint=function(b){void 0===b&&(b=0);0!=b&&(this._currentNaviItem=new c.SceneNavigatorDataItem,this._currentNaviItem.elementId=
b);if(this._currentNaviItem)if(0!=this._currentNaviItem.elementId)var a=this.getElementPoint(this._currentNaviItem.elementId+"");else this._currentNaviItem&&-1!=this._currentNaviItem.x&&-1!=this._currentNaviItem.y&&(a=new c.Point(this._currentNaviItem.x,this._currentNaviItem.y));return this._role&&a&&c.Point.distance(a,new c.Point(this._role.x,this._role.y))<this._elementRadius&&this.hasEventListener(c.SceneEvent.SCENE_ARRIVE_NAVI_POINT)?(b=this._currentNaviItem,this._currentNaviItem=null,this.dispatchEvent(new c.SceneEvent(c.SceneEvent.SCENE_ARRIVE_NAVI_POINT,
!1,!1,b)),!0):!1};a.startMove=function(){this._currentNaviItem=null;this._lastNaviPoint.x=0;this._lastNaviPoint.y=0;this._navigatorItems.length=0;this._upperNaviItem=null;this._role&&c.RoleManager.getInstance().moveTo2(this._isoMap.currentMapX,this._isoMap.currentMapY)};a.sceneElementPathChanged=function(b){e.prototype.sceneElementPathChanged.call(this,b)};a.changeScene=function(){};a.checkMousePoint=function(){};a.removePlayer=function(b){};return d}(c.SceneRender);c.SceneDriver=f;f.prototype.__class__=
"egret.SceneDriver"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._master=null;this._offsetY=this._offsetX=0;this._hitHandlerTarget=this._hitHandler=null;this._frameIndexParam=0;this._frameIndex=-1;this._params=null;this.touchEnabled=this.touchChildren=!1;this._namePad.parent&&this._namePad.parent.removeChild(this._namePad);this._avatar.isGhost=!1;this.setIsCheckResource(!1)}__extends(d,e);var a=d.prototype;a.enterFrameHandler=function(){this._hitHandler&&(-1==this._frameIndex&&(this._frameIndex=this.getFrameIndex()),
this._avatar.frameIndex>=this._frameIndex&&(this._hitHandler.apply(this._hitHandlerTarget,this._params),this._hitHandlerTarget=this._hitHandler=null))};a.getFrameIndex=function(){var b=0;0>this._frameIndexParam&&-1<this._frameIndexParam||0<this._frameIndexParam&&1>this._frameIndexParam?b=this._avatar.totalFrames*this._frameIndexParam:0>this._frameIndexParam?b=this._avatar.totalFrames+this._frameIndexParam:0<this._frameIndexParam&&(b=this._frameIndexParam);0>b&&(b=0);b>=this._avatar.totalFrames&&(b=
this._avatar.totalFrames-1);return b};a.setHitHandler=function(b,a,c){void 0===c&&(c=-1);for(var d=[],e=3;e<arguments.length;e++)d[e-3]=arguments[e];this._hitHandler=b;this._hitHandlerTarget=a;this._params=d;this._frameIndexParam=c;this._frameIndex=-1};a.addToScene=function(){e.prototype.addToScene.call(this);this.play(0,c.ActionType.PREPARE,c.ActionMovieClipDirectionType.UP,1,this.playEnd,this);this._avatar.setFrameHandler(this.enterFrameHandler,this)};a.setMaster=function(b,a,d){void 0===a&&(a=
0);void 0===d&&(d=0);this._master=b;this._offsetX=a;this._offsetY=d;c.EnterFrameManager.getInstance().hasExecute(this._posId)||(this._posId=c.EnterFrameManager.getInstance().addExecute(this.ajustPosition,this,1))};a.setEffProperties=function(b,a,c){void 0===a&&(a=1);void 0===c&&(c=1);this._avatar.rotation=b;this._avatar.scaleX=a;this._avatar.scaleY=c};a.ajustPosition=function(){this._master&&(this.x=this._master.x+this._offsetX,this.y=this._master.y+this._offsetY)};a.playEnd=function(){this.scene&&
this.scene.removeElement(this);this.removeFromScene()};a.removeFromScene=function(){e.prototype.removeFromScene.call(this);this.setEffProperties(0);this._avatar.setFrameHandler(null);c.EnterFrameManager.getInstance().removeExecute(this._posId)};a.getPartUrl=function(b){var a=c.PathData.PATH_MOVIES_EFFECT;b=this._sceneAvatarVo[b];return c.dataManager().sceneElementData.getActionUrl(a,b,this._avatar.actionType)};return d}(c.SceneElementInteractive);c.ElementEffect=f;f.prototype.__class__="egret.ElementEffect"})(egret||
(egret={}));
(function(c){var f=function(){function c(){}c.getHtml=function(d,a,b,g,f,p,l,h){void 0===a&&(a=12);void 0===b&&(b=null);void 0===g&&(g=!1);void 0===f&&(f=!1);void 0===p&&(p=null);void 0===l&&(l=null);void 0===h&&(h=!1);g=[f,h,g];for(f=0;f<g.length;f++)g[f]&&(d=c.getTag(c._tags[f])+d+c.getTag(c._tags[f],!1));p&&(d=c.setAnchor(d,p,l));return c.setFont(d,a,b)};c.setAnchor=function(d,a,b,g){void 0===b&&(b="_blank");void 0===g&&(g=!0);return g?c.getTag(c.TAG_A,!0,[c.TAG_HREF,c.TAG_TARGET],[a,b])+d+c.getTag(c.TAG_A,
!1):c.clearTag(d,c.TAG_A)};c.setBold=function(d,a){void 0===a&&(a=!0);return a?c.getTag(c.TAG_B)+d+c.getTag(c.TAG_B,!1):c.clearTag(d,c.TAG_B)};c.setItalic=function(d,a){void 0===a&&(a=!0);return a?c.getTag(c.TAG_I)+d+c.getTag(c.TAG_I,!1):c.clearTag(d,c.TAG_I)};c.setUnderline=function(d,a){void 0===a&&(a=!0);return a?c.getTag(c.TAG_U)+d+c.getTag(c.TAG_U,!1):c.clearTag(d,c.TAG_U)};c.setFont=function(d,a,b,g){void 0===a&&(a=12);void 0===b&&(b=null);void 0===g&&(g=!0);return g?b?c.getTag(c.TAG_FONT,!0,
[c.TAG_SIZE,c.TAG_COLOR],[a,b])+d+c.getTag(c.TAG_FONT,!1):c.getTag(c.TAG_FONT,!0,[c.TAG_SIZE],[a])+d+c.getTag(c.TAG_FONT,!1):c.clearTag(d,c.TAG_FONT)};c.clearTag=function(c,a){var b=new RegExp("</"+a+">","gi");c=c.replace(new RegExp("<"+a+"[^<]*>","gis"),"");return c=c.replace(b,"")};c.getTag=function(c,a,b,e){void 0===a&&(a=!0);void 0===b&&(b=null);void 0===e&&(e=null);var f="",p="";if(a){if(b&&e)for(a=0;a<b.length;a++)p+=" "+b[a]+"='"+e[a]+"'"}else f="/";return"<"+f+c+p+">"};c._tags=["b","i","u"];
c.TAG_A="a";c.TAG_B="b";c.TAG_I="i";c.TAG_U="u";c.TAG_HREF="href";c.TAG_TARGET="target";c.TAG_FONT="font";c.TAG_SIZE="size";c.TAG_COLOR="color";return c}();c.HtmlUtil=f;f.prototype.__class__="egret.HtmlUtil"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.UNKNOWN=0;c.MALE=1;c.FEMALE=2;return c}();c.SexType=f;f.prototype.__class__="egret.SexType"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.NONE=0;c.WARRIOR=1;c.MAGE=2;c.BOWMAN=3;c.TYPES=[c.WARRIOR,c.MAGE,c.BOWMAN];return c}();c.VocationType=f;f.prototype.__class__="egret.VocationType"})(egret||(egret={}));
(function(c){var f=function(){function e(){}Object.defineProperty(e,"logDatas",{get:function(){return e._logDatas},enumerable:!0,configurable:!0});e.warn=function(c){for(var a=[],b=1;b<arguments.length;b++)a[b-1]=arguments[b];e.print(e.LEVEL_WARN,c,a)};e.info=function(c){for(var a=[],b=1;b<arguments.length;b++)a[b-1]=arguments[b];e.print(e.LEVEL_INFO,c,a)};e.debug=function(c){for(var a=[],b=1;b<arguments.length;b++)a[b-1]=arguments[b];e.print(e.LEVEL_DEBUG,c,a)};e.error=function(c){for(var a=[],b=
1;b<arguments.length;b++)a[b-1]=arguments[b];e.print(e.LEVEL_ERROR,c,a)};e.getAllMessageHtml=function(){for(var d="",a=e._logDatas.length,b=0;b<a;b++)d=e._logDatas[b].level==e.LEVEL_ERROR?d+c.HtmlUtil.getHtml(e._logDatas[b].message,12,"#ff0000"):e._logDatas[b].level==e.LEVEL_WARN?d+c.HtmlUtil.getHtml(e._logDatas[b].message,12,"#FF6600"):d+e._logDatas[b].message,d+="\n";return d};e.getErrorMessage=function(){for(var d="",a=e._errDatas.length,b=0;b<a;b++)d+=c.HtmlUtil.getHtml(e._errDatas[b],12,"#ff0000")+
"\n";return d};e.setLevel=function(c){void 0===c&&(c=0);e.init();e._level=c;for(c=0;c<e._logDatas.length;c++)e._logDatas[c].level<e._level&&(e._logDatas.splice(c,1),c--)};e.setMaxLength=function(c){void 0===c&&(c=0);for(e._length=c;e._logDatas.length>e._length;)e._logDatas.shift()};e.setTarget=function(c){e._target=c;for(var a=0;a<e._logDatas.length;a++)e._logDatas[a].target!=c&&(e._logDatas.splice(a,1),a--)};e.print=function(d,a,b){e.init();var g="";d>=e._level&&(null==e._target||a==e._target)&&
(b={level:d,target:a,message:e.getMessage(b)},a=c.getQualifiedClassName(a),g=new Date,g="\u3010"+e.LEVEL_LABELS[d]+"\u3011\u3010#"+e._index+" "+g.getFullYear()+"."+(g.getMonth()+1)+"."+g.getDate()+" "+g.getHours()+":"+g.getMinutes()+":"+g.getSeconds()+"\u3011[class "+a+"] "+b.message,b.message=g,e._logDatas.push(b),d==e.LEVEL_ERROR&&e._errDatas.push(g),e._logDatas.length>e._length&&e._logDatas.shift(),e._errDatas.length>e._length&&e._errDatas.shift(),e._index++,e._index>e._length&&(e._index=1),console.log(g));
return g};e.getMessage=function(c){for(var a="",b=c.length,e=0;e<b;e++)a+=c[e]+" ";return a};e.init=function(){null==e._logDatas&&(e._logDatas=[],e._errDatas=[],e.setLevel(e.LEVEL_ALL),e.setMaxLength(e.MAX_LENGTH))};e.LEVEL_ALL=0;e.LEVEL_INFO=1;e.LEVEL_DEBUG=2;e.LEVEL_WARN=3;e.LEVEL_ERROR=4;e.MAX_LENGTH=500;e.LEVEL_LABELS=["ALL","INFO","DEBUG","WARN","ERROR"];e._logDatas=null;e._errDatas=null;e._level=e.LEVEL_ALL;e._length=0;e._target=null;e._index=1;return e}();c.LogManager=f;f.prototype.__class__=
"egret.LogManager"})(egret||(egret={}));(function(c){var f=function(){return function(){}}();c.DamageDataItem=f;f.prototype.__class__="egret.DamageDataItem"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.WARRIOR_NORMAL=11;c.WARRIOR_GROUP=12;c.WARRIOR_COLLIDE=13;c.MAGE_NORMAL=21;c.MAGE_THUNDER=22;c.MAGE_THUNDER_BACK=23;c.BOWMAN_NORMAL=31;c.BOWMAN_CALL=33;return c}();c.SkillType=f;f.prototype.__class__="egret.SkillType"})(egret||(egret={}));
(function(c){var f=function(c){function d(){c.call(this);this.roleBornPointId=this.entryId=0}__extends(d,c);return d}(c.SceneElementLo);c.EntryPointLo=f;f.prototype.__class__="egret.EntryPointLo"})(egret||(egret={}));(function(c){var f=function(c){function d(){c.call(this)}__extends(d,c);return d}(c.SceneElementLo);c.MonsterLo=f;f.prototype.__class__="egret.MonsterLo"})(egret||(egret={}));
(function(c){var f=function(c){function d(){c.call(this);this.imageName=null;this.dialog="";this.type=0}__extends(d,c);return d}(c.SceneElementLo);c.NpcLo=f;f.prototype.__class__="egret.NpcLo"})(egret||(egret={}));(function(c){var f=function(c){function d(){c.apply(this,arguments);this.baseId=0}__extends(d,c);return d}(c.SceneDriverVo);c.SceneMonsterVo=f;f.prototype.__class__="egret.SceneMonsterVo"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.NPC=0;c.ENTRY_POINT=1;c.SCENERY=2;c.ROLE_BORN_POINT=3;c.MONSTER_BORN_POINT=4;c.COLLECT_GOODS=5;c.EVENT_POINT=6;c.PATROL_PATH=7;c.MONSTER=8;c.PLAYER=9;c.PET=10;c.GOODS=11;return c}();c.SceneElementType=f;f.prototype.__class__="egret.SceneElementType"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.id=1111111111;this.pid=0;this.nickname=this.pic=this.userName="";this.sex=c.SexType.MALE;this.serverId=1;this.vocation=c.VocationType.WARRIOR;this.level=1;this.gold=11110;this.exp=this.rmb=0;this.income=1;this.ranking=this.kankeEndTime=this.kankeBeginTime=this.uavPower=this.incomeBuffEndTime=this.incomeFriend=this.incomeBuff=0;this.className="UserInfoVo"}__extends(d,e);return d}(c.BaseVo);c.UserInfoVo=f;f.prototype.__class__="egret.UserInfoVo"})(egret||
(egret={}));
(function(c){var f=function(c){function d(b,a,d,f,l){void 0===a&&(a=1);void 0===d&&(d=null);void 0===f&&(f=0);void 0===l&&(l=null);c.call(this,b,d,f,l);this._frameIndex=0;if(isNaN(a)||1>a)throw Error("frameIndex \u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e 1");this.frameIndex=a}__extends(d,c);var a=d.prototype;Object.defineProperty(a,"frameIndex",{get:function(){return this._frameIndex},set:function(b){this._frameIndex!=b&&(this._frameIndex=b,this._frameIndex=Math.max(this._frameIndex,1))},enumerable:!0,configurable:!0});
a.destroy=function(){this._frameIndex=0;c.prototype.destroy.call(this)};return d}(c.ScriptItem);c.ClipScriptItem=f;f.prototype.__class__="egret.ClipScriptItem"})(egret||(egret={}));
(function(c){var f=function(c){function d(b,a,d,f,l){void 0===a&&(a=1);void 0===d&&(d=null);void 0===f&&(f=0);void 0===l&&(l=null);c.call(this,b,d,f,l);this._frameInterval=1;this._frameAmount=0;if(isNaN(a)||1>a)throw Error("frameInterval \u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e 1");this.frameInterval=a}__extends(d,c);var a=d.prototype;Object.defineProperty(a,"frameInterval",{get:function(){return this._frameInterval},set:function(b){this._frameInterval!=b&&(this._frameInterval=b,this._frameInterval=Math.max(this._frameInterval,
1))},enumerable:!0,configurable:!0});a.apply=function(){null!=this.execute&&(this._frameAmount++,this._frameAmount>=this.frameInterval&&(this._currentCount++,this._frameAmount%=this.frameInterval,this.execute.apply(this.target,this.params)))};a.destroy=function(){this._frameAmount=this._frameInterval=0;c.prototype.destroy.call(this)};return d}(c.ScriptItem);c.FrameScriptItem=f;f.prototype.__class__="egret.FrameScriptItem"})(egret||(egret={}));
(function(c){var f=function(c){function d(b,a,d,f,l){void 0===a&&(a=20);void 0===d&&(d=null);void 0===f&&(f=0);void 0===l&&(l=null);c.call(this,b,d,f,l);this._delay=20;if(isNaN(a)||1>a)throw Error("delay \u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e 1");this.delay=a}__extends(d,c);var a=d.prototype;Object.defineProperty(a,"delay",{get:function(){return this._delay},set:function(b){this._delay!=b&&(this._delay=b,this._delay=Math.max(this._delay,20))},enumerable:!0,configurable:!0});a.destroy=function(){this._delay=
20;c.prototype.destroy.call(this)};return d}(c.ScriptItem);c.TimerScriptItem=f;f.prototype.__class__="egret.TimerScriptItem"})(egret||(egret={}));
(function(c){var f=function(){function c(){throw Error("NumberUtil just is a static class.");}c.getMultipleValue=function(c,a){void 0===a&&(a=2);for(var b=c+"";b.length<a;)b="0"+b;return b};c.limitValue=function(c,a,b){void 0===a&&(a=NaN);void 0===b&&(b=NaN);!isNaN(a)&&c<a&&(c=a);!isNaN(b)&&c>b&&(c=b);return c};return c}();c.NumberUtil=f;f.prototype.__class__="egret.NumberUtil"})(egret||(egret={}));
(function(c){var f=function(){function e(){}var d=e.prototype;d.damage=function(a,b){var c=this.getDamageBySkillType(a,b);return this.addHp(b,c)};d.getDamageBySkillType=function(a,b){var d=[];switch(a){case c.SkillType.WARRIOR_NORMAL:case c.SkillType.MAGE_NORMAL:case c.SkillType.BOWMAN_NORMAL:for(var e in b){var f=new c.DamageDataItem;f.value=-200;f.isCritical=0.5<Math.random();f.isCritical&&(f.value*=2);d.push(f)}break;case c.SkillType.WARRIOR_COLLIDE:case c.SkillType.MAGE_THUNDER_BACK:for(e in b)f=
new c.DamageDataItem,f.value=-300,f.isCritical=0.5<Math.random(),f.isCritical&&(f.value*=2),d.push(f);break;default:for(e in b)f=new c.DamageDataItem,f.value=-100,f.isCritical=0.5<Math.random(),f.isCritical&&(f.value*=2),d.push(f)}return d};d.addHp=function(a,b){var c={},d,e;for(e in a){var f=a[e].vo;f&&(f.hp+=b[e].value,0>f.hp&&(b[e].value-=f.hp,f.hp=0,d||(d=[]),d.push(a[e])))}c.damageValues=b;d&&(c.deadTargets=d);return c};d.getSkillIntervalTime=function(a){switch(a){case c.SkillType.WARRIOR_COLLIDE:return 2E3;
case c.SkillType.MAGE_THUNDER_BACK:return 2E3;case c.SkillType.BOWMAN_CALL:return 2E3}return 1};return e}();c.FightData=f;f.prototype.__class__="egret.FightData"})(egret||(egret={}));
(function(c){var f=function(){function e(){this._roleList=[]}var d=e.prototype;d.resetRoleData=function(){for(var a in this._roleList)this._roleList[a].vo.hp=this._roleList[a].vo.hpTotal=1E4};d.addRole=function(a){void 0===a&&(a=1);var b=new c.SceneElementDataItem;if(1==a){var d=new c.ScenePlayerVo;d.id=c.SceneElementData.getInstance().getAutoElementId();d.idString=d.id+"";d.name="\u5fb7\u739b\u897f\u4e9a";d.sex=c.SexType.MALE;d.vocation=c.VocationType.WARRIOR}else 2==a?(d=new c.ScenePlayerVo,d.id=
c.SceneElementData.getInstance().getAutoElementId(),d.idString=d.id+"",d.name="\u5c0f\u6cd5\u5e08",d.sex=c.SexType.MALE,d.vocation=c.VocationType.MAGE):3==a&&(d=new c.ScenePlayerVo,d.id=c.SceneElementData.getInstance().getAutoElementId(),d.idString=d.id+"",d.name="\u6697\u5f71\u5c04\u624b",d.sex=c.SexType.MALE,d.vocation=c.VocationType.BOWMAN);d&&(b.vo=d,this._roleList.push(b));return b};d.removeRole=function(a){for(var b in this._roleList)if(this._roleList[b].vo.id==a){this._roleList.splice(b,1);
break}};d.addAnimal=function(){var a=new c.SceneElementDataItem;a.vo=new c.SceneMonsterVo;a.vo.id=c.SceneElementData.getInstance().getAutoElementId();a.vo.idString=a.vo.id+"";a.vo.name="\u963f\u65af\u5170";a.vo.hp=1E4;a.vo.hpTotal=1E4;a.lo=new c.MonsterLo;a.lo.movieName="animal_001";this._roleList.push(a);return a};d.getRoleList=function(){return this._roleList};return e}();c.RoleSceneData=f;f.prototype.__class__="egret.RoleSceneData"})(egret||(egret={}));
(function(c){var f=function(){function e(){this.cityId=this.sceneId=this.sceneType=0;this.dynamicElementsMap=null;this.isChanged=!1;this.playerVisible=!0;this._sceneElementManager=null;this._winCount=0;this._bornPoint=new c.Point;this.dynamicElementsMap=new c.HashMap;this._normalMonsterList=[];this._bossMonsterList=[];this.initMapData()}var d=e.prototype;d.initMapData=function(){for(var a=1001;1003>a;a++){var b=new c.SceneEditLo;b.id=a;b.width=1280;b.height=1800;b.pieceWidth=300;b.pieceHeight=300;
c.IsoMapData.getInstance().setData(a,b)}};d.addWinCount=function(){this._winCount++;0==this._winCount%2?c.globalUpdateWindows([c.UpdateType.CHANGE_COPY]):c.globalUpdateWindows([c.UpdateType.NORMAL_COPY_MONSTER_BORN])};d.getNextSceneId=function(){var a=this.sceneId;a++;1002<a&&(a=1001);return a};d.checkArmy=function(){var a;switch(this.sceneType){case c.SceneType.NORMAL_COPY:a=this._normalMonsterList;break;case c.SceneType.BOSS_COPY:a=this._bossMonsterList}for(var b in a)if(a[b]&&a[b].vo&&0<a[b].vo.hp)return!0;
return!1};d.getArmies=function(){var a;switch(this.sceneType){case c.SceneType.NORMAL_COPY:a=this.getNormalMonsterList(1);break;case c.SceneType.BOSS_COPY:a=this.getBossMonsterList(1)}return a};d.getNormalMonsterList=function(a){a=this.getBornPoint();for(var b=0;3>b;b++){var d=this._normalMonsterList[b];d||(d=new c.SceneElementDataItem,this._normalMonsterList[b]=d);d.vo||(d.vo=new c.SceneMonsterVo,d.vo.id=c.SceneElementData.getInstance().getAutoElementId(),d.vo.idString=d.vo.id+"",d.vo.name="\u602a\u7269");
d.vo.x=a.x+300*Math.random()-150;d.vo.y=150;a.y+300*Math.random()-150;d.vo.hp=5E3;d.vo.hpTotal=5E3;d.lo||(d.lo=new c.MonsterLo,d.lo.movieName="monster_001")}return this._normalMonsterList};d.getBossMonsterList=function(a){a=this.getBornPoint();for(var b=0;1>b;b++){var d=this._bossMonsterList[b];d||(d=new c.SceneElementDataItem,this._bossMonsterList[b]=d);d.vo||(d.vo=new c.SceneMonsterVo,d.vo.id=c.SceneElementData.getInstance().getAutoElementId(),d.vo.idString=d.vo.id+"",d.vo.name="BOSS");d.vo.x=a.x+
300*Math.random()-150;d.vo.y=a.y+300*Math.random()-150;d.vo.hp=2E4;d.vo.hpTotal=2E4;d.lo||(d.lo=new c.MonsterLo,d.lo.movieName="boss_001")}return this._bossMonsterList};d.getBornPoint=function(){var a=Math.floor(8*Math.random()),a=Math.PI/4*a,b;b=2/3*600;this._bornPoint.x=Math.cos(a)*b+600;this._bornPoint.y=Math.sin(a)*b+900;return this._bornPoint};d.getGoodsList=function(a,b){for(var d=[],e=200,f=0,l=0;6>l;l++){var h=new c.SceneElementDataItem,k=new c.SceneElementVo;k.id=c.SceneElementData.getInstance().getAutoElementId();
k.idString=k.id+"";for(k.x=a+l%4*100-e;100>k.x;)e-=100,k.x+=100;for(;0==l&&850<k.x;)e+=100,k.x-=100;for(k.y=b-100*Math.floor(l/4)+f;0==l&&300>k.y;)f+=100,k.y+=100;k.name="\u964d\u9f99\u6212\u6307"+l;h.vo=k;d.push(h)}return d};d.addElementDataItemByVoArray=function(a){for(var b=a.length,c=0;c<b;c++)this.addElementDataItemByVo(a[c])};d.addElementDataItemByVo=function(a){if(this.dynamicElementsMap.containsKey(a.id))c.LogManager.error(this,"\u52a8\u6001\u573a\u666f\u5143\u7d20\u6570\u636e\u91cd\u590d: id = "+
a.id);else{var b=new c.SceneElementDataItem;b.vo=a;a.idString=a.id+"";this.dynamicElementsMap.put(a.id,b)}return b};d.removeElementDataItem=function(a){this.dynamicElementsMap.remove(a.vo.id)};d.removeElementDataItemById=function(a){this.dynamicElementsMap.remove(a)};d.updateSceneElementVo=function(a,b,c){if(a.vo)for(var d in b)a.vo[b[d]]=c[d]};d.getElementType=function(a){return a instanceof c.NpcLo?c.SceneElementType.NPC:a instanceof c.EntryPointLo?c.SceneElementType.ENTRY_POINT:0};d.clearData=
function(){this.dynamicElementsMap.clear()};return e}();c.SceneData=f;f.prototype.__class__="egret.SceneData"})(egret||(egret={}));(function(c){var f=function(){return function(){this.userInfoVo=new c.UserInfoVo}}();c.UserData=f;f.prototype.__class__="egret.UserData"})(egret||(egret={}));
(function(c){var f=function(){function e(){this._hashMap=null;this._hashMap=new c.HashMap}var d=e.prototype;e.getInstance=function(){return e._instance||(e._instance=new e)};d.getFrameScriptItem=function(a,b,d,f,p){void 0===b&&(b=1);void 0===d&&(d=null);void 0===f&&(f=0);void 0===p&&(p=null);var l=this.getItems(e.FRAME_SCRIPT_ITEM),h=null;0<l.length?(h=l.pop(),h.execute=a,h.frameInterval=b,h.params=d,h.priority=f,h.target=p):h=new c.FrameScriptItem(a,b,d,0,p);return h};d.getTimerScriptItem=function(a,
b,d,f,p){void 0===b&&(b=20);void 0===d&&(d=null);void 0===f&&(f=0);void 0===p&&(p=null);var l=this.getItems(e.TIMER_SCRIPT_ITEM),h=null;0<l.length?(h=l.pop(),h.execute=a,h.delay=b,h.params=d,h.priority=f,h.target=p):h=new c.TimerScriptItem(a,b,d,f,p);return h};d.getClipScriptItem=function(a,b,d,f,p){void 0===b&&(b=1);void 0===d&&(d=null);void 0===f&&(f=0);void 0===p&&(p=null);var l=this.getItems(e.CLIP_SCRIPT_ITEM),h=null;0<l.length?(h=l.pop(),h.execute=a,h.frameIndex=b,h.params=d,h.priority=f,h.target=
p):h=new c.ClipScriptItem(a,b,d,f,p);return h};d.recoverScriptItem=function(a){if(!a)return null;a.destroy();var b=null;a instanceof c.FrameScriptItem?b=e.FRAME_SCRIPT_ITEM:a instanceof c.TimerScriptItem?b=e.TIMER_SCRIPT_ITEM:a instanceof c.ClipScriptItem&&(b=e.CLIP_SCRIPT_ITEM);this.getItems(b).push(a);return a};d.getItems=function(a){var b=this._hashMap.get(a);b||(b=[],this._hashMap.put(a,b));return b};e.FRAME_SCRIPT_ITEM="FrameScriptItem";e.TIMER_SCRIPT_ITEM="TimerScriptItem";e.CLIP_SCRIPT_ITEM=
"ClipScriptItem";e._instance=null;return e}();c.ScriptItemManager=f;f.prototype.__class__="egret.ScriptItemManager"})(egret||(egret={}));
(function(c){var f=function(){function e(a){void 0===a&&(a=0);this._items=this._hashMap=null;this._priorityMax=this._sharedCount=this._itemsCount=0;this._sharedCount=a;if(0>=this._sharedCount)throw Error("sharedCount \u5fc5\u987b\u5927\u4e8e 0");this._hashMap=new c.HashMap;this._items=Array(c.ScriptItem.PRIORITY_MAX)}var d=e.prototype;Object.defineProperty(d,"priorityMax",{get:function(){return this._priorityMax},enumerable:!0,configurable:!0});Object.defineProperty(d,"itemsCount",{get:function(){return this._itemsCount},
enumerable:!0,configurable:!0});Object.defineProperty(d,"hashMap",{get:function(){return this._hashMap},enumerable:!0,configurable:!0});Object.defineProperty(d,"items",{get:function(){return this._items},enumerable:!0,configurable:!0});d.hasScriptItem=function(a){return this._hashMap.containsKey(a.id)};d.addScript=function(a){if(this._hashMap.containsKey(a.id))return a;var b=this._items[a.priority];b||(b=Array(this._sharedCount),this._items[a.priority]=b);b[this._itemsCount]=a;this._hashMap.put(a.id,
!0);this._itemsCount++;this._priorityMax=Math.max(this._priorityMax,a.priority);return a};d.removeScript=function(a,b){void 0===b&&(b=!1);if(!this._hashMap.containsKey(a.id))return a;var c=this._items[a.priority];if(c)for(var d=this._itemsCount,e=0,f=0;f<d;f++)if(c[f]==a){e=d-1;f<e&&(c[f]=c[e]);c[e]=null;this._itemsCount--;0>this._itemsCount&&(this._priorityMax=this._itemsCount=0);break}this._hashMap.remove(a.id);b&&a.destroy();return a};d.destroy=function(){for(var a=this._hashMap=null,b=null,c=
this._priorityMax,d=0;d<c;d++)for(var a=this._items[d],e=this._itemsCount,f=0;f<e;f++)(b=a[f])&&b.destroy();this._items=null;this._itemsCount=0};return e}();c.ScriptModel=f;f.prototype.__class__="egret.ScriptModel"})(egret||(egret={}));
(function(c){var f=function(){function e(){throw Error("TimeUtil just is a static class.");}e.getTimeObject=function(c){var a=c%e.VALUE_YEAR,b=a%e.VALUE_MONTH,g=b%e.VALUE_DATE,f=g%e.VALUE_HOUR,p=f%e.VALUE_MINUTE,l={};l.years=Math.floor(c/e.VALUE_YEAR);l.months=Math.floor(a/e.VALUE_MONTH);l.days=Math.floor(b/e.VALUE_DATE);l.hours=Math.floor(g/e.VALUE_HOUR);l.minutes=Math.floor(f/e.VALUE_MINUTE);l.seconds=Math.floor(p/e.VALUE_SECOND);l.milliseconds=Math.floor(p%e.VALUE_SECOND);return l};e.getTime=function(d){var a=
e.getTimeObject(d);d="";for(var a=[a.years,a.months,a.days,a.hours,a.minutes,a.seconds],b=e.SIGNS,g=0;g<a.length;g++)if(2<g||0!=a[g])d+=c.NumberUtil.getMultipleValue(a[g])+b[g];return d};e.getDate=function(c){return new Date(c+e.TIMEZONE_OFFSET)};e.VALUE_MILLISECOND=1;e.VALUE_SECOND=1E3;e.VALUE_MINUTE=60*e.VALUE_SECOND;e.VALUE_MINUTE_5=300*e.VALUE_SECOND;e.VALUE_MINUTE_10=600*e.VALUE_SECOND;e.VALUE_HOUR=3600*e.VALUE_SECOND;e.VALUE_DATE=24*e.VALUE_HOUR;e.VALUE_WEEK=7*e.VALUE_DATE;e.VALUE_MONTH=30*
e.VALUE_DATE;e.VALUE_YEAR=365*e.VALUE_DATE;e.TIMEZONE_OFFSET=(new Date).getTimezoneOffset()*e.VALUE_MINUTE;e.SIGNS="-;-;  ;:;:;".split(";");return e}();c.DateUtil=f;f.prototype.__class__="egret.DateUtil"})(egret||(egret={}));
(function(c){var f=function(){function c(d){void 0===d&&(d=0);this._id=0;this._id=d}c.prototype.getID=function(d){void 0===d&&(d=!0);var a=this._id;d?this._id>=c.MAX_VALUE?this._id=c.MIN_VALUE:this._id++:this._id<=c.MIN_VALUE?this._id=c.MAX_VALUE:this._id--;return a};c.MAX_VALUE=2147483647;c.MIN_VALUE=-2147483648;return c}();c.IDGenerator=f;f.prototype.__class__="egret.IDGenerator"})(egret||(egret={}));
(function(c){var f=function(){function c(d,a,b){void 0===d&&(d=0);void 0===a&&(a=0);void 0===b&&(b=0);this.x=d;this.y=a;this.z=b}c.prototype.toString=function(){return"[Point3D(x = "+this.x+", y = "+this.y+", z = "+this.z+")]"};return c}();c.Point3D=f;f.prototype.__class__="egret.Point3D"})(egret||(egret={}));
(function(c){var f=function(){function e(){this.pathData=c.PathData.getInstance();this.sceneElementData=c.SceneElementData.getInstance();this.userData=new c.UserData;this.sceneData=new c.SceneData;this.fightData=new c.FightData;this.roleSceneData=new c.RoleSceneData}var d=e.prototype;e.getInstance=function(){return e._instance||(e._instance=new c.DataManager)};d.init=function(){};return e}();c.DataManager=f;f.prototype.__class__="egret.DataManager"})(egret||(egret={}));
(function(c){var f=function(){function e(){this.sharedCount=100;this._modelMap=this._completeArray=this._gcTimer=this._executeHashMap=this._hashMap=null;this._hashMap=new c.HashMap;this._executeHashMap=new c.HashMap;this._modelMap=new c.HashMap;this._completeArray=[];this._idGenerator=new c.IDGenerator}var d=e.prototype;e.getInstance=function(){return e._instance||(e._instance=new e)};d.hasExecute=function(a){return this._executeHashMap.containsKey(a)};d.getItem=function(a){return this._executeHashMap.get(a)};
d.addExecute=function(a,b,d,e,f,l){void 0===d&&(d=20);void 0===e&&(e=null);void 0===f&&(f=0);void 0===l&&(l=0);for(var h=this._idGenerator.getID();this._executeHashMap.containsKey(h);)h=this._idGenerator.getID();if(null==a)return c.LogManager.error(this,"execute\u4e0d\u80fd\u4e3a\u7a7a: execute = "+a),h;a=c.ScriptItemManager.getInstance().getTimerScriptItem(a,d,e,l,b);a.repeatCount=f;a.id=h;this.addScriptItem(a);return h};d.removeExecute=function(a){a=this._executeHashMap.remove(a);this.removeScriptItem(a);
c.ScriptItemManager.getInstance().recoverScriptItem(a)};d.addScriptItem=function(a){if(!a||isNaN(a.id))return null;null!=a.execute&&this._executeHashMap.put(a.id,a);var b=this._hashMap.get(a.delay);b||(b=[],this._hashMap.put(a.delay,b));for(var d=!1,e=null,f=b.length,l=0;l<f;l++){var h=b[l],e=h.model;if(0<this.sharedCount&&e.itemsCount>=this.sharedCount)d=!0;else{d=!1;break}}!h||d?(h={timer:this.addTimer(null,a.delay),model:new c.ScriptModel(this.sharedCount)},b.push(h),this._modelMap.put(h.timer.hashCode,
h.model)):this.addTimer(h.timer);h.time=0;e=h.model;e.addScript(a);return a};d.removeScriptItem=function(a,b){void 0===b&&(b=!1);if(!a)return null;for(var c=this._hashMap.get(a.delay),d=null,e=c.length,f=0;f<e;f++){var h=c[f],d=h.model;if(d.hasScriptItem(a)){this._executeHashMap.remove(a.id);var k=d.removeScript(a,b);0==d.itemsCount&&(h.time=0,this.removeTimer(h.timer),this.setTimer(!0));break}}return k};d.removeTimer=function(a){a&&(a.reset(),a.removeEventListener(c.TimerEvent.TIMER,this.timerHandler,
this))};d.addTimer=function(a,b){void 0===b&&(b=0);a||(a=new c.Timer(b));a.addEventListener(c.TimerEvent.TIMER,this.timerHandler,this);a.start();return a};d.timerHandler=function(a){var b=a.target,c=null;a=null;this._hashMap.get(b.delay);var d=null;a=0;d=this._modelMap.get(b.hashCode);for(b=a=d.priorityMax;0<=b;b--)for(var c=d.items[b],e=d.itemsCount,f=0;f<e;f++){a=c[f];if(!a)break;a.apply();a.isCompleted&&this._completeArray.push(a)}d=this._completeArray.length;for(c=0;c<d;c++)a=this._completeArray[c],
this.removeScriptItem(a);this._completeArray.length=0};d.setTimer=function(a){a?(this._gcTimer||(this._gcTimer=new c.Timer(c.DateUtil.VALUE_MINUTE)),this._gcTimer.running||(this._gcTimer.addEventListener(c.TimerEvent.TIMER,this.gcTimerHandler,this),this._gcTimer.start())):this._gcTimer&&(this._gcTimer.reset(),this._gcTimer.removeEventListener(c.TimerEvent.TIMER,this.gcTimerHandler,this))};d.gcTimerHandler=function(a){var b=null,d=null,e=0,b=null,f;for(f in this._hashMap.content){for(var l=this._hashMap.content[f],
h=0;h<l.length;h++)b=l[h],b.time+=a.target.delay,b.time>=c.DateUtil.VALUE_MINUTE_10&&(d=b.timer,d.running?b.time=0:(b=b.model,b.destroy(),this._modelMap.remove(d.hashCode),l.splice(h,1),h--));e+=l.length}0==e&&this.setTimer(!1)};e._instance=null;return e}();c.TimerManager=f;f.prototype.__class__="egret.TimerManager"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.NONE=-1;c.TOP_LEFT=0;c.TOP_CENTER=1;c.TOP_RIGHT=2;c.CENTER_LEFT=3;c.CENTER=4;c.CENTER_RIGHT=5;c.BOTTOM_LEFT=6;c.BOTTOM_CENTER=7;c.BOTTOM_RIGHT=8;return c}();c.AlignType=f;f.prototype.__class__="egret.AlignType"})(egret||(egret={}));function isClass(c){return"function"==typeof c}
(function(c){var f=function(){return function(){this.right=this.left=this.bottom=this.top=this.align=0}}();c.AlignItem=f;f.prototype.__class__="egret.AlignItem"})(egret||(egret={}));
(function(c){var f=function(c){function d(a,b,d,f){void 0===b&&(b=!1);void 0===d&&(d=!1);void 0===f&&(f=null);c.call(this,a,b,d);this.data=null;this.data=f}__extends(d,c);d.WINDOW_OPEN="windowOpen";d.WINDOW_CLOSE="windowClose";d.WINDOW_RECALL="windowRecall";return d}(c.Event);c.ApplicationEvent=f;f.prototype.__class__="egret.ApplicationEvent"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.MAX=c.UP_LEFT;c.UP=1;c.UP_RIGHT=2;c.RIGHT=3;c.DOWN_RIGHT=4;c.DOWN=5;c.DOWN_LEFT=6;c.LEFT=7;c.UP_LEFT=8;return c}();c.ActionMovieClipDirectionType=f;f.prototype.__class__="egret.ActionMovieClipDirectionType"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.MAX=c.ATTACK_GROUP;c.PREPARE=1;c.WALK=2;c.ATTACK=3;c.HIT=4;c.DEAD=5;c.ATTACK_SINGLE=6;c.ATTACK_GROUP=7;return c}();c.ActionType=f;f.prototype.__class__="egret.ActionType"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.LAYER_MOUSE_CONFIGS=[{touchEnabled:!1,touchChildren:!0,model:!1,alpha:0},{touchEnabled:!1,touchChildren:!0,model:!1,alpha:0},{touchEnabled:!0,touchChildren:!0,model:!0,alpha:1},{touchEnabled:!1,touchChildren:!0,model:!1,alpha:0},{touchEnabled:!1,touchChildren:!0,model:!1,alpha:0},{touchEnabled:!1,touchChildren:!0,model:!1,alpha:0},{touchEnabled:!0,touchChildren:!0,model:!0,alpha:1},{touchEnabled:!0,touchChildren:!0,model:!0,alpha:0.6},{touchEnabled:!0,
touchChildren:!0,model:!0,alpha:0.6},{touchEnabled:!1,touchChildren:!1,model:!1,alpha:0},{touchEnabled:!1,touchChildren:!1,model:!1,alpha:0},{touchEnabled:!1,touchChildren:!0,model:!1,alpha:0},{touchEnabled:!0,touchChildren:!1,model:!0,alpha:0},{touchEnabled:!1,touchChildren:!1,model:!1,alpha:0},{touchEnabled:!1,touchChildren:!1,model:!1,alpha:0}];c.MOUSE=14;c.TOOLTIP=13;c.LOADING=12;c.MENU=11;c.EFFECT=10;c.INTERACTIVE=9;c.POP_UP_TOP=8;c.POP_UP=7;c.FULL_SCREEN_TOP=6;c.WINDOW_TOP=5;c.UI_TOP=4;c.WINDOW=
3;c.FULL_SCREEN=2;c.UI=1;c.BOTTOM=0;return c}();c.ApplicationLayerType=f;f.prototype.__class__="egret.ApplicationLayerType"})(egret||(egret={}));
(function(c){var f=function(){function e(){}e.quickSort=function(c,a,b){void 0===b&&(b=0);var g=0,f=0,p=0;if(a<b){g=a;f=b;for(p=c[g];g<f;){for(;g<f&&c[f]>p;)f--;g<f&&(c[g]=c[f],g++);for(;g<f&&c[g]<p;)g++;g<f&&(c[f]=c[g],f--)}c[g]=p;e.quickSort(c,a,g-1);e.quickSort(c,g+1,b)}};e.quickSortOn=function(c,a,b,g){void 0===g&&(g=0);var f=0,p=0,l;if(b<g){f=b;p=g;for(l=c[f];f<p;){for(;f<p&&c[p][a]>l[a];)p--;f<p&&(c[f]=c[p],f++);for(;f<p&&c[f][a]<l[a];)f++;f<p&&(c[p]=c[f],p--)}c[f]=l;e.quickSortOn(c,a,b,f-1);
e.quickSortOn(c,a,f+1,g)}};e.quickSortOn2=function(c,a,b,g){void 0===g&&(g=0);var f=0,p=0,l;if(b<g){f=b;p=g;for(l=c[f];f<p;){for(;f<p&&c[p][a]<l[a];)p--;f<p&&(c[f]=c[p],f++);for(;f<p&&c[f][a]>l[a];)f++;f<p&&(c[p]=c[f],p--)}c[f]=l;e.quickSortOn2(c,a,b,f-1);e.quickSortOn2(c,a,f+1,g)}};e.sort=function(c){for(var a=0,b=c[0],e=c.length,f=0;f<e;f++){for(var a=f,b=c[f],p=f;p<e;p++)b<c[p]&&(b=c[p],a=p);b!=c[f]&&(c[a]=c[f],c[f]=b)}};e.reverse2DRC=function(d){for(var a=d.length,b=d[0].length,e=null,f=new c.HashMap,
p=null,l=null,h=0;h<a;h++)for(var k=0;k<b;k++)p=h+"_"+k,l=k+"_"+h,f.containsKey(p)||f.containsKey(l)||(e=d[h][k],d[h][k]=d[k][h],d[k][h]=e,f.put(p,!0),f.put(l,!0))};e.reverse2DRows=function(c){for(var a=c.length,b=0;b<a;b++)c[b].reverse()};e.numeric=function(c,a){return Number(c)>Number(a)?1:Number(c)==Number(a)?0:-1};e.descending=function(c,a){return Number(c)<Number(a)?1:Number(c)==Number(a)?0:-1};return e}();c.ArrayUtil=f;f.prototype.__class__="egret.ArrayUtil"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.distance3D=function(c,a){var b=c.x-a.x,e=c.y-a.y,f=c.z-a.z;return Math.sqrt(b*b+e*e+f*f)};c.distance=function(c,a){var b=c.x-a.x,e=c.y-a.y;return Math.sqrt(b*b+e*e)};c.distance2=function(c,a,b,e){c-=b;a-=e;return Math.sqrt(c*c+a*a)};return c}();c.DimensionUtil=f;f.prototype.__class__="egret.DimensionUtil"})(egret||(egret={}));(function(c){c.dataManager=function(){return c.DataManager.getInstance()}})(egret||(egret={}));
(function(c){var f=function(){function c(){this.rootPath=""}var d=c.prototype;c.getInstance=function(){return c._instance||(c._instance=new c)};d.getResourceUrl=function(a,b){void 0===b&&(b=null);var d=this.rootPath+c.PATH_RESOURCE+a;b&&(d+=b);return d};d.getPathComponent=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];for(var b="",c=a.length,d=0;d<c;d++){var e=a[d],b=b+e;-1==e.indexOf("/")&&(b+="/")}return b};c._instance=null;c.PATH_RESOURCE="resource/";c.PATH_RESOURCE_MODULE=
"modules/";c.PATH_MOVIES="movies/";c.PATH_RESOURCE_COMMON=c.PATH_RESOURCE_MODULE+"common/";c.PATH_IMAGES="images/";c.PATH_SOUND="sound/";c.PATH_IMAGES_COMMON=c.PATH_IMAGES+"common/";c.PATH_IMAGES_ROLD_HEAD=c.PATH_IMAGES+"roleHead/";c.PATH_IMAGES_PET=c.PATH_IMAGES+"pet/";c.PATH_IMAGES_PROP=c.PATH_IMAGES+"prop/";c.PATH_IMAGES_SCENE=c.PATH_IMAGES+"scene/";c.PATH_RESOURCE_IMAGES="images/";c.PATH_XML_PRE_LANGUAGE="preLanguage/";c.PATH_MOVIES_PET=c.PATH_MOVIES+"pet/";c.PATH_MOVIES_MONSTER=c.PATH_MOVIES+
"monster/";c.PATH_MOVIES_EFFECT=c.PATH_MOVIES+"effect/";c.PATH_MOVIES_SKILL=c.PATH_MOVIES+"skill/";c.PATH_MOVIES_PLAYER=c.PATH_MOVIES+"player/";c.PATH_MOVIES_WEAPON=c.PATH_MOVIES+"weapon/";c.PATH_MOVIES_WING=c.PATH_MOVIES+"wing/";c.PATH_MOVIES_MOUNTS=c.PATH_MOVIES+"mounts/";c.PATH_XML_RESOURCE_MARK="resourceMark/";c.PATH_MOVIES_COMMON=c.PATH_MOVIES+"common/";c.PATH_MAP_DATA="mapData/";c.PATH_MAP="map/";return c}();c.PathData=f;f.prototype.__class__="egret.PathData"})(egret||(egret={}));
(function(c){var f=function(){return function(){this.mounts=this.wing=this.weapon=this.clothing=this.body=null}}();c.SceneAvatarVo=f;f.prototype.__class__="egret.SceneAvatarVo"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.JSON=".json";c.XML=".xml";c.TXT=".txt";c.JPG=".jpg";c.PNG=".png";c.SWF=".swf";c.EDF=".edf";c.MVDF=".mvdf";return c}();c.ExtensionType=f;f.prototype.__class__="egret.ExtensionType"})(egret||(egret={}));
(function(c){var f=function(){function c(){this.y=this.x=0;this.bytes=this.bitmapData=null}c.prototype.destroy=function(){this.bitmapData&&this.bitmapData.dispose();this.bytes&&this.bytes.clear();this.bytes=this.bitmapData=null};return c}();c.BaseMovieClipDataItem=f;f.prototype.__class__="egret.BaseMovieClipDataItem"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._alignHashMap=this._timeHashMap=this._winHashMap=this._layerHashMap=this.stage=this.application=null;this._layerHashMap=new c.HashMap;this._winHashMap=new c.HashMap;this._timeHashMap=new c.HashMap;this._alignHashMap=new c.HashMap}__extends(d,e);var a=d.prototype;d.getInstance=function(){return d._instance||(d._instance=new d)};Object.defineProperty(a,"isFullScreen",{get:function(){for(var b=[c.ApplicationLayerType.FULL_SCREEN,c.ApplicationLayerType.FULL_SCREEN_TOP],
a=b.length,d=0;d<a;d++){var e=this._layerHashMap.get(b[d]);if(e&&0<e.numChildren)return!0}return!1},enumerable:!0,configurable:!0});a.init=function(b){this.application&&this.application.destroy();this.application=b;this.stage||(this.stage=b.stage,this.stage.addEventListener(c.Event.RESIZE,this.stageResize,this));this.stage.focus=null;this._winHashMap.size();for(var a in this._winHashMap.content){b=this._winHashMap.content[a];for(var d=b.length,e=0;e<d;e++){var f=b[e];"remove"in f&&f.remove();"destroy"in
f&&f.destroy()}}this._layerHashMap.clear();this._winHashMap.clear();this._timeHashMap.clear();this._alignHashMap.clear();this.removeTimer()};a.getApplicationLayer=function(b){void 0===b&&(b=0);var a=this._layerHashMap.get(b);if(!a){var d=c.ApplicationLayerType.LAYER_MOUSE_CONFIGS[b],a=new c.Sprite;a.name="applicationLayer"+b;a.touchChildren=d.touchChildren;a.touchEnabled=d.touchEnabled;this.application.addChild(a);this._layerHashMap.put(b,a);b=this._layerHashMap.keys();b.sort(c.ArrayUtil.numeric);
for(var d=b.length,e=0;e<d;e++)this.application.setChildIndex(this._layerHashMap.get(b[e]),e)}return a};a.open=function(b,a,d,e,f){void 0===a&&(a=-1);void 0===d&&(d=-1);void 0===e&&(e=null);void 0===f&&(f=!1);if(!b)return c.LogManager.error(this,"targetClass\u4e0d\u80fd\u4e3a\u7a7a."),null;var h=c.getQualifiedClassName(b),k=null,m=null,n=null,q=null,m=this._winHashMap.get(h);if(f)k=new b,k.name=e?e:k.name,"initWindow"in k&&(q=k.initWindow),m||(m=[],this._winHashMap.put(h,m)),m.push(k);else{if(e&&
m)for(f=m.length,h=0;h<f;h++){if(m[h].name==e){k=m[h];break}}else m&&0<m.length&&(k=m[0]);if(k)"recall"in k&&(n=k.recall);else return this.open(b,a,d,e,!0)}-1==a&&(a="layerType"in k?k.layerType:0);-1==d&&(d="align"in k?k.align:0);"applicationManager"in k&&(k.applicationManager=this);this.show(k,a,d);null!=q&&k.initWindow();null!=n&&k.recall();this.hasEventListener(c.ApplicationEvent.WINDOW_OPEN)&&this.dispatchEvent(new c.ApplicationEvent(c.ApplicationEvent.WINDOW_OPEN,!1,!1,k));return k};a.close=
function(b){if(b)if(isClass(b)){if(b=c.getQualifiedClassName(b))if(b=this._winHashMap.get(b))for(var a=b.length,d=0;d<a;d++){var e=b[d];this.hide(e);this.hasEventListener(c.ApplicationEvent.WINDOW_CLOSE)&&this.dispatchEvent(new c.ApplicationEvent(c.ApplicationEvent.WINDOW_CLOSE,!1,!1,e))}}else this.hide(b),this.hasEventListener(c.ApplicationEvent.WINDOW_CLOSE)&&this.dispatchEvent(new c.ApplicationEvent(c.ApplicationEvent.WINDOW_CLOSE,!1,!1,b))};a.getTargetInstance=function(b,a,d){void 0===a&&(a=!1);
void 0===d&&(d=null);b=c.getQualifiedClassName(b);b=this._winHashMap.get(b);for(var e=null,f=b.length,h=0;h<f;h++){var k=b[h];if(a&&d){if(k.stage&&k.name==d){e=k;break}}else if(a&&!d){if(k.stage){e=k;break}}else if(!a&&d){if(!k.stage&&k.name==d){e=k;break}}else if(!a&&!d&&!k.stage){e=k;break}}return e};a.hasInstance=function(){for(var b=[],a=0;a<arguments.length;a++)b[a-0]=arguments[a];for(var a=b.length,d=0;d<a;d++){var e=c.getQualifiedClassName(b[d]);if((e=this._winHashMap.get(e))&&0<e.length)return!0}return!1};
a.globalUpdate=function(b){for(var a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];for(var c=null,d=this._winHashMap.values(),e=d.length,f=0;f<e;f++)for(var k=d[f],m=k.length,n=0;n<m;n++){var q=k[n];if(q.stage)for(var r=b.length,t=0;t<r;t++){var u=b[t];q.hasUpdateType(u)&&(c=[],c.push(u),c=c.concat(a),q.globalUpdate.apply(q,c))}}};a.update=function(b){for(var a=[],d=1;d<arguments.length;d++)a[d-1]=arguments[d];for(var e=null,f=e=null,d=b.length,h=0;h<d;h++)for(var e=c.getQualifiedClassName(b[h]),
e=this._winHashMap.get(e),k=e.length,m=0;m<k;m++){var n=e[m];n.stage&&(f=a.concat(),n.update.apply(n,f))}};a.setAlign=function(b,a,d,e,f,h){void 0===d&&(d=0);void 0===e&&(e=0);void 0===f&&(f=0);void 0===h&&(h=0);if(b)if(a==c.AlignType.NONE)this._alignHashMap.remove(b.hashCode);else{var k=this._alignHashMap.get(b.hashCode);k||(k=new c.AlignItem);k.align=a;k.top=0==d&&"top"in b?b.top:d;k.bottom=0==e&&"bottom"in b?b.bottom:e;k.left=0==f&&"left"in b?b.left:f;k.right=0==h&&"right"in b?b.right:h;this._alignHashMap.put(b.hashCode,
k);this.layout(b)}else c.LogManager.error(this,"\u663e\u793a\u5bf9\u8c61\u4e0d\u80fd\u4e3a:"+b)};a.layout=function(b){if(b&&b.stage){var a=this._alignHashMap.get(b.hashCode),d=0,e=0,f=this.stage.stageWidth,h=this.stage.stageHeight,k=a.top,m=a.bottom,n=a.left,q=a.right;switch(a.align){case c.AlignType.TOP_LEFT:d+=n;e+=k;break;case c.AlignType.TOP_CENTER:d=(f-b.width)/2;e+=k;break;case c.AlignType.TOP_RIGHT:d=f-b.width;d-=q;e+=k;break;case c.AlignType.CENTER_LEFT:e=(h-b.height)/2;d+=n;break;case c.AlignType.CENTER:d=
(f-b.width)/2;e=(h-b.height)/2;break;case c.AlignType.CENTER_RIGHT:d=f-b.width;e=(h-b.height)/2;d-=q;break;case c.AlignType.BOTTOM_LEFT:e=h-b.height;d+=n;e-=m;break;case c.AlignType.BOTTOM_CENTER:d=(f-b.width)/2;e=h-b.height;e-=m;break;case c.AlignType.BOTTOM_RIGHT:d=f-b.width,e=h-b.height,d-=q,e-=m}b.x=d;b.y=e}};a.show=function(b,a,c,d,e,f,k){void 0===c&&(c=-1);void 0===d&&(d=0);void 0===e&&(e=0);void 0===f&&(f=0);void 0===k&&(k=0);var m=this.getApplicationLayer(a);if(b.parent!=m){var n=b.parent;
m.addChild(b);this.checkModel(n)}this.setAlign(b,c,d,e,f,k);this.setModel(m,a)};a.hide=function(b){if(b){var a=b.parent;b.parent&&b.parent.removeChild(b);this.checkModel(a);"remove"in b&&b.remove();a=c.getQualifiedClassName(b);this._winHashMap.containsKey(a)?a&&(this._timeHashMap.put(a,0),c.TimerManager.getInstance().hasExecute(this._timerId)||(this._timerId=c.TimerManager.getInstance().addExecute(this.timerHandler,this,c.DateUtil.VALUE_MINUTE,null))):this._alignHashMap.remove(b.hashCode)}};a.setWindowLayer=
function(b,a,d){void 0===d&&(d=!0);if(b instanceof c.Window)var e=b;else isClass(b)&&(e=this.getTargetInstance(b,d));e&&this.show(e,a,e.align)};Object.defineProperty(a,"centerPoint",{get:function(){return new c.Point(this.stage.stageWidth/2,this.stage.stageHeight/2)},enumerable:!0,configurable:!0});a.timerHandler=function(){this._timeHashMap.eachKey(this.checkDestroy,this);for(var b=!1,a=this._winHashMap.values(),c=a.length,d=0;d<c;d++)for(var e=a[d],f=e.length,k=0;k<f;k++)if(!e[k].stage){b=!0;break}if(!b){this.removeTimer();
for(var m in this._timeHashMap.content)this._timeHashMap.content[m]=0}};a.checkDestroy=function(b){var a=this._timeHashMap.get(b),a=a+c.DateUtil.VALUE_MINUTE,d=!1;if(a>=c.DateUtil.VALUE_MINUTE){for(var a=this._winHashMap.get(b),e=null,f=0;f<a.length;f++)e=a[f],e.stage||("destroy"in e?e.destroy():e.parent&&e.parent.removeChild(e),this._alignHashMap.remove(e.hashCode),a.splice(f,1),f--);if(0==a.length){d=0;a=this._winHashMap.values();e=a.length;for(f=0;f<e&&!(d+=a[f].length,0<d);f++);0==d&&this.removeTimer();
this._winHashMap.remove(b);this._timeHashMap.remove(b);d=!0}a=0}d||this._timeHashMap.put(b,a)};a.stageResize=function(b){for(var a in this._layerHashMap.content)this.setModel(this._layerHashMap.get(a),a);for(a in this._alignHashMap.content)this.layout(a)};a.removeTimer=function(){c.TimerManager.getInstance().removeExecute(this._timerId)};a.setModel=function(b,a){void 0===a&&(a=0);var d=c.ApplicationLayerType.LAYER_MOUSE_CONFIGS[a];b.graphics.clear();d.model&&0<b.numChildren&&(b.graphics.beginFill(0,
d.alpha),b.graphics.drawRect(0,0,this.stage.stageWidth,this.stage.stageHeight),b.graphics.endFill())};a.checkModel=function(b){if(b)for(var a in this._layerHashMap.content)if(this._layerHashMap.get(a)==b){this.setModel(b,a);break}};a.dispatchRecall=function(b){this.hasEventListener(c.ApplicationEvent.WINDOW_RECALL)&&this.dispatchEvent(new c.ApplicationEvent(c.ApplicationEvent.WINDOW_RECALL,!1,!1,b))};d._instance=null;return d}(c.EventDispatcher);c.ApplicationManager=f;f.prototype.__class__="egret.ApplicationManager"})(egret||
(egret={}));
(function(c){var f=function(){function e(){this._idGenerator=new c.IDGenerator(-1)}var d=e.prototype;e.getInstance=function(){return e._instance||(e._instance=new e)};d.getAutoElementId=function(){return this._idGenerator.getID(!1)};d.getElementSpeed=function(){return 6};d.getActionUrl=function(a,b,d){void 0===d&&(d=1);b=b+"/"+b+"_"+d+c.ExtensionType.JSON;return c.dataManager().pathData.getResourceUrl(a,b)};d.hasActionType=function(a,b){void 0===b&&(b=0);return-1!=a.indexOf(b.toString())};d.setSceneAvatarVoPlayer=
function(a,b,c,d,e,f,h,k){void 0===k&&(k=0);a.body="player_"+b+"_"+c+"_"+e+"_"+d;a.weapon="weapon_"+b+"_"+c+"_"+f+"_"+d;a.wing="wing_"+b+"_"+c+"_"+h+"_"+d;a.mounts="mounts_"+b+"_"+c+"_"+k+"_"+d;return a};d.setSceneAvatarVoPlayer2=function(a,b,c,d,e,f){a.body="player_"+b+"_"+c+"_"+d;a.weapon="weapon_"+b+"_"+c+"_"+e;a.wing="wing_"+b+"_"+c+"_"+f;return a};d.setSceneAvatarVo=function(a,b){b&&(a.body=b.movieName);return a};d.getSkillMovieName=function(a,b){return"skill_"+a+"_"+b};e.ARRIVE_ELEMENT_RADIUS=
40;e.ENTRY_POINT_RADIUS=20;e._instance=null;return e}();c.SceneElementData=f;f.prototype.__class__="egret.SceneElementData"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.LAYER_MOUSE_CONFIGS=[{touchEnabled:!1,touchChildren:!1},{touchEnabled:!1,touchChildren:!0},{touchEnabled:!1,touchChildren:!1},{touchEnabled:!1,touchChildren:!0},{touchEnabled:!1,touchChildren:!0},{touchEnabled:!1,touchChildren:!1},{touchEnabled:!1,touchChildren:!1},{touchEnabled:!1,touchChildren:!1}];c.TIP_EFFECT=7;c.FRONT_VIEW=6;c.BATTLE_EFFECT=5;c.BIOLOGY=4;c.GOODS=3;c.BACKGROUND_EFFECT=2;c.NEARBY_VIEW=1;c.DISTANT_VIEW=0;return c}();c.SceneLayerType=
f;f.prototype.__class__="egret.SceneLayerType"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this)}__extends(d,e);var a=d.prototype;a.addToScene=function(){e.prototype.addToScene.call(this);this.play(0,c.ActionType.PREPARE,c.ActionMovieClipDirectionType.UP)};a.attackTo=function(b,a,d,e,f,h,k){this._attackTarget=d;this._offsetAttackX=e;this._offsetAttackY=f;this.x=b;this.y=a;d=this._attackTarget.vo.x+this._offsetAttackX;e=this._attackTarget.vo.y+this._offsetAttackY;f=Math.atan2(e-a,d-b);d=Math.cos(f)*k+b;e=Math.sin(f)*k+a;f=f/Math.PI*180;
this.rotation=f+h;this._isEnd=!1;c.Tween.get(this,{onChange:this.onChange,onChangeObj:this}).to({x:d,y:e},500).call(this.moveComplete,this)};a.onChange=function(){if(this._isEnd)this.moveComplete();else{var b=c.DimensionUtil.distance2(this._x,this._y,this._attackTarget.vo.x+this._offsetAttackX,this._attackTarget.vo.y+this._offsetAttackY);10>Math.abs(b)&&(this._isEnd=!0)}};a.moveComplete=function(){c.Tween.removeTweens(this);this.playEnd()};a.getPartUrl=function(b){var a=c.PathData.PATH_MOVIES_SKILL;
b=this._sceneAvatarVo[b];return c.dataManager().sceneElementData.getActionUrl(a,b,this._avatar.actionType)};return d}(c.ElementEffect);c.ElementMageNormalSkill=f;f.prototype.__class__="egret.ElementMageNormalSkill"})(egret||(egret={}));
(function(c){var f=function(e){function d(b,a,c,d,f,h,k,m){void 0===b&&(b=null);void 0===a&&(a=0);void 0===c&&(c=0);void 0===d&&(d=!0);void 0===f&&(f=null);void 0===h&&(h=null);void 0===k&&(k=null);void 0===m&&(m=null);e.call(this);this.autoFixed=!0;this.loadError=this.loadProgress=this.loadComplete=null;this._isShowLoading=!0;this._url=null;this._height=this._width=0;this._loadingStyle=this._content=null;this._isCompleted=!0;this.touchChildren=this.touchEnabled=!1;this._thisObj=f;this._width=a;this._height=
c;this._isShowLoading=d;this.loadComplete=h;this.loadProgress=k;this.loadError=m;this.url=b;this.drawRect(this,this._width,c)}__extends(d,e);var a=d.prototype;d.getTexture=function(b){return d._contentMap.get(b)};d.destroyResource=function(){for(var b=[],a=0;a<arguments.length;a++)b[a-0]=arguments[a];for(var a=null,c=b.length,e=0;e<c;e++)(a=d._contentMap.remove(b[e]))&&a.dispose()};Object.defineProperty(a,"isShowLoading",{get:function(){return this._isShowLoading},set:function(b){this._isShowLoading!=
b&&(this._isShowLoading=b,this._isCompleted?this.showLoadingStyle(!1):this.showLoadingStyle(this._isShowLoading))},enumerable:!0,configurable:!0});Object.defineProperty(a,"content",{get:function(){return this._content},set:function(b){this.showLoadingStyle(!1);b!=this._content&&this._content&&this._content.parent&&this._content.parent.removeChild(this._content);(this._content=b)?(this._content.parent!=this&&this.addChild(this._content),this._content.x=0,this._content.y=0,0==this._width||0==this._height?
(this._width=this._content.width,this._height=this._content.height,this.drawRect(this,this._width,this.height)):this.autoFixed&&(this._content.width=this._width,this._content.height=this._height)):this._url=null},enumerable:!0,configurable:!0});Object.defineProperty(a,"url",{get:function(){return this._url},set:function(b){this._url!=b&&(this.content=null,(this._url=b)?(b=d._contentMap.get(this.url))?this.createBitmap(b):(RES.getResByUrl(this._url,this.loadActionComplete,this),this.showLoadingStyle(this._isShowLoading)):
(this.showLoadingStyle(!1),this._isCompleted=!0))},enumerable:!0,configurable:!0});a.createBitmap=function(b){var a=this._content;a?a.texture=b:a=new c.Bitmap(b);this.content=a};a.loadActionComplete=function(b,a){b&&d._contentMap.put(a,b);a==this._url&&(this._isCompleted=!0,this.createBitmap(b),null!=this.loadComplete&&this.loadComplete.apply(this._thisObj,[this]))};Object.defineProperty(a,"height",{get:function(){return this._height},set:function(b){this._height!=b&&(this._height=b,this._content&&
this.autoFixed&&(this._content.height=b),this.drawRect(this,this._width,this.height),this.updateLayout())},enumerable:!0,configurable:!0});Object.defineProperty(a,"width",{get:function(){return this._width},set:function(b){this._width!=b&&(this._width=b,this._content&&this.autoFixed&&(this._content.width=b),this.drawRect(this,this._width,this.height),this.updateLayout())},enumerable:!0,configurable:!0});a.setLoadingStyle=function(b){this._loadingStyle!=b&&(this.showLoadingStyle(!1),this._loadingStyle=
b,this._loadingStyle.touchEnabled=!1,"touchChildren"in this._loadingStyle&&(this._loadingStyle.touchChildren=!1),this.showLoadingStyle(this._isShowLoading))};a.destroy=function(){this._isDestroy||(this.loadError=this.loadProgress=this.loadComplete=null,e.prototype.destroy.call(this))};a.showLoadingStyle=function(b){b?(this._loadingStyle||(d.defaultLoadingStyle?(this._loadingStyle=new d.defaultLoadingStyle,"touchChildren"in this._loadingStyle&&(this._loadingStyle.touchChildren=!1)):(this._loadingStyle=
new c.TextField,0<this._width?(this._loadingStyle.width=this._width,this._loadingStyle.height=this._height):(this._loadingStyle.width=50,this._loadingStyle.height=50),this._loadingStyle.size=20,this._loadingStyle.textAlign=c.HorizontalAlign.CENTER,this._loadingStyle.verticalAlign=c.VerticalAlign.MIDDLE,this._loadingStyle.text="Loading.."),this._loadingStyle.touchEnabled=!1),this._loadingStyle&&(this._loadingStyle.parent!=this&&this.addChild(this._loadingStyle),this._loadingStyle instanceof c.MovieClip&&
this._loadingStyle.gotoAndPlay(2),this.updateLayout())):this._loadingStyle&&(this._loadingStyle.parent&&this._loadingStyle.parent.removeChild(this._loadingStyle),this._loadingStyle instanceof c.MovieClip&&this._loadingStyle.gotoAndStop(1))};a.updateLayout=function(){this._loadingStyle&&this._loadingStyle.parent&&(this._loadingStyle.x=(this._width-this._loadingStyle.width)/2,this._loadingStyle.y=(this._height-this._loadingStyle.height)/2)};a.drawRect=function(b,a,c,d,e,f){void 0===d&&(d=0);void 0===
e&&(e=0);void 0===f&&(f=!1);b.graphics.clear();0!=a&&0!=c&&(f&&this.drawRectBorder(b,a,c,d,e),b.graphics.beginFill(d,e),b.graphics.drawRect(0,0,a,c),b.graphics.endFill())};a.drawRectBorder=function(b,a,c,d,e,f){void 0===d&&(d=0);void 0===e&&(e=0);void 0===f&&(f=0);0!=a&&0!=c&&(b.graphics.lineStyle(f,d,e),b.graphics.drawRect(0,0,a,c))};d.defaultLoadingStyle=null;d._contentMap=new c.HashMap;return d}(c.CoreSprite);c.Image=f;f.prototype.__class__="egret.Image"})(egret||(egret={}));
(function(c){var f=function(){function e(){this.sharedCount=100;this._modelMap=this._completeArray=this._driverDatas=this._executeHashMap=this._frameSprite=null;this._gcId=NaN;this._executeHashMap=new c.HashMap;this._modelMap=new c.HashMap;this._driverDatas=[];this._completeArray=[];this._idGenerator=new c.IDGenerator}var d=e.prototype;e.getInstance=function(){return e._instance||(e._instance=new e)};d.hasExecute=function(a){return this._executeHashMap.containsKey(a)};d.getItem=function(a){return this._executeHashMap.get(a)};
d.addExecute=function(a,b,d,e,f,l){void 0===d&&(d=1);void 0===e&&(e=null);void 0===f&&(f=0);void 0===l&&(l=0);for(var h=this._idGenerator.getID();this._executeHashMap.containsKey(h);)h=this._idGenerator.getID();if(null==a)return c.LogManager.error(this,"execute\u4e0d\u80fd\u4e3a\u7a7a: execute = "+a),h;a=c.ScriptItemManager.getInstance().getFrameScriptItem(a,d,e,l,b);a.repeatCount=f;a.id=h;this.addScriptItem(a);return h};d.removeExecute=function(a){a=this._executeHashMap.remove(a);this.removeScriptItem(a);
c.ScriptItemManager.getInstance().recoverScriptItem(a)};d.addScriptItem=function(a){if(!a||isNaN(a.id))return null;null!=a.execute&&this._executeHashMap.put(a.id,a);for(var b=!1,d=null,e=this._driverDatas.length,f=0;f<e;f++){var l=this._driverDatas[f],d=l.model;if(0<this.sharedCount&&d.itemsCount>=this.sharedCount)b=!0;else{b=!1;break}}!l||b?(l={driver:this.addDriver(null),model:new c.ScriptModel(this.sharedCount)},this._driverDatas.push(l),this._modelMap.put(l.driver.hashCode,l.model)):this.addDriver(l.driver);
l.time=0;d=l.model;d.addScript(a);return a};d.removeScriptItem=function(a,b){void 0===b&&(b=!1);if(!a)return null;for(var c=null,d=this._driverDatas.length,e=0;e<d;e++){var f=this._driverDatas[e],c=f.model;if(c.hasScriptItem(a)){this._executeHashMap.remove(a.id);var h=c.removeScript(a,b);0==c.itemsCount&&(f.time=0,this.removeDriver(f.driver),this.setTimer(!0));break}}return h};d.stop=function(){this._frameSprite&&this._frameSprite.removeEventListener(c.Event.ENTER_FRAME,this.enterFrameHandler,this)};
d.destroy=function(){this.stop();this._frameSprite=null};d.start=function(){this._frameSprite||(this._frameSprite=new c.DisplayObjectContainer);this._frameSprite.hasEventListener(c.Event.ENTER_FRAME)||this._frameSprite.addEventListener(c.Event.ENTER_FRAME,this.enterFrameHandler,this)};d.removeDriver=function(a){a&&a.removeEventListener(c.Event.ENTER_FRAME,this.enterFrameHandler,this)};d.addDriver=function(a){a||(a=new c.DisplayObjectContainer);a.addEventListener(c.Event.ENTER_FRAME,this.enterFrameHandler,
this);return a};d.setTimer=function(a){a?(isNaN(this._gcId)||c.TimerManager.getInstance().removeExecute(this._gcId),this._gcId=c.TimerManager.getInstance().addExecute(this.gcTimerHandler,this,c.DateUtil.VALUE_MINUTE)):c.TimerManager.getInstance().removeExecute(this._gcId)};d.enterFrameHandler=function(a){var b=null,c=null,d=null,c=0,d=this._modelMap.get(a.target.hashCode);for(a=c=d.priorityMax;0<=a;a--)for(var b=d.items[a],e=d.itemsCount,f=0;f<e;f++){c=b[f];if(!c)break;c.apply();c.isCompleted&&this._completeArray.push(c)}d=
this._completeArray.length;for(b=0;b<d;b++)c=this._completeArray[b],this.removeScriptItem(c);this._completeArray.length=0};d.gcTimerHandler=function(){for(var a=null,b=0,b=a=null,d=0;d<this._driverDatas.length;d++)a=this._driverDatas[d],a.time+=c.DateUtil.VALUE_MINUTE,a.time>=c.DateUtil.VALUE_MINUTE_10&&(b=a.driver,b.hasEventListener(c.Event.ENTER_FRAME)?a.time=0:(a=a.model,a.destroy(),this._modelMap.remove(b.hashCode),this._driverDatas.splice(d,1),d--));b=this._driverDatas.length;0==b&&this.setTimer(!1)};
e._instance=null;return e}();c.EnterFrameManager=f;f.prototype.__class__="egret.EnterFrameManager"})(egret||(egret={}));
(function(c){var f=function(){function e(){this.dataItems=[];this.topLineY=this.frameRate=0;this.centerPoint=new c.Point;this.shadowHeight=this.shadowWidth=0}e.prototype.destroy=function(){for(var c=this.dataItems.length,a=0;a<c;a++)this.dataItems[a].destroy();this.centerPoint=this.dataItems=null};return e}();c.BaseMovieClipVo=f;f.prototype.__class__="egret.BaseMovieClipVo"})(egret||(egret={}));(function(c){c.getRes=function(c){return RES.getRes(c)}})(egret||(egret={}));
(function(c){c.globalUpdateWindows=function(f){for(var e=[],d=1;d<arguments.length;d++)e[d-1]=arguments[d];e.unshift(f);c.ApplicationManager.getInstance().globalUpdate.apply(c.ApplicationManager.getInstance(),e)}})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.BODY="body";c.WEAPON="weapon";c.WING="wing";c.MOUNTS="mounts";c.TYPES=[c.BODY,c.WEAPON,c.WING,c.MOUNTS];c.TYPES_NORMAL=[c.BODY,c.WEAPON,c.WING];c.TYPES_BODY_ONLY=[c.BODY];c.DIRECTION_UP=[c.WING,c.WEAPON,c.BODY,c.MOUNTS];c.DIRECTION_UP_RIGHT=[c.WING,c.WEAPON,c.BODY,c.MOUNTS];c.DIRECTION_RIGHT=[c.WING,c.WEAPON,c.BODY,c.MOUNTS];c.DIRECTION_DOWN_RIGHT=[c.WEAPON,c.BODY,c.WING,c.MOUNTS];c.DIRECTION_DOWN=[c.WEAPON,c.BODY,c.WING,c.MOUNTS];return c}();c.ActionPartType=
f;f.prototype.__class__="egret.ActionPartType"})(egret||(egret={}));
(function(c){var f=function(){function e(){this._textFields=[]}var d=e.prototype;e.getInstance=function(){return this._instance||(this._instance=new c.HPTweenManager)};d.tween=function(a,b,d,e,f,l,h,k){void 0===h&&(h=16776960);void 0===k&&(k=20);var m=this._textFields.pop();m||(m=new c.TextField);m.text=l;m.height=k;m.width=200;m.textAlign=c.HorizontalAlign.CENTER;m.textColor=h;m.x=b-m.width/2;m.y=d;a.addChild(m);a=Math.cos(e)*f+b;d=Math.sin(e)*f+d;c.Tween.removeTweens(m);c.Tween.get(m).to({x:a,y:d},
1E3,c.Ease.circInOut).call(this.randomDirComplete,this,[m])};d.randomDirComplete=function(a){a.parent&&a.parent.removeChild(a);this._textFields.push(a)};return e}();c.HPTweenManager=f;f.prototype.__class__="egret.HPTweenManager"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.LEVEL="Level";c.RULE="Rule";c.BUBBLE_RATE="BubbleRate";c.PET="Pet";c.PET_LEVEL="PetLevel";c.PROP="Prop";c.MONSTER="Monster";c.DIALOG="Dialog";c.ENTER_POINT="EnterPoint";c.NPC="Npc";c.NPC_ARMY="NpcArmy";c.NPC_MONSTER="NpcMonster";c.NPC_ROLE="NpcRole";c.SCENE="Scene";c.ROLE_BORN_POINT="RoleBornPoint";return c}();c.LocalDataFileName=f;f.prototype.__class__="egret.LocalDataFileName"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.LEVEL_UP=101;c.USER_INFO=102;c.INCOME=103;c.UAV_POWER=104;c.KANKE=105;c.SHOW_FRIEND=106;c.NAVIGATE_LINK=107;c.GUIDE=108;c.EXP_ADD=201;c.ADD_PET=301;c.PET_STRIKE=302;c.PET_INFO=301;c.PET_WORK=304;c.PROP_CHANGE=401;c.MALL_UPDATE=501;c.RANKING=601;c.PLAYER_EXIT_SCENE=701;c.PLAYER_ENTER_SCENE=702;c.PLAYER_VO_CHANGED=703;c.NORMAL_COPY_MONSTER_BORN=704;c.DAMAGE_HP_CHANGE=705;c.NEXT_SCENE=706;c.CHANGE_COPY=707;c.NEXT_TURN=708;c.ADD_ROLE=709;return c}();c.UpdateType=
f;f.prototype.__class__="egret.UpdateType"})(egret||(egret={}));(function(c){var f=function(){return function(){this.y=this.x=-1;this.elementId=0;this.sceneId=-1}}();c.SceneNavigatorDataItem=f;f.prototype.__class__="egret.SceneNavigatorDataItem"})(egret||(egret={}));(function(c){var f=function(c){function d(){c.call(this)}__extends(d,c);return d}(c.SceneElementLo);c.RoleBornPointLo=f;f.prototype.__class__="egret.RoleBornPointLo"})(egret||(egret={}));
(function(c){var f=function(){function e(){this.mapId=this.id=0;this.name="";this.bornPoint=0;this.coorPoint=null;this.visible=this.enabled=this.type=this.area=0;this._idString=this._point=null}var d=e.prototype;Object.defineProperty(d,"point",{get:function(){if(!this._point){var a=this.coorPoint.split(",");this._point=new c.Point(a[0],a[1])}return this._point},enumerable:!0,configurable:!0});Object.defineProperty(d,"idString",{get:function(){this._idString||(this._idString=this.id+"");return this._idString},
enumerable:!0,configurable:!0});return e}();c.SceneLo=f;f.prototype.__class__="egret.SceneLo"})(egret||(egret={}));(function(c){var f=function(c){function d(a,b,d,f){void 0===b&&(b=!1);void 0===d&&(d=!1);void 0===f&&(f=null);c.call(this,a,b,d);this.data=null;this.data=f}__extends(d,c);d.SCENE_ARRIVE_NAVI_POINT="sceneArriveNaviPoint";return d}(c.Event);c.SceneEvent=f;f.prototype.__class__="egret.SceneEvent"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.NORMAL_COPY=1;c.BOSS_COPY=2;return c}();c.SceneType=f;f.prototype.__class__="egret.SceneType"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this)}__extends(d,e);var a=d.prototype;a.getAttackRange=function(){return 300};a.attack=function(){if(!(this._isLocked||this.isSkillStatus||!this._attackTarget||0>=this._attackTarget.vo.hp)){this.stopMove();var b=c.ActionMovieClipData.getInstance().calculateDirection(this.x,this.y,this._attackTarget.vo.x,this._attackTarget.vo.y);!c.RoleManager.getInstance().hasAnimal&&this.getSkillTime(c.SkillType.BOWMAN_CALL)>c.dataManager().fightData.getSkillIntervalTime(c.SkillType.BOWMAN_CALL)&&
(this.setUseSkill(c.SkillType.BOWMAN_CALL),c.RoleManager.getInstance().addAnimal(this));this._avatar.actionType!=c.ActionType.ATTACK&&(this.play(0,c.ActionType.ATTACK,b),this._avatar.setFrameHandler(this.playSkill,this))}};a.playSkill=function(){if(this.scene){var b=this.data.vo;if(2==this._avatar.frameIndex){var a=c.SceneElementManager.getInstance().getElement(c.ElementMageNormalSkill);a.setMovieName(c.SceneElementData.getInstance().getSkillMovieName(b.vocation,1));this.scene.addElement(a,c.SceneLayerType.BATTLE_EFFECT);
a.attackTo(this.x,this.y-50,this._attackTarget,0,-50,90,this.getAttackRange());this.damage(c.SkillType.BOWMAN_NORMAL)}else this._avatar.frameIndex==this._avatar.frameIndexMax&&this.chaseArmies(this.armies)}};return d}(c.ElementPlayer);c.PlayerBowman=f;f.prototype.__class__="egret.PlayerBowman"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this)}__extends(d,e);var a=d.prototype;a.getAttackRange=function(){return 300};a.playSkill=function(){if(this.scene){var b=this.data.vo;if(5==this._avatar.frameIndex)if(this.getSkillTime(c.SkillType.MAGE_THUNDER_BACK)>c.dataManager().fightData.getSkillIntervalTime(c.SkillType.MAGE_THUNDER_BACK)){this.setUseSkill(c.SkillType.MAGE_THUNDER_BACK);var a=c.SceneElementManager.getInstance().getElement(c.ElementSkill);a.setAvatarDirectionSplit(!0);a.setMovieName(c.SceneElementData.getInstance().getSkillMovieName(b.vocation,
3));this.scene.addElement(a,c.SceneLayerType.BATTLE_EFFECT,this._attackTarget.vo.x,this._attackTarget.vo.y);var b=this.getDamageTargets(c.SkillType.MAGE_THUNDER_BACK),d;for(d in b)if(a=this.scene.getElement(b[d].vo.idString)){if(b[d]==this._attackTarget)var e=this._x,f=this._y;else e=this._attackTarget.vo.x,f=this._attackTarget.vo.y;var h=c.DimensionUtil.distance2(this._attackTarget.vo.x,this._attackTarget.vo.y,e,f);a.stepBack(e,f,150+h)}this.damage(c.SkillType.MAGE_THUNDER_BACK,b)}else d=c.SceneElementManager.getInstance().getElement(c.ElementMageNormalSkill),
d.setMovieName(c.SceneElementData.getInstance().getSkillMovieName(b.vocation,1)),this.scene.addElement(d,c.SceneLayerType.BATTLE_EFFECT),d.attackTo(this.x,this.y-50,this._attackTarget,0,-50,90,this.getAttackRange()),this.damage(c.SkillType.MAGE_NORMAL);else this._avatar.frameIndex==this._avatar.frameIndexMax&&(this.skillType==c.SkillType.MAGE_THUNDER_BACK?this.chaseArmies(this.armies):this.checkAutoAttack2())}};a.getDamageTargets=function(b){void 0===b&&(b=0);this._damageTargets.length=0;switch(b){case c.SkillType.MAGE_NORMAL:case c.SkillType.MAGE_THUNDER:this._damageTargets.push(this._attackTarget);
break;case c.SkillType.MAGE_THUNDER_BACK:this._damageTargets.push(this._attackTarget);b=this.getAttackRange();for(var a in this.armies)if(this.armies[a]&&this._attackTarget!=this.armies[a]){var d=this.armies[a].vo;0<d.hp&&c.DimensionUtil.distance2(this._attackTarget.vo.x,this._attackTarget.vo.y,d.x,d.y)<b&&this._damageTargets.push(this.armies[a])}}return this._damageTargets};return d}(c.ElementPlayer);c.PlayerMage=f;f.prototype.__class__="egret.PlayerMage"})(egret||(egret={}));
(function(c){var f=function(){function e(){this.baseMovieClipVos=[];this.defaultActionType=c.ActionType.PREPARE;this.defautlDirectionType=c.ActionMovieClipDirectionType.DOWN;this._actionType=-1}var d=e.prototype;Object.defineProperty(d,"actionType",{get:function(){if(-1==this._actionType)for(var a=1;a<this.baseMovieClipVos.length;a++)if(this.baseMovieClipVos[a]){this._actionType=a;break}return this._actionType},enumerable:!0,configurable:!0});d.hasActionType=function(a){void 0===a&&(a=0);return this.baseMovieClipVos[a]};
d.destroy=function(){for(var a=this.baseMovieClipVos.length,b=0;b<a;b++)for(var c=this.baseMovieClipVos[b],d=c.length,e=0;e<d;e++)c[e].destroy();this.baseMovieClipVos=null};return e}();c.ActionMovieClipVo=f;f.prototype.__class__="egret.ActionMovieClipVo"})(egret||(egret={}));(function(c){c.closeWindow=function(f){f&&c.ApplicationManager.getInstance().close(f)}})(egret||(egret={}));
(function(c){c.openWindow=function(f,e,d,a,b,g){void 0===d&&(d=-1);void 0===a&&(a=-1);void 0===b&&(b=null);void 0===g&&(g=!1);return c.ApplicationManager.getInstance().open(f,d,a,b,g)}})(egret||(egret={}));
(function(c){var f=function(){function e(){this._loMap=this._hashMap=null;this._parseCompleted=!1;this._loMap=new c.HashMap;this._hashMap=new c.HashMap;this._loMap.put(c.LocalDataFileName.MONSTER,c.MonsterLo)}var d=e.prototype;Object.defineProperty(d,"parseCompleted",{get:function(){return this._parseCompleted},enumerable:!0,configurable:!0});e.getInstance=function(){return e._instance||(e._instance=new e)};d.parseData=function(){function a(){n++;if(n>=f.length)this._parseCompleted=!0;else{d=new c.HashMap;
m=f[n];this._hashMap.put(m,d);if(k=this._loMap.get(m)){e=this.getDataVector(c.getRes(m),k);RES.destroyRes(m);l=e.length;for(var q=0;q<l;q++)h=e[q],"id"in h?d.containsKey(h.id)?c.LogManager.error(this,"\u57fa\u7840\u6570\u636e\u6709\u8bef\uff0cid\u5b57\u6bb5\u91cd\u590d,fileName = "+m+",id = "+h.id):d.put(h.id,h):c.LogManager.error(this,"\u57fa\u7840\u6570\u636e\u6709\u8bef\uff0c\u627e\u4e0d\u5230id\u5b57\u6bb5 fileName = "+m)}else c.LogManager.error(this,"\u6587\u4ef6\u540d fileName = "+m+" \u672a\u6ce8\u518cLo\u7c7b");
c.EnterFrameManager.getInstance().removeExecute(b);b=c.EnterFrameManager.getInstance().addExecute(a,this,1)}}var b=c.EnterFrameManager.getInstance().addExecute(a,this,1),d=null,e=null,f=[],l=0,h=null,k=null,m;for(m in this._loMap.content)f.push(m);var n=-1};d.getDataVector=function(a,b){if(a){for(var d=[],e=a.length,f=null,l=0;l<e;l++){f=new b;d.push(f);for(var h in a[l])f[h]=a[l][h]}0==d.length&&c.LogManager.error(this,"\u672c\u5730\u6570\u636e\u6587\u4ef6\u6ca1\u6709\u6570\u636e\u9879"+b);return d}c.LogManager.error(this,
"\u627e\u4e0d\u5230\u672c\u5730\u6570\u636e\u6587\u4ef6"+b);return null};d.getLoById=function(a,b){void 0===b&&(b=0);var d=this.getHashMap(a);if(!d||!d.containsKey(b)){c.LogManager.error(this,"\u627e\u4e0d\u5230\u57fa\u7840\u6570\u636e: fileName = "+a+",id = "+b);var e=this._loMap.get(a);if(e)return new e}return d.get(b)};d.getHashMap=function(a){var b=this._hashMap.get(a);b||(c.LogManager.error(this,"\u627e\u4e0d\u5230\u57fa\u7840\u6570\u636e\u8868: fileName = "+a),b=new c.HashMap);return b};d.getMonsterLo=
function(a){return this.getLoById(c.LocalDataFileName.MONSTER,a)};d.getRoleBornPointLo=function(a){return this.getLoById(c.LocalDataFileName.ROLE_BORN_POINT,a)};d.getSceneLo=function(a){return this.getLoById(c.LocalDataFileName.SCENE,a)};e._instance=null;return e}();c.LocalData=f;f.prototype.__class__="egret.LocalData"})(egret||(egret={}));
(function(c){var f=function(){function e(){this._roles=[];this._scene=null;this._rolePoints=[];this.addRole()}var d=e.prototype;e.getInstance=function(){return this._instance||(this._instance=new c.RoleManager)};Object.defineProperty(d,"roles",{get:function(){return this._roles},enumerable:!0,configurable:!0});Object.defineProperty(d,"role",{get:function(){return this._roles[0]},enumerable:!0,configurable:!0});Object.defineProperty(d,"isDead",{get:function(){for(var a in this._roles)if(this._roles[a]&&
!(this._roles[a]instanceof c.PlayerAnimal))return!1;return!0},enumerable:!0,configurable:!0});Object.defineProperty(d,"hasAnimal",{get:function(){return this._animal&&this._animal.data&&0<this._animal.data.vo.hp},enumerable:!0,configurable:!0});d.addRole=function(a){void 0===a&&(a=1);var b=c.dataManager().roleSceneData.addRole(a),d;1==a?d=c.SceneElementManager.getInstance().getElement(c.PlayerWarrior):2==a?d=c.SceneElementManager.getInstance().getElement(c.PlayerMage):3==a&&(d=c.SceneElementManager.getInstance().getElement(c.PlayerBowman));
d.setData(b);this._roles.push(d);1<this._roles.length&&(b=2*Math.PI*Math.random(),a=150*Math.cos(b)+this.role.x,b=150*Math.sin(b)+this.role.y,this._scene&&this._scene.addElement(d,c.SceneLayerType.BIOLOGY,a,b),d.chaseArmies(this.role.armies),c.globalUpdateWindows([c.UpdateType.ADD_ROLE]))};d.removeRole=function(a){c.dataManager().roleSceneData.removeRole(a);for(var b in this._roles)if(this._roles[b].data.vo.id==a){this._scene&&this._scene.removeElement(this._roles[b]);this._roles[b]instanceof c.PlayerAnimal&&
(this._animal=null);this._roles.splice(b,1);break}};d.addAnimal=function(a){var b=c.dataManager().roleSceneData.addAnimal();this._animal=c.SceneElementManager.getInstance().getElement(c.PlayerAnimal);this._animal.setData(b);this._roles.push(this._animal);var d=2*Math.PI*Math.random(),b=150*Math.cos(d)+a.x,d=150*Math.sin(d)+a.y;this._scene&&this._scene.addElement(this._animal,c.SceneLayerType.BIOLOGY,b,d);this._animal.chaseArmies(a.armies);c.globalUpdateWindows([c.UpdateType.ADD_ROLE])};d.revive=function(){for(var a=
0;3>a;a++)this.addRole(a+1);c.globalUpdateWindows([c.UpdateType.CHANGE_COPY])};d.setElementPlayerXY=function(a,b){void 0===b&&(b=0);var c=this.getElementPlayersPoints(a,b),d;for(d in this._roles)this._roles[d].data.vo.x=c[d].x,this._roles[d].data.vo.y=c[d].y,this._roles[d].updateXY()};d.getElementPlayersPoints=function(a,b){for(var d=0,e=0;e<this._roles.length;e++){var f=this._rolePoints[e];f||(f=new c.Point,this._rolePoints[e]=f);if(0==e)l=a,h=b;else var l=a+150*Math.cos(d),h=b+150*Math.sin(d),d=
d+Math.PI/2;f.x=l;f.y=h}return this._rolePoints};d.moveTo2=function(a,b,c){if(this._scene){a=this.getElementPlayersPoints(a,b);for(var d in this._roles)this._roles[d].moveTo2(a[d].x,a[d].y)}};d.stopMove=function(){for(var a in this._roles)this._roles[a].stopMove()};d.play=function(a,b,c,d,e,f,h,k){void 0===a&&(a=-1);void 0===b&&(b=-1);void 0===c&&(c=-1);void 0===d&&(d=0);void 0===e&&(e=null);void 0===f&&(f=null);void 0===h&&(h=null);void 0===k&&(k=null);for(var m in this._roles)this._roles[m].play.apply(this._roles[m],
arguments)};d.showPlayer=function(a,b,d){if(a&&this._scene!=a){this._scene=a;for(var e in this._roles)this._scene.addElement(this._roles[e],c.SceneLayerType.BIOLOGY)}this.setElementPlayerXY(b,d);this.stopMove();this.play(-1,c.ActionType.PREPARE,c.ActionMovieClipDirectionType.DOWN)};d.hidePlayer=function(){if(this._scene){this.stopMove();for(var a in this._roles)this._scene.removeElement(this._roles[a],!1);this._scene=null}};d.changeScene=function(a){if(a==this._scene)for(var b in this._roles)this._roles[b].clearFollowPoints(),
this._roles[b].stopMove()};d.updateHp=function(){for(var a in this._roles)this._roles[a].updateHp()};d.chaseArmies=function(a){for(var b in this._roles)this._roles[b].chaseArmies(a)};d.isRoleInstance=function(a){return-1<this._roles.indexOf(a)};d.changeSceneEffect=function(){for(var a in this._roles)this._roles[a].changeSceneEffect()};d.enterSceneEffect=function(){for(var a in this._roles)this._roles[a].enterSceneEffect()};return e}();c.RoleManager=f;f.prototype.__class__="egret.RoleManager"})(egret||
(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._sceneElementManager=this._sceneElementData=this._sceneData=null;this._monsters=[];this._otherElements=[];this._goodsList=[];this._sceneData=c.dataManager().sceneData;this._sceneElementData=c.dataManager().sceneElementData;this._sceneElementManager=c.SceneElementManager.getInstance();this._elementRadius=c.SceneElementData.ARRIVE_ELEMENT_RADIUS}__extends(d,e);var a=d.prototype;a.initWindow=function(){e.prototype.initWindow.call(this);this.addUpdateType(c.UpdateType.PLAYER_EXIT_SCENE,
c.UpdateType.PLAYER_ENTER_SCENE,c.UpdateType.PLAYER_VO_CHANGED,c.UpdateType.NORMAL_COPY_MONSTER_BORN,c.UpdateType.DAMAGE_HP_CHANGE,c.UpdateType.NEXT_SCENE,c.UpdateType.CHANGE_COPY)};a.initData=function(b){e.prototype.initData.call(this,b);this._sceneData.isChanged?(this._sceneData.isChanged=!1,b=c.LocalData.getInstance().getSceneLo(this._sceneData.cityId).bornPoint,(b=c.LocalData.getInstance().getRoleBornPointLo(b))&&this.gotoXY(b.point.x,b.point.y)):(c.openWindow(c.ButtonWindow),this.gotoXY(605,
1580),this.nextTurn())};a.changeCopy=function(){this.clearCopy();c.RoleManager.getInstance().changeSceneEffect();c.TimerManager.getInstance().addExecute(function(){c.globalUpdateWindows([c.UpdateType.NEXT_SCENE])},null,3E3,null,1)};a.nextCopy=function(){c.SceneManager.getInstance().enterScene(this._sceneData.sceneType,this._sceneData.getNextSceneId());c.RoleManager.getInstance().enterSceneEffect();this.nextTurn()};a.nextTurn=function(){c.TimerManager.getInstance().addExecute(function(){c.globalUpdateWindows([c.UpdateType.NORMAL_COPY_MONSTER_BORN])},
null,3E3,null,1)};a.addEvents=function(){e.prototype.addEvents.call(this);this.addEventListener(c.SceneEvent.SCENE_ARRIVE_NAVI_POINT,this.sceneArriveNiviPoint,this)};a.remove=function(){e.prototype.remove.call(this);this.removeEventListener(c.SceneEvent.SCENE_ARRIVE_NAVI_POINT,this.sceneArriveNiviPoint,this)};a.globalUpdate=function(b){for(var a=[],d=1;d<arguments.length;d++)a[d-1]=arguments[d];switch(b){case c.UpdateType.PLAYER_EXIT_SCENE:this.removePlayer(a[0]);break;case c.UpdateType.PLAYER_ENTER_SCENE:this.renderElement(a[0]);
break;case c.UpdateType.NORMAL_COPY_MONSTER_BORN:c.dataManager().roleSceneData.resetRoleData();c.RoleManager.getInstance().updateHp();var e=c.dataManager().roleSceneData.getRoleList();this._monsters.length=0;var d=this._sceneData.getArmies(),f;for(f in d)(a=this.renderMonster(d[f]))&&(this._monsters[f]=a),a.chaseArmies(e);c.RoleManager.getInstance().chaseArmies(d);break;case c.UpdateType.DAMAGE_HP_CHANGE:var d=a[0],e=a[1],a=a[2],h=this._isoMap.getLayerContainer(c.SceneLayerType.TIP_EFFECT);for(f in d){var k=
d[f].vo,m=this.getElement(k.idString);if(m){m.updateHp();if(e[f].isCritical)var n=16711680,q=20,r="\u66b4"+e[f].value;else n=16776960,q=16,r=e[f].value+"";c.HPTweenManager.getInstance().tween(h,k.x,k.y-50,a[f],200,r,n,q);0>=k.hp&&(this.removeElement(m),m instanceof c.ElementPlayer&&(c.RoleManager.getInstance().removeRole(k.id),c.RoleManager.getInstance().isDead&&c.RoleManager.getInstance().revive()),this._sceneData.checkArmy()||(this.showGoods(k.x,k.y),this._sceneData.sceneType=c.SceneType.NORMAL_COPY))}}break;
case c.UpdateType.NEXT_SCENE:this.nextCopy();break;case c.UpdateType.CHANGE_COPY:this.changeCopy();break;case c.UpdateType.ADD_ROLE:for(f in this._monsters)this._monsters[f].chaseArmies(c.dataManager().roleSceneData.getRoleList())}};a.showGoods=function(b,a){this._goodsList.length=0;var d=this._sceneData.getGoodsList(b,a),e;for(e in d){var f=this.renderElementInternal(c.SceneElementType.GOODS,d[e],c.SceneLayerType.GOODS);f&&this._goodsList.push(f)}0<this._goodsList.length&&(this._goodsIndex=0,c.EnterFrameManager.getInstance().hasExecute(this._goodsLoopId)||
(this._goodsLoopId=c.EnterFrameManager.getInstance().addExecute(this.checkTakeGoods,this,6)))};a.checkTakeGoods=function(){return c.RoleManager.getInstance().role.isSkillStatus?!1:(c.EnterFrameManager.getInstance().removeExecute(this._goodsLoopId),this.navigateToElement(this._goodsList[this._goodsIndex].data.vo.id),!0)};a.clearTargets=function(b){if(b)for(var a in b)this.removeElement(b[a])};a.clearCopy=function(){this.clearTargets(this._goodsList);this.clearTargets(this._monsters)};a.removePlayer=
function(b){this.removeElementById(b)};a.clearScene=function(){e.prototype.clearScene.call(this);this.clearCopy();c.EnterFrameManager.getInstance().removeExecute(this._goodsLoopId)};a.sceneArriveNiviPoint=function(b){(b=b.data)&&0!=b.elementId&&(this.removeElementById(b.elementId+""),this._goodsIndex++,this._goodsList[this._goodsIndex]?this.navigateToElement(this._goodsList[this._goodsIndex].data.vo.id):this._sceneData.addWinCount())};a.getElementSpeed=function(){return this._sceneElementData.getElementSpeed()};
a.recoverElement=function(b){this._sceneElementManager.recoverElement(b)};a.elementMovingEnd=function(b){b==this._role?this._currentNaviItem&&this.checkArriveNaviPoint():(b=b.data,this.isInRenderRect(b.vo.x,b.vo.y)||this.removeElementById(b.vo.idString))};a.renderDynamicElements=function(b){for(var a=null,a=null,d=this._sceneData.dynamicElementsMap.content.length,e=0;e<d;e++){var f=this._sceneData.dynamicElementsMap.content[e],a=f.vo;b.contains(a.x,a.y)?this.renderElementInternal(c.SceneElementType.PLAYER,
f,c.SceneLayerType.BIOLOGY):(a=a.idString,this._elementsIdMap.get(a))}};a.renderElement=function(b){this._elementsIdMap.containsKey(b.vo.idString)||this.renderElementInternal(c.SceneElementType.PLAYER,b,c.SceneLayerType.BIOLOGY)};a.renderMonster=function(b){var a=this.getElement(b.id);a?a.setData(b):(a=this.renderElementInternal(c.SceneElementType.MONSTER,b,c.SceneLayerType.BIOLOGY),a.play(0,c.ActionType.PREPARE,c.ActionMovieClipDirectionType.DOWN));return a};a.renderElementInternal=function(b,a,
d){if(this._elementsIdMap.containsKey(a.id))return null;var e=null;switch(b){case c.SceneElementType.MONSTER:e=this._sceneElementManager.getElement(c.ElementMonster);break;case c.SceneElementType.GOODS:e=this._sceneElementManager.getElement(c.ElementGoods);break;case c.SceneElementType.PLAYER:e=this._sceneElementManager.getElement(c.ElementPlayer)}e&&(e.setData(a),this.addElement(e,d));return e};a.roleMoving=function(){e.prototype.roleMoving.call(this)};a.startMove=function(){e.prototype.startMove.call(this)};
a.navigateToElement=function(b){this._currentNaviItem||(this._currentNaviItem=new c.SceneNavigatorDataItem);this._currentNaviItem.elementId=b;(b=this.getElement(b+""))&&this.navigateTo(b.x,b.y)};a.navigateTo=function(b,a){this.checkArriveNaviPoint()||e.prototype.navigateTo.call(this,b,a)};a.getElementPoint=function(b){return(b=this.getElement(b))?new c.Point(b.x,b.y):new c.Point};return d}(c.SceneDriver);c.SceneWindow=f;f.prototype.__class__="egret.SceneWindow"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._image=new c.Image(null,50,50);this._image.x=-this._image.width/2;this._image.y=-this._image.height;this.addChild(this._image);this._namePad.y=this._image.y-10}__extends(d,e);d.prototype.addToScene=function(){e.prototype.addToScene.call(this);this._image.url=c.PathData.getInstance().getResourceUrl(c.PathData.PATH_IMAGES_PROP,"icon_1.jpg")};return d}(c.SceneElement);c.ElementGoods=f;f.prototype.__class__="egret.ElementGoods"})(egret||(egret=
{}));(function(c){var f=function(e){function d(){e.call(this)}__extends(d,e);var a=d.prototype;a.getPartUrl=function(b){var a=c.PathData.PATH_MOVIES_MONSTER;b=this._sceneAvatarVo[b];return c.dataManager().sceneElementData.getActionUrl(a,b,this._avatar.actionType)};a.playSkill=function(){1==this._avatar.frameIndex&&this.damage()};return d}(c.SceneElementDriver);c.ElementMonster=f;f.prototype.__class__="egret.ElementMonster"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this)}__extends(d,e);var a=d.prototype;a.setData=function(b){e.prototype.setData.call(this,b);c.SceneElementData.getInstance().setSceneAvatarVo(this._sceneAvatarVo,b.lo)};a.play=function(b,a,d,e,f,h,k,m){void 0===b&&(b=-1);void 0===a&&(a=-1);void 0===d&&(d=-1);void 0===e&&(e=0);void 0===f&&(f=null);void 0===h&&(h=null);void 0===k&&(k=null);void 0===m&&(m=null);if(!this._isDestroy&&this._sceneAvatarVo.body){if(f&&!h)throw Error("\u672a\u6307\u5b9a\u56de\u8c03\u51fd\u6570\u5bf9\u8c61");
var n=c.ActionPartType.TYPES_BODY_ONLY;this._avatar.play(b,a,d,e,f,h,k,m);this._avatar.setPartTypes(n,this.getPartUrl,this,this.loadActionComplete,this);this._namePad.y=this._avatar.topLineY;this.clearAttack()}};a.getPartUrl=function(b){var a=c.PathData.PATH_MOVIES_MONSTER;b=this._sceneAvatarVo[b];return c.dataManager().sceneElementData.getActionUrl(a,b,this._avatar.actionType)};a.playSkill=function(){1==this._avatar.frameIndex?this.damage():this._avatar.frameIndex==this._avatar.frameIndexMax&&this.chaseArmies(this.armies)};
return d}(c.ElementPlayer);c.PlayerAnimal=f;f.prototype.__class__="egret.PlayerAnimal"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._collidePoint=new c.Point}__extends(d,e);var a=d.prototype;a.getAttackRange=function(){return 150};a.attack=function(){if(!(this._isLocked||this.isSkillStatus||!this._attackTarget||0>=this._attackTarget.vo.hp)){this.stopMove();var b=c.ActionMovieClipData.getInstance().calculateDirection(this.x,this.y,this._attackTarget.vo.x,this._attackTarget.vo.y);if(this.getSkillTime(c.SkillType.WARRIOR_COLLIDE)>c.dataManager().fightData.getSkillIntervalTime(c.SkillType.WARRIOR_COLLIDE)){this.setUseSkill(c.SkillType.WARRIOR_COLLIDE);
this.isSkillStatus=!0;var a=this.scene.getElement(this._attackTarget.vo.idString);a.lock();var d=c.SceneElementMover.MOVER_WIDTH/2,e=c.SceneElementMover.MOVER_HEIGHT,f=Math.atan2(this._attackTarget.vo.y-this._y,this._attackTarget.vo.x-this._x),h=300,k=this._x+Math.cos(f)*h,m=this._y+Math.sin(f)*h,k=this.limitValue(k,d,this._maxX-d),m=this.limitValue(m,e,this._maxY),n=500;c.Tween.get(a).to({x:k,y:m},n).call(this.collideComplete,this,[a,k,m]);h-=this.getAttackRange();k=this._x+Math.cos(f)*h;m=this._y+
Math.sin(f)*h;k=this.limitValue(k,d,this._maxX-d);m=this.limitValue(m,e,this._maxY);this.play(0,c.ActionType.WALK,b);n+=100;c.Tween.get(this,{onChange:this.onChangeCollide,onChangeObj:this}).to({x:k,y:m},n).call(this.collideComplete,this,[this,k,m]);this.damage(c.SkillType.WARRIOR_COLLIDE)}else this._avatar.actionType!=c.ActionType.ATTACK&&(this.play(0,c.ActionType.ATTACK,b),this._avatar.setFrameHandler(this.playSkill,this))}};a.onChangeCollide=function(){this.scene&&(this.setXY(this._x,this._y),
this.scene.isoMap.gotoXY2(this._x,this._y))};a.collideComplete=function(b,a,d){b.setXY(a,d);b==this?(this.setUseSkill(c.SkillType.WARRIOR_COLLIDE),this.isSkillStatus=!1,this._attackTarget&&0>=this._attackTarget.vo.hp?this.checkAutoAttack2():this.attack()):b.unlock()};a.checkAutoAttack2=function(){this._isLocked||(this._attackTarget&&0>=this._attackTarget.vo.hp?this.chaseArmies(this.armies):this.attack())};a.playSkill=function(){if(this.scene){var b=this.data.vo;if(6==this._avatar.frameIndex){var a=
c.SceneElementManager.getInstance().getElement(c.ElementSkill);a.setAvatarDirectionSplit(!1);a.setMovieName(c.SceneElementData.getInstance().getSkillMovieName(b.vocation,1));this.scene.addElement(a,c.SceneLayerType.BATTLE_EFFECT,this.x,this.y);a.direction=this.direction;this.damage(c.SkillType.WARRIOR_NORMAL)}else this._avatar.frameIndex==this._avatar.frameIndexMax&&this.checkAutoAttack2()}};a.getDamageTargets=function(b){void 0===b&&(b=0);this._damageTargets.length=0;switch(b){case c.SkillType.WARRIOR_NORMAL:case c.SkillType.WARRIOR_COLLIDE:this._damageTargets.push(this._attackTarget)}return this._damageTargets};
return d}(c.ElementPlayer);c.PlayerWarrior=f;f.prototype.__class__="egret.PlayerWarrior"})(egret||(egret={}));(function(c){var f=function(e){function d(){e.call(this)}__extends(d,e);d.prototype.getPartUrl=function(a){var b=c.PathData.PATH_MOVIES_SKILL;a=this._sceneAvatarVo[a];return c.dataManager().sceneElementData.getActionUrl(b,a,this._avatar.actionType)};return d}(c.ElementEffect);c.ElementSkill=f;f.prototype.__class__="egret.ElementSkill"})(egret||(egret={}));
(function(c){var f=function(c){function d(){c.call(this,!0)}__extends(d,c);d.prototype.initWindow=function(){c.prototype.initWindow.call(this)};return d}(c.Application);c.ApplicationMain=f;f.prototype.__class__="egret.ApplicationMain"})(egret||(egret={}));
(function(c){var f=function(){function e(){this._actionVoMap=this._dirMap=null;this._dirMap=new c.HashMap;this._dirMap.put(c.ActionMovieClipDirectionType.DOWN_LEFT,c.ActionMovieClipDirectionType.DOWN_RIGHT);this._dirMap.put(c.ActionMovieClipDirectionType.LEFT,c.ActionMovieClipDirectionType.RIGHT);this._dirMap.put(c.ActionMovieClipDirectionType.UP_LEFT,c.ActionMovieClipDirectionType.UP_RIGHT);this._dirMap.put(c.ActionMovieClipDirectionType.DOWN_RIGHT,c.ActionMovieClipDirectionType.DOWN_LEFT);this._dirMap.put(c.ActionMovieClipDirectionType.RIGHT,
c.ActionMovieClipDirectionType.LEFT);this._dirMap.put(c.ActionMovieClipDirectionType.UP_RIGHT,c.ActionMovieClipDirectionType.UP_LEFT);this._actionVoMap=new c.HashMap;this._actionDataMap=new c.HashMap;this._sheetMap=new c.HashMap;this._sheetUrlMap=new c.HashMap}var d=e.prototype;e.getInstance=function(){return e._instance||(e._instance=new e)};d.getJsonUrl=function(a){return a=a.replace(e.SHEET_PREFIX,"")};d.getJsonUrl2=function(a){a=a.replace(e.SHEET_PREFIX,"");a=a.split("_");a.pop();return a=a.join("_")+
".json"};d.getSheetUrl=function(a){var b=a.split("/"),b=b[b.length-1].split(".")[0];return a=a.replace(b,e.SHEET_PREFIX+b)};d.getSheetUrl2=function(a,b){var c=a.split("/"),c=c[c.length-1].split(".")[0];return a=a.replace(c,e.SHEET_PREFIX+c+"_"+b)};d.setActionData=function(a,b){this._actionDataMap.containsKey(a)?c.LogManager.error(this,"\u91cd\u590d\u6dfb\u52a0\u5f71\u7247\u6570\u636e: url = "+a):this._actionDataMap.put(a,b)};d.getActionData=function(a){return this._actionDataMap.get(a)};d.setSheet=
function(a,b){this._sheetMap.put(a,b);this._sheetUrlMap.put(b.hashCode,a)};d.getSheet=function(a){return this._sheetMap.get(a)};d.getUrlBySheet=function(a){return this._sheetUrlMap.get(a.hashCode)};d.setActionMoveClipVo=function(a,b){this._actionVoMap.containsKey(a)?c.LogManager.error(this,"\u91cd\u590d\u6dfb\u52a0ActionMovieClipVo\u6570\u636e: url = "+a):this._actionVoMap.put(a,b)};d.getActionMovieClipVo=function(a){return this._actionVoMap.get(a)};d.combinneActionMovieClipVo=function(a,b){if(!b)return c.LogManager.error(this,
"\u5408\u6210\u5230\u539f\u59cbvo\u7684\u65b0\u6570\u636e\u4e0d\u80fd\u4e3a\u7a7a: avo = "+b),null;if(a)for(var d in b.baseMovieClipVos)b.baseMovieClipVos[d]&&(a.baseMovieClipVos[d]=b.baseMovieClipVos[d]);else return b;return a};d.getValidateActionData=function(a,b){void 0===b&&(b=-1);if(!a)return null;var d=c.ActionMovieClipDirectionType.UP;-1==b&&(b=c.ActionType.PREPARE);for(;!e.getInstance().hasDirectionType(a,b,d);){d++;if(b>=c.ActionType.MAX&&d>=c.ActionMovieClipDirectionType.MAX)return null;
d>c.ActionMovieClipDirectionType.MAX&&(d=c.ActionMovieClipDirectionType.UP,b++,b>c.ActionType.MAX&&(b=c.ActionType.PREPARE))}return{actionType:b,direction:d}};d.getBaseMovieClipVo=function(a,b,c,d){void 0===d&&(d=!0);if(a)var e=a.baseMovieClipVos[b];if(e){var f=e[c];!f&&d&&(a=this.getReverseDir(c),f=e[a])}return f};d.getBaseMovieClipVo2=function(a,b,c){void 0===c&&(c=0);if(a=a.baseMovieClipVos[b]){var d=a[c];d||(c=this.getReverseDir(c),d=a[c])}return d};d.hasActionType=function(a,b){void 0===b&&(b=
0);return null!=a.baseMovieClipVos[b]};d.hasDirectionType=function(a,b,c,d){void 0===d&&(d=!0);return null!=this.getBaseMovieClipVo(a,b,c,d)};d.hasDirectionTypeTexture=function(a,b,c){return(a=this.getBaseMovieClipVo(a,b,c,!0))&&a.hasFrameTexture};d.setFrameRate=function(a,b,d,e){void 0===e&&(e=0);(a=this.getBaseMovieClipVo(a,b,d))?a.frameRate=Math.max(1,e):c.LogManager.error(this,"setFrameRate()\u6ca1\u6709\u64ad\u653e\u6570\u636e:actionType = "+b+",direction = "+d)};d.setShadow=function(a,b,d,e,
f){void 0===f&&(f=0);(a=this.getBaseMovieClipVo(a,b,d))?(a.shadowWidth=e,a.shadowHeight=f):c.LogManager.error(this,"setShadow()\u6ca1\u6709\u64ad\u653e\u6570\u636e:actionType = "+b+",direction = "+d)};d.setCenterPoint=function(a,b,d,e,f){void 0===f&&(f=0);(a=this.getBaseMovieClipVo(a,b,d))?(a.centerPoint.x=e,a.centerPoint.y=f):c.LogManager.error(this,"setCenterPoint()\u6ca1\u6709\u64ad\u653e\u6570\u636e:actionType = "+b+",direction = "+d)};d.setOriginalPoint=function(a,b,d,e,f){void 0===f&&(f=0);
if(a=this.getBaseMovieClipVo(a,b,d))for(b=a.dataItems.length,d=0;d<b;d++){var l=a.dataItems[d];l.x+=e;l.y+=f}else c.LogManager.error(this,"setCenterPoint()\u6ca1\u6709\u64ad\u653e\u6570\u636e:actionType = "+b+",direction = "+d)};d.setTopLineY=function(a,b,d,e){void 0===e&&(e=0);(a=this.getBaseMovieClipVo(a,b,d))?a.topLineY=e:c.LogManager.error(this,"setTopLineY()\u6ca1\u6709\u64ad\u653e\u6570\u636e:actionType = "+b+",direction = "+d)};d.calculateDirection=function(a,b,d,f,p){void 0===p&&(p=!1);a=
Math.atan2(f-b,d-a);var l=f=b=0;f=e.RADIANS_MAP.length;for(d=0;d<f;d++)if(a>=e.RADIANS_MAP[d]){b=d+1;p&&(b=d+4);if(a<=e.RADIANS_MAP[b])return f=a-e.RADIANS_MAP[d],l=e.RADIANS_MAP[b]-a,f<=l?e.DIRECTION_MAP[d]:e.DIRECTION_MAP[b];p&&(d+=3)}c.LogManager.error(this,"\u627e\u4e0d\u5230\u65b9\u5411\u6570\u636e");return c.ActionMovieClipDirectionType.UP};d.getReverseDir=function(a){return this._dirMap.get(a)};e._instance=null;e.SHEET_PREFIX="sheet_";e.RADIANS_MAP=[-Math.PI,3*-Math.PI/4,-Math.PI/2,-Math.PI/
4,0,Math.PI/4,Math.PI/2,3*Math.PI/4,Math.PI];e.DIRECTION_MAP=[c.ActionMovieClipDirectionType.LEFT,c.ActionMovieClipDirectionType.UP_LEFT,c.ActionMovieClipDirectionType.UP,c.ActionMovieClipDirectionType.UP_RIGHT,c.ActionMovieClipDirectionType.RIGHT,c.ActionMovieClipDirectionType.DOWN_RIGHT,c.ActionMovieClipDirectionType.DOWN,c.ActionMovieClipDirectionType.DOWN_LEFT,c.ActionMovieClipDirectionType.LEFT];return e}();c.ActionMovieClipData=f;f.prototype.__class__="egret.ActionMovieClipData"})(egret||(egret=
{}));(function(c){var f=function(c){function d(){c.call(this);this.type=0;this.isWalkable=!0}__extends(d,c);d.prototype.toString=function(){return"[MapNode(row = "+this.row+",column = "+this.column+",depth = "+this.depth+",type = "+this.type+")]"};return d}(c.IsoNode);c.MapNode=f;f.prototype.__class__="egret.MapNode"})(egret||(egret={}));
(function(c){var f=function(c){function d(b,a,d,f,l,h){void 0===a&&(a=6710886);void 0===d&&(d=1);void 0===f&&(f=0);void 0===l&&(l=1);void 0===h&&(h=!0);c.call(this,b);this._isoHeight=0;this._color=6710886;this._alpha=1;this._fill=!0;this._thickness=1;this._color=a;this._isoHeight=f;this._alpha=d;this._fill=h;this._thickness=l;this.draw()}__extends(d,c);var a=d.prototype;a.draw=function(){this.graphics.clear();this._fill&&this.graphics.beginFill(this._color,this._alpha);this.graphics.lineStyle(this._thickness,
this._color,this._alpha);this.graphics.moveTo(-this._size,0);this.graphics.lineTo(0,-this._size/2);this.graphics.lineTo(this._size,0);this.graphics.lineTo(0,this._size/2);this.graphics.lineTo(-this._size,0);this._fill&&this.graphics.endFill()};Object.defineProperty(a,"isoHeight",{get:function(){return this._isoHeight},set:function(b){this._isoHeight!=b&&(this._isoHeight=b,this.draw())},enumerable:!0,configurable:!0});Object.defineProperty(a,"color",{get:function(){return this._color},set:function(b){this._color!=
b&&(this._color=b,this.draw())},enumerable:!0,configurable:!0});return d}(c.IsoBase);c.IsoTile=f;f.prototype.__class__="egret.IsoTile"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.EFFECT_01="effect_01";return c}();c.MovieName=f;f.prototype.__class__="egret.MovieName"})(egret||(egret={}));
(function(c){var f=function(){function e(){this.COUNT_ELEMENT_CACHE={ElementMonster:6,ElementSkill:5,ElementEffect:5,ElementGoods:8,ElementMageNormalSkill:3,PlayerAnimal:2,PlayerWarrior:2,PlayerMage:2,PlayerBowman:2};this._sceneData=this._elementFlagMap=this._elementCache=null;this._elementCache=new c.HashMap;this._elementFlagMap=new c.HashMap;this._sceneData=c.dataManager().sceneData}var d=e.prototype;e.getInstance=function(){e._instance||(e._instance=new e);return e._instance};d.getElement=function(a){var b=
this.getElementCacheArray(this.getElementType(a)),c=null;0<b.length?(c=b.pop(),this._elementFlagMap.remove(c.hashCode)):c=new a;return c};d.recoverElement=function(a){if(!a)c.LogManager.error(this,"\u56de\u6536\u573a\u666f\u5143\u7d20element\u4e3a\u7a7a");else if(this._elementFlagMap.containsKey(a.hashCode))c.LogManager.error(this,"\u91cd\u590d\u56de\u6536\u573a\u666f\u5143\u7d20:element = "+a+",id = "+a.id);else if(!c.RoleManager.getInstance().isRoleInstance(a)){var b=this.getElementType(a),d=this.getElementCacheArray(b);
if(!this.COUNT_ELEMENT_CACHE[b])throw c.LogManager.error(this,"\u672a\u914d\u7f6e\u573a\u666f\u5143\u7d20\u7f13\u5b58\u6570\u91cf type = "+b),Error("\u672a\u914d\u7f6e\u573a\u666f\u5143\u7d20\u7f13\u5b58\u6570\u91cf type = "+b);d.length<this.COUNT_ELEMENT_CACHE[b]?(d.push(a),this._elementFlagMap.put(a.hashCode,!0)):(b=d.indexOf(a),-1!=b&&d.splice(b,1),this._elementFlagMap.remove(a.hashCode),a.destroy())}};d.getElementCacheArray=function(a){var b=this._elementCache.get(a);b||(b=[],this._elementCache.put(a,
b));return b};d.getElementType=function(a){var b=null;if(a==c.PlayerAnimal||a instanceof c.PlayerAnimal)b=e.ELEMENT_PLAYER_ANIMAL;else if(a==c.PlayerWarrior||a instanceof c.PlayerWarrior)b=e.ELEMENT_PLAYER_WARRIOR;else if(a==c.PlayerMage||a instanceof c.PlayerMage)b=e.ELEMENT_PLAYER_MAGE;else if(a==c.PlayerBowman||a instanceof c.PlayerBowman)b=e.ELEMENT_PLAYER_BOWMAN;else if(a==c.ElementMonster||a instanceof c.ElementMonster)b=e.ELEMENT_MONSTER;else if(a==c.ElementSkill||a instanceof c.ElementSkill)b=
e.ELEMENT_SKILL;else if(a==c.ElementMageNormalSkill||a instanceof c.ElementMageNormalSkill)b=e.ELEMENT_MAGE_NORMAL_SKILL;else if(a==c.ElementEffect||a instanceof c.ElementEffect)b=e.ELEMENT_EFFECT;else if(a==c.ElementGoods||a instanceof c.ElementGoods)b=e.ELEMENT_GOODS;return b};e._instance=null;e.ELEMENT_PLAYER="ElementPlayer";e.ELEMENT_MONSTER="ElementMonster";e.ELEMENT_EFFECT="ElementEffect";e.ELEMENT_SKILL="ElementSkill";e.ELEMENT_GOODS="ElementGoods";e.ELEMENT_MAGE_NORMAL_SKILL="ElementMageNormalSkill";
e.ELEMENT_PLAYER_ANIMAL="PlayerAnimal";e.ELEMENT_PLAYER_WARRIOR="PlayerWarrior";e.ELEMENT_PLAYER_MAGE="PlayerMage";e.ELEMENT_PLAYER_BOWMAN="PlayerBowman";e.ELEMENT_COLLECT_GOODS="ElementCollectGoods";return e}();c.SceneElementManager=f;f.prototype.__class__="egret.SceneElementManager"})(egret||(egret={}));
(function(c){var f=function(){function e(){this._currentItem=this._naviItems=this._sceneData=this.scene=null;this._currentIndex=0;this._isUpper=!1;this._sceneData=c.dataManager().sceneData}var d=e.prototype;e.getInstance=function(){return e._instance||(e._instance=new e)};d.enterScene=function(a,b){void 0===b&&(b=-1);if(this._sceneData.sceneType==a&&this._sceneData.sceneId==b)throw Error("\u91cd\u590d\u8fdb\u5165\u5f53\u524d\u573a\u666f, type = "+a+", id = "+b);var d=null,e=0;switch(a){default:d=
c.SceneWindow;this._sceneData.cityId=b;var f=c.LocalData.getInstance().getSceneLo(b);f&&(e=f.mapId)}this.exitScene(!0);this._sceneData.sceneType=a;this._sceneData.sceneId=b;b=0<e?e:b;this.scene||(this.scene=c.openWindow(d,!1));this.scene.loadData(b)};d.exitScene=function(a){void 0===a&&(a=!0);this.clearScene(a);c.closeWindow(this.scene);this.scene=null};d.clearScene=function(a){void 0===a&&(a=!0);this.scene&&this.scene.clearScene();switch(this._sceneData.sceneType){case c.SceneType.NORMAL_COPY:a&&
this._sceneData.clearData()}};d.moveElement=function(a,b,c){void 0===c&&(c=0);this.scene&&this.scene.moveElement(a+"",b,c)};d.gotoXY=function(a,b){void 0===b&&(b=0);this.scene&&this.scene.gotoXY(a,b)};e._instance=null;return e}();c.SceneManager=f;f.prototype.__class__="egret.SceneManager"})(egret||(egret={}));
(function(c){var f=function(){return function(e,d){var a=new c.ApplicationMain;e.addChildAt(a,0);new d}}();c.ApplicationConfig=f;f.prototype.__class__="egret.ApplicationConfig"})(egret||(egret={}));
(function(c){var f=function(){function e(){this._relativeMap=this._timeDict=null;this._timeDict={};this._relativeMap=new c.HashMap}var d=e.prototype;e.getInstance=function(){return e._instance||(e._instance=new e)};d.recordTime=function(a,b,d){void 0===b&&(b=!0);void 0===d&&(d="");var e=0,f=c.getTimer();this._timeDict[a]&&(e=f-this._timeDict[a],b&&console.log("[id="+a+"]:"+d+" \u8ddd\u79bb\u4e0a\u6b21\u8bb0\u5f55\u7528\u65f6:"+e));this._timeDict[a]=f;return e};d.resetRelativeTime=function(a){this._relativeMap.put(a,
(new Date).getTime())};d.getRelativeTime=function(a){return this._relativeMap.containsKey(a)?(a=this._relativeMap.get(a),(new Date).getTime()-a):-1};e._instance=null;return e}();c.TimeRecordManager=f;f.prototype.__class__="egret.TimeRecordManager"})(egret||(egret={}));
(function(c){var f=function(){function e(){throw Error("DisplayObjectUtil just is a static class.");}e.remove=function(){for(var c=[],a=0;a<arguments.length;a++)c[a-0]=arguments[a];for(var a=c.length,b=0;b<a;b++){var e=c[b];e&&e.parent&&e.parent.removeChild(e)}};e.addChild=function(c,a,b,e){void 0===e&&(e=null);var f=b.x;b=b.y;e&&(f+=e.x,b+=e.y);c.x=f;c.y=b;a.addChild(c)};e.swap=function(c,a,b){void 0===b&&(b=!0);for(var e=c.length,f=0,p=null,l=0;l<e;l++)b&&"parent"in c[l]&&(p=c[l].parent)&&(a[l].x=
c[l].x,a[l].y=c[l].y,f=p.getChildIndex(c[l]),p.removeChild(c[l]),p.addChildAt(a[l],f))};e.swap2=function(c,a,b){void 0===b&&(b=!0);for(var e=c.length,f=0,p=null,l=0;l<e;l++)b&&"parent"in c[l]&&(p=c[l].parent)&&(a[l].x=c[l].x,a[l].y=c[l].y,f=p.getChildIndex(c[l]),p.removeElement(c[l]),p.addElementAt(a[l],f))};e.destroyChildren=function(d,a){void 0===a&&(a=!0);if(d){d instanceof c.Stage&&c.LogManager.warn(e,"\u3010\u8b66\u544a\u3011\u9500\u6bc1\u7684\u5bf9\u8c61\u4e3a stage");for(var b=null,f=null,
s=0;d.numChildren>s;)try{b=d.getChildAt(s);if(!b)break;b.cacheAsBitmap&&(b.cacheAsBitmap=!1);f=b;"destroy"in b&&b.destroy();b.parent&&b.parent.removeChild(b);a&&f&&e.destroyChildren(f,a)}catch(p){s++,c.LogManager.error(e,p)}}};e.destroyTargets=function(){for(var d=[],a=0;a<arguments.length;a++)d[a-0]=arguments[a];for(var a=d.length,b=0;b<a;b++){var f=d[b];f instanceof c.DisplayObjectContainer&&e.destroyChildren(f);f&&("destroy"in f&&f.destroy(),f.parent&&f.parent.removeChild(f))}};e.drawRect=function(c,
a,b,f,s,p,l,h,k){void 0===f&&(f=0);void 0===s&&(s=1);void 0===p&&(p=!1);void 0===l&&(l=0);void 0===h&&(h=1);void 0===k&&(k=0);c.graphics.clear();0!=a&&0!=b&&(p&&e.drawRectBorder(c,a,b,l,h,k),c.graphics.beginFill(f,s),c.graphics.drawRect(0,0,a,b),c.graphics.endFill())};e.drawRectByRect=function(c,a,b,f,s,p,l,h){void 0===b&&(b=0);void 0===f&&(f=1);void 0===s&&(s=!1);void 0===p&&(p=0);void 0===l&&(l=1);void 0===h&&(h=0);c.graphics.clear();a&&0!=a.width&&0!=a.height&&(s&&e.drawBorderByRect(c,a,p,l,h),
c.graphics.beginFill(b,f),c.graphics.drawRect(a.x,a.y,a.width,a.height),c.graphics.endFill())};e.drawBorderByRect=function(c,a,b,e,f){void 0===b&&(b=0);void 0===e&&(e=1);void 0===f&&(f=0);c.graphics.clear();a&&0!=a.width&&0!=a.height&&(c.graphics.lineStyle(f,b,e,!0),c.graphics.drawRect(a.x,a.y,a.width,a.height))};e.drawRectBorder=function(c,a,b,e,f,p){void 0===e&&(e=0);void 0===f&&(f=1);void 0===p&&(p=0);c.graphics.clear();0!=a&&0!=b&&(c.graphics.lineStyle(p,e,f,!0),c.graphics.drawRect(0,0,a,b))};
e.drawRoundRect=function(c,a,b,f,s,p,l,h,k,m,n){void 0===f&&(f=0);void 0===s&&(s=0);void 0===p&&(p=!1);void 0===l&&(l=0);void 0===h&&(h=0);void 0===k&&(k=0);void 0===m&&(m=0);void 0===n&&(n=0);c.graphics.clear();0!=a&&0!=b&&(p&&e.drawRoundRectBorder(c,a,b,l,h,k,m,n),c.graphics.beginFill(f,s),c.graphics.drawRoundRect(0,0,a,b,m,n),c.graphics.endFill())};e.drawRoundRectBorder=function(c,a,b,e,f,p,l,h){void 0===e&&(e=0);void 0===f&&(f=0);void 0===p&&(p=0);void 0===l&&(l=0);void 0===h&&(h=0);c.graphics.clear();
0!=a&&0!=b&&(0!=l&&0==h&&(h=l),0!=h&&0==l&&(l=h),c.graphics.lineStyle(p,e,f,!0),c.graphics.drawRoundRect(0,0,a,b,l,h))};e.drawCircle=function(c,a,b,f,s,p,l,h,k,m){void 0===b&&(b=0);void 0===f&&(f=0);void 0===s&&(s=0);void 0===p&&(p=1);void 0===l&&(l=!1);void 0===k&&(k=0);void 0===m&&(m=1);c.graphics.clear();l&&e.drawCircleBorder(c,a,b,f,s,k,m);c.graphics.beginFill(s,p);c.graphics.drawCircle(b,f,a);c.graphics.endFill()};e.drawCircleBorder=function(c,a,b,e,f,p,l){void 0===b&&(b=0);void 0===e&&(e=0);
void 0===f&&(f=0);void 0===p&&(p=0);void 0===l&&(l=1);c.graphics.clear();c.graphics.lineStyle(p,f,l,!1,"none");c.graphics.drawCircle(b,e,a)};e.drawCircleBorderDotted=function(c,a,b,e,f,p,l,h){void 0===b&&(b=0);void 0===e&&(e=0);void 0===f&&(f=0);void 0===p&&(p=0);void 0===l&&(l=1);void 0===h&&(h=5);c.graphics.clear();c.graphics.lineStyle(p,f,l,!1,"none");p=f=0;l=Math.PI;for(var k=0;360>k;k+=h)f=Math.cos(k/180*l)*a+b,p=Math.sin(k/180*l)*a+e,c.graphics.moveTo(f,p),k+=h,f=Math.cos(k/180*l)*a+b,p=Math.sin(k/
180*l)*a+e,c.graphics.lineTo(f,p)};e.drawSector=function(c,a,b,e,f,p,l,h){void 0===a&&(a=200);void 0===b&&(b=200);void 0===e&&(e=100);void 0===f&&(f=27);void 0===p&&(p=270);void 0===l&&(l=16711680);void 0===h&&(h=1);c.graphics.clear();c.graphics.beginFill(l,h);c.graphics.lineStyle(0,l,h);c.graphics.moveTo(a,b);f=360<Math.abs(f)?360:f;l=Math.ceil(Math.abs(f)/45);h=f/l*Math.PI/180;p=p*Math.PI/180;c.graphics.lineTo(a+e*Math.cos(p),b+e*Math.sin(p));for(var k=1;k<=l;k++){p+=h;var m=p-h/2,n=a+e/Math.cos(h/
2)*Math.cos(m),m=b+e/Math.cos(h/2)*Math.sin(m),q=a+e*Math.cos(p),r=b+e*Math.sin(p);c.graphics.curveTo(n,m,q,r)}360!=f&&c.graphics.lineTo(a,b);c.graphics.endFill()};e.setChildrenCache=function(c,a){void 0===a&&(a=!0);for(var b=c.numChildren,e=null,f=0;f<b;f++)e=c.getChildAt(f),e.cacheAsBitmap=a};e.getInstance=function(c,a,b,f,s,p){void 0===a&&(a=null);void 0===b&&(b=NaN);void 0===f&&(f=NaN);void 0===s&&(s=NaN);void 0===p&&(p=NaN);c=new c;e.addInstance(c,a,b,f,s,p);return c};e.addInstance=function(c,
a,b,e,f,p){void 0===a&&(a=null);void 0===b&&(b=NaN);void 0===e&&(e=NaN);void 0===f&&(f=NaN);void 0===p&&(p=NaN);isNaN(b)||(c.x=b);isNaN(e)||(c.y=e);isNaN(f)||(c.width=f);isNaN(p)||(c.height=p);a&&a.addChild(c)};e.drawDashed=function(c,a,b,e,f,p,l,h){void 0===h&&(h=0);if(c&&!(0>=p||0>=l)){e-=a;f-=b;var k=Math.atan2(f,e);e=Math.sqrt(e*e+f*f);f=0;for(var m,n=Math.cos(k),q=Math.sin(k),r=0;f<=e;){k=a+n*f;m=b+q*f;c.moveTo(k,m);f+=p;f>e&&(f=e);k=a+n*f;m=b+q*f;c.lineTo(k,m);r++;if(0<h&&r>h)break;f+=l}}};
return e}();c.DisplayObjectUtil=f;f.prototype.__class__="egret.DisplayObjectUtil"})(egret||(egret={}));
(function(c){var f=function(){function c(){throw Error("ClassUtil just is a static class.");}c.deleteObjectKey=function(){for(var c=[],a=0;a<arguments.length;a++)c[a-0]=arguments[a];for(var a=[],b=0,e=c.length,f=0;f<e;f++){var p=c[f];if(p){for(var l in p)a.push(l);for(b=a.length;0<b;)delete p[a.pop()],b--}}};c.isBaseType=function(d){for(var a=c.BASE_TYPES.length,b=0;b<a;b++){var f=c.BASE_TYPES[b];if(typeof d==f)return!0}a=c.BASE_TYPES2.length;for(b=0;b<a;b++)if(f=c.BASE_TYPES2[b],d==f)return!0;return!1};
c.hasKey=function(c){for(var a in c)return!0;return!1};c.copyProperties=function(c,a){if(c&&a)for(var b in c)try{a[b]=c[b]}catch(e){}};c.clone=function(d){var a={};c.copyProperties(d,a);return a};c.BASE_TYPES=["number","string","boolean"];c.BASE_TYPES2=[null,void 0];return c}();c.ObjectUtil=f;f.prototype.__class__="egret.ObjectUtil"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._direction=c.ActionMovieClipDirectionType.UP;this._actionType=c.ActionType.PREPARE;this._actionMovieClipVo=null;this.touchChildren=!1}__extends(d,e);var a=d.prototype;Object.defineProperty(a,"actionType",{get:function(){return this._actionType},set:function(b){this._actionType!=b&&(this._actionType=b,this.setBaseMovieClipVo(this._actionType))},enumerable:!0,configurable:!0});Object.defineProperty(a,"actionMovieClipVo",{get:function(){return this._actionMovieClipVo},
set:function(b){this._actionMovieClipVo=b;this.setBaseMovieClipVo(this._actionType,this._direction)},enumerable:!0,configurable:!0});Object.defineProperty(a,"direction",{get:function(){return this._direction},set:function(b){this._direction!=b&&(this._direction=b,this.setBaseMovieClipVo(-1,this._direction))},enumerable:!0,configurable:!0});a.getBaseMovieClipVo=function(b,a){void 0===a&&(a=0);return c.ActionMovieClipData.getInstance().getBaseMovieClipVo(this._actionMovieClipVo,b,a)};a.hasActionType=
function(b){void 0===b&&(b=0);return c.ActionMovieClipData.getInstance().hasActionType(this._actionMovieClipVo,b)};a.hasDirectionType=function(b,a,d){void 0===d&&(d=!0);return c.ActionMovieClipData.getInstance().hasDirectionType(this._actionMovieClipVo,b,a,d)};a.destroy=function(){this._isDestroy||e.prototype.destroy.call(this)};a.setBaseMovieClipVo=function(b,a){void 0===b&&(b=-1);void 0===a&&(a=-1);if(-1!=b||-1!=a){-1!=b&&(this._actionType=b);-1!=a&&(this._direction=a);var d=this._direction;if(this._actionMovieClipVo){var e=
this._actionMovieClipVo.baseMovieClipVos[this._actionType];if(e)var f=e[this._direction];f?this.scaleX=1:e&&(d=c.ActionMovieClipData.getInstance().getReverseDir(this._direction),f=e[d])&&(this.scaleX=-1)}this.baseMovieClipVo=f}};a.setActionMovieClipVo=function(b,a,c){void 0===a&&(a=-1);void 0===c&&(c=-1);this._actionMovieClipVo=b;this.setBaseMovieClipVo(a,c)};a.clear=function(){e.prototype.clear.call(this);this._actionMovieClipVo=null};return d}(c.BaseMovieClip2);c.ActionMovieClip2=f;f.prototype.__class__=
"egret.ActionMovieClip2"})(egret||(egret={}));
(function(c){var f=function(){function e(a,b,d,e,f,l){void 0===a&&(a=2);void 0===b&&(b=null);void 0===d&&(d=null);void 0===e&&(e=null);void 0===f&&(f=null);void 0===l&&(l=null);this.loadCount=6;this._urls=this.loadAbort=this.loadProgress=this.loadError=this.loadComplete=null;this._loadIndex=0;this._contents=null;this._currentCount=0;this._isCompleted=this._isLoading=!1;this._urlHashMap=this._indexHashMap=null;this.loadCount=Math.max(1,a);this.loadComplete=d;this.loadError=e;this.loadProgress=f;this.loadAbort=
l;this._callbackObj=b;this._urls=[];this._contents=[];this._indexHashMap=new c.HashMap;this._urlHashMap=new c.HashMap}var d=e.prototype;Object.defineProperty(d,"isLoading",{get:function(){return this._isLoading},enumerable:!0,configurable:!0});Object.defineProperty(d,"isCompleted",{get:function(){return this._isCompleted},enumerable:!0,configurable:!0});Object.defineProperty(d,"loadIndex",{get:function(){return this._loadIndex},enumerable:!0,configurable:!0});Object.defineProperty(d,"urls",{get:function(){return this._urls},
set:function(a){a?(this._urls=a,this.initLoading()):c.LogManager.error(this,"\u53c2\u6570\u4e0d\u80fd\u4e3a\u7a7a: urls = "+a)},enumerable:!0,configurable:!0});d.addUrls=function(a,b){void 0===b&&(b=!0);this._isLoading?(b?(this._urls=a.concat(this._urls),a=[this._loadIndex+1,0].concat(a),this._urls.splice.apply(this._urls,a)):this._urls=this._urls.concat(a),this._isLoading||(this.urls=a)):this.urls=a.concat()};d.stopAll=function(){this._loadIndex=Number.POSITIVE_INFINITY;this._indexHashMap.clear();
this._urlHashMap.clear();this._isLoading&&(this._isCompleted=!0);this._isLoading=!1};d.clear=function(){this.stopAll();this._urls.length=0;this._contents.length=0};d.destroy=function(){this.stopAll();this.loadAbort=this.loadProgress=this.loadError=this.loadComplete=null};d.initLoading=function(){this._urls&&0!=this._urls.length&&(this._currentCount=this._loadIndex=0,this.loading())};d.loading=function(){if(this._loadIndex>=this._urls.length)this._isLoading=!1,this._isCompleted=!0;else if(this._currentCount<
this.loadCount){this._isLoading=!0;this._isCompleted=!1;var a=this._urls[this._loadIndex];RES.getResByUrl(a,this.completeHandler,this);this._indexHashMap.put(a,this._loadIndex);this._currentCount++;this._loadIndex++;this.loading()}};d.completeHandler=function(a,b){var d=this._indexHashMap.get(b);this._contents[d]=new c.Bitmap(a);this.loadComplete&&this.loadComplete.apply(this._callbackObj,[b,d,this._contents[d]]);this._currentCount--;c.EnterFrameManager.getInstance().addExecute(this.loading,this,
2,null,1)};return e}();c.QueueLoader=f;f.prototype.__class__="egret.QueueLoader"})(egret||(egret={}));
(function(c){var f=function(){function e(){this._directionMap2=this._callBackTargetMap2=this._callBackMap2=this._loadUrlMap2=this._callBackTargetMap=this._callBackMap=this._loadUrlMap=null;this._loadCount=0;this._loadUrlMap=new c.HashMap;this._callBackMap=new c.HashMap;this._callBackTargetMap=new c.HashMap;this._loadUrlMap2=new c.HashMap;this._callBackMap2=new c.HashMap;this._callBackTargetMap2=new c.HashMap;this._directionMap2=new c.HashMap;this._actionMovieClipData=c.ActionMovieClipData.getInstance()}
var d=e.prototype;e.getInstance=function(){return e._instance||(e._instance=new e)};d.loadActionMovieClipVo=function(a,b,d){void 0===b&&(b=null);void 0===d&&(d=null);var e=this._callBackMap.get(a);e||(e=new c.HashMap,this._callBackMap.put(a,e));e.containsKey(d.hashCode)||(this._callBackTargetMap.put(d.hashCode,d),e.put(d.hashCode,b));this._loadUrlMap.containsKey(a)||this._actionMovieClipData.getActionMovieClipVo(a)||(this._loadUrlMap.put(a,!0),this._loadCount++,c.EnterFrameManager.getInstance().addExecute(RES.getResByUrl,
null,this._loadCount%10+2,[a,this.loadActionComplete,this],1))};d.loadActionComplete=function(a,b){if(a instanceof c.SpriteSheet&&b){if(a){var d=this._actionMovieClipData.getJsonUrl(b),e=this._actionMovieClipData.getActionData(d);(e=c.ActionMovieClipUtil.getActionMovieClipVo(e,a))?this._actionMovieClipData.setActionMoveClipVo(d,e):c.LogManager.error(this,"\u65e0\u6548\u7684ActionMovieClipVo\u6570\u636e:"+b)}else c.LogManager.error(this,"\u52a0\u8f7d\u5230\u65e0\u6548\u7684\u52a8\u4f5c\u6570\u636e: url = "+
b);this._loadUrlMap.remove(d);if(e=this._callBackMap.remove(d))for(var f in e.content){var l=e.get(f);if(null!=l){var h=this._callBackTargetMap.get(f);l.apply(h,[d])}}}else a instanceof Object?(this._actionMovieClipData.setActionData(b,a),b=this._actionMovieClipData.getSheetUrl(b),c.EnterFrameManager.getInstance().addExecute(RES.getResByUrl,null,2,[b,this.loadActionComplete,this,RES.ResourceItem.TYPE_SHEET],1)):c.LogManager.error(this,"\u52a0\u8f7d\u5230\u65e0\u6548\u7684\u52a8\u4f5c\u6570\u636e: url = "+
b)};d.loadActionMovieClipVo2=function(a,b,d,e,f){void 0===e&&(e=-1);void 0===f&&(f=-1);-1==e&&(e=d.actionType);-1==f&&(f=d.direction);var l=this._callBackMap2.get(a);l||(l=new c.HashMap,this._callBackMap2.put(a,l));b&&!l.containsKey(d.hashCode)&&(this._callBackTargetMap2.put(d.hashCode,d),l.put(d.hashCode,b));b=this._directionMap2.get(a);b||(b=[],this._directionMap2.put(a,b));-1==b.indexOf(f)&&b.push(f);this._loadUrlMap2.containsKey(a)||((b=this._actionMovieClipData.getActionMovieClipVo(a))&&!this._actionMovieClipData.hasDirectionTypeTexture(b,
e,f)?this.loadActionComplete2(b,a):(this._loadUrlMap2.put(a,!0),this._loadCount++,c.EnterFrameManager.getInstance().addExecute(RES.getResByUrl,null,this._loadCount%10+2,[a,this.loadActionComplete2,this],1)))};d.loadActionComplete2=function(a,b){if(a instanceof c.SpriteSheet){b?this._actionMovieClipData.setSheet(b,a):b=this._actionMovieClipData.getUrlBySheet(a);var d=this._actionMovieClipData.getJsonUrl2(b),e=this._actionMovieClipData.getActionMovieClipVo(d);e?c.ActionMovieClipUtil.getActionMovieClipVo2(e,
a):(e=this._actionMovieClipData.getActionData(d),(e=c.ActionMovieClipUtil.getActionMovieClipVo(e,a))?this._actionMovieClipData.setActionMoveClipVo(d,e):c.LogManager.error(this,"\u65e0\u6548\u7684ActionMovieClipVo\u6570\u636e:"+b));this._loadUrlMap2.remove(d);if(e=this._callBackMap2.remove(d))for(var f in e.content){var l=e.get(f);if(null!=l){var h=this._callBackTargetMap2.get(f);l.apply(h,[d])}}}else if(a instanceof Object)for(a instanceof c.ActionMovieClipVo||(b?this._actionMovieClipData.setActionData(b,
a):c.LogManager.error(this,"url \u4e3a\u7a7a data = "+a)),d=this._directionMap2.get(b),f=0;0<d.length;)e=d.pop(),e>c.ActionMovieClipDirectionType.DOWN&&(e=this._actionMovieClipData.getReverseDir(e)),e=this._actionMovieClipData.getSheetUrl2(b,e),(l=this._actionMovieClipData.getSheet(e))?this.loadActionComplete2(l,e):(c.EnterFrameManager.getInstance().addExecute(RES.getResByUrl,null,2+Number(f),[e,this.loadActionComplete2,this,RES.ResourceItem.TYPE_SHEET],1),f++);else c.LogManager.error(this,"\u52a0\u8f7d\u5230\u65e0\u6548\u7684\u52a8\u4f5c\u6570\u636e: url = "+
b)};e._instance=null;return e}();c.ActionMovieClipManager=f;f.prototype.__class__="egret.ActionMovieClipManager"})(egret||(egret={}));
(function(c){var f=function(){function e(){this._hashMap=null;this._hashMap=new c.HashMap}var d=e.prototype;e.getInstance=function(){return e._instance||(e._instance=new e)};d.setData=function(a,b){this._hashMap.containsKey(a)?c.LogManager.error(this,"\u91cd\u590d\u8bbe\u7f6e\u5730\u56fe\u6570\u636e id = "+a):this._hashMap.put(a,b)};d.getData=function(a){return this._hashMap.get(a)};e._instance=null;return e}();c.IsoMapData=f;f.prototype.__class__="egret.IsoMapData"})(egret||(egret={}));
(function(c){var f=function(c){function d(a,b,d){void 0===b&&(b=!1);void 0===d&&(d=!1);c.call(this,a,b,d)}__extends(d,c);d.ISO_MAP_MOVING_START="isoMapMovingStart";d.ISO_MAP_RENDER_CHANGED="isoMapRenderChanged";d.ISO_MAP_PROPERTY_CHANGED="isoMapPropertyChanged";d.ISO_MAP_TILE_CLICK="isoMapTileClick";return d}(c.Event);c.IsoMapEvent=f;f.prototype.__class__="egret.IsoMapEvent"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.ALL="all";c.VIEW="view";c.RENDER="render";return c}();c.PathPolicyType=f;f.prototype.__class__="egret.PathPolicyType"})(egret||(egret={}));
(function(c){var f=function(){function e(){}e.getPoint2D=function(d){var a=d.x,b=d.z;return new c.Point(a-b,d.y*e.Y_CORRECT+(a+b)/2)};e.getPoint3D=function(d){var a=d.x/2;d=d.y;return new c.Point3D(d+a,0,d-a)};e.getDepth=function(c){return 0.866*(c.x+c.z)-0.707*c.y};e.drawTiles=function(d,a,b,f,s,p,l,h){void 0===s&&(s=6710886);void 0===p&&(p=0.5);void 0===l&&(l=1);void 0===h&&(h=!0);var k=[],m=f/2,n=2*f,q=Math.ceil(b/f),r=Math.ceil(a/n);0==a%n&&r++;0==b%f&&q++;a=0;b=null;for(var t=0,u=0,v=0,x=0;x<
q;x++){k[a]=[];k[a+1]=[];for(var w=0;w<r;w++)t=w*n,u=x*f,b=e.getTile(f,a,w,new c.Point(t,u),s,p,l,h),d.addChild(b),k[a][w]=b,t+=f,u+=m,v=a+1,b=e.getTile(f,v,w,new c.Point(t,u),s,p,l,h),d.addChild(b),k[v][w]=b;a+=2}return k};e.getTile=function(d,a,b,e,f,p,l,h){void 0===f&&(f=6710886);void 0===p&&(p=0.5);void 0===l&&(l=1);void 0===h&&(h=!0);d=new c.IsoTile(d,f,p,0,l,h);d.line=a;d.column=b;d.point=e;return d};e.get8Nodes=function(d,a,b,f,s,p,l){void 0===p&&(p=!1);void 0===l&&(l=!1);e._vectorNodes8.length=
0;var h=d.row,k=d.column,m=h-1,n=h+1,q=k-1,r=k+1;e._vector8[0]=h;e._vector8[1]=q;e._vector8[2]=m;e._vector8[4]=h-2;e._vector8[5]=k;e._vector8[6]=m;e._vector8[8]=h;e._vector8[9]=r;e._vector8[10]=n;e._vector8[12]=h+2;e._vector8[13]=k;e._vector8[14]=n;0==h%2?(e._vector8[3]=q,e._vector8[7]=k,e._vector8[11]=k,e._vector8[15]=q):(e._vector8[3]=k,e._vector8[7]=r,e._vector8[11]=r,e._vector8[15]=k);var t=null,h=b.length,k=b[0].length,u=0,m=d.point3D;a=a.point3D;for(var v=null,n=d.size,q=d.g,r=u=t=0;16>r;r+=
2)t=e._vector8[r+1],u=e._vector8[r],0<=u&&u<h&&0<=t&&t<k&&(t=b[u][t])&&!t.flag&&void 0!=f[t.type]&&(v=t.point3D,u=p?n:c.DimensionUtil.distance3D(v,m),t.preNode=d,t.g=q+u,t.h=c.DimensionUtil.distance3D(v,a),l&&(t.h/=2),s&&0<t.factor&&(t.g*=t.factor),t.f=t.g+t.h,e._vectorNodes8.push(t),e.setFlag(t));return e._vectorNodes8};e.get8Nodes3=function(d,a,b,f){var s=d.row,p=d.column,l=s-1,h=s+1,k=p-1,m=p+1;e._vector8[0]=s;e._vector8[1]=k;e._vector8[2]=l;e._vector8[4]=s-2;e._vector8[5]=p;e._vector8[6]=l;e._vector8[8]=
s;e._vector8[9]=m;e._vector8[10]=h;e._vector8[12]=s+2;e._vector8[13]=p;e._vector8[14]=h;0==s%2?(e._vector8[3]=k,e._vector8[7]=p,e._vector8[11]=p,e._vector8[15]=k):(e._vector8[3]=p,e._vector8[7]=m,e._vector8[11]=m,e._vector8[15]=p);var n=null,s=b.length,p=b[0].length,q=0,l=d.point3D;a=a.point3D;for(var r=null,h=d.g,m=k=q=n=0;16>m;m+=2)n=e._vector8[m+1],q=e._vector8[m],0<=q&&q<s&&0<=n&&n<p&&(n=b[q][n])&&!n.flag&&void 0!=f[n.type]&&(r=n.point3D,q=c.DimensionUtil.distance3D(r,l),n.preNode=d,n.g=h+q,n.h=
c.DimensionUtil.distance3D(r,a),n.f=n.g+n.h,e._vectorNodes8[k]=n,k++,e.setFlag(n),e.setUncheckedNode(n));e._vectorNodes8.length=k;return e._vectorNodes8};e.getNeerNodeByType=function(d,a,b,f,s,p){void 0===s&&(s=!0);void 0===p&&(p=!1);if(!(b&&b.length&&b[0]&&b[0].length))return c.LogManager.error(e,"\u5730\u56fe\u8282\u70b9\u6570\u636e\u4e3a\u7a7a\u6216\u7a7a\u6570\u7ec4:nodes = "+b),null;for(var l=null,h=new c.HashMap,k=[],m=b.length*b[0].length,n=0,q=f.length,r=new c.HashMap,t=[],u=0;u<q;u++)r.put(f[u],
!0),t[f[u]]=!0;for(var u=Number.POSITIVE_INFINITY,v=null,x=0,w=0,l=0,x=null;!r.containsKey(d.type);){n++;if(n>m){c.LogManager.error(e,"\u5730\u56fe\u8282\u70b9\u6570\u7ec4\u6570\u636e\u6709\u8bef\uff0c\u5df2\u8fbe\u5230\u6700\u5927\u67e5\u627e\u6b21\u6570\uff0c\u65e0\u6cd5\u67e5\u627e\u6700\u8fd1\u7684\u8282\u70b9: types = "+f);break}h.put(d,!0);l=e.get8Nodes(d,a,b,t,s,p);w=k.length;q=l.length;c.ArrayUtil.quickSortOn2(l,"f",0,q-1);for(var z=0;z<q;z++)d=l[z],x=d.f,r.containsKey(d.type)&&x<u&&(v=d,
u=x),k.push(l[z]);if(v)break;q=k.length;for(z=w;z<q;z++)if(l=z-1,d=k[z],-1<l)for(;k[l].f<d.f&&!(x=k[l],k[l]=d,k[l+1]=x,l--,0>l););d=k.pop();if(!d)break}return v};e.getNeerNodeByType2=function(d,a,b,f,s,p){void 0===s&&(s=!0);void 0===p&&(p=!1);if(!(b&&b.length&&b[0]&&b[0].length))return c.LogManager.error(e,"\u5730\u56fe\u8282\u70b9\u6570\u636e\u4e3a\u7a7a\u6216\u7a7a\u6570\u7ec4:nodes = "+b),null;for(var l=null,h=d,k=b.length*b[0].length,m=0,n=f.length,q=[],r=0;r<n;r++)q[f[r]]=!0;q[d.type]=!0;d=[];
for(r=0;r<f.length;r++)d[f[r]]=!0;for(var r=Number.POSITIVE_INFINITY,t=null,u=0,n=0,l=null;void 0==d[h.type];){m++;if(m>k){c.LogManager.error(e,"\u5730\u56fe\u8282\u70b9\u6570\u7ec4\u6570\u636e\u6709\u8bef\uff0c\u5df2\u8fbe\u5230\u6700\u5927\u67e5\u627e\u6b21\u6570\uff0c\u65e0\u6cd5\u67e5\u627e\u6700\u8fd1\u7684\u8282\u70b9: types = "+f);break}e.setFlag(h);l=e.get8Nodes(h,a,b,q,s,p);n=l.length;c.ArrayUtil.quickSortOn2(l,"f",0,n-1);for(var v=0;v<n;v++)h=l[v],u=h.f,void 0!=d[h.type]&&u<r&&(t=h,r=u),
e.setUncheckedNode(l[v]);if(t)break;for(v=e._uncheckedLength;v<e._uncheckedIndex;v++)if(n=v-1,h=e._uncheckedMap[v],-1<n)for(;e._uncheckedMap[n].f<h.f&&!(l=e._uncheckedMap[n],e._uncheckedMap[n]=h,e._uncheckedMap[n+1]=l,n--,0>n););h=e.getUncheckedNode();if(!h)break}e._typeMap.clear();e.resetFlag();e.resetUnchecked();return t};e.optimizePath=function(c,a,b,f){void 0===f&&(f=0);if(3>f)return c;var s=e._optimizeNodes1,p=0,l=p=null,h=0,k=null;s.push(c[0]);f--;for(var m=1;m<f;m++)k=c[h],p=c[m],l=c[m+1],
e.isLineNode(k,p,l)||(s.push(p),h=m);s.push(c[f]);p=s.length;if(2<p){var n=e._optimizeNodes2;f=p-1;h=0;n.push(s[0]);var q=p-2,r=!1;a:for(;h<q;){r=!1;for(m=f;m>h;m--)if(k=s[h],l=s[m],e.isCrossNode(k,l,a,b)){r=!0;for(l=m;l<=f;l++)n.push(s[l]);s=n;p=s.length;if(3>=p)break a;else{f=h+1;f>=p&&(f=p-1);n=n!=e._optimizeNodesA?e._optimizeNodesA:e._optimizeNodesB;for(l=n.length=0;l<=f;l++)n.push(s[l]);f=p-1;q=p-2;m=0}}h++;!r&&h<p&&n.push(s[h])}}f=c.length;for(m=0;m<f;m++)c[m]=null;h=0;a=s.length;for(b=0;b<
a;b++)c[h]=s[b],h++;e._optimizeNodes1.length=0;e._optimizeNodes2.length=0;return c};e.isLineNode=function(c,a,b){var e=b.row;if(a.row==e&&c.row==e)return!0;a=a.point2D;var f=b.point2D,p=c.point2D,e=a.x;c=f.x;b=p.x;if(e==c&&b==c)return!0;f=f.y;p=p.y;a=Math.atan2(f-a.y,c-e);c=Math.atan2(f-p,c-b);return a==c?!0:!1};e.isCrossNode=function(c,a,b,f){var s=c.row,p=c.column,l=a.row,h=a.column,k=0;s>l&&(k=s,s=l,l=k);p>h&&(k=p,p=h,h=k);var k=c.point2D,m=k.x,n=k.y,k=a.point2D;a=k.x-m;var k=k.y-n,q=Math.atan2(k,
a),r=null,t=null,u=null,v=Math.tan(q);a=m;k=n;n=m=0;q=Math.abs(q)==Math.PI/2;c=c.size;for(var x=c/2,n=null;s<=l;s++)for(var w=p;w<=h;w++)if(u=b[s][w],n=u.point2D,r=e.getHLineObject(n,c),t=e.getVLineObject(n,x),m=0==v?n.x:(r.y-k)/v+a,n=q?n.y:(t.x-a)*v+k,(m>=r.x1&&m<=r.x2||n>=t.y1&&n<=t.y2)&&-1==f.indexOf(u.type))return!1;return!0};e.getHLineObject=function(c,a){void 0===a&&(a=0);var b=c.x,f=c.y;e._hLineObj.x1=b-a;e._hLineObj.x2=b+a;e._hLineObj.y=f;return e._hLineObj};e.getVLineObject=function(c,a){void 0===
a&&(a=0);var b=c.y;e._vLineObj.x=c.x;e._vLineObj.y1=b-a;e._vLineObj.y2=b+a;return e._vLineObj};e.setFlag=function(c){c.flag||(e._flagMap[e._flagIndex]=c,e._flagIndex++,c.flag=!0,null!=e.callBack&&e.callBack(c,e._flagIndex))};e.resetFlag=function(){for(var c=null,a=0;a<e._flagIndex;a++)c=e._flagMap[a],c.flag=!1,e._flagMap[a]=null;e._flagIndex=0};e.setUncheckedNode=function(c){e._uncheckedMap[e._uncheckedIndex]=c;e._uncheckedIndex++};e.getUncheckedNode=function(){e._uncheckedIndex--;0>e._uncheckedIndex&&
(e._uncheckedIndex=0);e._uncheckedLength=e._uncheckedIndex;var c=e._uncheckedMap[e._uncheckedIndex];e._uncheckedMap[e._uncheckedIndex]=null;return c};e.resetUnchecked=function(){for(var c=0;c<e._uncheckedIndex;c++)e._uncheckedMap[c]=null;e._uncheckedIndex=0;e._uncheckedLength=0};e.callBack=null;e.callBackPath=null;e.callBackPathOptimize=null;e._hLineObj={};e._vLineObj={};e._vector8=Array(16);e._vectorNodes8=[];e._optimizeNodes1=[];e._optimizeNodes2=[];e._optimizeNodesA=[];e._optimizeNodesB=[];e._uncheckedMap=
Array(7E4);e._uncheckedIndex=0;e._uncheckedLength=0;e._flagMap=Array(7E4);e._flagIndex=0;e._typeMap=new c.HashMap;e.Y_CORRECT=Math.cos(-Math.PI/6)*Math.SQRT2;return e}();c.IsoUtil=f;f.prototype.__class__="egret.IsoUtil"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);c.Profiler.getInstance().run();c.SceneManager.getInstance().enterScene(c.SceneType.NORMAL_COPY,1001);var a=c.SceneElementManager.getInstance().getElement(c.ElementEffect);a.setIsCheckResource(!1);a.x=200;a.y=200;a.setMovieName(c.MovieName.EFFECT_01);a.addToScene();c.LogManager.debug(this,a.hashCode)}__extends(d,e);d.prototype.test=function(a){c.SceneElementManager.getInstance().recoverElement(a);a=c.SceneElementManager.getInstance().getElement(c.ElementEffect);
a.setIsCheckResource(!1);a.x=200;a.y=200;a.setMovieName(c.MovieName.EFFECT_01);c.ApplicationManager.getInstance().show(a,c.ApplicationLayerType.UI);a.addToScene();c.LogManager.debug(this,a.hashCode)};return d}(c.ApplicationRunner);c.GameRunner=f;f.prototype.__class__="egret.GameRunner"})(egret||(egret={}));
(function(c){var f=function(){return function(){this.rows=this.columns=this.height=this.width=this.gridSize=this.pieceHeight=this.pieceWidth=this.id=0;this.elements=this.nodeTypes=null}}();c.SceneEditLo=f;f.prototype.__class__="egret.SceneEditLo"})(egret||(egret={}));
(function(c){var f=function(c){function d(){c.call(this);this.sex=1;this.vocation=this.level=0;this.mountsState=this.mountsLevel=this.wingLevel=this.weaponLevel=this.bodyLevel=1}__extends(d,c);return d}(c.SceneDriverVo);c.ScenePlayerVo=f;f.prototype.__class__="egret.ScenePlayerVo"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._percent=0;this._bg=new c.Image(null,49,8,!1);this.addChild(this._bg);this._bar=new c.Image(null,0,0,!1);this.addChild(this._bar)}__extends(d,e);var a=d.prototype;Object.defineProperty(a,"percent",{get:function(){return this._percent},set:function(b){this._percent!=b&&(1<b&&(b=1),0>b&&(b=0),this._percent=b,this.updateDisplayList())},enumerable:!0,configurable:!0});a.setStyle=function(b,a){this._bg.url=b;this._bar.url=a;this.updateDisplayList()};
a.updateDisplayList=function(){this._bar.scaleX=this._percent};return d}(c.DisplayObjectContainer);c.HPProgressBar=f;f.prototype.__class__="egret.HPProgressBar"})(egret||(egret={}));var Main=function(c){function f(){c.call(this);this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(f,c);f.prototype.onAddToStage=function(c){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this);new egret.ApplicationConfig(this,egret.GameRunner)};return f}(egret.DisplayObjectContainer);
Main.prototype.__class__="Main";
(function(c){var f=function(){function e(){}e.init=function(d,a,b,f,s,p){void 0===a&&(a=null);void 0===b&&(b=5);void 0===f&&(f=5);void 0===s&&(s=15);void 0===p&&(p=15);d?(e._stage=d,e._tipContainer=a?a:e._stage,e._gapX=b,e._gapY=f,e._offsetX=s,e._offsetY=p,e._stage.addEventListener(c.TouchEvent.TOUCH_BEGIN,e.stageMouseDown,e)):c.LogManager.error(e,"\u821e\u53f0\u4e0d\u80fd\u4e3a\u7a7a:stage = "+d)};e.stageMouseDown=function(c){c=e._showHashMap.keys();for(var a=c.length,b=0;b<a;b++)e.hideTooltip(c[b])};
e.setTooltip=function(d,a){e._stage?d?a?"string"==typeof a||a instanceof c.DisplayObject?(e._hashMap.containsKey(d)&&e.removeTooltip(d),e._hashMap.put(d,a),d.addEventListener(c.TouchEvent.TOUCH_OVER,e.targetMouseOver,e)):c.LogManager.error(e,"\u65e0\u6548\u7684tooltip\u5bf9\u8c61:tooltip = "+a):e.removeTooltip(d):c.LogManager.error(e,"target\u4e0d\u80fd\u4e3a\u7a7a: target = "+d):c.LogManager.error(e,"\u672a\u521d\u59cb\u5316\u6570\u636e\uff0c\u8bf7\u8c03\u7528init()\u65b9\u6cd5\u521d\u59cb\u5316\u6570\u636e")};
e.removeTooltip=function(d){if(d){e._innerHashMap.remove(d);var a=e._hashMap.remove(d);e.hideTooltip(a);d.removeEventListener(c.TouchEvent.TOUCH_OVER,e.targetMouseOver,e)}else c.LogManager.error(e,"target\u4e0d\u80fd\u4e3a\u7a7a: target = "+d)};e.showTooltip=function(d,a,b){void 0===a&&(a=0);void 0===b&&(b=0);var f=null,s=null,f=null;e._showHashMap.containsKey(d)&&e.hideTooltip(d);if("string"==typeof d){f=e._textField;if(!f||f&&f.stage)f=new c.TextField,f.multiline=!0,f.size=16,e._textField||(e._textField=
f);f.text!=d&&(f.text=d)}else if(d instanceof c.DisplayObject)f=d;else{c.LogManager.error(e,"\u65e0\u6548\u7684tooltip\u5bf9\u8c61:tooltip = "+d);return}if("string"==typeof d){s=e._container;if(!s||s&&s.stage)s=new c.CoreSprite,s.touchChildren=!1,s.touchEnabled=!1,e._container||(e._container=s);f.parent!=s&&s.addChild(f);f.x=e._gapX;f.y=e._gapY;s.width=Math.floor(f.width+2*e._gapX);s.height=Math.floor(f.height+2*e._gapY);e._style?s.graphics.clear():(e.drawRect(s,s.width,s.height,0,0.6,!1),e.drawRectBorder(s,
s.width-1,s.height-1,3355443,1));f=s}e._showHashMap.put(d,f);f.parent!=e._tipContainer&&e._tipContainer.addChild(f);e.updatePosition(f,a,b)};e.hideTooltip=function(d){var a=e._showHashMap.remove(d);a&&(c.DisplayObjectUtil.remove(a),"string"==typeof d&&a!=e._container&&"destroy"in a&&a.destroy())};e.getTooltip=function(c){var a=e._hashMap.get(c);c==a&&"tooltip"in c&&(a=c.tooltip);a&&!e._innerHashMap.containsKey(a)&&e._innerHashMap.put(c,a);return a};e.getCurrentTooltip=function(c){return e._innerHashMap.get(c)};
e.setStyle=function(d){if(d){e._style=d;for(var a in e._showHashMap);}else c.LogManager.error(e,"style\u4e0d\u80fd\u4e3a\u7a7a: style = "+d)};e.targetMouseOver=function(d){if(!d.touchDown){d.stopPropagation();d=d.currentTarget;var a=e.getTooltip(d);a&&(e.showTooltip(a,e._stage.anchorX+e._offsetX,e._stage.anchorY+e._offsetY),d.addEventListener(c.TouchEvent.TOUCH_MOVE,e.targetMouseMove,e),d.addEventListener(c.TouchEvent.TOUCH_OUT,e.targetMouseOut,e),d.addEventListener(c.Event.REMOVED_FROM_STAGE,e.targetRemoveFromeStage,
e))}};e.targetMouseOut=function(c){e.targetRemoveFromeStage(c)};e.targetRemoveFromeStage=function(d){if(d=d.currentTarget){d.removeEventListener(c.TouchEvent.TOUCH_MOVE,e.targetMouseMove,e);d.removeEventListener(c.TouchEvent.TOUCH_OUT,e.targetMouseOut,e);d.removeEventListener(c.Event.REMOVED_FROM_STAGE,e.targetRemoveFromeStage,e);var a=e._hashMap.get(d);d==a&&"tooltip"in d&&(a=e._innerHashMap.remove(d));e.hideTooltip(a)}};e.targetMouseMove=function(c){c=c.currentTarget;var a=e._hashMap.get(c);c==
a&&(a=e._innerHashMap.get(c));if(a)var b=e._showHashMap.get(a);b&&e.updatePosition(b,e._stage.anchorX+e._offsetX,e._stage.anchorY+e._offsetY)};e.updatePosition=function(c,a,b){void 0===b&&(b=0);c.width+a>e._stage.stageWidth&&(a-=2*e._offsetX+c.width);c.height+b>e._stage.stageHeight&&(b-=2*e._offsetY+c.height);a=Math.max(a,0);b=Math.max(b,0);c.x=a;c.y=b};e.drawRect=function(c,a,b,f,s,p){void 0===f&&(f=0);void 0===s&&(s=0);void 0===p&&(p=!1);c.graphics.clear();0!=a&&0!=b&&(p&&e.drawRectBorder(c,a,b,
f,s),c.graphics.beginFill(f,s),c.graphics.drawRect(0,0,a,b),c.graphics.endFill())};e.drawRectBorder=function(c,a,b,e,f,p){void 0===e&&(e=0);void 0===f&&(f=0);void 0===p&&(p=0);0!=a&&0!=b&&(c.graphics.lineStyle(p,e,f),c.graphics.drawRect(0,0,a,b))};e._hashMap=new c.HashMap;e._showHashMap=new c.HashMap;e._innerHashMap=new c.HashMap;e._textField=null;e._container=null;e._stage=null;e._style=null;e._tipContainer=null;e._gapX=5;e._gapY=5;e._offsetX=15;e._offsetY=15;return e}();c.TooltipManager=f;f.prototype.__class__=
"egret.TooltipManager"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.isCheckResource=this.directionSplit=this.isGhost=!0;this._actionMap=null;this._direction=c.ActionMovieClipDirectionType.DOWN;this._actionType=c.ActionType.PREPARE;this._shadow=null;this._isPlayed=!1;this._lastFrameIndex=this._frameIndexMaxManual=this._frameIndexMax=this._frameIndex=this._loop=this._loopCount=0;this._isStart=this._isEnd=!1;this._delay=100;this._shadowHeight=this._shadowWidth=this._frameRate=0;this._ghostTarget=null;this._totalFrames=
1;this._actionPartMap=this._callbackTargetMap=this._callbackMap=this._actionMovieClipData=null;this._hasActionVo=!1;this._totalFramesManual=this._topLineY=0;this._partTypes=this._partsCache=null;this._isClear=!1;this._playCallBack=null;this._actionMap=new c.HashMap;this._callbackMap=new c.HashMap;this._callbackTargetMap=new c.HashMap;this._actionPartMap=new c.HashMap;this._partsCache=[];this._actionMovieClipData=c.ActionMovieClipData.getInstance();this._partItem=new c.ScriptItem;this.touchEnabled=
this.touchChildren=!1}__extends(d,e);var a=d.prototype;Object.defineProperty(a,"totalFramesManual",{get:function(){return this._totalFramesManual},set:function(b){if(this._totalFramesManual!=b){this._totalFramesManual=b;this._frameIndexMaxManual=this._totalFramesManual-1;for(var a in this._actionMap.content)this._actionMap.content[a].totalFramesManual=this._totalFramesManual}},enumerable:!0,configurable:!0});Object.defineProperty(a,"topLineY",{get:function(){var b=this._actionMap.get(c.ActionPartType.BODY);
return this._topLineY=b&&b.baseMovieClipVo?b.baseMovieClipVo.topLineY:-this.height},enumerable:!0,configurable:!0});Object.defineProperty(a,"direction",{get:function(){return this._direction},set:function(b){this._direction!=b&&-1!=b&&(this._direction=b,this.setBaseMovieClipVo(-1,this._direction),this.setLayer())},enumerable:!0,configurable:!0});Object.defineProperty(a,"actionType",{get:function(){return this._actionType},set:function(b){this._actionType!=b&&(this._actionType=b,this.setBaseMovieClipVo(this._actionType))},
enumerable:!0,configurable:!0});Object.defineProperty(a,"totalFrames",{get:function(){return this._totalFrames},enumerable:!0,configurable:!0});Object.defineProperty(a,"delay",{get:function(){return this._delay},enumerable:!0,configurable:!0});Object.defineProperty(a,"frameRate",{get:function(){return this._frameRate},set:function(b){this._frameRate!=b&&(this._frameRate=b,1>this._frameRate&&(this._frameRate=1),this._delay=Math.floor(1E3/this._frameRate),this._isPlayed&&(this.stopMovie(),this.playMovie(this._frameIndex,
this._loopCount)))},enumerable:!0,configurable:!0});Object.defineProperty(a,"isPlayed",{get:function(){return this._isPlayed},enumerable:!0,configurable:!0});Object.defineProperty(a,"frameIndex",{get:function(){return this._frameIndex},set:function(b){this._frameIndex!=b&&(this._frameIndex=b,this._frameIndex>this._frameIndexMax&&(this._frameIndex=this._frameIndexMax),0>this._frameIndex&&(this._frameIndex=0),this.updateFrame())},enumerable:!0,configurable:!0});Object.defineProperty(a,"frameIndexMax",
{get:function(){return this._frameIndexMax},enumerable:!0,configurable:!0});a.play=function(b,a,d,e,f,h,k,m){void 0===b&&(b=-1);void 0===a&&(a=-1);void 0===d&&(d=-1);void 0===e&&(e=0);void 0===f&&(f=null);void 0===h&&(h=null);void 0===k&&(k=null);void 0===m&&(m=null);this._playCallBack=f;this._playCallBackTarget=h;this._startPlayItem||(this._startPlayItem=new c.ScriptItem);this._startPlayItem.execute=k;this._startPlayItem.target=m;this.setBaseMovieClipVo(a,d);this.playMovie(b,e)};a.stop=function(b,
a,c){void 0===b&&(b=-1);void 0===a&&(a=-1);void 0===c&&(c=-1);this.stopMovie();this.setBaseMovieClipVo(a,c);-1!=b&&(this.frameIndex=b)};a.setFrameHandler=function(b,a,d){void 0===a&&(a=null);void 0===d&&(d=null);b?this._frameItem||(this._frameItem=new c.ScriptItem):d=a=null;this._frameItem&&(this._frameItem.execute=b,this._frameItem.target=a,this._frameItem.params=d)};a.setPartTypes=function(b,a,d,e,f){void 0===d&&(d=null);void 0===e&&(e=null);void 0===f&&(f=null);this._partItem.execute=a;this._partItem.target=
d;if(this._partTypes!=b){this._partTypes=b;for(var h in this._actionMap.content){var k=this._actionMap.content[h];k.parent&&k.parent.removeChild(k);this._partsCache.push(k)}this._actionMap.clear();h=b.length;for(var m=0;m<h;m++){var n=b[m];(k=this._partsCache.pop())||(k=new c.ActionMovieClip2);k.totalFramesManual=this._totalFramesManual;this.addChild(k);this._actionMap.put(n,k)}this.setLayer()}b=null;k=!0;h=this._partTypes.length;for(m=0;m<h;m++){n=this._partTypes[m];b=a.apply(d,[n]);var q=c.ActionMovieClipData.getInstance().getActionMovieClipVo(b),
r=null!=q;this.directionSplit&&(r=r&&c.ActionMovieClipData.getInstance().hasDirectionTypeTexture(q,this._actionType,this._direction));r?(this.setActionPart(n,q),k=!1):this.setActionUrl(n,b,e,f)}this.showGhost(k);this.isCheckResource&&!c.TimerManager.getInstance().hasExecute(this._partTimerId)&&(this._partTimerId=c.TimerManager.getInstance().addExecute(this.checkPartResource,this,1E3))};a.checkPartResource=function(b){void 0===b&&(b=-1);-1==b&&(b=this._actionType);var a=null,d=!0,e=this._partTypes.length,
f=0;a:for(;f<e;f++){var a=this._partItem.execute.apply(this._partItem.target,[this._partTypes[f]]),h=this._actionMovieClipData.getActionMovieClipVo(a),k=null!=h;if(this.directionSplit)for(var m=c.ActionMovieClipDirectionType.UP;m<=c.ActionMovieClipDirectionType.DOWN;m++)if(b!=this._actionType||m!=this._direction)if(k=k&&this._actionMovieClipData.hasDirectionTypeTexture(h,b,m),!k){d=!1;c.ActionMovieClipManager.getInstance().loadActionMovieClipVo2(a,null,this,b,m);break a}}d&&(b<c.ActionType.ATTACK?
(b++,this.checkPartResource(b)):c.TimerManager.getInstance().removeExecute(this._partTimerId))};a.setActionPart=function(b,a,d){d=this._actionMap.get(b);d||(d=new c.ActionMovieClip2,d.totalFramesManual=this._totalFramesManual,this.addChild(d),this._actionMap.put(b,d),this.setLayer());d.setActionMovieClipVo(a,this._actionType,this._direction);d.setFrameIndex(this._frameIndex);if(a){this._hasActionVo=!0;var e=a=b=0,f=0,e=d.frameRate,f=d.totalFrames;0<e&&(b=e);0<f&&(a=f);0<b&&(this.frameRate=b);0<a&&
(this._totalFrames=a,this._frameIndexMax=this._totalFrames-1,this._frameIndex>this._frameIndexMax&&(this._frameIndex=0));this.showGhost(!1)}else this._hasActionVo=this.checkActionVo(),this._hasActionVo||(this._totalFrames=d.totalFrames,this._frameIndexMax=this._totalFrames-1,this._delay=0,this.showGhost(!0));this._frameIndex>this._frameIndexMax&&(this._frameIndex=this._frameIndexMax);this._isPlayed||this.play(this._frameIndex,this._actionType,this._direction,this._loopCount,this._playCallBack,this._playCallBackTarget);
this.updateShadow()};a.checkActionVo=function(){for(var b in this._actionMap.content)if(this._actionMap.content[b].actionMovieClipVo)return!0;return!1};a.setActionUrl=function(b,a,d,e){void 0===d&&(d=null);void 0===e&&(e=null);this._isClear=!1;null!=d&&(this._callbackMap.put(a,d),this._callbackTargetMap.put(a,e));this._actionPartMap.put(a,b);b=this._actionMovieClipData.getActionMovieClipVo(a);this.directionSplit?b&&this._actionMovieClipData.hasDirectionTypeTexture(b,this._actionType,this._direction)?
this.loadComplete(a):c.ActionMovieClipManager.getInstance().loadActionMovieClipVo2(a,this.loadComplete,this):b?this.loadComplete(a):c.ActionMovieClipManager.getInstance().loadActionMovieClipVo(a,this.loadComplete,this)};a.loadComplete=function(b){var a=this._actionPartMap.remove(b);if(!this._isClear){var c=this._actionMovieClipData.getActionMovieClipVo(b);(c&&c.actionType==this._actionType||!this._hasActionVo)&&this.setActionPart(a,c);this._isPlayed||this.play(this._frameIndex,this._actionType,this._direction,
this._loopCount,this._playCallBack,this._playCallBackTarget);a=this._callbackMap.remove(b);b=this._callbackTargetMap.remove(b);null!=a&&a.apply(b)}};a.clear=function(b){void 0===b&&(b=!0);this._isClear=!0;this._callbackMap.clear();this._callbackTargetMap.clear();b&&this.stopMovie();for(var a in this._actionMap.content)this._actionMap.content[a].clear()};a.getActionPart=function(b){return this._actionMap.get(b)};a.getActionVo=function(b){return(b=this._actionMap.get(b))?b.actionMovieClipVo:null};a.playMovie=
function(b,a){void 0===b&&(b=-1);void 0===a&&(a=0);this._loopCount=a;this._loop=0;this._isEnd=!1;this._isPlayed?-1!=b&&(this._frameIndex!=b&&(this._frameIndex=b),this._frameIndex>this._frameIndexMax&&(this._frameIndex=0),this.updateFrame()):(this._isStart=!0,-1==b&&(b=this._frameIndex,b>this._frameIndexMax&&(b=0)),this._frameIndex=-1,this.frameIndex=b,this._isStart=!0,this._hasActionVo&&(c.TimerManager.getInstance().hasExecute(this._playId)||(this._playId=c.TimerManager.getInstance().addExecute(this.frameExecute,
this,this._delay)),this._isPlayed=!0))};a.stopMovie=function(){c.TimerManager.getInstance().removeExecute(this._playId);this._isPlayed=!1};a.updateShadow=function(){};a.frameExecute=function(){this._frameItem&&this._frameItem.execute&&this._frameItem.apply();this._lastFrameIndex=this._frameIndex;if(this._isEnd&&(this._isEnd=!1,this._loop++,this._frameIndex=-1,0<this._loopCount&&this._loop>=this._loopCount)){this._frameIndex=this._lastFrameIndex;this.stopMovie();this.updateFrame();null!=this._playCallBack&&
(this._playCallBack.apply(this._playCallBackTarget),this._playCallBack=null);return}0==this._frameIndex&&this._startPlayItem&&this._startPlayItem.execute&&this._startPlayItem.apply();this._frameIndex++;this.updateFrame();this._isStart=!1;var b=this._frameIndexMax;0<this._frameIndexMaxManual&&(b=this._frameIndexMaxManual);this._frameIndex>=b&&(this._isEnd=!0)};a.destroy=function(){this._isDestroy||(this.stopMovie(),e.prototype.destroy.call(this))};a.updateFrame=function(b){for(var a in this._actionMap.content)this._actionMap.content[a].setFrameIndex(this._frameIndex)};
a.showGhost=function(b){this.isGhost?(this._ghostTarget||(this._ghostTarget=new c.Bitmap,this._ghostTarget.cacheAsBitmap=!0,this.addChild(this._ghostTarget),this._ghostTarget.texture=d.ghostBmd,this._ghostTarget.y=-this._ghostTarget.height,this._ghostTarget.x=-this._ghostTarget.width/2),this._ghostTarget.visible!=b&&(this._ghostTarget.visible=b)):this._ghostTarget&&(this._ghostTarget.parent&&this._ghostTarget.parent.removeChild(this._ghostTarget),this._ghostTarget.texture&&this._ghostTarget.texture.dispose(),
this._ghostTarget=null)};a.setBaseMovieClipVo=function(b,a){void 0===b&&(b=-1);void 0===a&&(a=-1);if(-1!=b||-1!=a){-1!=b&&(this._actionType=b);-1!=a&&(this._direction=a,this.setLayer());var c=0,d=0,e=0,f=0,k;for(k in this._actionMap.content){var m=this._actionMap.content[k];m.setBaseMovieClipVo(b,a);m.setFrameIndex(this._frameIndex);e=m.frameRate;f=m.totalFrames;0<e&&(c=e);0<f&&(d=f)}m&&(0<c&&(this.frameRate=c),0<d&&(this._totalFrames=d,this._frameIndexMax=this._totalFrames-1,this._frameIndex>this._frameIndexMax&&
(this._frameIndex=0)),this.updateShadow())}};a.setLayer=function(){if(this._partTypes&&!(2>this._partTypes.length)){var b=null;this._direction==c.ActionMovieClipDirectionType.UP?b=c.ActionPartType.DIRECTION_UP:this._direction==c.ActionMovieClipDirectionType.UP_RIGHT||this._direction==this._actionMovieClipData.getReverseDir(c.ActionMovieClipDirectionType.UP_RIGHT)?b=c.ActionPartType.DIRECTION_UP_RIGHT:this._direction==c.ActionMovieClipDirectionType.RIGHT||this._direction==this._actionMovieClipData.getReverseDir(c.ActionMovieClipDirectionType.RIGHT)?
b=c.ActionPartType.DIRECTION_RIGHT:this._direction==c.ActionMovieClipDirectionType.DOWN_RIGHT||this._direction==this._actionMovieClipData.getReverseDir(c.ActionMovieClipDirectionType.DOWN_RIGHT)?b=c.ActionPartType.DIRECTION_DOWN_RIGHT:this._direction==c.ActionMovieClipDirectionType.DOWN&&(b=c.ActionPartType.DIRECTION_DOWN);b||c.LogManager.debug(this,this._direction);for(var a=b.length,d=this.numChildren-1,e=null,f=0;f<a;f++)if(e=this._actionMap.get(b[f]))this.getChildIndex(e)!=d&&this.setChildIndex(e,
d),d--}};d.ghostStyle=null;d.ghostBmd=null;d.SHADOW_SHAPE=null;return d}(c.CoreSprite);c.Avatar=f;f.prototype.__class__="egret.Avatar"})(egret||(egret={}));
(function(c){var f=function(){function e(){}e.getActionMovieClipVo=function(d,a){if(!d||!a)return c.LogManager.error(e,"getActionMovieClipVo()\u53c2\u6570\u4e0d\u80fd\u4e3a\u7a7a"),null;var b=new c.ActionMovieClipVo;b.defaultActionType=d.defaultActionType;b.defautlDirectionType=d.defautlDirectionType;for(var f in d.baseMovieClipVos)if(d.baseMovieClipVos[f]){b.baseMovieClipVos[f]=[];for(var s in d.baseMovieClipVos[f]){var p=d.baseMovieClipVos[f][s];if(p){var l=new c.BaseMovieClipVo;b.baseMovieClipVos[f][s]=
l;l.frameRate=p.frameRate;l.topLineY=p.topLineY;l.centerPoint.x=p.centerPoint.x;l.centerPoint.y=p.centerPoint.y;l.shadowWidth=p.shadowWidth;l.shadowHeight=p.shadowHeight;l.dataItems=[];for(var h in p.dataItems){var k=p.dataItems[h],m=new c.BaseMovieClipDataItem;m.x=k.x;m.y=k.y;if(k=a.getTexture(f+"_"+s+"_"+h))m.bitmapData=k;l.dataItems.push(m)}m.bitmapData&&(l.hasFrameTexture=!0)}else b.baseMovieClipVos[f][s]=null}}else b.baseMovieClipVos[f]=null;return b};e.getActionMovieClipVo2=function(d,a){if(!d||
!a)return c.LogManager.error(e,"getActionMovieClipVo()\u53c2\u6570\u4e0d\u80fd\u4e3a\u7a7a"),null;for(var b in d.baseMovieClipVos)for(var f in d.baseMovieClipVos[b]){var s=d.baseMovieClipVos[b][f];if(s){for(var p in s.dataItems){var l=s.dataItems[p];if(l){var h=a.getTexture(b+"_"+f+"_"+p);h&&(l.bitmapData=h)}}l.bitmapData&&(s.hasFrameTexture=!0)}}return d};return e}();c.ActionMovieClipUtil=f;f.prototype.__class__="egret.ActionMovieClipUtil"})(egret||(egret={}));
(function(c){var f=function(){function c(){this.y=this.x=0;this.ty=this.tx=NaN}c.prototype.toString=function(){return"[PassingPoint(x = "+this.x+", y = "+this.y+", tx = "+this.tx+", ty = "+this.ty+")]"};return c}();c.PassingPoint=f;f.prototype.__class__="egret.PassingPoint"})(egret||(egret={}));
(function(c){var f=function(e){function d(b,a,d,f,l,h,k){void 0===b&&(b=1E3);void 0===a&&(a=1E3);void 0===d&&(d=20);void 0===f&&(f=200);void 0===l&&(l=160);void 0===h&&(h=0);void 0===k&&(k=0);e.call(this,b,a,d,f,l,h,k);this.pathTypes=null;this.isMulitiClick=!0;this._colorHashMap=this._viewNodes=this._pathNodes=this._mapNodes=null;this._mapNodes=[];this._pathNodes=[];this._viewNodes=[];this.pathTypes=[];this._clickPoint=new c.Point}__extends(d,e);var a=d.prototype;Object.defineProperty(a,"pathNodes",
{get:function(){return this._pathNodes},set:function(b){this._pathNodes=b},enumerable:!0,configurable:!0});Object.defineProperty(a,"mapNodes",{get:function(){return this._mapNodes},enumerable:!0,configurable:!0});a.setMapNodes=function(b){if(b&&b[0]){for(var a=b.length,d=b[0].length,e=null,f=null,h=null;this._mapNodes.length<a;)this._mapNodes.push([]);for(var k=0;k<a;k++){for(f=this._mapNodes[k];f.length<d;)f.push(new c.MapNode);for(var m=0;m<d;m++)e=f[m],e.point2D||(h=this.getIsoPoint(k,m),e.row=
k,e.column=m,e.point2D=h,e.point3D=c.IsoUtil.getPoint3D(e.point2D),e.depth=c.IsoUtil.getDepth(e.point3D)),e.type=b[k][m],e.size=this._isoSize,this.setTile(e)}this.initMap()}};a.setTileTypeColor=function(b,a){void 0===a&&(a=0);this._colorHashMap||(this._colorHashMap=new c.HashMap);this._colorHashMap.put(b,a)};a.getMapNode=function(b,a){return-1<b&&b<this._mapNodes.length&&-1<a&&a<this._mapNodes[b].length?this._mapNodes[b][a]:null};a.getNeerNode=function(b,a,d){if(0==this._mapNodes.length)return e.prototype.getNeerNode.call(this,
b,a,d);var f=Number.POSITIVE_INFINITY,l=0,h=l=0,k=a.length,m=d.length,n=0,q=0,r=NaN,t=NaN,h=l=NaN,l=b.x/2,h=b.y;this._targetPoint3D.x=h+l;this._targetPoint3D.z=h-l;for(b=0;b<k;b++)if(n=a[b],!(0>n))for(var u=0;u<m;u++)if(q=d[u],!(0>q)&&(l=n%2,h=q%2,0==l&&0==h||1==l&&1==h))this._nodePoint.x=q*this._isoSize,this._nodePoint.y=n*this._halfSize,l=this._nodePoint.x/2,h=this._nodePoint.y,this._neerPoint3D.x=h+l,this._neerPoint3D.z=h-l,l=c.DimensionUtil.distance3D(this._targetPoint3D,this._neerPoint3D),l<
f&&(f=l,r=this._nodePoint.x,t=this._nodePoint.y);a=Math.round(t/this._halfSize);return this._mapNodes[a][r/this._isoSize2|0]};a.canCross=function(b,a){var c=this.getMapNode(b,a);return-1!=this.pathTypes.indexOf(c.type)};a.initMap=function(){e.prototype.initMap.call(this)};a.destroy=function(){this._isDestroy||e.prototype.destroy.call(this)};a.setTile=function(b){this._colorHashMap&&this.setTileColor(b.row,b.column,this._colorHashMap.get(b.type))};a.addListeners=function(){e.prototype.addListeners.call(this);
this._mapTileContainer.addEventListener(c.TouchEvent.TOUCH_TAP,this.mapTileContainerClick,this)};a.mapTileContainerClick=function(b){void 0===b&&(b=null);this._clickPoint.x=b.stageX;this._clickPoint.y=b.stageY;this.checkStartMove();this.dispatchEvent(new c.IsoMapEvent(c.IsoMapEvent.ISO_MAP_TILE_CLICK,!1,!1))};a.checkStartMove=function(b){void 0===b&&(b=!1);if(!this._isMapMoved){this._mapTileContainer.globalToLocal(this._clickPoint.x,this._clickPoint.y,this._clickPoint);var a=this._clickPoint.x,d=
this._clickPoint.y;if(b&&0<this._mapNodes.length&&(b=this.getIsoNode(a,d),b=this.getMapNode(b.row,b.column),!b||-1==this.pathTypes.indexOf(b.type)))return;this._currentMapX=a;this._currentMapY=d;this.dispatchEvent(new c.IsoMapEvent(c.IsoMapEvent.ISO_MAP_MOVING_START,!1,!1))}};a.mapContainerEnterFrame=function(b){e.prototype.mapContainerEnterFrame.call(this,b);this.isMulitiClick&&!this._isMapMoved&&300<c.TimeRecordManager.getInstance().getRelativeTime("checkStartMove")&&(c.TimeRecordManager.getInstance().resetRelativeTime("checkStartMove"),
this.checkStartMove(!0))};a.drawCurrentPath=function(){if(this._isShowPath){var b=null;this._pathPolicy==c.PathPolicyType.VIEW?b=this.viewRect:this._pathPolicy==c.PathPolicyType.RENDER&&(b=this.renderRect);b=this.getViewNodes(0,this._pathNodes,b);this.drawPath(b)}else this._pathShape.graphics.clear()};a.getViewNodes=function(b,a,c){this._viewNodes.length=0;for(var d=a.length,e=null;b<d&&(e=a[b],this._viewNodes.push(e),!c||c.containsPoint(e.point2D));b++);return this._viewNodes};return d}(c.IsoMapDriver);
c.IsoMap=f;f.prototype.__class__="egret.IsoMap"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.CONSTANT_VELOCITY="constantVelocity";c.FACTOR="factor";return c}();c.MapMoveType=f;f.prototype.__class__="egret.MapMoveType"})(egret||(egret={}));
(function(c){var f=function(){function e(){}var d=e.prototype;e.getInstance=function(){return e._instance||(e._instance=new e)};d.loadMapData=function(a,b,d,e){void 0===d&&(d=null);void 0===e&&(e=null);RES.getResByUrl(a,function(a,f){var h=new c.SceneEditLo;c.ObjectUtil.copyProperties(a,h);c.IsoMapData.getInstance().setData(b,h);d&&d.apply(e)},null)};e._instance=null;return e}();c.ResoureManager=f;f.prototype.__class__="egret.ResoureManager"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this,c.ApplicationLayerType.UI)}__extends(d,e);var a=d.prototype;a.initWindow=function(){var b=["\u653b\u6253\u4e0b\u4e2a\u526f\u672c","\u653b\u6253Boss","\u589e\u52a0\u6cd5\u5e08","\u589e\u52a0\u5f13\u7bad\u624b"],a;for(a in b){var d=new c.TextField;d.y=30+50*a;d.name=a;d.text=b[a];d.touchEnabled=!0;d.cacheAsBitmap=!0;this.addChild(d)}this.align=c.AlignType.TOP_RIGHT;this.recall()};a.touchTapHandler=function(b){b=Number(b.target.name);switch(b){case 0:c.globalUpdateWindows([c.UpdateType.CHANGE_COPY]);
break;case 1:c.dataManager().sceneData.sceneType=c.SceneType.BOSS_COPY;c.globalUpdateWindows([c.UpdateType.CHANGE_COPY]);break;case 2:case 3:3>c.RoleManager.getInstance().roles.length&&c.RoleManager.getInstance().addRole(b)}};a.recall=function(){e.prototype.recall.call(this)};a.addEvents=function(){e.prototype.addEvents.call(this);this.addEventListener(c.TouchEvent.TOUCH_TAP,this.touchTapHandler,this)};a.globalUpdate=function(b){for(var a=1;a<arguments.length;a++);};a.update=function(){for(var b=
0;b<arguments.length;b++);};a.remove=function(){e.prototype.remove.call(this)};a.destroy=function(){this._isDestroy||e.prototype.destroy.call(this)};return d}(c.Window);c.ButtonWindow=f;f.prototype.__class__="egret.ButtonWindow"})(egret||(egret={}));
(function(c){var f=function(c){function d(a,b,d){void 0===b&&(b=!1);void 0===d&&(d=!1);c.call(this,a,b,d)}__extends(d,c);d.SCENE_ELEMENT_MOVING="sceneElementMoving";d.SCENE_ELEMENT_MOVING_END="sceneElementMovingEnd";d.SCENE_ELEMENT_PATH_CHANGED="sceneElementPathChanged";return d}(c.Event);c.SceneElementEvent=f;f.prototype.__class__="egret.SceneElementEvent"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.NONE=1;c.MOUNTED=2;c.FLYED=3;return c}();c.MountedType=f;f.prototype.__class__="egret.MountedType"})(egret||(egret={}));(function(c){var f=function(){function c(){}c.OBSTACLE=-1;c.WALKABLE=0;c.TRANSPARENT=1;c.FLYING=2;c.SWIMMING=3;c.HILLSIDE=4;return c}();c.PathType=f;f.prototype.__class__="egret.PathType"})(egret||(egret={}));
(function(c){var f=function(){function c(){}c.LAYER_MOUSE_CONFIGS=[{touchEanbled:!1,touchChildren:!1},{touchEanbled:!1,touchChildren:!1},{touchEanbled:!1,touchChildren:!1},{touchEanbled:!1,touchChildren:!1},{touchEanbled:!1,touchChildren:!1}];c.BUFF_ABOVE=4;c.BUFF_BODY=3;c.ACTION=2;c.BUFF_BACKGROUND=1;c.BOTTOM=0;return c}();c.SceneElementLayerType=f;f.prototype.__class__="egret.SceneElementLayerType"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this.extension=c.ExtensionType.JPG;this.rootPath="";this.MINI_MAP_NAME="miniMap";this._subPath=null;this._pieceHeight=this._pieceWidth=this._mapHeight=this._mapWidth=0;this._pieceRect=this._viewRectPoint=this._viewRect=this._renderRect=null;this._endColumn=this._endRow=this._startColumn=this._startRow=this._totalColumns=this._totalRows=0;this._miniBmd=this._miniBitmap=this._miniImage=this._rcHashMap=this._queueLoader=this._pieceUrls=this._piecesAdded=
this._pieces=null;this._pieceCountTotal=this._pieceCount=0;this._miniPoint=null;this._miniScaleY=this._miniScaleX=1;this._miniRect=null;this.touchChildren=this.touchEnabled=!1;this._miniImage=new c.Image(null,0,0,!1,this,this.loadMiniComplete);this._miniBitmap=new c.Bitmap;this.addChild(this._miniBitmap);this._renderRect=new c.Rectangle;this._pieceRect=new c.Rectangle;this._miniRect=new c.Rectangle;this._viewRectPoint=new c.Point;this._pieces=[];this._piecesAdded=[];this._pieceUrls=[];this._mapIds=
[];this._rcHashMap=new c.HashMap;this._mapCache=new c.HashMap;this._miniPoint=new c.Point;this._queueLoader=new c.QueueLoader(1,this,this.loadComplete,this.loadError,this.loadProgress,this.loadAbort)}__extends(d,e);var a=d.prototype;Object.defineProperty(a,"mapHeight",{get:function(){return this._mapHeight},enumerable:!0,configurable:!0});Object.defineProperty(a,"mapWidth",{get:function(){return this._mapWidth},enumerable:!0,configurable:!0});Object.defineProperty(a,"renderRect",{get:function(){return this._renderRect},
set:function(b){if(!b)this._renderRect.setEmpty(),this.updateRender();else if(this._renderRect.x!=b.x||this._renderRect.y!=b.y||this._renderRect.width!=b.width||this._renderRect.height!=b.height)this._renderRect.x=b.x,this._renderRect.y=b.y,this._renderRect.width=b.width,this._renderRect.height=b.height,this._miniBitmap.x=this._renderRect.x,this._miniBitmap.y=this._renderRect.y,this.updateRender()},enumerable:!0,configurable:!0});a.setProperty=function(b,a,d,e){void 0===b&&(b=0);void 0===a&&(a=0);
void 0===d&&(d=0);void 0===e&&(e=0);var f=["_mapWidth","_mapHeight","_pieceWidth","_pieceHeight"],h;for(h in arguments)0<arguments[h]&&(this[f[h]]=arguments[h]);for(h in f)if(0>=this[f[h]]){c.LogManager.error(this,"\u53c2\u6570\u5e94\u5927\u4e8e0:"+f[h]+" = "+this[f[h]]);return}this._totalRows=Math.ceil(this._mapHeight/this._pieceHeight);this._totalColumns=Math.ceil(this._mapWidth/this._pieceWidth);this._pieceCountTotal=this._totalRows*this._totalColumns;f={resources:[]};for(h=0;h<this._totalRows;h++){this._pieces[h]?
this._pieces[h].length=0:this._pieces[h]=[];this._pieceUrls[h]?this._pieceUrls[h].length=0:this._pieceUrls[h]=[];for(var k=0;k<this._totalColumns;k++)this._pieceUrls[h][k]=this.rootPath+this._subPath+"/"+h+"_"+k+this.extension,f.resources.push({name:this._pieceUrls[h][k],type:RES.ResourceItem.TYPE_IMAGE,url:this._pieceUrls[h][k]})}RES.parseConfig(f)};a.initData=function(b){this._pieceCount=0;this._subPath=b.id+"";this.setProperty(b.width,b.height,b.pieceWidth,b.pieceHeight);this._miniImage.width=
0;this._miniImage.height=0};a.renderMap=function(b,a){this._viewRect=b;this.renderRect=a};a.clearMap=function(){this._queueLoader.clear();this._rcHashMap.clear();3<this._mapCache.size()&&this.removeCache(this._mapIds.shift());this._miniImage.content&&(this._miniImage.content.texture&&this._miniImage.content.texture.dispose(),this._miniImage.content=null);this._miniBitmap&&(this._miniBitmap.texture=null);this._miniBmd&&(this._miniBmd.dispose(),this._miniBmd=null);this.renderRect=null};a.destroy=function(){this._isDestroy||
e.prototype.destroy.call(this)};a.updateRender=function(){var b=this._renderRect.x,a=this._renderRect.y,c=a+this._renderRect.height,d=b+this._renderRect.width;this._startRow=a/this._pieceHeight|0;this._startColumn=b/this._pieceWidth|0;this._endRow=Math.ceil(c/this._pieceHeight);this._endColumn=Math.ceil(d/this._pieceWidth);this.addPieces(this._startRow,this._endRow,this._startColumn,this._endColumn);b=null;a=this._piecesAdded.length;for(c=0;c<a;c++)b=this._piecesAdded[c],this._pieceRect.x=b.x,this._pieceRect.y=
b.y,this._pieceRect.width=b.width,this._pieceRect.height=b.height,this._renderRect.intersects(this._pieceRect)||(b.parent&&b.parent.removeChild(b),this._piecesAdded.splice(c,1),a=this._piecesAdded.length,c--);this.drawBlurryArea()};a.addPieces=function(b,a,c,d){void 0===d&&(d=0);0>b&&(b=0);0>c&&(c=0);a>this._totalRows&&(a=this._totalRows);d>this._totalColumns&&(d=this._totalColumns);for(var e=[],f=null,f=null;b<a;b++)for(var k=c;k<d;k++)(f=this._pieces[b][k])||(f=this.getCache(this._subPath,this._pieceUrls[b][k])),
f?f.parent||(this.addChild(f),this._piecesAdded.push(f)):(f=this._pieceUrls[b][k],this._rcHashMap.containsKey(f)||(this._rcHashMap.put(f,[b,k]),e.push({url:f,i:b,j:k})));a=e.length;if(0<a){this._viewRect&&(this._viewRectPoint.x=this._viewRect.x+this._viewRect.width/2,this._viewRectPoint.y=this._viewRect.y+this._viewRect.height/2,e.sort.apply(this,[this.sortPiece]));c=[];for(b=0;b<a;b++)c.push(e[b].url);this._queueLoader.addUrls(c)}};a.sortPiece=function(a,d){var e=new c.Point((a.j+0.5)*this._pieceWidth,
(a.i+0.5)*this._pieceHeight),f=new c.Point((d.j+0.5)*this._pieceWidth,(d.i+0.5)*this._pieceHeight),e=c.Point.distance(e,this._viewRectPoint),f=c.Point.distance(f,this._viewRectPoint);return e<=f?-1:1};Object.defineProperty(a,"isLoadAll",{get:function(){return this._pieceCount>=this._pieceCountTotal},enumerable:!0,configurable:!0});a.drawBlurryArea=function(){this.isLoadAll&&this._miniBmd&&(this._miniBitmap.texture=null,this._miniBmd.dispose(),this._miniBmd=null)};a.loadComplete=function(a,c,d){var e=
this._rcHashMap.get(a);e&&(c=e[0],e=e[1],this._pieces[c][e]=d,d.x=e*this._pieceWidth,d.y=c*this._pieceHeight,this.addChild(d),this._piecesAdded.push(d),this._pieceCount++,this.addCache(this._subPath,a,d))};a.loadError=function(a){};a.loadProgress=function(a){};a.loadAbort=function(a,c){this._rcHashMap.remove(a)};a.loadMiniComplete=function(a){};a.addCache=function(a,d,e){var f=this._mapCache.get(a);f||(f=new c.HashMap,this._mapCache.put(a,f),this._mapIds.push(a));f.put(d,e)};a.getCache=function(a,
c){var d=this._mapCache.get(a);return d?d.get(c):null};a.removeCache=function(a){var c=this._mapCache.remove(a);if(c){a=this._mapIds.indexOf(a);-1<a&&this._mapIds.splice(a,1);for(var d in c.content)RES.destroyRes(c.get(d))}};return d}(c.CoreSprite);c.PieceMap2=f;f.prototype.__class__="egret.PieceMap2"})(egret||(egret={}));
(function(c){var f=function(e){function d(){e.call(this);this._layerHashMap=this._nameText=null;this._gapY=this._gapX=5;this._nameValue=null;this._defaultColor=16777215;this._defaultSize=20;this.touchEnabled=this.touchChildren=!1;this._layerHashMap=new c.HashMap;this._nameText=new c.TextField;this.show(this._nameText,this.layersCount);this.setName("Name");this.setNameTextFormat(this._defaultSize,this._defaultColor)}__extends(d,e);var a=d.prototype;Object.defineProperty(a,"nameText",{get:function(){return this._nameText},
enumerable:!0,configurable:!0});a.getLayerContainer=function(a){void 0===a&&(a=0);var d=this._layerHashMap.get(a);if(!d){d=new c.DisplayObjectContainer;d.cacheAsBitmap=!0;this.addChild(d);this._layerHashMap.put(a,d);a=this._layerHashMap.keys();a.sort(c.ArrayUtil.numeric);for(var e=a.length,f=0;f<e;f++)this.setChildIndex(this._layerHashMap.get(a[f]),f);this.updateLayout()}return d};a.setName=function(a){a!=this._nameValue&&(this._nameValue=a,this._nameText.text=this._nameValue,this.updateLayout())};
a.setNameTextFormat=function(a,c){void 0===a&&(a=20);void 0===c&&(c=16777215);this._nameText.text=this._nameValue;this._nameText.size=a;this._nameText.textColor=c;this.updateLayout()};Object.defineProperty(a,"layersCount",{get:function(){return this.numChildren},enumerable:!0,configurable:!0});a.show=function(a,c,d,e,f){void 0===d&&(d=-1);void 0===e&&(e=NaN);void 0===f&&(f=NaN);c=this.getLayerContainer(c);isNaN(e)||(a.x=e);isNaN(f)||(a.y=f);-1==d&&(d=c.numChildren-1,0>d&&(d=0));a.parent!=c&&c.addChildAt(a,
d);this.updateLayout()};a.hide=function(a){a&&a.parent&&(a.parent.removeChild(a),this.updateLayout())};a.updateLayout=function(){for(var a=this.numChildren,c=0,d=0,e=null,f=null,h=0,k=0;k<a;k++){d=0;e=this.getChildAt(k);0==k?c-=e.height/2:(c-=e.height,c-=this._gapY);for(var h=e.numChildren,m=0;m<h;m++)f=e.getChildAt(m),f.x=d,f.y=-f.height/2,d+=f.width+this._gapX;e.y=c;e.x=-e.width/2}};return d}(c.CoreSprite);c.SceneElementNamePad=f;f.prototype.__class__="egret.SceneElementNamePad"})(egret||(egret=
{}));
(function(c){var f=function(e){function d(){e.call(this);this._hpText=new c.TextField;this._hpText.width=100;this._hpText.height=16;this._hpText.size=16;this._hpText.textAlign=c.HorizontalAlign.CENTER;this.addChild(this._hpText);this._progressBar=new c.HPProgressBar;this._progressBar.x=(this._hpText.width-this._progressBar.width)/2;this._progressBar.y=this._hpText.height;this._progressBar.setStyle(c.dataManager().pathData.getResourceUrl(c.PathData.PATH_IMAGES_SCENE,"hp_green_bg.png"),c.dataManager().pathData.getResourceUrl(c.PathData.PATH_IMAGES_SCENE,"hp_green.png"));
this.addChild(this._progressBar)}__extends(d,e);d.prototype.setProperty=function(a,b){a?(this._hpText.parent||this.addChild(this._hpText),this._hpText.text=a):this._hpText.parent&&this._hpText.parent.removeChild(this._hpText);this._progressBar.percent=b};return d}(c.CoreSprite);c.HPBar=f;f.prototype.__class__="egret.HPBar"})(egret||(egret={}));
