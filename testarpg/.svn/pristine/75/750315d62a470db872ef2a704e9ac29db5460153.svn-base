var egret;
(function (egret) {
    var Role = (function (_super) {
        __extends(Role, _super);
        /**
         * 构造函数
         */
        function Role() {
            _super.call(this);
            //当前场景
            this._scene = null;
            this.touchEnabled = false;
            this.touchChildren = false;
            this.isRole = true;
            this.updatePlayerVo();
        }
        var __egretProto__ = Role.prototype;
        Role.getInstance = function () {
            return Role._instance || (Role._instance = new Role());
        };
        //
        /**
         * 更新主角数据
         *
         */
        __egretProto__.updatePlayerVo = function () {
            var vo = egret.dataManager().userData.userInfoVo;
            var playerVo = (this._data.vo);
            if (!playerVo)
                playerVo = new egret.ScenePlayerVo();
            playerVo.id = vo.id;
            playerVo.idString = vo.id + "";
            playerVo.name = vo.nickname;
            playerVo.sex = vo.sex;
            playerVo.vocation = vo.vocation;
            //playerVo.camp = vo.camp;
            playerVo.identityId = 1; //dataManager().roleInfoData.useItem.roleInfoVo.identityId;
            playerVo.x = this.x;
            playerVo.y = this.y;
            if (!this._data.vo)
                this.setData(playerVo);
        };
        //
        __egretProto__.updateAvatar = function (vo, lo) {
            if (vo === void 0) { vo = null; }
            if (lo === void 0) { lo = null; }
            this.updatePlayerVo();
            _super.prototype.updateAvatar.call(this, vo, lo);
        };
        //
        /**
         * 设置主角坐标数据
         * @param x:int x坐标
         * @param y:int y坐标
         *
         */
        __egretProto__.setRoleXY = function (x, y) {
            if (y === void 0) { y = 0; }
            this.data.vo.x = x;
            this.data.vo.y = y;
            this.x = x;
            this.y = y;
        };
        //
        /**
         * 主角移动至坐标
         * @param x:Number
         * @param y:Number
         *
         */
        __egretProto__.moveTo = function (x, y, isCheckPart) {
            if (isCheckPart === void 0) { isCheckPart = true; }
            if (!this._scene)
                return;
            _super.prototype.moveTo.call(this, x, y, isCheckPart);
        };
        //
        /**
         * 显示主角
         * @param scene:SceneDriver 场景
         * @param x:Number x 坐标
         * @param y:Number y 坐标
         *
         */
        __egretProto__.showPlayer = function (scene, x, y, scaleX, scaleY) {
            if (scaleX === void 0) { scaleX = 1; }
            if (scaleY === void 0) { scaleY = 1; }
            if (scene && this._scene == scene) {
                this.setXY(x, y);
            }
            else {
                this._scene = scene;
                this._scene.addElement(this, egret.SceneLayerType.BIOLOGY, x, y);
            }
            this.touchEnabled = false;
            this.touchChildren = false;
            this.stopMove();
            this.play(-1, egret.ActionType.PREPARE, egret.ActionMovieClipDirectionType.UP);
            //TimerManager.getInstance().addExecute(this.checkScale,500,[scaleX,scaleY],1);
            //			Pet.getInstance().showPet(_scene,x,y);
        };
        __egretProto__.checkScale = function (scaleX, scaleY) {
            if (scaleX === void 0) { scaleX = 1; }
            if (scaleY === void 0) { scaleY = 1; }
            //if(this.scaleX != scaleX || this.scaleY != scaleY){
            //	TweenLite.to(this,0.3,{scaleX:scaleX,scaleY:scaleY});
            //}
        };
        //
        /**
         * 移除主角
         *
         */
        __egretProto__.hidePlayer = function () {
            if (this._scene) {
                this.showSiegeIcon(false);
                this.stopMove();
                this._scene.removeElement(this, false);
                this._scene = null;
            }
        };
        //
        /**
         * 场景切换
         *
         */
        __egretProto__.changeScene = function (scene) {
            if (scene != this._scene)
                return;
            this.clearFollowPoints();
            this.stopMove();
        };
        Role._instance = null;
        return Role;
    })(egret.ElementPlayer);
    egret.Role = Role;
    Role.prototype.__class__ = "egret.Role";
})(egret || (egret = {}));
//# sourceMappingURL=Role.js.map